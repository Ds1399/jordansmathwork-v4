<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link
rel="icon"
href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAQAAABecRxxAAAAAXNSR0IArs4c6QAAJ4FJREFUeNrtnXvAV1O+xr9ujRwnc5QodXLpIqoJQ2pUbkNINaE0yiCllNt0QcQritR0RUk3NCK5vB0ioiKFkVSkJE1vqEyuvRma9Jw/citvvb/Ls/Zea+/n+/lvzvHu/f2u9Tz91trrYhZalLP61sK6WX8ba4U215bYattgxbbZthqEiICtttmKbYOttiU21wptrPW3btbC6ls5UzgRfVPrbqNtjq1V9xNes9bm2Gjrbk1lBvlHPetiE22pupUIkqU20bpYPQk526huXWyKrVcXEolgvU2xLlZdwi49GttAW6wuIxLJYhtojSXykqOJDbcidRKReIpsuDWR4H+OGlZgy9QxRKpYZgVWQ+JvY9PVGURqmW5t0ir98tbHVqkLiNSzyvpY+XSJv6aNsC1qeiF+YIuNsJrpEH9dG68GF6IExlvdZIu/lo1TMwuxC8ZZrWSKv4INVfMKkQFDrULS5N/LNqphhciQjdYrOeJvqbV9QuSwbrBl+OKvYpPUlELkyCSrErL8u1qxGlGIPCi2rmGK/3CbpuYTgsA0Ozw0+Xe0TWo4IUhsso7hiL+sTVCTCUFmgpUNY0e/TvARwgVL/T9NoLuaSQiHdPdZ/qPUQEI4ZpSf4q9kM9U4QkTATKvkm/wb2Eo1jBARsdIa+CT/VvatGkWICPnWWvki/8vUHELEwGU+yL+HGkKImOgRt/z7qhGEiJG+ccq/nxpAiJjpJ/kLIQvQj38hNBDQ1J8Qmg7Uhz8h9FHQzbIfFVsI/4hkaVADrfoTwku+db9AuJLW/AvhLStdbxPSjj8hfGam9vsLkWacnReg036ECAEnpwY1VmGFCAT62YFlddSnEMGwlH2CsA76FiIkJnCv+VBBhQgL2lUih+uWHyGCYxPrQjHd8SdEiEzj3PCrQgoRJnnfLFxFF3wLESzFViU/A5ikIgoRMJPykX9LFVCIwGmZuwEsVvmECJzFucq/l4onRALolYv8K9hGlU6IBLDRKmRvAENVOCESwtBs5V9LRRMiQdTKzgDGqWRCJIhx2ci/rgomRMKom7kBjFe5hEgY4zOVf00VS4gEUjMzAxihUgmRQEZkIv/ytkWlEiKBbLHypRtAHxVKiITSp3QDWKUyCZFQVpUm/zYqkhAJps2uDWC6SiREgpm+K/nXUIGESDg1dm4ABSqPEAmnYOcGsEzlESLhLNuZ/JuoOEKkgCYlG8BwlUaIFDC8ZAMoUmmESAFFuv5biDRTwvXhA1UWIVLCQB0BLkR6+dVR4dVVFCFSRPXtDaCLSiJEiuiyvQFMUUmESBFTtjeA9SqJECli/S/lX08FESJl1NMMgBCaBTCziSqHEClj4s8GsFTlECJlLP1R/uVUDCFSSLltBtBUpRAihTTdZgDdVQohUkj3bQYwWqUQIoWM3mYAc1QKIVLInG0GsFalECKFrNU3ACFS/h2gvsogREqpb9ZCZRAipbQw66YyCJFSupn1VxmESCn9zcaqDEKklLFmhSqDECml0GyuyiBESplrtkRlECKlLDFbrTIIkVJWm21QGYRIKRvMilUGIVJKsdlmlUGIlLLZbKvKIERK2WoqghApRiUQQgYghJABCCFkAEIIGYAQQgYghJABCCFkAEIIGYAQQgYghJABCCFkAEIIGYAQQgYghJABCCFkAJFREQ3RHgUYiJEYh8koxPOYi7ewDEX4FzYB2IR/oQjL8Bbm4nkUYjLGYSQGogDt0RAV1SmEDCAkDsGp6IyBmIqF+Br5x9dYiKkYiM44FYeoiwgZgH/shSa4HoVYji1wG1uwHE+hFxpiL3UXIQOIl2q4ACMwH98j+tiCOeiPVqiibpNg/hvVUB+n4Dx0wnXoiYtwBo5GZewpA4iT49ANE7EUfsQijMHlOFZySQi/RWN0w32Yh+JdtPoGLMUs3IFWqCYDiI7TMQzvw894H8NwugQULDXQFU9gdQ4tvwqTcR3OwEEyAHecjEF4F/7HuxiEkyWnoP7F/xNGYAml9cfhRBkAmxMxAIsQVizCgLC7Qko4DaPwKbntH8EZMgAOJ6Af3kS48Sb64QTJzFMux9POWn4qyssA8qMDZiAZMQMdJDfvqIM1Tlv9NdSRAeTGgegZ3E/+0ocEPXGgZOcRPZ23+RqcJgPIlnoYhHVIZqzDINST9LxgT8yMpM0bygCy+cT3IJIfD+pToQc0j6i1p8gA0jbi16xACNwdWVufLwMojfMxD+mLeWF1jYQt+SmKsJ1lALugIaYgvTEltDFiQugeaSu3kQGUTBUMgWKIthNFTrTDzcdlACVxrePvsOHEGlwrUUbIHyNv4foyAI36NSPgC8Mib90BMgCN+jUj4AdV8XHkLbsSZWUA2+gtne8yekuijukcS7v+RQZgqIrJUnipMRlVJVOHzIylVafLAFpgmdSdUSxDCwnVEY1ja9WG6TaAW6TrrKJAYnXCyNhadGh6DaAWCqXorKMQtSRYMhVj3Gj2CfZPpwFcEOGyy2RFES6QaKl0jbU9u6TRAAZKx3nFQMmWyKxY23JW2gxgHzwuBROGAvtJuhSaxN6Wp6TJAMrjWamXEnP1YTDQFYA7xuj0GEBVvCLlEj8M1pGA82RfD+aivsDB6TCAmjldr+Aq1mImHscEDEM/9EAntEUzNMJRqIpyMJRDVRyFRmiGtuiEHuiHYZiAxzEzhiWjO49/oZFEnBd/8aIdr02DAdT3otTrMAN3oHVeP58rozkKMM0TKzhTMs4DPz5Fv5Z8A2gUu+wHoQOOIJemOs7D7Xg6ZitoKyHnSF1vfsudlWwDODu2wr6AqyM5c7cersT02LLsLDHnRAGh9p1wEuG71v1JNoB4FlrMxfWoG3GpqsdmA70k5xxYTKi8wXASYTbngKQawPWRi2EB+uH4GAsWjw30lKCz3oiWf7z0w9/6Jsm/4vL5jy+MVATvYRBO8qRs0dvAGRJ1Vkwk1Px82trWZ5NoAFGusnoW53hYvOMwIcIa1Jass1iTsjHven/7019rQGi9o5NmAIdG1vFnez0T3hSPRFaJAyTtDLmaUO1HfvH38r+3sl+yDGBPfBRJl38DFwfQ3ZphWiTVWIrdJe6MmEOo9mnULwqLk2UA8yPo7u/gioC6XOtIDp56VOKOaHC6cru/yBgEnJMcA3B/xu9K9MA+wXW8C/Gq88r8TQKPZAvQjnX+R95/cVxSDOBvjrv4RvRF+WA7Xyd84rg+fSTxXcLZAnTsDn91QN5/8XMclAQDuMZx934ZJwTeAevgGa0NjBHGFqBXfvVXTyb81a7hG0Arx117OH6TiE54u+M6tZLQdwpjC9BfS/i7+Z9wPSN0A6hAWV65s1gfxIx/ppyLlQ5rtRgVJPUSYWwB+haHlfCXRxD+8u/DNoB7HXbp5/C7hHXFwzDVYb3uldhLhLEF6JES//I5hL98e8gG0M5hd74jod3xRoc1aye5l8Dbziq7N2Hty7vhGkBVrHDUkVehTYI75FlY4qhuK3RuYAnVzj/W4L928tcZC79bhmoArla9P4EaCe+UlfCoo9pNkOR34H5CVe/Z6V//M+GvTwzTADo66sJPYrdUdMxJjurXUaL/BQdgA6GmzXb69/fD2rz/+leoHJ4B1HS08v/phHz0y4SJTir4EWpK+D/BuAZ812v2xxCe0C08A3Cz320G9tXPU0cz1umEcStF/10+oTnhCS+GZgDdnXTcl/A/qeugbj6jdpf0YTAcTalmg1Ke8h7hGY1CMoD6+NxBp30FFVPZSYc7qOXnqC/5w9CPUMs5pT6FcfPl4JAM4AEHXfY1VEltNx3soJ4PSP4wyufW0s9ePJHy4btsKAbQzEF3XYBDU91R73BQ02aplz9jnd7WjKZU5xGedGEoBsC/7HOx5q0pP1a3j2dTX9PxhCo+ldGTbqCsfgnCAC6id9R1kVzk4T+j6JW9KNX1PAhfRLaq4ihKex3pvwGUwQJ1U0fsSz87aAHKpLiejOtpPsv40FXGgfB9/TeAnnT5D5H0f6IR4eDqbCewksvzkS7S7UJ42kLfDaAK1pA76IvYU8Ind6PtN7Gk9dvK7yn1a53x8yrja8LzmvttAIPI3fOzX52yJtgzAYNSWsf+hNp9kNU/T38nPHG8zwZwDL7TtpXgZgK+wzGprOO7kQ9P2xKe+BUO9tcA2Mt/RkrukcwEpHFJEOecyqZZPbMsVhOeeaWvBsBe/vMy9pbYI5oJSN+SIMY+y/lZP/VuwlNn+2oAj1O75NfBH/Qd0kzA4ymr3sH4ilC167N+7umU1mrsowGcQP43qYtEHulMQLrsthulZkfk8ORFhOcO9dEA7qZ2xyck8VLhDrnuTlXtGDcyFub05NsIT14d/5kYO/4P1fAltTueKoFnAHPS9UtUS03djqdU7JKcnn1cMtbG7vg/cA+y1kbVzOB+dr0xNXUbQKjWp9g/x6fPjmwDUmQGUIZy4snPcbzEnSHMhVfvpWZfAKO3jsn56X+ltFZdnwzgUo1GY4K79PrSVNTsT5RanZ3z86tjC+H5t/hkAC9RP/8dIWFnAXPz1UupqNiDhEotyesNniS8wVv+GMCZ1H//B0jUWcHdfn1mCn4zMbbk5Hdb3yWUtjrdFwP4O7EDfuTHSuegYB7A8vfEV4tzWvVxeb1DeXxGeId7/DCA+tR//2+QoHOAeQRb0s8KfpFQo/zP6H+I8o/lvj4YAPO82vfw35JzzEuCBie6Ug0oNboq7/fg3Jl9YfwGsD/WETtfN4k59iVB63L+vh0CjLOVvyEsmdoP6wlvMiV+A7iAKP+lEnLMa9u2xQWJrdJuWEaoz2TKuzB2I36Hw+I2AOb13/0l5Dx4ntYOyb0+vLVHBtmG8i7XxmsAZfEx0QB0+Fc+dKW1w8c+3UDj3QqAIuxDeZd98QnhbWbHawCtiPJ/TiLOi4OItzG2SugKAMY5Srx1quMobdUgTgNg3lt7uUScJ2NpbXFvIutzpWfLb84NeeHctimVlbQutyHj6xXEzjib1horsVsC68NYsP428X3KUvZxvBufATC/Po+RgAm8TWuP5J0RyDmxqh/1ncZQ3ql5XAYwRGvQPeNmWnsk7zamOyl1+T31nThzaPfHZQDv0LrbWxIvhbq0FnknYZXZHcs93C1ZBv8kvNWnKB+HATQl/vt/k8RLYhqtTZomqi6cCbdr6O/FOdv50jgMYADRAI6SdElcTGuTZG3LZmy+2exg3d05lLYqjMMA3qR1tackXBr70ZZmvZmgqlRFMaEiUx282R6kL2mRH6LTgPjv/0USLhHe8ewNElOTqzzupyMp73Zd1DXtSjSAKpItkTa0drlCKwC22yX5WyfvdhalreZFXdPRtG42T6KlUo3WMvcnpCKcFQDuVqosp7xfk2irOl9fnL2FNTvzj4TUY6Dny23+Rnm/v0Vb1S00AzhfkiVzD6lltjj60Rste+B9Qi1cnlVxEqW1PsCekdZVMwDewjsk9DStAPgh7nT6jpxznc8N0QDelGDpHEIzgN4JqMYkSiUaOX3HWynv+GCIBjBUgnUAa5H25OAr8b/YFMBENefC0K9QKTwD0AyAC8aRWmdZ8JW4mlKHPs7fcw7lPbuEZwCaAfB7QXDopzTMolTB/UWcvSjv+WxoBvCuxOr5LEDY5wI0pNTg+QjetDapvX4XlgGMllgd8YH2acJwF6UGV0XyrtMp73pzWAbwZ0nVEazj2kPeqLUnZQXAfyI6e/8KSnstCMsAqkqqns8CfBRwDc6jVOCJiN62Kr4Jau0GIT6UUAOYBagUbA04t1ZHd9jGFMr7jgzHAKZKqA5h3RJwRqD5V6P8i/oFKga2gvOf2DsUA7hDMvV+eSlwWapXADwU4Rvvj08p79wmFAO4RDJ1yGMkA+gXaP6zAxLTj4wPyLQIcaJk6v0nsFCvCm1EyX0N6R7ATOFcXvolDgrDACpKpg5hndk0M8jsB1FyHxXxW5fBKsp7dw7BAL6QSJ1yBskAlgeY+15YQcn97MjfnHNC4P+FYABvSKROqUkygH8HmPv5lMzfC9i2j/DfACZJpI7XwaV3Q9DDlLwHxfLu71Levbf/BnCzROqYIpIBHBPcIijOmrp47kbiTN6+4r8BtJNEg/gQBrQMLO9rKFnHdVYV68q9E3w3gGMlUcewNgRdGVjenMM1bgl8CdcA3w2gnCTqmL4kA7grqKz/QMo6vn+g+lHef4nfBrBWAnVOe5IUwjoZkLMCYHaMGRxParczfTaAORJoMP8Wzg1qBQDnKJSesWYxl5LDvT4bwFgJ1DmVSAZQFFDOrJsRj4g1ixsoOXyE//LXAPpKoBHwPUkO4WQ8mZLv0zFnUY/Ubu38NYBrJc8I2ETqSPsGswLg35R8u8SeyUxKHg/7awCdJc8IYB0KcmAg+V5LyXaTB4fVczIpxsG+GoCOA42CT0gGcHgg+b5MyfZRDzJh7eTo6qsBtJQ8I2AVqRvVCyLbE0nZtvcim6cpuUz31QBOkzwj4D2SJBoFke1gSq7rPbkUnXWeQx0/DeAEyTMCFpI60ekB5FoGKym5jvMkn6qkCc0b/DSAupJnBLxGMoA/BZBr28TlyjnVcb6fBnCo5BkBrP2AHVKzAmAl9vQmI9blLif6aAA6DzAKZpC6UBfvMz0U31IyHe5RTgeQPuMO9NEA9pE8I6CQZAA9vc/0r6RM/+hVVg9RcnrPPwPYKnFGwqMkWRR4n+krlDwXe5ZVO1L7NffNADZKnJHwIKkDDfI8T9a+x/6e5bUf1lHyus83A9BpANEwhiSMUZ7nyboEpaF3mXHuClqL/fwygA8kzkgYSRLGg15nuRuWef3BLB/OI7Vge78M4G2JMxIGkbrPE15n2ZKUpY9b1Mtijaf7G/KKVyXOSLiNJI0ZXmc5npSln8ef30fJ7d+oJgOQASTRAA7AZ5QcfT2krgWpDbtrCKAhQBKHAJeRcrzO0/z2wIdemrgmATUJ6AXTPN81508r1vPHAPQZUJ8BOdQmZfiCx614JinHG7UQSAuBkrYQ6HpShn6fUcn5zPmalgJrKXDSlgLPJ2VY0+t2HOLhvkBtBgqApG8GakLK7xnP2/FUUp4D/TEAbQeOgqRvBx5Myq+b9y25hJLnUn8MQAeCREGyDwTZAyso2W3GId635J2kljzbFwPQkWBRkOwjwVqTsnsygJZsTMp1tC8GoENBoyDZh4JOJGXXKYi2XEDJ9WPaLU95ho4Fj4IkHwt+IL6g5FaMykG0JWtZdzs/DEAXg0RBki8G6UzK7dFA2vIEUr4P+2EAuhosCpJ8NdgzpNz+krIZnY2kXzx5hi4HjYLkXg5ah5TZ56gQTGv2JeV8uQ8GoOvBoyC514P3IWX2UECteQwp56d9MIC+kmcEfE/qMv5l9rpnU2LR8DIp69rxG8B9kqdzKpG6S5F3mZ1CymwdygXVoqytT73jN4DnJVDnsA7L9u/8puGkzMYF1qKsmY9X4jeAFRKoc9on9EPZPlhNyqx1cG36IinzBnEbwPcSaDCzxoM9y+vPtKHNb4JrU9YVaLfHbQCgn1IqdmQCqbNc7VlerFMO7g2wTWuRcl8UvwGcLIk6ZnYifygfhu9IeTUPslWf82R/R95xqSTqmCJSVzkukT+CP8BuQbZqd1L+I+M2gNslUafsCVZU8iqvOaSshgXaroeSVnf8M88ZkLzj7xKpU2qShPIfr7JqRLO1PwbbsqyD0M+L1wDmS6ROOYPUTT70KquBpKzeDbhlLyfV4IF4DWCdROqUrqRu4tOVWbtjOSmruwJu2YPxb9JGqIpxGoBOBnbLXSSp+DRUa00bADQNum2nkqrQMV4DqCOZOuQxUie506OcHiDltDDwtr2EVIen4jWAcyRThywgdRJ/jsyujK+8WQcXLxXxNaUO36N6nAZwtWTqENZhIC28yegK2gCgYfCtO5lUiWvjNIDxkqkzDqGJpYY3ObGuOXkdJwXPhaRavBSnAeiScHdcTOogX3qT0TFQuIhj4zMAoIqk6gjWRiB/rs2+VVp1ErfEaQAXSKqO+IDUPQZ4k9EiadVJ/CNOA7hHUvV8BsCXS8HOlFKdxYnxGcASidXrGQCgqicZ3SudOos74zMAzQK4YRypddZ6ks8+WCOdOoslcRrA+ZKrA94htc40T/JpK5U6jT/GZwBDJFePZwB8ub1hkjTqNIbFZwBvSLB0LqJ1jDO9yOcg2hJgRcmxArvHZQCaBeBzD61t/Lg3r5MU6jyy3pfzIe3RmgVg8yapZXw5CmSa9Ok8RmfbKo/SHq1ZAC7VaC3jx4UgNbFV+nQea7I9naMX7dHzJFoqbWgt08uLfP4qdUYSWf4SP4n46NqSLZG7ae1ykhf5zJI2I4mJ2bWL4Uvao/tItjT2w8ekVvnai3yOlTIjin9h/+wM4EHao9+UcD1cBPyIF/kUSJmRRYfsDOBc4qPPkHS9mzFv70U+C6TLyOKR7AygXJwfIUSJ1CW2yf94kM/JUmWEUYzK2RiA4Rnaoz9FecmXwM20FpnlRT5DpMpIo1N2BtA1nkeLnfI2rT2u9yCb3bFCmow0CrMzgFrER0+XfPPmbGJ71PUgn5ZSZMSxBYdlYwCG14kPP1oSzpOxtLZ4O2H5KDKNq7IzgH7ER98mCee5Z+5zWlsM9iCf32Kd9Bh5zMjOAJjrAd+RiPOCOSPTzIN82kuNscSR2RiAYSXx0S0l4zx4ntYOq73IZ7K0GEv0zs4AxhAf/YBknDPHE9thnAf5VCLdfqfINuZkZwAXUB/eUFLOkfHEVmjnQT6XSYmxxbHZGMDe1G+1kyTlnGDOxazA3h5k9KR0GFvcnI0BGG6jPvx0yTkHHkvY15hDsZmWz6zUwIrXszOAI/E9sftNk5yz5hxi/b/PdBbYKd2JGaWnH7xBq9kfsjEA9qHN50nSWTKDWH0/BmHP6h+UHOhIq9qA7AygOdUAZknSWXEhtfrNPciodsLyiQ5WLMrOAAzzqJ3wEsk6C5i19+N8xp60fL5KWV94lVa5U7MzgKuoBrAAe0jYGdKFWvmrvMiJN52VtpUlvCthhmRnAAeQ121fLWlnxD5YQqz6OhzgQU71NQDwYBCwPDsDMAylGsD7XpxH4z+9qFUf6kVONxF7Ufp6xGxa9ZplZwANyIsRbpK8S+VArKbWvIEXWc2n5TMohX2iHa16w7IzAEMhtTNuRCNJvBRGUSte6EVOfyBm9IdU9gpWLMvWANqRfwO8in0l8sim//zYAWC4i5bPayntFy9Esyq3pP/xNXKXHCWZ75RG2EittR9y2R3v0zIqSGnP4B3XPyRbA2D/BgC6SOolsi/xi69P//7/KXEzGiEPApZmawDseQDNBEQz+vdl/G+YqAEAAd5x/admawCn0n8DaCbA/eg/g3VfkXAQ8b7JghT3jxZRfEfZ2f/hfnrn1EyA29E/cL8nmV2uAYBng4Al2RtAHRRrJiCo0X8x6niS23QNAEg8RavkSdkagKE/3QA0E+Bu9A/09ySzesScClLeS86kVXJg9gZQER9qJiCY0f+HqOhJbn01APBwELAoewMwXA1+TJH8cb6Duvqz7epNDQCI8A6Ja5K9AfCXBMkC3MjfH6mcRszqFhkAcRAwIBcDaAfIAryXvy/LfwyGkcSsjpMBEAcBb+ViAK6OdZ4i+RPjSW/y+w3+SctqnsQPg+Fht5uqSnt8bXwiC/Ba/p+gtjcZnkfMSxvJ2YOA23IxAMPFgCzAW/kDF3uU4wPEvI6R+MmDgH/kZgCG0bIAb+U/2qMcKxIvNn9Fwv8J3s6KhrkZwP5YKAvwUv4Lsb9HWXYkZnaDhO9gEHBrbgZgOAtwZgGVEt+AFzmr3lkJXbgK1JfwHQwCXs/VAAy3OuvESzzrxuw1/yOdVe5WrzKtTrxabrZEvx28rXnH52oAhufgLm5MaMOd7GQp1bZ4zrNcryXmdp1E72gQcHPuBnAsvnBoAVNxWOKarTf1utXt44vMbn+PkJeI2dWV6HeA1ZPm5W4AhivgMlbi3AQ1WHXqVd+/jis8y/dYYm4vSfC/4l5adY/N3QC433lLitsT0lztiCviSgr/rsoqIGbXU4J3OAi4MR8D2A8vO7aAZ7w51iL35bBDHNfoeezjXdYLiPkdKcGXwLduVlhk+xp1sMpx9/4EnQJuprPxiuP6vIWq3mXNPEPyBYm9REbQKnx0PgZgONPh1NaP8SouDHLO/zHnlfmPl1/IhxEzvFZidzwIuCE/AzB0RhQxE60Dap4GzudHtsWpHuZehnp21BES+05gHSI7J18DMNyGaGJaaXebekE9Z7sldow2XuZ/LjHD5yT0CAYB9fI1AOYGhdLiETT1+nPfENr0TGlxpac1YP72uUpCj2AQ0Dt/AzC8iOhigpenw1TG7cT9b6XFGE+7ZUVqDWpI6LvgM/5Ki3xeZwWijOm4EtU9aYj9cSEm0Zojk5jvbae8jPoRWCKPZhBwFMMALLIfv/7YQPTSB4Bijzsl8x7JKyTyiAYBPTgGYFiHOCIOG4hH+gDwpcddsgYxz+9wiEQekd5eYBmA4XXEFdNx5S/nM51xWGzSB4APvO6Q1xAzfVICj3AQcATLAAxTEGeswwwMQgf69+P/xTm4CY9FPNMRzth/Gy8Qc71MAo9wEHANzwAMg+BDrMMM3IHWeS2VrYSzcBOecLyZJ9P4P8+7Yx3qPEdlCTwD1nBXXLBe6wb4FGsxE49jAoahH3qgE9qiGRrhKFRFORjKoSqOQiM0Q1t0Qg/0wzBMwOOYiY+9ymKC952xNzHbRyXuiAcBNZgG4OYmwTTHoAA64xxivn+RuCMeBFzJNYCo9gikI0I4FOsYYr6fo4LEnSGsnRcz2AZgaC/lUuLSIDriTcSMH5KwYxgE1GEbgOFUvCH95hVveLnjryTmE7NuJ2HHMAi4gW8AhnK4RyrOOe5BuUC6YU3q95tyEnYMi/BfdWEABsPFWCst5/Dt4uKAOiHz6vhxEnVMgwBz9YpHYZoUnVVM+3mDRhAMJebeWqKOaRBgLl+zr1SdcfQNrhPy7otcjb0l6pgGAeb2NZs5u1Y0SbEwiHOPtmdPYv6jJOjYBgHm+kXLY4wUvssYg/IBdsADiBVoLkHHNgiwKF62rT4N7vSTX9tAOyDvG8AK7C5BxzYIsGhedi9cjw3S+3axAddjr2C7XwNaHYZKzDEOAizKfzM0GPjlD/+aQXc/3l2Ap0jMOXFiaAawbVJwprSPmQFO+u1IFVIt3pKUc+bp8AzAYLgCK1Ms/pUJOfeuDKket0rIOfPnMA3AcBAGp1T+g3FQYrof5+yE30vIebA4TAMwGOphUEwHisYT6zAokvMLo4NxH/BsiTgvrg/XAAyGA9ETi1Ig/kXoiQMT1/nuI1Smh0ScF/vjnZANYBsdMCPB4p+BDgntfIzvADUl4jy5MHwDMBhOx4MJFP+DOD3RnS/f3wAvSsAEJiXBAJI2K5C8Eb+L3wA3Sr4EjszrxgrzK5ny6IDJ+Cpg6X+FyegQ5Or+XLgxr1o1knwptE+OAfw4OXgJpuKbwKT/DabikgRO9u2abjnX63VJ14NWMH+TqoLOeAqbA5D+ZjyFzqiS0s53UY5VGyThEsnlXo7P0dVnA9jGIeiGZzwW/zPolvorLY/G3Tn8XjtHsqVyaZZLs57FMTD/DWAbldESt+FZb3YUfopC3IzmqKSO9wNHYFDGk1FrMBFdsZ+qRm+DxzJsgVdR8ON/FVqSx+MqTMLymIT/DsagI+qrs5VINfTDAmzcRf2W4w6cgd+qVs44H0MwbxctsBC98btf/hehJnogWuIOzEJRBLIvwiz0x1k4QB0sA3bHEWiBnrgPs/AkxmMI+uJKdEDzwA49DZnf4CS0Qw8MxsOYhUcxEn1xOVqh9q//f8NPtgxqozmuxgg8g2X4D0Hw/8EyPIMRuBrNURtl1KFEckniD9FT0An9MBj3YAIewTTMxKtYiOUowgZsArAJG1CE5ViIVzET0/AIJuAeDEY/dMIpqKZOIWQAQggZgBBCBiCEkAEIIWQAQggZgBBCBiCEkAEIIWQAQggZgBBCBiCEkAEIIWQAQggZgBBCBiCEkAEIIWI0gK0qghApZavZZpVBiJSy2axYZRAipRSbbVAZhEgpG8xWqwxCpJTVZktUBiFSyhKzuSqDECllrlmhyiBESik0G6syCJFSxpr1VxmESCn9zbqpDEKklG5mLVQGIVJKC7P6KoMQKaW+WTmVQYiUUs7MbK0KIUQKWWtmZjZHpRAihczZZgCjVQohUsjobQbQXaUQIoV032YATVUKIVJI020GoO8AQqT2G4CZ2VIVQ4iUsdR+iokqhxApY+LPBtBF5RAiZXT52QDqqRxCpIx69otYr4IIkSLW23YxRSURIkVM2d4ANAsgREpnAMzMqqskQqSI6rZDLFZRhEgJi+1XMVBlESIlDPy1ATRWWYRICY2thChSYYRIAUVWYgxXaYRIAcNLNoAmKo0QKaCJ7SSWqThCJJxlttMoUHmESDgFOzeAGiqPEAmnhu0ipqtAQiSY6bbLaKMSCZFg2lgpsUpFEiKhrLJSo4/KJERC6VO6AZS3LSqUEAlki5W3DGKESiVEAhlhGUVNlUqIBFLTMozxKpYQCWO8ZRx1VS4hEkZdyyLGqWBCJIhxllXUUsmESBC1LMsYqqIJkRCGWtZRwTaqcEIkgI1WwXKIXiqdEAmgl+UYOipciNBZbDlHS5VPiMBpaXnEJBVQiICZZHlFFStWEYUIlGKrYnlGV5VRiEDpaoSYpkIKESDTjBKH2yYVU4jA2GSHGyk6qpxCBEZHI8YEFVSIgJhg1ChrS1VUIQJhqZU1cuj6cCFCobE5iO4qrBAB0N0cxSgVVwjPGWUOY6YKLITHzDSnUclWqshCeMpKq2SOo4F9q0IL4SHfWgOLIFqp1EJ4SCuLKC5TsYXwjMsswuihggvhET0s4uirogvhCX0thuinwgvhAf0sppAFCJFa+WsgIEQqf/xrOlCIVE796aOgEKn88LfrpUFaHShElHwb3bKfzBYIa4+AEFGxMppFv9ltE9JOQSGiYKb7LT86L0AIPxllHodODRLCJd3N82is40OFcMJSN2f9saOsDhEXgs4E/km/7qKjbhMSgsYm7jUfUcThulNQCArTeJd8RRtddbm4EHlRzLnhN66oYpPUiELkyCSrYsFHS1usphQiSxZbS0tM9LKNalIhMmSj9bKERQUbqoYVIgOGWgVLZNSycWpeIXbBOKtliY66Nl7NLEQJjLe6loqoaSNsixpciB/YYiOspqUqylsfW6WmF6lnlfWx8pbSaGPT1QVEaplubSz1UcMKbJk6g0gVy6zAakj8P0cTG25F6hgi8RTZcGsiwe/sNIGBWjcoEru2b2AYO/rjjurWxabYenUZkQjW2xTrYtUl7GyjnnWxiTphSATKUptoXayehJxvlLOm1t1G2xxbq24lvGatzbHR1t2aWjkJ140Z1LcW1s3621grtLm2xFbbBiu2zbZV3U9EwlbbbMW2wVbbEptrhTbW+ls3a2H1wxP9/wMmYAESxZ8a7wAAAABJRU5ErkJggg=="
/>
<title>OASIS GBA JS</title>
<link rel="stylesheet" href="data:@file/css;base64,Ym9keSB7CgoJYmFja2dyb3VuZC1jb2xvcjogIzMzMzsKCXRleHQtYWxpZ246IGNlbnRlcjsKCW1hcmdpbjogMCAwIDE1cHg7Cgljb2xvcjogd2hpdGU7Cglmb250LWZhbWlseTogJ0NhbGlicmknLCAnVmVyZGFuYScsIHNhbnMtc2VyaWY7Cglmb250LXNpemU6IDE1cHg7Cgl0ZXh0LXNoYWRvdzogMCAycHggcmdiYSgwLCAwLCAwLCAwLjYpOwp9CgpidXR0b24gewoJZm9udC1mYW1pbHk6ICdDYWxpYnJpJywgJ1ZlcmRhbmEnLCBzYW5zLXNlcmlmOwp9Cgojc2NyZWVuIHsKYmFja2dyb3VuZC1jb2xvcjogIzc3NzsKYm9yZGVyLXJhZGl1czogMTBweDsKbWFyZ2luLWJvdHRvbTogMjBweDsKfQoKI3NjcmVlblt3aWR0aD0iMjQwIl0gewoJbWFyZ2luLXRvcDogNDIuNXB4OwoJbWFyZ2luLWJvdHRvbTogLTM2M3B4OyAvKiBUYWtlIHVwIG5vIGhlaWdodCAqLwoJaW1hZ2UtcmVuZGVyaW5nOiAtd2Via2l0LW9wdGltaXplLWNvbnRyYXN0OwoJaW1hZ2UtcmVuZGVyaW5nOiAtbW96LWNyaXNwLWVkZ2VzOwoJaW1hZ2UtcmVuZGVyaW5nOiAtby1jcmlzcC1lZGdlczsKCXpvb206IDI7Cgktby10cmFuc2Zvcm06IHNjYWxlKDIpOwp9CgoKI2NvbnRyb2xzIHsKCWJvcmRlci1yYWRpdXM6IDIwcHg7Cglib3JkZXItdG9wOiBub25lOwoJd2lkdGg6IDY0MHB4OwoJdG9wOiAwOwoJbWFyZ2luOiBhdXRvOwoJaGVpZ2h0OiAyMDBweDsKCW92ZXJmbG93OiBoaWRkZW47CgliYWNrZ3JvdW5kLWNvbG9yOiAjNDQ0OzsKfQoKCgojY3Jhc2ggewoJbWFyZ2luLXRvcDogMTAwcHg7CgltYXJnaW4tYm90dG9tOiAxOTlweDsKfQoKYnV0dG9uIHsKCWJhY2tncm91bmQtY29sb3I6ICMyMjI7Cglib3JkZXItcmFkaXVzOiAxNXB4OwoJY29sb3I6IHdoaXRlOwoJcGFkZGluZzogMTBweDsKCW1pbi13aWR0aDogMjUwcHg7CgltYXJnaW4tYm90dG9tOiAxMHB4Owp9CgpsYWJlbCwgI3NvdW5kLCAjY29udHJvbHMgPiBkaXYgPiBwIHsKCWRpc3BsYXk6IGJsb2NrOwoJbWFyZ2luOiA1cHggMzBweDsKCWhlaWdodDogMThweDsKfQoKbGFiZWwsICNzb3VuZCB7CglmbG9hdDogbGVmdDsKCWNsZWFyOiBsZWZ0Owp9Cgojc291bmQgKyBwIHsKCW1hcmdpbi10b3A6IC0yM3B4ICFpbXBvcnRhbnQ7Cn0KCiNjb250cm9scyA+IGRpdiA+IHAgewoJZmxvYXQ6IHJpZ2h0OwoJY2xlYXI6IHJpZ2h0Owp9CgppbnB1dFt0eXBlPWNoZWNrYm94XSB7CgltYXJnaW46IC0zcHggNXB4IDAgMDsKfQoKaW5wdXRbdHlwZT1jaGVja2JveF06OmFmdGVyIHsKCWRpc3BsYXk6IGlubGluZS1ibG9jazsKCWNvbnRlbnQ6ICIiOwoJYmFja2dyb3VuZC1jb2xvcjogIzAwMDAwMDsKCWJvcmRlcjogMCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMyk7Cglib3JkZXItd2lkdGg6IDFweCAxcHggMnB4OwoJd2lkdGg6IDEycHg7CgloZWlnaHQ6IDEycHg7Cglib3JkZXItcmFkaXVzOiAzcHg7Cglwb3NpdGlvbjogcmVsYXRpdmU7Cgl0b3A6IC0zcHg7Cgl2aXNpYmlsaXR5OiB2aXNpYmxlOwp9CgppbnB1dFt0eXBlPWNoZWNrYm94XTpjaGVja2VkOjphZnRlciB7CgliYWNrZ3JvdW5kLWNvbG9yOiAjMDAwMDAwOwoJYm9yZGVyLXdpZHRoOiAycHggMXB4IDFweDsKCWJveC1zaGFkb3c6IDAgMnB4IDZweCAtMXB4IHJnYmEoMCwgMCwgMCwgMC4yKSBpbnNldDsKfQoKcDpmaXJzdC1jaGlsZCB7CgltYXJnaW4tdG9wOiAwOwp9CgphOmxpbmssIGE6dmlzaXRlZCB7Cgljb2xvcjogIzAwZDlmZjsKfQoKLmhpZGRlbiB7CgktbW96LXRyYW5zZm9ybTogcm90YXRlWCg5MGRlZykgIWltcG9ydGFudDsKCS13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGVYKDkwZGVnKSAhaW1wb3J0YW50Owp9CgouZGVhZCB7CglkaXNwbGF5OiBub25lOwp9CgppbnB1dFt0eXBlPWZpbGVdIHsKCW9wYWNpdHk6IDAgIWltcG9ydGFudDsKCXdpZHRoOiAwOwoJaGVpZ2h0OiAwOwoJbWFyZ2luOiAwOwoJcGFkZGluZzogMDsKCWJvcmRlcjogbm9uZTsKfQoKaW5wdXRbdHlwZT1yYW5nZV0gewoJd2lkdGg6IDEwMHB4OwoJaGVpZ2h0OiAxNHB4OwoJbWFyZ2luOiAycHg7Cn0KCmZvb3RlciB7Cglmb250LXNpemU6IDEycHg7CglwYWRkaW5nLXRvcDogOHB4Owp9CgpwIHsKCW1hcmdpbjogMDsKfQoKbGFiZWwgcCwgI3NvdW5kIHAgewoJZGlzcGxheTogaW5saW5lOwp9Cgp1bCNsaW5rcyB7CglkaXNwbGF5OiBibG9jazsKCXRleHQtYWxpZ246IGNlbnRlcjsKCXBhZGRpbmc6IDA7Cn0KCnVsI2xpbmtzIGxpIHsKCWRpc3BsYXk6IGlubGluZTsKCWxpc3Qtc3R5bGUtdHlwZTogbm9uZTsKfQoKdWwjbGlua3MgbGk6bm90KDpmaXJzdC1jaGlsZCk6OmJlZm9yZSB7Cgljb250ZW50OiAi4oCiIjsKCW1hcmdpbjogMCAwLjVlbTsKfQo=">
<script src="data:@file/javascript;base64,T2JqZWN0LnByb3RvdHlwZS5pbmhlcml0ID0gZnVuY3Rpb24oKSB7Cglmb3IgKHZhciB2IGluIHRoaXMpIHsKCQl0aGlzW3ZdID0gdGhpc1t2XTsKCX0KfTsKCmZ1bmN0aW9uIGhleChudW1iZXIsIGxlYWRpbmcsIHVzZVByZWZpeCkgewoJaWYgKHR5cGVvZih1c2VQcmVmaXgpID09PSAndW5kZWZpbmVkJykgewoJCXVzZVByZWZpeCA9IHRydWU7Cgl9CglpZiAodHlwZW9mKGxlYWRpbmcpID09PSAndW5kZWZpbmVkJykgewoJCWxlYWRpbmcgPSA4OwoJfQoJdmFyIHN0cmluZyA9IChudW1iZXIgPj4+IDApLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpOwoJbGVhZGluZyAtPSBzdHJpbmcubGVuZ3RoOwoJaWYgKGxlYWRpbmcgPCAwKQoJCXJldHVybiBzdHJpbmc7CglyZXR1cm4gKHVzZVByZWZpeCA/ICcweCcgOiAnJykgKyBuZXcgQXJyYXkobGVhZGluZyArIDEpLmpvaW4oJzAnKSArIHN0cmluZzsKfQoKU2VyaWFsaXplciA9IHsKCVRBR19JTlQ6IDEsCglUQUdfU1RSSU5HOiAyLAoJVEFHX1NUUlVDVDogMywKCVRBR19CTE9COiA0LAoJVEFHX0JPT0xFQU46IDUsCglUWVBFOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJywKCglwb2ludGVyOiBmdW5jdGlvbigpIHsKCQl0aGlzLmluZGV4ID0gMDsKCQl0aGlzLnRvcCA9IDA7CgkJdGhpcy5zdGFjayA9IFtdOwoJfSwKCglwYWNrOiBmdW5jdGlvbih2YWx1ZSkgewoJCXZhciBvYmplY3QgPSBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDQpKTsKCQlvYmplY3Quc2V0VWludDMyKDAsIHZhbHVlLCB0cnVlKTsKCQlyZXR1cm4gb2JqZWN0LmJ1ZmZlcjsKCX0sCgoJcGFjazg6IGZ1bmN0aW9uKHZhbHVlKSB7CgkJdmFyIG9iamVjdCA9IG5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoMSkpOwoJCW9iamVjdC5zZXRVaW50OCgwLCB2YWx1ZSwgdHJ1ZSk7CgkJcmV0dXJuIG9iamVjdC5idWZmZXI7Cgl9LAoKCXByZWZpeDogZnVuY3Rpb24odmFsdWUpIHsKCQlyZXR1cm4gbmV3IEJsb2IoW1NlcmlhbGl6ZXIucGFjayh2YWx1ZS5zaXplIHx8IHZhbHVlLmxlbmd0aCB8fCB2YWx1ZS5ieXRlTGVuZ3RoKSwgdmFsdWVdLCB7IHR5cGU6IFNlcmlhbGl6ZXIuVFlQRSB9KTsKCX0sCgoJc2VyaWFsaXplOiBmdW5jdGlvbihzdHJlYW0pIHsKCQl2YXIgcGFydHMgPSBbXTsKCQl2YXIgc2l6ZSA9IDQ7CgkJZm9yIChpIGluIHN0cmVhbSkgewoJCQlpZiAoc3RyZWFtLmhhc093blByb3BlcnR5KGkpKSB7CgkJCQl2YXIgdGFnOwoJCQkJdmFyIGhlYWQgPSBTZXJpYWxpemVyLnByZWZpeChpKTsKCQkJCXZhciBib2R5OwoJCQkJc3dpdGNoICh0eXBlb2Yoc3RyZWFtW2ldKSkgewoJCQkJY2FzZSAnbnVtYmVyJzoKCQkJCQl0YWcgPSBTZXJpYWxpemVyLlRBR19JTlQ7CgkJCQkJYm9keSA9IFNlcmlhbGl6ZXIucGFjayhzdHJlYW1baV0pOwoJCQkJCWJyZWFrOwoJCQkJY2FzZSAnc3RyaW5nJzoKCQkJCQl0YWcgPSBTZXJpYWxpemVyLlRBR19TVFJJTkc7CgkJCQkJYm9keSA9IFNlcmlhbGl6ZXIucHJlZml4KHN0cmVhbVtpXSk7CgkJCQkJYnJlYWs7CgkJCQljYXNlICdvYmplY3QnOgoJCQkJCWlmIChzdHJlYW1baV0udHlwZSA9PSBTZXJpYWxpemVyLlRZUEUpIHsKCQkJCQkJdGFnID0gU2VyaWFsaXplci5UQUdfQkxPQjsKCQkJCQkJYm9keSA9IHN0cmVhbVtpXTsKCQkJCQl9IGVsc2UgewoJCQkJCQl0YWcgPSBTZXJpYWxpemVyLlRBR19TVFJVQ1Q7CgkJCQkJCWJvZHkgPSBTZXJpYWxpemVyLnNlcmlhbGl6ZShzdHJlYW1baV0pOwoJCQkJCX0KCQkJCQlicmVhazsKCQkJCWNhc2UgJ2Jvb2xlYW4nOgoJCQkJCXRhZyA9IFNlcmlhbGl6ZXIuVEFHX0JPT0xFQU47CgkJCQkJYm9keSA9IFNlcmlhbGl6ZXIucGFjazgoc3RyZWFtW2ldKTsKCQkJCQlicmVhazsKCQkJCWRlZmF1bHQ6CgkJCQkJY29uc29sZS5sb2coc3RyZWFtW2ldKTsKCQkJCQlicmVhazsKCQkJCX0KCQkJCXNpemUgKz0gMSArIGhlYWQuc2l6ZSArIChib2R5LnNpemUgfHwgYm9keS5ieXRlTGVuZ3RoIHx8IGJvZHkubGVuZ3RoKTsKCQkJCXBhcnRzLnB1c2goU2VyaWFsaXplci5wYWNrOCh0YWcpKTsKCQkJCXBhcnRzLnB1c2goaGVhZCk7CgkJCQlwYXJ0cy5wdXNoKGJvZHkpOwoJCQl9CgkJfQoJCXBhcnRzLnVuc2hpZnQoU2VyaWFsaXplci5wYWNrKHNpemUpKTsKCQlyZXR1cm4gbmV3IEJsb2IocGFydHMpOwoJfSwKCglkZXNlcmlhbGl6ZTogZnVuY3Rpb24oYmxvYiwgY2FsbGJhY2spIHsKCQl2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKCQlyZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZGF0YSkgewoJCQljYWxsYmFjayhTZXJpYWxpemVyLmRlc2VyZWFsaXplU3RyZWFtKG5ldyBEYXRhVmlldyhkYXRhLnRhcmdldC5yZXN1bHQpLCBuZXcgU2VyaWFsaXplci5wb2ludGVyKSk7CgkJfQoJCXJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihibG9iKTsKCX0sCgoJZGVzZXJlYWxpemVTdHJlYW06IGZ1bmN0aW9uKHZpZXcsIHBvaW50ZXIpIHsKCQlwb2ludGVyLnB1c2goKTsKCQl2YXIgb2JqZWN0ID0ge307CgkJdmFyIHJlbWFpbmluZyA9IHZpZXcuZ2V0VWludDMyKHBvaW50ZXIuYWR2YW5jZSg0KSwgdHJ1ZSk7CgkJd2hpbGUgKHBvaW50ZXIubWFyaygpIDwgcmVtYWluaW5nKSB7CgkJCXZhciB0YWcgPSB2aWV3LmdldFVpbnQ4KHBvaW50ZXIuYWR2YW5jZSgxKSk7CgkJCXZhciBoZWFkID0gcG9pbnRlci5yZWFkU3RyaW5nKHZpZXcpOwoJCQl2YXIgYm9keTsKCQkJc3dpdGNoICh0YWcpIHsKCQkJY2FzZSBTZXJpYWxpemVyLlRBR19JTlQ6CgkJCQlib2R5ID0gdmlldy5nZXRVaW50MzIocG9pbnRlci5hZHZhbmNlKDQpLCB0cnVlKTsKCQkJCWJyZWFrOwoJCQljYXNlIFNlcmlhbGl6ZXIuVEFHX1NUUklORzoKCQkJCWJvZHkgPSBwb2ludGVyLnJlYWRTdHJpbmcodmlldyk7CgkJCQlicmVhazsKCQkJY2FzZSBTZXJpYWxpemVyLlRBR19TVFJVQ1Q6CgkJCQlib2R5ID0gU2VyaWFsaXplci5kZXNlcmVhbGl6ZVN0cmVhbSh2aWV3LCBwb2ludGVyKTsKCQkJCWJyZWFrOwoJCQljYXNlIFNlcmlhbGl6ZXIuVEFHX0JMT0I6CgkJCQl2YXIgc2l6ZSA9IHZpZXcuZ2V0VWludDMyKHBvaW50ZXIuYWR2YW5jZSg0KSwgdHJ1ZSk7CgkJCQlib2R5ID0gdmlldy5idWZmZXIuc2xpY2UocG9pbnRlci5hZHZhbmNlKHNpemUpLCBwb2ludGVyLmFkdmFuY2UoMCkpOwoJCQkJYnJlYWs7CgkJCWNhc2UgU2VyaWFsaXplci5UQUdfQk9PTEVBTjoKCQkJCWJvZHkgPSAhIXZpZXcuZ2V0VWludDgocG9pbnRlci5hZHZhbmNlKDEpKTsKCQkJCWJyZWFrOwoJCQl9CgkJCW9iamVjdFtoZWFkXSA9IGJvZHk7CgkJfQoJCWlmIChwb2ludGVyLm1hcmsoKSA+IHJlbWFpbmluZykgewoJCQl0aHJvdyAiU2l6ZSBvZiBzZXJpYWxpemVkIGRhdGEgZXhjZWVkZWQiOwoJCX0KCQlwb2ludGVyLnBvcCgpOwoJCXJldHVybiBvYmplY3Q7Cgl9LAoKCXNlcmlhbGl6ZVBORzogZnVuY3Rpb24oYmxvYiwgYmFzZSwgY2FsbGJhY2spIHsKCQl2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CgkJdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKCQl2YXIgcGl4ZWxzID0gYmFzZS5nZXRDb250ZXh0KCcyZCcpLmdldEltYWdlRGF0YSgwLCAwLCBiYXNlLndpZHRoLCBiYXNlLmhlaWdodCk7CgkJdmFyIHRyYW5zcGFyZW50ID0gMDsKCQlmb3IgKHZhciB5ID0gMDsgeSA8IGJhc2UuaGVpZ2h0OyArK3kpIHsKCQkJZm9yICh2YXIgeCA9IDA7IHggPCBiYXNlLndpZHRoOyArK3gpIHsKCQkJCWlmICghcGl4ZWxzLmRhdGFbKHggKyB5ICogYmFzZS53aWR0aCkgKiA0ICsgM10pIHsKCQkJCQkrK3RyYW5zcGFyZW50OwoJCQkJfQoJCQl9CgkJfQoJCXZhciBieXRlc0luQ2FudmFzID0gdHJhbnNwYXJlbnQgKiAzICsgKGJhc2Uud2lkdGggKiBiYXNlLmhlaWdodCAtIHRyYW5zcGFyZW50KTsKCQlmb3IgKHZhciBtdWx0aXBsaWVyID0gMTsgKGJ5dGVzSW5DYW52YXMgKiBtdWx0aXBsaWVyICogbXVsdGlwbGllcikgPCBibG9iLnNpemU7ICsrbXVsdGlwbGllcik7CgkJdmFyIGVkZ2VzID0gYnl0ZXNJbkNhbnZhcyAqIG11bHRpcGxpZXIgKiBtdWx0aXBsaWVyIC0gYmxvYi5zaXplOwoJCXZhciBwYWRkaW5nID0gTWF0aC5jZWlsKGVkZ2VzIC8gKGJhc2Uud2lkdGggKiBtdWx0aXBsaWVyKSk7CgkJY2FudmFzLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCBiYXNlLndpZHRoICogbXVsdGlwbGllcik7CgkJY2FudmFzLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgYmFzZS5oZWlnaHQgKiBtdWx0aXBsaWVyICsgcGFkZGluZyk7CgoJCXZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoJCXJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihkYXRhKSB7CgkJCXZhciB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoZGF0YS50YXJnZXQucmVzdWx0KTsKCQkJdmFyIHBvaW50ZXIgPSAwOwoJCQl2YXIgcGl4ZWxQb2ludGVyID0gMDsKCQkJdmFyIG5ld1BpeGVscyA9IGNvbnRleHQuY3JlYXRlSW1hZ2VEYXRhKGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCArIHBhZGRpbmcpOwoJCQlmb3IgKHZhciB5ID0gMDsgeSA8IGNhbnZhcy5oZWlnaHQ7ICsreSkgewoJCQkJZm9yICh2YXIgeCA9IDA7IHggPCBjYW52YXMud2lkdGg7ICsreCkgewoJCQkJCXZhciBvbGRZID0gKHkgLyBtdWx0aXBsaWVyKSB8IDA7CgkJCQkJdmFyIG9sZFggPSAoeCAvIG11bHRpcGxpZXIpIHwgMDsKCQkJCQlpZiAob2xkWSA+IGJhc2UuaGVpZ2h0IHx8ICFwaXhlbHMuZGF0YVsob2xkWCArIG9sZFkgKiBiYXNlLndpZHRoKSAqIDQgKyAzXSkgewoJCQkJCQluZXdQaXhlbHMuZGF0YVtwaXhlbFBvaW50ZXIrK10gPSB2aWV3W3BvaW50ZXIrK107CgkJCQkJCW5ld1BpeGVscy5kYXRhW3BpeGVsUG9pbnRlcisrXSA9IHZpZXdbcG9pbnRlcisrXTsKCQkJCQkJbmV3UGl4ZWxzLmRhdGFbcGl4ZWxQb2ludGVyKytdID0gdmlld1twb2ludGVyKytdOwoJCQkJCQluZXdQaXhlbHMuZGF0YVtwaXhlbFBvaW50ZXIrK10gPSAwOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBieXRlID0gdmlld1twb2ludGVyKytdOwoJCQkJCQluZXdQaXhlbHMuZGF0YVtwaXhlbFBvaW50ZXIrK10gPSBwaXhlbHMuZGF0YVsob2xkWCArIG9sZFkgKiBiYXNlLndpZHRoKSAqIDQgKyAwXSB8IChieXRlICYgNyk7CgkJCQkJCW5ld1BpeGVscy5kYXRhW3BpeGVsUG9pbnRlcisrXSA9IHBpeGVscy5kYXRhWyhvbGRYICsgb2xkWSAqIGJhc2Uud2lkdGgpICogNCArIDFdIHwgKChieXRlID4+IDMpICYgNyk7CgkJCQkJCW5ld1BpeGVscy5kYXRhW3BpeGVsUG9pbnRlcisrXSA9IHBpeGVscy5kYXRhWyhvbGRYICsgb2xkWSAqIGJhc2Uud2lkdGgpICogNCArIDJdIHwgKChieXRlID4+IDYpICYgNyk7CgkJCQkJCW5ld1BpeGVscy5kYXRhW3BpeGVsUG9pbnRlcisrXSA9IHBpeGVscy5kYXRhWyhvbGRYICsgb2xkWSAqIGJhc2Uud2lkdGgpICogNCArIDNdOwoJCQkJCX0KCQkJCX0KCQkJfQoJCQljb250ZXh0LnB1dEltYWdlRGF0YShuZXdQaXhlbHMsIDAsIDApOwoJCQljYWxsYmFjayhjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKSk7CgkJfQoJCXJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihibG9iKTsKCQlyZXR1cm4gY2FudmFzOwoJfSwKCglkZXNlcmlhbGl6ZVBORzogZnVuY3Rpb24oYmxvYiwgY2FsbGJhY2spIHsKCQl2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKCQlyZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZGF0YSkgewoJCQl2YXIgaW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsKCQkJaW1hZ2Uuc2V0QXR0cmlidXRlKCdzcmMnLCBkYXRhLnRhcmdldC5yZXN1bHQpOwoJCQl2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CgkJCWNhbnZhcy5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIGltYWdlLmhlaWdodCk7CgkJCWNhbnZhcy5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgaW1hZ2Uud2lkdGgpOwoJCQl2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwoJCQljb250ZXh0LmRyYXdJbWFnZShpbWFnZSwgMCwgMCk7CgkJCXZhciBwaXhlbHMgPSBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwoJCQl2YXIgZGF0YSA9IFtdOwoJCQlmb3IgKHZhciB5ID0gMDsgeSA8IGNhbnZhcy5oZWlnaHQ7ICsreSkgewoJCQkJZm9yICh2YXIgeCA9IDA7IHggPCBjYW52YXMud2lkdGg7ICsreCkgewoJCQkJCWlmICghcGl4ZWxzLmRhdGFbKHggKyB5ICogY2FudmFzLndpZHRoKSAqIDQgKyAzXSkgewoJCQkJCQlkYXRhLnB1c2gocGl4ZWxzLmRhdGFbKHggKyB5ICogY2FudmFzLndpZHRoKSAqIDQgKyAwXSk7CgkJCQkJCWRhdGEucHVzaChwaXhlbHMuZGF0YVsoeCArIHkgKiBjYW52YXMud2lkdGgpICogNCArIDFdKTsKCQkJCQkJZGF0YS5wdXNoKHBpeGVscy5kYXRhWyh4ICsgeSAqIGNhbnZhcy53aWR0aCkgKiA0ICsgMl0pOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXZhciBieXRlID0gMDsKCQkJCQkJYnl0ZSB8PSBwaXhlbHMuZGF0YVsoeCArIHkgKiBjYW52YXMud2lkdGgpICogNCArIDBdICYgNzsKCQkJCQkJYnl0ZSB8PSAocGl4ZWxzLmRhdGFbKHggKyB5ICogY2FudmFzLndpZHRoKSAqIDQgKyAxXSAmIDcpIDw8IDM7CgkJCQkJCWJ5dGUgfD0gKHBpeGVscy5kYXRhWyh4ICsgeSAqIGNhbnZhcy53aWR0aCkgKiA0ICsgMl0gJiA3KSA8PCA2OwoJCQkJCQlkYXRhLnB1c2goYnl0ZSk7CgkJCQkJfQoJCQkJfQoJCQl9CgkJCW5ld0Jsb2IgPSBuZXcgQmxvYihkYXRhLm1hcChmdW5jdGlvbiAoYnl0ZSkgewoJCQkJdmFyIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoMSk7CgkJCQlhcnJheVswXSA9IGJ5dGU7CgkJCQlyZXR1cm4gYXJyYXk7CgkJCX0pLCB7IHR5cGU6IFNlcmlhbGl6ZXIuVFlQRX0pOwoJCQlTZXJpYWxpemVyLmRlc2VyaWFsaXplKG5ld0Jsb2IsIGNhbGxiYWNrKTsKCQl9CgkJcmVhZGVyLnJlYWRBc0RhdGFVUkwoYmxvYik7Cgl9Cn07CgpTZXJpYWxpemVyLnBvaW50ZXIucHJvdG90eXBlLmFkdmFuY2UgPSBmdW5jdGlvbihhbW91bnQpIHsKCXZhciBpbmRleCA9IHRoaXMuaW5kZXg7Cgl0aGlzLmluZGV4ICs9IGFtb3VudDsKCXJldHVybiBpbmRleDsKfTsKClNlcmlhbGl6ZXIucG9pbnRlci5wcm90b3R5cGUubWFyayA9IGZ1bmN0aW9uKCkgewoJcmV0dXJuIHRoaXMuaW5kZXggLSB0aGlzLnRvcDsKfTsKClNlcmlhbGl6ZXIucG9pbnRlci5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKCkgewoJdGhpcy5zdGFjay5wdXNoKHRoaXMudG9wKTsKCXRoaXMudG9wID0gdGhpcy5pbmRleDsKfTsKClNlcmlhbGl6ZXIucG9pbnRlci5wcm90b3R5cGUucG9wID0gZnVuY3Rpb24oKSB7Cgl0aGlzLnRvcCA9IHRoaXMuc3RhY2sucG9wKCk7Cn07CgpTZXJpYWxpemVyLnBvaW50ZXIucHJvdG90eXBlLnJlYWRTdHJpbmcgPSBmdW5jdGlvbih2aWV3KSB7Cgl2YXIgbGVuZ3RoID0gdmlldy5nZXRVaW50MzIodGhpcy5hZHZhbmNlKDQpLCB0cnVlKTsKCXZhciBieXRlcyA9IFtdOwoJZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkgewoJCWJ5dGVzLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZSh2aWV3LmdldFVpbnQ4KHRoaXMuYWR2YW5jZSgxKSkpKTsKCX0KCXJldHVybiBieXRlcy5qb2luKCcnKTsKfTsK"></script>
<script src="data:@file/javascript;base64,ZnVuY3Rpb24gQVJNQ29yZSgpIHsKCXRoaXMuaW5oZXJpdCgpOwoJdGhpcy5TUCA9IDEzOwoJdGhpcy5MUiA9IDE0OwoJdGhpcy5QQyA9IDE1OwoKCXRoaXMuTU9ERV9BUk0gPSAwOwoJdGhpcy5NT0RFX1RIVU1CID0gMTsKCgl0aGlzLk1PREVfVVNFUiA9IDB4MTA7Cgl0aGlzLk1PREVfRklRID0gMHgxMTsKCXRoaXMuTU9ERV9JUlEgPSAweDEyOwoJdGhpcy5NT0RFX1NVUEVSVklTT1IgPSAweDEzOwoJdGhpcy5NT0RFX0FCT1JUID0gMHgxNzsKCXRoaXMuTU9ERV9VTkRFRklORUQgPSAweDFCOwoJdGhpcy5NT0RFX1NZU1RFTSA9IDB4MUY7CgoJdGhpcy5CQU5LX05PTkUgPSAwCgl0aGlzLkJBTktfRklRID0gMTsKCXRoaXMuQkFOS19JUlEgPSAyOwoJdGhpcy5CQU5LX1NVUEVSVklTT1IgPSAzOwoJdGhpcy5CQU5LX0FCT1JUID0gNDsKCXRoaXMuQkFOS19VTkRFRklORUQgPSA1OwoKCXRoaXMuVU5BTExPQ19NQVNLID0gMHgwRkZGRkYwMDsKCXRoaXMuVVNFUl9NQVNLID0gMHhGMDAwMDAwMDsKCXRoaXMuUFJJVl9NQVNLID0gMHgwMDAwMDBDRjsgLy8gVGhpcyBpcyBvdXQgb2Ygc3BlYywgYnV0IGl0IHNlZW1zIHRvIGJlIHdoYXQncyBkb25lIGluIG90aGVyIGltcGxlbWVudGF0aW9ucwoJdGhpcy5TVEFURV9NQVNLID0gMHgwMDAwMDAyMDsKCgl0aGlzLldPUkRfU0laRV9BUk0gPSA0OwoJdGhpcy5XT1JEX1NJWkVfVEhVTUIgPSAyOwoKCXRoaXMuQkFTRV9SRVNFVCA9IDB4MDAwMDAwMDA7Cgl0aGlzLkJBU0VfVU5ERUYgPSAweDAwMDAwMDA0OwoJdGhpcy5CQVNFX1NXSSA9IDB4MDAwMDAwMDg7Cgl0aGlzLkJBU0VfUEFCVCA9IDB4MDAwMDAwMEM7Cgl0aGlzLkJBU0VfREFCVCA9IDB4MDAwMDAwMTA7Cgl0aGlzLkJBU0VfSVJRID0gMHgwMDAwMDAxODsKCXRoaXMuQkFTRV9GSVEgPSAweDAwMDAwMDFDOwoKCXRoaXMuYXJtQ29tcGlsZXIgPSBuZXcgQVJNQ29yZUFybSh0aGlzKTsKCXRoaXMudGh1bWJDb21waWxlciA9IG5ldyBBUk1Db3JlVGh1bWIodGhpcyk7Cgl0aGlzLmdlbmVyYXRlQ29uZHMoKTsKCgl0aGlzLmdwcnMgPSBuZXcgSW50MzJBcnJheSgxNik7Cn07CgpBUk1Db3JlLnByb3RvdHlwZS5yZXNldENQVSA9IGZ1bmN0aW9uKHN0YXJ0T2Zmc2V0KSB7Cglmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuUEM7ICsraSkgewoJCXRoaXMuZ3Byc1tpXSA9IDA7Cgl9Cgl0aGlzLmdwcnNbdGhpcy5QQ10gPSBzdGFydE9mZnNldCArIHRoaXMuV09SRF9TSVpFX0FSTTsKCgl0aGlzLmxvYWRJbnN0cnVjdGlvbiA9IHRoaXMubG9hZEluc3RydWN0aW9uQXJtOwoJdGhpcy5leGVjTW9kZSA9IHRoaXMuTU9ERV9BUk07Cgl0aGlzLmluc3RydWN0aW9uV2lkdGggPSB0aGlzLldPUkRfU0laRV9BUk07CgoJdGhpcy5tb2RlID0gdGhpcy5NT0RFX1NZU1RFTTsKCgl0aGlzLmNwc3JJID0gZmFsc2U7Cgl0aGlzLmNwc3JGID0gZmFsc2U7CgoJdGhpcy5jcHNyViA9IGZhbHNlOwoJdGhpcy5jcHNyQyA9IGZhbHNlOwoJdGhpcy5jcHNyWiA9IGZhbHNlOwoJdGhpcy5jcHNyTiA9IGZhbHNlOwoKCXRoaXMuYmFua2VkUmVnaXN0ZXJzID0gWwoJCW5ldyBJbnQzMkFycmF5KDcpLAoJCW5ldyBJbnQzMkFycmF5KDcpLAoJCW5ldyBJbnQzMkFycmF5KDIpLAoJCW5ldyBJbnQzMkFycmF5KDIpLAoJCW5ldyBJbnQzMkFycmF5KDIpLAoJCW5ldyBJbnQzMkFycmF5KDIpCgldOwoJdGhpcy5zcHNyID0gMDsKCXRoaXMuYmFua2VkU1BTUnMgPSBuZXcgSW50MzJBcnJheSg2KTsKCgl0aGlzLmN5Y2xlcyA9IDA7CgoJdGhpcy5zaGlmdGVyT3BlcmFuZCA9IDA7Cgl0aGlzLnNoaWZ0ZXJDYXJyeU91dCA9IDA7CgoJdGhpcy5wYWdlID0gbnVsbDsKCXRoaXMucGFnZUlkID0gMDsKCXRoaXMucGFnZVJlZ2lvbiA9IC0xOwoKCXRoaXMuaW5zdHJ1Y3Rpb24gPSBudWxsOwoKCXRoaXMuaXJxLmNsZWFyKCk7CgoJdmFyIGdwcnMgPSB0aGlzLmdwcnM7Cgl2YXIgbW11ID0gdGhpcy5tbXU7Cgl0aGlzLnN0ZXAgPSBmdW5jdGlvbigpIHsKCQl2YXIgaW5zdHJ1Y3Rpb24gPSB0aGlzLmluc3RydWN0aW9uIHx8ICh0aGlzLmluc3RydWN0aW9uID0gdGhpcy5sb2FkSW5zdHJ1Y3Rpb24oZ3Byc1t0aGlzLlBDXSAtIHRoaXMuaW5zdHJ1Y3Rpb25XaWR0aCkpOwoJCWdwcnNbdGhpcy5QQ10gKz0gdGhpcy5pbnN0cnVjdGlvbldpZHRoOwoJCXRoaXMuY29uZGl0aW9uUGFzc2VkID0gdHJ1ZTsKCQlpbnN0cnVjdGlvbigpOwoKCQlpZiAoIWluc3RydWN0aW9uLndyaXRlc1BDKSB7CgkJCWlmICh0aGlzLmluc3RydWN0aW9uICE9IG51bGwpIHsgLy8gV2UgbWlnaHQgaGF2ZSBnb3R0ZW4gYW4gaW50ZXJydXB0IGZyb20gdGhlIGluc3RydWN0aW9uCgkJCQlpZiAoaW5zdHJ1Y3Rpb24ubmV4dCA9PSBudWxsIHx8IGluc3RydWN0aW9uLm5leHQucGFnZS5pbnZhbGlkKSB7CgkJCQkJaW5zdHJ1Y3Rpb24ubmV4dCA9IHRoaXMubG9hZEluc3RydWN0aW9uKGdwcnNbdGhpcy5QQ10gLSB0aGlzLmluc3RydWN0aW9uV2lkdGgpOwoJCQkJfQoJCQkJdGhpcy5pbnN0cnVjdGlvbiA9IGluc3RydWN0aW9uLm5leHQ7CgkJCX0KCQl9IGVsc2UgewoJCQlpZiAodGhpcy5jb25kaXRpb25QYXNzZWQpIHsKCQkJCXZhciBwYyA9IGdwcnNbdGhpcy5QQ10gJj0gMHhGRkZGRkZGRTsKCQkJCWlmICh0aGlzLmV4ZWNNb2RlID09IHRoaXMuTU9ERV9BUk0pIHsKCQkJCQltbXUud2FpdDMyKHBjKTsKCQkJCQltbXUud2FpdFByZWZldGNoMzIocGMpOwoJCQkJfSBlbHNlIHsKCQkJCQltbXUud2FpdChwYyk7CgkJCQkJbW11LndhaXRQcmVmZXRjaChwYyk7CgkJCQl9CgkJCQlncHJzW3RoaXMuUENdICs9IHRoaXMuaW5zdHJ1Y3Rpb25XaWR0aDsKCQkJCWlmICghaW5zdHJ1Y3Rpb24uZml4ZWRKdW1wKSB7CgkJCQkJdGhpcy5pbnN0cnVjdGlvbiA9IG51bGw7CgkJCQl9IGVsc2UgaWYgICh0aGlzLmluc3RydWN0aW9uICE9IG51bGwpIHsKCQkJCQlpZiAoaW5zdHJ1Y3Rpb24ubmV4dCA9PSBudWxsIHx8IGluc3RydWN0aW9uLm5leHQucGFnZS5pbnZhbGlkKSB7CgkJCQkJCWluc3RydWN0aW9uLm5leHQgPSB0aGlzLmxvYWRJbnN0cnVjdGlvbihncHJzW3RoaXMuUENdIC0gdGhpcy5pbnN0cnVjdGlvbldpZHRoKTsKCQkJCQl9CgkJCQkJdGhpcy5pbnN0cnVjdGlvbiA9IGluc3RydWN0aW9uLm5leHQ7CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQl0aGlzLmluc3RydWN0aW9uID0gbnVsbDsKCQkJfQoJCX0KCQl0aGlzLmlycS51cGRhdGVUaW1lcnMoKTsKCX07Cn07CgpBUk1Db3JlLnByb3RvdHlwZS5mcmVlemUgPSBmdW5jdGlvbigpIHsKCXJldHVybiB7CgkJJ2dwcnMnOiBbCgkJCXRoaXMuZ3Byc1swXSwKCQkJdGhpcy5ncHJzWzFdLAoJCQl0aGlzLmdwcnNbMl0sCgkJCXRoaXMuZ3Byc1szXSwKCQkJdGhpcy5ncHJzWzRdLAoJCQl0aGlzLmdwcnNbNV0sCgkJCXRoaXMuZ3Byc1s2XSwKCQkJdGhpcy5ncHJzWzddLAoJCQl0aGlzLmdwcnNbOF0sCgkJCXRoaXMuZ3Byc1s5XSwKCQkJdGhpcy5ncHJzWzEwXSwKCQkJdGhpcy5ncHJzWzExXSwKCQkJdGhpcy5ncHJzWzEyXSwKCQkJdGhpcy5ncHJzWzEzXSwKCQkJdGhpcy5ncHJzWzE0XSwKCQkJdGhpcy5ncHJzWzE1XSwKCQldLAoJCSdtb2RlJzogdGhpcy5tb2RlLAoJCSdjcHNySSc6IHRoaXMuY3BzckksCgkJJ2Nwc3JGJzogdGhpcy5jcHNyRiwKCQknY3BzclYnOiB0aGlzLmNwc3JWLAoJCSdjcHNyQyc6IHRoaXMuY3BzckMsCgkJJ2Nwc3JaJzogdGhpcy5jcHNyWiwKCQknY3Bzck4nOiB0aGlzLmNwc3JOLAoJCSdiYW5rZWRSZWdpc3RlcnMnOiBbCgkJCVsKCQkJCXRoaXMuYmFua2VkUmVnaXN0ZXJzWzBdWzBdLAoJCQkJdGhpcy5iYW5rZWRSZWdpc3RlcnNbMF1bMV0sCgkJCQl0aGlzLmJhbmtlZFJlZ2lzdGVyc1swXVsyXSwKCQkJCXRoaXMuYmFua2VkUmVnaXN0ZXJzWzBdWzNdLAoJCQkJdGhpcy5iYW5rZWRSZWdpc3RlcnNbMF1bNF0sCgkJCQl0aGlzLmJhbmtlZFJlZ2lzdGVyc1swXVs1XSwKCQkJCXRoaXMuYmFua2VkUmVnaXN0ZXJzWzBdWzZdCgkJCV0sCgkJCVsKCQkJCXRoaXMuYmFua2VkUmVnaXN0ZXJzWzFdWzBdLAoJCQkJdGhpcy5iYW5rZWRSZWdpc3RlcnNbMV1bMV0sCgkJCQl0aGlzLmJhbmtlZFJlZ2lzdGVyc1sxXVsyXSwKCQkJCXRoaXMuYmFua2VkUmVnaXN0ZXJzWzFdWzNdLAoJCQkJdGhpcy5iYW5rZWRSZWdpc3RlcnNbMV1bNF0sCgkJCQl0aGlzLmJhbmtlZFJlZ2lzdGVyc1sxXVs1XSwKCQkJCXRoaXMuYmFua2VkUmVnaXN0ZXJzWzFdWzZdCgkJCV0sCgkJCVsKCQkJCXRoaXMuYmFua2VkUmVnaXN0ZXJzWzJdWzBdLAoJCQkJdGhpcy5iYW5rZWRSZWdpc3RlcnNbMl1bMV0KCQkJXSwKCQkJWwoJCQkJdGhpcy5iYW5rZWRSZWdpc3RlcnNbM11bMF0sCgkJCQl0aGlzLmJhbmtlZFJlZ2lzdGVyc1szXVsxXQoJCQldLAoJCQlbCgkJCQl0aGlzLmJhbmtlZFJlZ2lzdGVyc1s0XVswXSwKCQkJCXRoaXMuYmFua2VkUmVnaXN0ZXJzWzRdWzFdCgkJCV0sCgkJCVsKCQkJCXRoaXMuYmFua2VkUmVnaXN0ZXJzWzVdWzBdLAoJCQkJdGhpcy5iYW5rZWRSZWdpc3RlcnNbNV1bMV0KCQkJXQoJCV0sCgkJJ3Nwc3InOiB0aGlzLnNwc3IsCgkJJ2JhbmtlZFNQU1JzJzogWwoJCQl0aGlzLmJhbmtlZFNQU1JzWzBdLAoJCQl0aGlzLmJhbmtlZFNQU1JzWzFdLAoJCQl0aGlzLmJhbmtlZFNQU1JzWzJdLAoJCQl0aGlzLmJhbmtlZFNQU1JzWzNdLAoJCQl0aGlzLmJhbmtlZFNQU1JzWzRdLAoJCQl0aGlzLmJhbmtlZFNQU1JzWzVdCgkJXSwKCQknY3ljbGVzJzogdGhpcy5jeWNsZXMKCX07Cn07CgpBUk1Db3JlLnByb3RvdHlwZS5kZWZyb3N0ID0gZnVuY3Rpb24oZnJvc3QpIHsKCXRoaXMuaW5zdHJ1Y3Rpb24gPSBudWxsOwoKCXRoaXMucGFnZSA9IG51bGw7Cgl0aGlzLnBhZ2VJZCA9IDA7Cgl0aGlzLnBhZ2VSZWdpb24gPSAtMTsKCgl0aGlzLmdwcnNbMF0gPSBmcm9zdC5ncHJzWzBdOwoJdGhpcy5ncHJzWzFdID0gZnJvc3QuZ3Byc1sxXTsKCXRoaXMuZ3Byc1syXSA9IGZyb3N0LmdwcnNbMl07Cgl0aGlzLmdwcnNbM10gPSBmcm9zdC5ncHJzWzNdOwoJdGhpcy5ncHJzWzRdID0gZnJvc3QuZ3Byc1s0XTsKCXRoaXMuZ3Byc1s1XSA9IGZyb3N0LmdwcnNbNV07Cgl0aGlzLmdwcnNbNl0gPSBmcm9zdC5ncHJzWzZdOwoJdGhpcy5ncHJzWzddID0gZnJvc3QuZ3Byc1s3XTsKCXRoaXMuZ3Byc1s4XSA9IGZyb3N0LmdwcnNbOF07Cgl0aGlzLmdwcnNbOV0gPSBmcm9zdC5ncHJzWzldOwoJdGhpcy5ncHJzWzEwXSA9IGZyb3N0LmdwcnNbMTBdOwoJdGhpcy5ncHJzWzExXSA9IGZyb3N0LmdwcnNbMTFdOwoJdGhpcy5ncHJzWzEyXSA9IGZyb3N0LmdwcnNbMTJdOwoJdGhpcy5ncHJzWzEzXSA9IGZyb3N0LmdwcnNbMTNdOwoJdGhpcy5ncHJzWzE0XSA9IGZyb3N0LmdwcnNbMTRdOwoJdGhpcy5ncHJzWzE1XSA9IGZyb3N0LmdwcnNbMTVdOwoKCXRoaXMubW9kZSA9IGZyb3N0Lm1vZGU7Cgl0aGlzLmNwc3JJID0gZnJvc3QuY3Bzckk7Cgl0aGlzLmNwc3JGID0gZnJvc3QuY3BzckY7Cgl0aGlzLmNwc3JWID0gZnJvc3QuY3BzclY7Cgl0aGlzLmNwc3JDID0gZnJvc3QuY3BzckM7Cgl0aGlzLmNwc3JaID0gZnJvc3QuY3Bzclo7Cgl0aGlzLmNwc3JOID0gZnJvc3QuY3Bzck47CgoJdGhpcy5iYW5rZWRSZWdpc3RlcnNbMF1bMF0gPSBmcm9zdC5iYW5rZWRSZWdpc3RlcnNbMF1bMF07Cgl0aGlzLmJhbmtlZFJlZ2lzdGVyc1swXVsxXSA9IGZyb3N0LmJhbmtlZFJlZ2lzdGVyc1swXVsxXTsKCXRoaXMuYmFua2VkUmVnaXN0ZXJzWzBdWzJdID0gZnJvc3QuYmFua2VkUmVnaXN0ZXJzWzBdWzJdOwoJdGhpcy5iYW5rZWRSZWdpc3RlcnNbMF1bM10gPSBmcm9zdC5iYW5rZWRSZWdpc3RlcnNbMF1bM107Cgl0aGlzLmJhbmtlZFJlZ2lzdGVyc1swXVs0XSA9IGZyb3N0LmJhbmtlZFJlZ2lzdGVyc1swXVs0XTsKCXRoaXMuYmFua2VkUmVnaXN0ZXJzWzBdWzVdID0gZnJvc3QuYmFua2VkUmVnaXN0ZXJzWzBdWzVdOwoJdGhpcy5iYW5rZWRSZWdpc3RlcnNbMF1bNl0gPSBmcm9zdC5iYW5rZWRSZWdpc3RlcnNbMF1bNl07CgoJdGhpcy5iYW5rZWRSZWdpc3RlcnNbMV1bMF0gPSBmcm9zdC5iYW5rZWRSZWdpc3RlcnNbMV1bMF07Cgl0aGlzLmJhbmtlZFJlZ2lzdGVyc1sxXVsxXSA9IGZyb3N0LmJhbmtlZFJlZ2lzdGVyc1sxXVsxXTsKCXRoaXMuYmFua2VkUmVnaXN0ZXJzWzFdWzJdID0gZnJvc3QuYmFua2VkUmVnaXN0ZXJzWzFdWzJdOwoJdGhpcy5iYW5rZWRSZWdpc3RlcnNbMV1bM10gPSBmcm9zdC5iYW5rZWRSZWdpc3RlcnNbMV1bM107Cgl0aGlzLmJhbmtlZFJlZ2lzdGVyc1sxXVs0XSA9IGZyb3N0LmJhbmtlZFJlZ2lzdGVyc1sxXVs0XTsKCXRoaXMuYmFua2VkUmVnaXN0ZXJzWzFdWzVdID0gZnJvc3QuYmFua2VkUmVnaXN0ZXJzWzFdWzVdOwoJdGhpcy5iYW5rZWRSZWdpc3RlcnNbMV1bNl0gPSBmcm9zdC5iYW5rZWRSZWdpc3RlcnNbMV1bNl07CgoJdGhpcy5iYW5rZWRSZWdpc3RlcnNbMl1bMF0gPSBmcm9zdC5iYW5rZWRSZWdpc3RlcnNbMl1bMF07Cgl0aGlzLmJhbmtlZFJlZ2lzdGVyc1syXVsxXSA9IGZyb3N0LmJhbmtlZFJlZ2lzdGVyc1syXVsxXTsKCgl0aGlzLmJhbmtlZFJlZ2lzdGVyc1szXVswXSA9IGZyb3N0LmJhbmtlZFJlZ2lzdGVyc1szXVswXTsKCXRoaXMuYmFua2VkUmVnaXN0ZXJzWzNdWzFdID0gZnJvc3QuYmFua2VkUmVnaXN0ZXJzWzNdWzFdOwoKCXRoaXMuYmFua2VkUmVnaXN0ZXJzWzRdWzBdID0gZnJvc3QuYmFua2VkUmVnaXN0ZXJzWzRdWzBdOwoJdGhpcy5iYW5rZWRSZWdpc3RlcnNbNF1bMV0gPSBmcm9zdC5iYW5rZWRSZWdpc3RlcnNbNF1bMV07CgoJdGhpcy5iYW5rZWRSZWdpc3RlcnNbNV1bMF0gPSBmcm9zdC5iYW5rZWRSZWdpc3RlcnNbNV1bMF07Cgl0aGlzLmJhbmtlZFJlZ2lzdGVyc1s1XVsxXSA9IGZyb3N0LmJhbmtlZFJlZ2lzdGVyc1s1XVsxXTsKCgl0aGlzLnNwc3IgPSBmcm9zdC5zcHNyOwoJdGhpcy5iYW5rZWRTUFNSc1swXSA9IGZyb3N0LmJhbmtlZFNQU1JzWzBdOwoJdGhpcy5iYW5rZWRTUFNSc1sxXSA9IGZyb3N0LmJhbmtlZFNQU1JzWzFdOwoJdGhpcy5iYW5rZWRTUFNSc1syXSA9IGZyb3N0LmJhbmtlZFNQU1JzWzJdOwoJdGhpcy5iYW5rZWRTUFNSc1szXSA9IGZyb3N0LmJhbmtlZFNQU1JzWzNdOwoJdGhpcy5iYW5rZWRTUFNSc1s0XSA9IGZyb3N0LmJhbmtlZFNQU1JzWzRdOwoJdGhpcy5iYW5rZWRTUFNSc1s1XSA9IGZyb3N0LmJhbmtlZFNQU1JzWzVdOwoKCXRoaXMuY3ljbGVzID0gZnJvc3QuY3ljbGVzOwp9OwoKQVJNQ29yZS5wcm90b3R5cGUuZmV0Y2hQYWdlID0gZnVuY3Rpb24oYWRkcmVzcykgewoJdmFyIHJlZ2lvbiA9IGFkZHJlc3MgPj4gdGhpcy5tbXUuQkFTRV9PRkZTRVQ7Cgl2YXIgcGFnZUlkID0gdGhpcy5tbXUuYWRkcmVzc1RvUGFnZShyZWdpb24sIGFkZHJlc3MgJiB0aGlzLm1tdS5PRkZTRVRfTUFTSyk7CglpZiAocmVnaW9uID09IHRoaXMucGFnZVJlZ2lvbikgewoJCWlmIChwYWdlSWQgPT0gdGhpcy5wYWdlSWQgJiYgIXRoaXMucGFnZS5pbnZhbGlkKSB7CgkJCXJldHVybjsKCQl9CgkJdGhpcy5wYWdlSWQgPSBwYWdlSWQ7Cgl9IGVsc2UgewoJCXRoaXMucGFnZU1hc2sgPSB0aGlzLm1tdS5tZW1vcnlbcmVnaW9uXS5QQUdFX01BU0s7CgkJdGhpcy5wYWdlUmVnaW9uID0gcmVnaW9uOwoJCXRoaXMucGFnZUlkID0gcGFnZUlkOwoJfQoKCXRoaXMucGFnZSA9IHRoaXMubW11LmFjY2Vzc1BhZ2UocmVnaW9uLCBwYWdlSWQpOwp9OwoKQVJNQ29yZS5wcm90b3R5cGUubG9hZEluc3RydWN0aW9uQXJtID0gZnVuY3Rpb24oYWRkcmVzcykgewoJdmFyIG5leHQgPSBudWxsOwoJdGhpcy5mZXRjaFBhZ2UoYWRkcmVzcyk7Cgl2YXIgb2Zmc2V0ID0gKGFkZHJlc3MgJiB0aGlzLnBhZ2VNYXNrKSA+PiAyOwoJbmV4dCA9IHRoaXMucGFnZS5hcm1bb2Zmc2V0XTsKCWlmIChuZXh0KSB7CgkJcmV0dXJuIG5leHQ7Cgl9Cgl2YXIgaW5zdHJ1Y3Rpb24gPSB0aGlzLm1tdS5sb2FkMzIoYWRkcmVzcykgPj4+IDA7CgluZXh0ID0gdGhpcy5jb21waWxlQXJtKGluc3RydWN0aW9uKTsKCW5leHQubmV4dCA9IG51bGw7CgluZXh0LnBhZ2UgPSB0aGlzLnBhZ2U7CgluZXh0LmFkZHJlc3MgPSBhZGRyZXNzOwoJbmV4dC5vcGNvZGUgPSBpbnN0cnVjdGlvbjsKCXRoaXMucGFnZS5hcm1bb2Zmc2V0XSA9IG5leHQ7CglyZXR1cm4gbmV4dDsKfTsKCkFSTUNvcmUucHJvdG90eXBlLmxvYWRJbnN0cnVjdGlvblRodW1iID0gZnVuY3Rpb24oYWRkcmVzcykgewoJdmFyIG5leHQgPSBudWxsOwoJdGhpcy5mZXRjaFBhZ2UoYWRkcmVzcyk7Cgl2YXIgb2Zmc2V0ID0gKGFkZHJlc3MgJiB0aGlzLnBhZ2VNYXNrKSA+PiAxOwoJbmV4dCA9IHRoaXMucGFnZS50aHVtYltvZmZzZXRdOwoJaWYgKG5leHQpIHsKCQlyZXR1cm4gbmV4dDsKCX0KCXZhciBpbnN0cnVjdGlvbiA9IHRoaXMubW11LmxvYWQxNihhZGRyZXNzKTsKCW5leHQgPSB0aGlzLmNvbXBpbGVUaHVtYihpbnN0cnVjdGlvbik7CgluZXh0Lm5leHQgPSBudWxsOwoJbmV4dC5wYWdlID0gdGhpcy5wYWdlOwoJbmV4dC5hZGRyZXNzID0gYWRkcmVzczsKCW5leHQub3Bjb2RlID0gaW5zdHJ1Y3Rpb247Cgl0aGlzLnBhZ2UudGh1bWJbb2Zmc2V0XSA9IG5leHQ7CglyZXR1cm4gbmV4dDsKfTsKCkFSTUNvcmUucHJvdG90eXBlLnNlbGVjdEJhbmsgPSBmdW5jdGlvbihtb2RlKSB7Cglzd2l0Y2ggKG1vZGUpIHsKCWNhc2UgdGhpcy5NT0RFX1VTRVI6CgljYXNlIHRoaXMuTU9ERV9TWVNURU06CgkJLy8gTm8gYmFua2VkIHJlZ2lzdGVycwoJCXJldHVybiB0aGlzLkJBTktfTk9ORTsKCWNhc2UgdGhpcy5NT0RFX0ZJUToKCQlyZXR1cm4gdGhpcy5CQU5LX0ZJUTsKCWNhc2UgdGhpcy5NT0RFX0lSUToKCQlyZXR1cm4gdGhpcy5CQU5LX0lSUTsKCWNhc2UgdGhpcy5NT0RFX1NVUEVSVklTT1I6CgkJcmV0dXJuIHRoaXMuQkFOS19TVVBFUlZJU09SOwoJY2FzZSB0aGlzLk1PREVfQUJPUlQ6CgkJcmV0dXJuIHRoaXMuQkFOS19BQk9SVDsKCWNhc2UgdGhpcy5NT0RFX1VOREVGSU5FRDoKCQlyZXR1cm4gdGhpcy5CQU5LX1VOREVGSU5FRDsKCWRlZmF1bHQ6CgkJdGhyb3cgIkludmFsaWQgdXNlciBtb2RlIHBhc3NlZCB0byBzZWxlY3RCYW5rIjsKCX0KfTsKCkFSTUNvcmUucHJvdG90eXBlLnN3aXRjaEV4ZWNNb2RlID0gZnVuY3Rpb24obmV3TW9kZSkgewoJaWYgKHRoaXMuZXhlY01vZGUgIT0gbmV3TW9kZSkgewoJCXRoaXMuZXhlY01vZGUgPSBuZXdNb2RlOwoJCWlmIChuZXdNb2RlID09IHRoaXMuTU9ERV9BUk0pIHsKCQkJdGhpcy5pbnN0cnVjdGlvbldpZHRoID0gdGhpcy5XT1JEX1NJWkVfQVJNOwoJCQl0aGlzLmxvYWRJbnN0cnVjdGlvbiA9IHRoaXMubG9hZEluc3RydWN0aW9uQXJtOwoJCX0gZWxzZSB7CgkJCXRoaXMuaW5zdHJ1Y3Rpb25XaWR0aCA9IHRoaXMuV09SRF9TSVpFX1RIVU1COwoJCQl0aGlzLmxvYWRJbnN0cnVjdGlvbiA9IHRoaXMubG9hZEluc3RydWN0aW9uVGh1bWI7CgkJfQoJfQoJCn07CgpBUk1Db3JlLnByb3RvdHlwZS5zd2l0Y2hNb2RlID0gZnVuY3Rpb24obmV3TW9kZSkgewoJaWYgKG5ld01vZGUgPT0gdGhpcy5tb2RlKSB7CgkJLy8gTm90IHN3aXRjaGluZyBtb2RlcyBhZnRlciBhbGwKCQlyZXR1cm47Cgl9CglpZiAobmV3TW9kZSAhPSB0aGlzLk1PREVfVVNFUiB8fCBuZXdNb2RlICE9IHRoaXMuTU9ERV9TWVNURU0pIHsKCQkvLyBTd2l0Y2ggYmFua2VkIHJlZ2lzdGVycwoJCXZhciBuZXdCYW5rID0gdGhpcy5zZWxlY3RCYW5rKG5ld01vZGUpOwoJCXZhciBvbGRCYW5rID0gdGhpcy5zZWxlY3RCYW5rKHRoaXMubW9kZSk7CgkJaWYgKG5ld0JhbmsgIT0gb2xkQmFuaykgewoJCQkvLyBUT0RPOiBzdXBwb3J0IEZJUQoJCQlpZiAobmV3TW9kZSA9PSB0aGlzLk1PREVfRklRIHx8IHRoaXMubW9kZSA9PSB0aGlzLk1PREVfRklRKSB7CgkJCQl2YXIgb2xkRmlxQmFuayA9IChvbGRCYW5rID09IHRoaXMuQkFOS19GSVEpICsgMDsKCQkJCXZhciBuZXdGaXFCYW5rID0gKG5ld0JhbmsgPT0gdGhpcy5CQU5LX0ZJUSkgKyAwOwoJCQkJdGhpcy5iYW5rZWRSZWdpc3RlcnNbb2xkRmlxQmFua11bMl0gPSB0aGlzLmdwcnNbOF07CgkJCQl0aGlzLmJhbmtlZFJlZ2lzdGVyc1tvbGRGaXFCYW5rXVszXSA9IHRoaXMuZ3Byc1s5XTsKCQkJCXRoaXMuYmFua2VkUmVnaXN0ZXJzW29sZEZpcUJhbmtdWzRdID0gdGhpcy5ncHJzWzEwXTsKCQkJCXRoaXMuYmFua2VkUmVnaXN0ZXJzW29sZEZpcUJhbmtdWzVdID0gdGhpcy5ncHJzWzExXTsKCQkJCXRoaXMuYmFua2VkUmVnaXN0ZXJzW29sZEZpcUJhbmtdWzZdID0gdGhpcy5ncHJzWzEyXTsKCQkJCXRoaXMuZ3Byc1s4XSA9IHRoaXMuYmFua2VkUmVnaXN0ZXJzW25ld0ZpcUJhbmtdWzJdOwoJCQkJdGhpcy5ncHJzWzldID0gdGhpcy5iYW5rZWRSZWdpc3RlcnNbbmV3RmlxQmFua11bM107CgkJCQl0aGlzLmdwcnNbMTBdID0gdGhpcy5iYW5rZWRSZWdpc3RlcnNbbmV3RmlxQmFua11bNF07CgkJCQl0aGlzLmdwcnNbMTFdID0gdGhpcy5iYW5rZWRSZWdpc3RlcnNbbmV3RmlxQmFua11bNV07CgkJCQl0aGlzLmdwcnNbMTJdID0gdGhpcy5iYW5rZWRSZWdpc3RlcnNbbmV3RmlxQmFua11bNl07CgkJCX0KCQkJdGhpcy5iYW5rZWRSZWdpc3RlcnNbb2xkQmFua11bMF0gPSB0aGlzLmdwcnNbdGhpcy5TUF07CgkJCXRoaXMuYmFua2VkUmVnaXN0ZXJzW29sZEJhbmtdWzFdID0gdGhpcy5ncHJzW3RoaXMuTFJdOwoJCQl0aGlzLmdwcnNbdGhpcy5TUF0gPSB0aGlzLmJhbmtlZFJlZ2lzdGVyc1tuZXdCYW5rXVswXTsKCQkJdGhpcy5ncHJzW3RoaXMuTFJdID0gdGhpcy5iYW5rZWRSZWdpc3RlcnNbbmV3QmFua11bMV07CgoJCQl0aGlzLmJhbmtlZFNQU1JzW29sZEJhbmtdID0gdGhpcy5zcHNyOwoJCQl0aGlzLnNwc3IgPSB0aGlzLmJhbmtlZFNQU1JzW25ld0JhbmtdOwoJCX0KCX0KCXRoaXMubW9kZSA9IG5ld01vZGU7Cn07CgpBUk1Db3JlLnByb3RvdHlwZS5wYWNrQ1BTUiA9IGZ1bmN0aW9uKCkgewoJcmV0dXJuIHRoaXMubW9kZSB8ICghIXRoaXMuZXhlY01vZGUgPDwgNSkgfCAoISF0aGlzLmNwc3JGIDw8IDYpIHwgKCEhdGhpcy5jcHNySSA8PCA3KSB8CgkgICAgICAgKCEhdGhpcy5jcHNyTiA8PCAzMSkgfCAoISF0aGlzLmNwc3JaIDw8IDMwKSB8ICghIXRoaXMuY3BzckMgPDwgMjkpIHwgKCEhdGhpcy5jcHNyViA8PCAyOCk7Cn07CgpBUk1Db3JlLnByb3RvdHlwZS51bnBhY2tDUFNSID0gZnVuY3Rpb24oc3BzcikgewoJdGhpcy5zd2l0Y2hNb2RlKHNwc3IgJiAweDAwMDAwMDFGKTsKCXRoaXMuc3dpdGNoRXhlY01vZGUoISEoc3BzciAmIDB4MDAwMDAwMjApKTsKCXRoaXMuY3BzckYgPSBzcHNyICYgMHgwMDAwMDA0MDsKCXRoaXMuY3BzckkgPSBzcHNyICYgMHgwMDAwMDA4MDsKCXRoaXMuY3Bzck4gPSBzcHNyICYgMHg4MDAwMDAwMDsKCXRoaXMuY3BzclogPSBzcHNyICYgMHg0MDAwMDAwMDsKCXRoaXMuY3BzckMgPSBzcHNyICYgMHgyMDAwMDAwMDsKCXRoaXMuY3BzclYgPSBzcHNyICYgMHgxMDAwMDAwMDsKCgl0aGlzLmlycS50ZXN0SVJRKCk7Cn07CgpBUk1Db3JlLnByb3RvdHlwZS5oYXNTUFNSID0gZnVuY3Rpb24oKSB7CglyZXR1cm4gdGhpcy5tb2RlICE9IHRoaXMuTU9ERV9TWVNURU0gJiYgdGhpcy5tb2RlICE9IHRoaXMuTU9ERV9VU0VSOwp9OwoKQVJNQ29yZS5wcm90b3R5cGUucmFpc2VJUlEgPSBmdW5jdGlvbigpIHsKCWlmICh0aGlzLmNwc3JJKSB7CgkJcmV0dXJuOwoJfQoJdmFyIGNwc3IgPSB0aGlzLnBhY2tDUFNSKCk7Cgl2YXIgaW5zdHJ1Y3Rpb25XaWR0aCA9IHRoaXMuaW5zdHJ1Y3Rpb25XaWR0aDsKCXRoaXMuc3dpdGNoTW9kZSh0aGlzLk1PREVfSVJRKTsKCXRoaXMuc3BzciA9IGNwc3I7Cgl0aGlzLmdwcnNbdGhpcy5MUl0gPSB0aGlzLmdwcnNbdGhpcy5QQ10gLSBpbnN0cnVjdGlvbldpZHRoICsgNDsKCXRoaXMuZ3Byc1t0aGlzLlBDXSA9IHRoaXMuQkFTRV9JUlEgKyB0aGlzLldPUkRfU0laRV9BUk07Cgl0aGlzLmluc3RydWN0aW9uID0gbnVsbDsKCXRoaXMuc3dpdGNoRXhlY01vZGUodGhpcy5NT0RFX0FSTSk7Cgl0aGlzLmNwc3JJID0gdHJ1ZTsKfTsKCkFSTUNvcmUucHJvdG90eXBlLnJhaXNlVHJhcCA9IGZ1bmN0aW9uKCkgewoJdmFyIGNwc3IgPSB0aGlzLnBhY2tDUFNSKCk7Cgl2YXIgaW5zdHJ1Y3Rpb25XaWR0aCA9IHRoaXMuaW5zdHJ1Y3Rpb25XaWR0aDsKCXRoaXMuc3dpdGNoTW9kZSh0aGlzLk1PREVfU1VQRVJWSVNPUik7Cgl0aGlzLnNwc3IgPSBjcHNyOwoJdGhpcy5ncHJzW3RoaXMuTFJdID0gdGhpcy5ncHJzW3RoaXMuUENdIC0gaW5zdHJ1Y3Rpb25XaWR0aDsKCXRoaXMuZ3Byc1t0aGlzLlBDXSA9IHRoaXMuQkFTRV9TV0kgKyB0aGlzLldPUkRfU0laRV9BUk07Cgl0aGlzLmluc3RydWN0aW9uID0gbnVsbDsKCXRoaXMuc3dpdGNoRXhlY01vZGUodGhpcy5NT0RFX0FSTSk7Cgl0aGlzLmNwc3JJID0gdHJ1ZTsKfTsKCkFSTUNvcmUucHJvdG90eXBlLmJhZE9wID0gZnVuY3Rpb24oaW5zdHJ1Y3Rpb24pIHsKCXZhciBmdW5jID0gZnVuY3Rpb24oKSB7CgkJdGhyb3cgIklsbGVnYWwgaW5zdHJ1Y3Rpb246IDB4IiArIGluc3RydWN0aW9uLnRvU3RyaW5nKDE2KTsKCX07CglmdW5jLndyaXRlc1BDID0gdHJ1ZTsKCWZ1bmMuZml4ZWRKdW1wID0gZmFsc2U7CglyZXR1cm4gZnVuYzsKfTsKCkFSTUNvcmUucHJvdG90eXBlLmdlbmVyYXRlQ29uZHMgPSBmdW5jdGlvbigpIHsKCXZhciBjcHUgPSB0aGlzOwoJdGhpcy5jb25kcyA9IFsKCQkvLyBFUQoJCWZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gY3B1LmNvbmRpdGlvblBhc3NlZCA9IGNwdS5jcHNyWjsKCQl9LAoJCS8vIE5FCgkJZnVuY3Rpb24oKSB7CgkJCXJldHVybiBjcHUuY29uZGl0aW9uUGFzc2VkID0gIWNwdS5jcHNyWjsKCQl9LAoJCS8vIENTCgkJZnVuY3Rpb24oKSB7CgkJCXJldHVybiBjcHUuY29uZGl0aW9uUGFzc2VkID0gY3B1LmNwc3JDOwoJCX0sCgkJLy8gQ0MKCQlmdW5jdGlvbigpIHsKCQkJcmV0dXJuIGNwdS5jb25kaXRpb25QYXNzZWQgPSAhY3B1LmNwc3JDOwoJCX0sCgkJLy8gTUkKCQlmdW5jdGlvbigpIHsKCQkJcmV0dXJuIGNwdS5jb25kaXRpb25QYXNzZWQgPSBjcHUuY3Bzck47CgkJfSwKCQkvLyBQTAoJCWZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gY3B1LmNvbmRpdGlvblBhc3NlZCA9ICFjcHUuY3Bzck47CgkJfSwKCQkvLyBWUwoJCWZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gY3B1LmNvbmRpdGlvblBhc3NlZCA9IGNwdS5jcHNyVjsKCQl9LAoJCS8vIFZDCgkJZnVuY3Rpb24oKSB7CgkJCXJldHVybiBjcHUuY29uZGl0aW9uUGFzc2VkID0gIWNwdS5jcHNyVjsKCQl9LAoJCS8vIEhJCgkJZnVuY3Rpb24gKCkgewoJCQlyZXR1cm4gY3B1LmNvbmRpdGlvblBhc3NlZCA9IGNwdS5jcHNyQyAmJiAhY3B1LmNwc3JaOwoJCX0sCgkJLy8gTFMKCQlmdW5jdGlvbiAoKSB7CgkJCXJldHVybiBjcHUuY29uZGl0aW9uUGFzc2VkID0gIWNwdS5jcHNyQyB8fCBjcHUuY3Bzclo7CgkJfSwKCQkvLyBHRQoJCWZ1bmN0aW9uICgpIHsKCQkJcmV0dXJuIGNwdS5jb25kaXRpb25QYXNzZWQgPSAhY3B1LmNwc3JOID09ICFjcHUuY3BzclY7CgkJfSwKCQkvLyBMVAoJCWZ1bmN0aW9uICgpIHsKCQkJcmV0dXJuIGNwdS5jb25kaXRpb25QYXNzZWQgPSAhY3B1LmNwc3JOICE9ICFjcHUuY3BzclY7CgkJfSwKCQkvLyBHVAoJCWZ1bmN0aW9uICgpIHsKCQkJcmV0dXJuIGNwdS5jb25kaXRpb25QYXNzZWQgPSAhY3B1LmNwc3JaICYmICFjcHUuY3Bzck4gPT0gIWNwdS5jcHNyVjsKCQl9LAoJCS8vIExFCgkJZnVuY3Rpb24gKCkgewoJCQlyZXR1cm4gY3B1LmNvbmRpdGlvblBhc3NlZCA9IGNwdS5jcHNyWiB8fCAhY3B1LmNwc3JOICE9ICFjcHUuY3BzclY7CgkJfSwKCQkvLyBBTAoJCW51bGwsCgkJbnVsbAoJXQp9CgpBUk1Db3JlLnByb3RvdHlwZS5iYXJyZWxTaGlmdEltbWVkaWF0ZSA9IGZ1bmN0aW9uKHNoaWZ0VHlwZSwgaW1tZWRpYXRlLCBybSkgewoJdmFyIGNwdSA9IHRoaXM7Cgl2YXIgZ3BycyA9IHRoaXMuZ3ByczsKCXZhciBzaGlmdE9wID0gdGhpcy5iYWRPcDsKCXN3aXRjaCAoc2hpZnRUeXBlKSB7CgljYXNlIDB4MDAwMDAwMDA6CgkJLy8gTFNMCgkJaWYgKGltbWVkaWF0ZSkgewoJCQlzaGlmdE9wID0gZnVuY3Rpb24oKSB7CgkJCQljcHUuc2hpZnRlck9wZXJhbmQgPSBncHJzW3JtXSA8PCBpbW1lZGlhdGU7CgkJCQljcHUuc2hpZnRlckNhcnJ5T3V0ID0gZ3Byc1tybV0gJiAoMSA8PCAoMzIgLSBpbW1lZGlhdGUpKTsKCQkJfTsKCQl9IGVsc2UgewoJCQkvLyBUaGlzIGJvaWxzIGRvd24gdG8gbm8gc2hpZnQKCQkJc2hpZnRPcCA9IGZ1bmN0aW9uKCkgewoJCQkJY3B1LnNoaWZ0ZXJPcGVyYW5kID0gZ3Byc1tybV07CgkJCQljcHUuc2hpZnRlckNhcnJ5T3V0ID0gY3B1LmNwc3JDOwoJCQl9OwoJCX0KCQlicmVhazsKCWNhc2UgMHgwMDAwMDAyMDoKCQkvLyBMU1IKCQlpZiAoaW1tZWRpYXRlKSB7CgkJCXNoaWZ0T3AgPSBmdW5jdGlvbigpIHsKCQkJCWNwdS5zaGlmdGVyT3BlcmFuZCA9IGdwcnNbcm1dID4+PiBpbW1lZGlhdGU7CgkJCQljcHUuc2hpZnRlckNhcnJ5T3V0ID0gZ3Byc1tybV0gJiAoMSA8PCAoaW1tZWRpYXRlIC0gMSkpOwoJCQl9OwoJCX0gZWxzZSB7CgkJCXNoaWZ0T3AgPSBmdW5jdGlvbigpIHsKCQkJCWNwdS5zaGlmdGVyT3BlcmFuZCA9IDA7CgkJCQljcHUuc2hpZnRlckNhcnJ5T3V0ID0gZ3Byc1tybV0gJiAweDgwMDAwMDAwOwoJCQl9OwoJCX0KCQlicmVhazsKCWNhc2UgMHgwMDAwMDA0MDoKCQkvLyBBU1IKCQlpZiAoaW1tZWRpYXRlKSB7CgkJCXNoaWZ0T3AgPSBmdW5jdGlvbigpIHsKCQkJCWNwdS5zaGlmdGVyT3BlcmFuZCA9IGdwcnNbcm1dID4+IGltbWVkaWF0ZTsKCQkJCWNwdS5zaGlmdGVyQ2FycnlPdXQgPSBncHJzW3JtXSAmICgxIDw8IChpbW1lZGlhdGUgLSAxKSk7CgkJCX07CgkJfSBlbHNlIHsKCQkJc2hpZnRPcCA9IGZ1bmN0aW9uKCkgewoJCQkJY3B1LnNoaWZ0ZXJDYXJyeU91dCA9IGdwcnNbcm1dICYgMHg4MDAwMDAwMDsKCQkJCWlmIChjcHUuc2hpZnRlckNhcnJ5T3V0KSB7CgkJCQkJY3B1LnNoaWZ0ZXJPcGVyYW5kID0gMHhGRkZGRkZGRjsKCQkJCX0gZWxzZSB7CgkJCQkJY3B1LnNoaWZ0ZXJPcGVyYW5kID0gMDsKCQkJCX0KCQkJfTsKCQl9CgkJYnJlYWs7CgljYXNlIDB4MDAwMDAwNjA6CgkJLy8gUk9SCgkJaWYgKGltbWVkaWF0ZSkgewoJCQlzaGlmdE9wID0gZnVuY3Rpb24oKSB7CgkJCQljcHUuc2hpZnRlck9wZXJhbmQgPSAoZ3Byc1tybV0gPj4+IGltbWVkaWF0ZSkgfCAoZ3Byc1tybV0gPDwgKDMyIC0gaW1tZWRpYXRlKSk7CgkJCQljcHUuc2hpZnRlckNhcnJ5T3V0ID0gZ3Byc1tybV0gJiAoMSA8PCAoaW1tZWRpYXRlIC0gMSkpOwoJCQl9OwoJCX0gZWxzZSB7CgkJCS8vIFJSWAoJCQlzaGlmdE9wID0gZnVuY3Rpb24oKSB7CgkJCQljcHUuc2hpZnRlck9wZXJhbmQgPSAoISFjcHUuY3BzckMgPDwgMzEpIHwgKGdwcnNbcm1dID4+PiAxKTsKCQkJCWNwdS5zaGlmdGVyQ2FycnlPdXQgPSAgZ3Byc1tybV0gJiAweDAwMDAwMDAxOwoJCQl9OwoJCX0KCQlicmVhazsKCX0KCXJldHVybiBzaGlmdE9wOwp9CgpBUk1Db3JlLnByb3RvdHlwZS5jb21waWxlQXJtID0gZnVuY3Rpb24oaW5zdHJ1Y3Rpb24pIHsKCXZhciBvcCA9IHRoaXMuYmFkT3AoaW5zdHJ1Y3Rpb24pOwoJdmFyIGkgPSBpbnN0cnVjdGlvbiAmIDB4MEUwMDAwMDA7Cgl2YXIgY3B1ID0gdGhpczsKCXZhciBncHJzID0gdGhpcy5ncHJzOwoKCXZhciBjb25kT3AgPSB0aGlzLmNvbmRzWyhpbnN0cnVjdGlvbiAmIDB4RjAwMDAwMDApID4+PiAyOF07CglpZiAoKGluc3RydWN0aW9uICYgMHgwRkZGRkZGMCkgPT0gMHgwMTJGRkYxMCkgewoJCS8vIEJYCgkJdmFyIHJtID0gaW5zdHJ1Y3Rpb24gJiAweEY7CgkJb3AgPSB0aGlzLmFybUNvbXBpbGVyLmNvbnN0cnVjdEJYKHJtLCBjb25kT3ApOwoJCW9wLndyaXRlc1BDID0gdHJ1ZTsKCQlvcC5maXhlZEp1bXAgPSBmYWxzZTsKCX0gZWxzZSBpZiAoIShpbnN0cnVjdGlvbiAmIDB4MEMwMDAwMDApICYmIChpID09IDB4MDIwMDAwMDAgfHwgKGluc3RydWN0aW9uICYgMHgwMDAwMDA5MCkgIT0gMHgwMDAwMDA5MCkpIHsKCQl2YXIgb3Bjb2RlID0gaW5zdHJ1Y3Rpb24gJiAweDAxRTAwMDAwOwoJCXZhciBzID0gaW5zdHJ1Y3Rpb24gJiAweDAwMTAwMDAwOwoJCXZhciBzaGlmdHNScyA9IGZhbHNlOwoJCWlmICgob3Bjb2RlICYgMHgwMTgwMDAwMCkgPT0gMHgwMTAwMDAwMCAmJiAhcykgewoJCQl2YXIgciA9IGluc3RydWN0aW9uICYgMHgwMDQwMDAwMDsKCQkJaWYgKChpbnN0cnVjdGlvbiAmIDB4MDBCMEYwMDApID09IDB4MDAyMEYwMDApIHsKCQkJCS8vIE1TUgoJCQkJdmFyIHJtID0gaW5zdHJ1Y3Rpb24gJiAweDAwMDAwMDBGOwoJCQkJdmFyIGltbWVkaWF0ZSA9IGluc3RydWN0aW9uICYgMHgwMDAwMDBGRjsKCQkJCXZhciByb3RhdGVJbW0gPSAoaW5zdHJ1Y3Rpb24gJiAweDAwMDAwRjAwKSA+PiA3OwoJCQkJaW1tZWRpYXRlID0gKGltbWVkaWF0ZSA+Pj4gcm90YXRlSW1tKSB8IChpbW1lZGlhdGUgPDwgKDMyIC0gcm90YXRlSW1tKSk7CgkJCQlvcCA9IHRoaXMuYXJtQ29tcGlsZXIuY29uc3RydWN0TVNSKHJtLCByLCBpbnN0cnVjdGlvbiwgaW1tZWRpYXRlLCBjb25kT3ApOwoJCQkJb3Aud3JpdGVzUEMgPSBmYWxzZTsKCQkJfSBlbHNlIGlmICgoaW5zdHJ1Y3Rpb24gJiAweDAwQkYwMDAwKSA9PSAweDAwMEYwMDAwKSB7CgkJCQkvLyBNUlMKCQkJCXZhciByZCA9IChpbnN0cnVjdGlvbiAmIDB4MDAwMEYwMDApID4+IDEyOwoJCQkJb3AgPSB0aGlzLmFybUNvbXBpbGVyLmNvbnN0cnVjdE1SUyhyZCwgciwgY29uZE9wKTsKCQkJCW9wLndyaXRlc1BDID0gcmQgPT0gdGhpcy5QQzsKCQkJfQoJCX0gZWxzZSB7CgkJCS8vIERhdGEgcHJvY2Vzc2luZy9GU1IgdHJhbnNmZXIKCQkJdmFyIHJuID0gKGluc3RydWN0aW9uICYgMHgwMDBGMDAwMCkgPj4gMTY7CgkJCXZhciByZCA9IChpbnN0cnVjdGlvbiAmIDB4MDAwMEYwMDApID4+IDEyOwoKCQkJLy8gUGFyc2Ugc2hpZnRlciBvcGVyYW5kCgkJCXZhciBzaGlmdFR5cGUgPSBpbnN0cnVjdGlvbiAmIDB4MDAwMDAwNjA7CgkJCXZhciBybSA9IGluc3RydWN0aW9uICYgMHgwMDAwMDAwRjsKCQkJdmFyIHNoaWZ0T3AgPSBmdW5jdGlvbigpIHsKCQkJCXRocm93ICdCVUc6IGludmFsaWQgYmFycmVsIHNoaWZ0ZXInOwoJCQl9OwoJCQlpZiAoaW5zdHJ1Y3Rpb24gJiAweDAyMDAwMDAwKSB7CgkJCQl2YXIgaW1tZWRpYXRlID0gaW5zdHJ1Y3Rpb24gJiAweDAwMDAwMEZGOwoJCQkJdmFyIHJvdGF0ZSA9IChpbnN0cnVjdGlvbiAmIDB4MDAwMDBGMDApID4+IDc7CgkJCQlpZiAoIXJvdGF0ZSkgewoJCQkJCXNoaWZ0T3AgPSB0aGlzLmFybUNvbXBpbGVyLmNvbnN0cnVjdEFkZHJlc3NpbmdNb2RlMUltbWVkaWF0ZShpbW1lZGlhdGUpOwoJCQkJfSBlbHNlIHsKCQkJCQlzaGlmdE9wID0gdGhpcy5hcm1Db21waWxlci5jb25zdHJ1Y3RBZGRyZXNzaW5nTW9kZTFJbW1lZGlhdGVSb3RhdGUoaW1tZWRpYXRlLCByb3RhdGUpOwoJCQkJfQoJCQl9IGVsc2UgaWYgKGluc3RydWN0aW9uICYgMHgwMDAwMDAxMCkgewoJCQkJdmFyIHJzID0gKGluc3RydWN0aW9uICYgMHgwMDAwMEYwMCkgPj4gODsKCQkJCXNoaWZ0c1JzID0gdHJ1ZTsKCQkJCXN3aXRjaCAoc2hpZnRUeXBlKSB7CgkJCQljYXNlIDB4MDAwMDAwMDA6CgkJCQkJLy8gTFNMCgkJCQkJc2hpZnRPcCA9IHRoaXMuYXJtQ29tcGlsZXIuY29uc3RydWN0QWRkcmVzc2luZ01vZGUxTFNMKHJzLCBybSk7CgkJCQkJYnJlYWs7CgkJCQljYXNlIDB4MDAwMDAwMjA6CgkJCQkJLy8gTFNSCgkJCQkJc2hpZnRPcCA9IHRoaXMuYXJtQ29tcGlsZXIuY29uc3RydWN0QWRkcmVzc2luZ01vZGUxTFNSKHJzLCBybSk7CgkJCQkJYnJlYWs7CgkJCQljYXNlIDB4MDAwMDAwNDA6CgkJCQkJLy8gQVNSCgkJCQkJc2hpZnRPcCA9IHRoaXMuYXJtQ29tcGlsZXIuY29uc3RydWN0QWRkcmVzc2luZ01vZGUxQVNSKHJzLCBybSk7CgkJCQkJYnJlYWs7CgkJCQljYXNlIDB4MDAwMDAwNjA6CgkJCQkJLy8gUk9SCgkJCQkJc2hpZnRPcCA9IHRoaXMuYXJtQ29tcGlsZXIuY29uc3RydWN0QWRkcmVzc2luZ01vZGUxUk9SKHJzLCBybSk7CgkJCQkJYnJlYWs7CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQl2YXIgaW1tZWRpYXRlID0gKGluc3RydWN0aW9uICYgMHgwMDAwMEY4MCkgPj4gNzsKCQkJCXNoaWZ0T3AgPSB0aGlzLmJhcnJlbFNoaWZ0SW1tZWRpYXRlKHNoaWZ0VHlwZSwgaW1tZWRpYXRlLCBybSk7CgkJCX0KCgkJCXN3aXRjaCAob3Bjb2RlKSB7CgkJCWNhc2UgMHgwMDAwMDAwMDoKCQkJCS8vIEFORAoJCQkJaWYgKHMpIHsKCQkJCQlvcCA9IHRoaXMuYXJtQ29tcGlsZXIuY29uc3RydWN0QU5EUyhyZCwgcm4sIHNoaWZ0T3AsIGNvbmRPcCk7CgkJCQl9IGVsc2UgewoJCQkJCW9wID0gdGhpcy5hcm1Db21waWxlci5jb25zdHJ1Y3RBTkQocmQsIHJuLCBzaGlmdE9wLCBjb25kT3ApOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgMHgwMDIwMDAwMDoKCQkJCS8vIEVPUgoJCQkJaWYgKHMpIHsKCQkJCQlvcCA9IHRoaXMuYXJtQ29tcGlsZXIuY29uc3RydWN0RU9SUyhyZCwgcm4sIHNoaWZ0T3AsIGNvbmRPcCk7CgkJCQl9IGVsc2UgewoJCQkJCW9wID0gdGhpcy5hcm1Db21waWxlci5jb25zdHJ1Y3RFT1IocmQsIHJuLCBzaGlmdE9wLCBjb25kT3ApOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgMHgwMDQwMDAwMDoKCQkJCS8vIFNVQgoJCQkJaWYgKHMpIHsKCQkJCQlvcCA9IHRoaXMuYXJtQ29tcGlsZXIuY29uc3RydWN0U1VCUyhyZCwgcm4sIHNoaWZ0T3AsIGNvbmRPcCk7CgkJCQl9IGVsc2UgewoJCQkJCW9wID0gdGhpcy5hcm1Db21waWxlci5jb25zdHJ1Y3RTVUIocmQsIHJuLCBzaGlmdE9wLCBjb25kT3ApOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgMHgwMDYwMDAwMDoKCQkJCS8vIFJTQgoJCQkJaWYgKHMpIHsKCQkJCQlvcCA9IHRoaXMuYXJtQ29tcGlsZXIuY29uc3RydWN0UlNCUyhyZCwgcm4sIHNoaWZ0T3AsIGNvbmRPcCk7CgkJCQl9IGVsc2UgewoJCQkJCW9wID0gdGhpcy5hcm1Db21waWxlci5jb25zdHJ1Y3RSU0IocmQsIHJuLCBzaGlmdE9wLCBjb25kT3ApOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgMHgwMDgwMDAwMDoKCQkJCS8vIEFERAoJCQkJaWYgKHMpIHsKCQkJCQlvcCA9IHRoaXMuYXJtQ29tcGlsZXIuY29uc3RydWN0QUREUyhyZCwgcm4sIHNoaWZ0T3AsIGNvbmRPcCk7CgkJCQl9IGVsc2UgewoJCQkJCW9wID0gdGhpcy5hcm1Db21waWxlci5jb25zdHJ1Y3RBREQocmQsIHJuLCBzaGlmdE9wLCBjb25kT3ApOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgMHgwMEEwMDAwMDoKCQkJCS8vIEFEQwoJCQkJaWYgKHMpIHsKCQkJCQlvcCA9IHRoaXMuYXJtQ29tcGlsZXIuY29uc3RydWN0QURDUyhyZCwgcm4sIHNoaWZ0T3AsIGNvbmRPcCk7CgkJCQl9IGVsc2UgewoJCQkJCW9wID0gdGhpcy5hcm1Db21waWxlci5jb25zdHJ1Y3RBREMocmQsIHJuLCBzaGlmdE9wLCBjb25kT3ApOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgMHgwMEMwMDAwMDoKCQkJCS8vIFNCQwoJCQkJaWYgKHMpIHsKCQkJCQlvcCA9IHRoaXMuYXJtQ29tcGlsZXIuY29uc3RydWN0U0JDUyhyZCwgcm4sIHNoaWZ0T3AsIGNvbmRPcCk7CgkJCQl9IGVsc2UgewoJCQkJCW9wID0gdGhpcy5hcm1Db21waWxlci5jb25zdHJ1Y3RTQkMocmQsIHJuLCBzaGlmdE9wLCBjb25kT3ApOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgMHgwMEUwMDAwMDoKCQkJCS8vIFJTQwoJCQkJaWYgKHMpIHsKCQkJCQlvcCA9IHRoaXMuYXJtQ29tcGlsZXIuY29uc3RydWN0UlNDUyhyZCwgcm4sIHNoaWZ0T3AsIGNvbmRPcCk7CgkJCQl9IGVsc2UgewoJCQkJCW9wID0gdGhpcy5hcm1Db21waWxlci5jb25zdHJ1Y3RSU0MocmQsIHJuLCBzaGlmdE9wLCBjb25kT3ApOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgMHgwMTAwMDAwMDoKCQkJCS8vIFRTVAoJCQkJb3AgPSB0aGlzLmFybUNvbXBpbGVyLmNvbnN0cnVjdFRTVChyZCwgcm4sIHNoaWZ0T3AsIGNvbmRPcCk7CgkJCQlicmVhazsKCQkJY2FzZSAweDAxMjAwMDAwOgoJCQkJLy8gVEVRCgkJCQlvcCA9IHRoaXMuYXJtQ29tcGlsZXIuY29uc3RydWN0VEVRKHJkLCBybiwgc2hpZnRPcCwgY29uZE9wKTsKCQkJCWJyZWFrOwoJCQljYXNlIDB4MDE0MDAwMDA6CgkJCQkvLyBDTVAKCQkJCW9wID0gdGhpcy5hcm1Db21waWxlci5jb25zdHJ1Y3RDTVAocmQsIHJuLCBzaGlmdE9wLCBjb25kT3ApOwoJCQkJYnJlYWs7CgkJCWNhc2UgMHgwMTYwMDAwMDoKCQkJCS8vIENNTgoJCQkJb3AgPSB0aGlzLmFybUNvbXBpbGVyLmNvbnN0cnVjdENNTihyZCwgcm4sIHNoaWZ0T3AsIGNvbmRPcCk7CgkJCQlicmVhazsKCQkJY2FzZSAweDAxODAwMDAwOgoJCQkJLy8gT1JSCgkJCQlpZiAocykgewoJCQkJCW9wID0gdGhpcy5hcm1Db21waWxlci5jb25zdHJ1Y3RPUlJTKHJkLCBybiwgc2hpZnRPcCwgY29uZE9wKTsKCQkJCX0gZWxzZSB7CgkJCQkJb3AgPSB0aGlzLmFybUNvbXBpbGVyLmNvbnN0cnVjdE9SUihyZCwgcm4sIHNoaWZ0T3AsIGNvbmRPcCk7CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSAweDAxQTAwMDAwOgoJCQkJLy8gTU9WCgkJCQlpZiAocykgewoJCQkJCW9wID0gdGhpcy5hcm1Db21waWxlci5jb25zdHJ1Y3RNT1ZTKHJkLCBybiwgc2hpZnRPcCwgY29uZE9wKTsKCQkJCX0gZWxzZSB7CgkJCQkJb3AgPSB0aGlzLmFybUNvbXBpbGVyLmNvbnN0cnVjdE1PVihyZCwgcm4sIHNoaWZ0T3AsIGNvbmRPcCk7CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSAweDAxQzAwMDAwOgoJCQkJLy8gQklDCgkJCQlpZiAocykgewoJCQkJCW9wID0gdGhpcy5hcm1Db21waWxlci5jb25zdHJ1Y3RCSUNTKHJkLCBybiwgc2hpZnRPcCwgY29uZE9wKTsKCQkJCX0gZWxzZSB7CgkJCQkJb3AgPSB0aGlzLmFybUNvbXBpbGVyLmNvbnN0cnVjdEJJQyhyZCwgcm4sIHNoaWZ0T3AsIGNvbmRPcCk7CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSAweDAxRTAwMDAwOgoJCQkJLy8gTVZOCgkJCQlpZiAocykgewoJCQkJCW9wID0gdGhpcy5hcm1Db21waWxlci5jb25zdHJ1Y3RNVk5TKHJkLCBybiwgc2hpZnRPcCwgY29uZE9wKTsKCQkJCX0gZWxzZSB7CgkJCQkJb3AgPSB0aGlzLmFybUNvbXBpbGVyLmNvbnN0cnVjdE1WTihyZCwgcm4sIHNoaWZ0T3AsIGNvbmRPcCk7CgkJCQl9CgkJCQlicmVhazsKCQkJfQoJCQlvcC53cml0ZXNQQyA9IHJkID09IHRoaXMuUEM7CgkJfQoJfSBlbHNlIGlmICgoaW5zdHJ1Y3Rpb24gJiAweDBGQjAwRkYwKSA9PSAweDAxMDAwMDkwKSB7CgkJLy8gU2luZ2xlIGRhdGEgc3dhcAoJCXZhciBybSA9IGluc3RydWN0aW9uICYgMHgwMDAwMDAwRjsKCQl2YXIgcmQgPSAoaW5zdHJ1Y3Rpb24gPj4gMTIpICYgMHgwMDAwMDAwRjsKCQl2YXIgcm4gPSAoaW5zdHJ1Y3Rpb24gPj4gMTYpICYgMHgwMDAwMDAwRjsKCQlpZiAoaW5zdHJ1Y3Rpb24gJiAweDAwNDAwMDAwKSB7CgkJCW9wID0gdGhpcy5hcm1Db21waWxlci5jb25zdHJ1Y3RTV1BCKHJkLCBybiwgcm0sIGNvbmRPcCk7CgkJfSBlbHNlIHsKCQkJb3AgPSB0aGlzLmFybUNvbXBpbGVyLmNvbnN0cnVjdFNXUChyZCwgcm4sIHJtLCBjb25kT3ApOwoJCX0KCQlvcC53cml0ZXNQQyA9IHJkID09IHRoaXMuUEM7Cgl9IGVsc2UgewoJCXN3aXRjaCAoaSkgewoJCWNhc2UgMHgwMDAwMDAwMDoKCQkJaWYgKChpbnN0cnVjdGlvbiAmIDB4MDEwMDAwRjApID09IDB4MDAwMDAwOTApIHsKCQkJCS8vIE11bHRpcGxpZXMKCQkJCXZhciByZCA9IChpbnN0cnVjdGlvbiAmIDB4MDAwRjAwMDApID4+IDE2OwoJCQkJdmFyIHJuID0gKGluc3RydWN0aW9uICYgMHgwMDAwRjAwMCkgPj4gMTI7CgkJCQl2YXIgcnMgPSAoaW5zdHJ1Y3Rpb24gJiAweDAwMDAwRjAwKSA+PiA4OwoJCQkJdmFyIHJtID0gaW5zdHJ1Y3Rpb24gJiAweDAwMDAwMDBGOwoJCQkJc3dpdGNoIChpbnN0cnVjdGlvbiAmIDB4MDBGMDAwMDApIHsKCQkJCWNhc2UgMHgwMDAwMDAwMDoKCQkJCQkvLyBNVUwKCQkJCQlvcCA9IHRoaXMuYXJtQ29tcGlsZXIuY29uc3RydWN0TVVMKHJkLCBycywgcm0sIGNvbmRPcCk7CgkJCQkJYnJlYWs7CgkJCQljYXNlIDB4MDAxMDAwMDA6CgkJCQkJLy8gTVVMUwoJCQkJCW9wID0gdGhpcy5hcm1Db21waWxlci5jb25zdHJ1Y3RNVUxTKHJkLCBycywgcm0sIGNvbmRPcCk7CgkJCQkJYnJlYWs7CgkJCQljYXNlIDB4MDAyMDAwMDA6CgkJCQkJLy8gTUxBCgkJCQkJb3AgPSB0aGlzLmFybUNvbXBpbGVyLmNvbnN0cnVjdE1MQShyZCwgcm4sIHJzLCBybSwgY29uZE9wKTsKCQkJCQlicmVhawoJCQkJY2FzZSAweDAwMzAwMDAwOgoJCQkJCS8vIE1MQVMKCQkJCQlvcCA9IHRoaXMuYXJtQ29tcGlsZXIuY29uc3RydWN0TUxBUyhyZCwgcm4sIHJzLCBybSwgY29uZE9wKTsKCQkJCQlicmVhazsKCQkJCWNhc2UgMHgwMDgwMDAwMDoKCQkJCQkvLyBVTVVMTAoJCQkJCW9wID0gdGhpcy5hcm1Db21waWxlci5jb25zdHJ1Y3RVTVVMTChyZCwgcm4sIHJzLCBybSwgY29uZE9wKTsKCQkJCQlicmVhazsKCQkJCWNhc2UgMHgwMDkwMDAwMDoKCQkJCQkvLyBVTVVMTFMKCQkJCQlvcCA9IHRoaXMuYXJtQ29tcGlsZXIuY29uc3RydWN0VU1VTExTKHJkLCBybiwgcnMsIHJtLCBjb25kT3ApOwoJCQkJCWJyZWFrOwoJCQkJY2FzZSAweDAwQTAwMDAwOgoJCQkJCS8vIFVNTEFMCgkJCQkJb3AgPSB0aGlzLmFybUNvbXBpbGVyLmNvbnN0cnVjdFVNTEFMKHJkLCBybiwgcnMsIHJtLCBjb25kT3ApOwoJCQkJCWJyZWFrOwoJCQkJY2FzZSAweDAwQjAwMDAwOgoJCQkJCS8vIFVNTEFMUwoJCQkJCW9wID0gdGhpcy5hcm1Db21waWxlci5jb25zdHJ1Y3RVTUxBTFMocmQsIHJuLCBycywgcm0sIGNvbmRPcCk7CgkJCQkJYnJlYWs7CgkJCQljYXNlIDB4MDBDMDAwMDA6CgkJCQkJLy8gU01VTEwKCQkJCQlvcCA9IHRoaXMuYXJtQ29tcGlsZXIuY29uc3RydWN0U01VTEwocmQsIHJuLCBycywgcm0sIGNvbmRPcCk7CgkJCQkJYnJlYWs7CgkJCQljYXNlIDB4MDBEMDAwMDA6CgkJCQkJLy8gU01VTExTCgkJCQkJb3AgPSB0aGlzLmFybUNvbXBpbGVyLmNvbnN0cnVjdFNNVUxMUyhyZCwgcm4sIHJzLCBybSwgY29uZE9wKTsKCQkJCQlicmVhazsKCQkJCWNhc2UgMHgwMEUwMDAwMDoKCQkJCQkvLyBTTUxBTAoJCQkJCW9wID0gdGhpcy5hcm1Db21waWxlci5jb25zdHJ1Y3RTTUxBTChyZCwgcm4sIHJzLCBybSwgY29uZE9wKTsKCQkJCQlicmVhazsKCQkJCWNhc2UgMHgwMEYwMDAwMDoKCQkJCQkvLyBTTUxBTFMKCQkJCQlvcCA9IHRoaXMuYXJtQ29tcGlsZXIuY29uc3RydWN0U01MQUxTKHJkLCBybiwgcnMsIHJtLCBjb25kT3ApOwoJCQkJCWJyZWFrOwoJCQkJfQoJCQkJb3Aud3JpdGVzUEMgPSByZCA9PSB0aGlzLlBDOwoJCQl9IGVsc2UgewoJCQkJLy8gSGFsZndvcmQgYW5kIHNpZ25lZCBieXRlIGRhdGEgdHJhbnNmZXIKCQkJCXZhciBsb2FkID0gaW5zdHJ1Y3Rpb24gJiAweDAwMTAwMDAwOwoJCQkJdmFyIHJkID0gKGluc3RydWN0aW9uICYgMHgwMDAwRjAwMCkgPj4gMTI7CgkJCQl2YXIgaGlPZmZzZXQgPSAoaW5zdHJ1Y3Rpb24gJiAweDAwMDAwRjAwKSA+PiA0OwoJCQkJdmFyIGxvT2Zmc2V0ID0gcm0gPSBpbnN0cnVjdGlvbiAmIDB4MDAwMDAwMEY7CgkJCQl2YXIgaCA9IGluc3RydWN0aW9uICYgMHgwMDAwMDAyMDsKCQkJCXZhciBzID0gaW5zdHJ1Y3Rpb24gJiAweDAwMDAwMDQwOwoJCQkJdmFyIHcgPSBpbnN0cnVjdGlvbiAmIDB4MDAyMDAwMDA7CgkJCQl2YXIgaSA9IGluc3RydWN0aW9uICYgMHgwMDQwMDAwMDsKCgkJCQl2YXIgYWRkcmVzczsKCQkJCWlmIChpKSB7CgkJCQkJdmFyIGltbWVkaWF0ZSA9IGxvT2Zmc2V0IHwgaGlPZmZzZXQ7CgkJCQkJYWRkcmVzcyA9IHRoaXMuYXJtQ29tcGlsZXIuY29uc3RydWN0QWRkcmVzc2luZ01vZGUyM0ltbWVkaWF0ZShpbnN0cnVjdGlvbiwgaW1tZWRpYXRlLCBjb25kT3ApOwoJCQkJfSBlbHNlIHsKCQkJCQlhZGRyZXNzID0gdGhpcy5hcm1Db21waWxlci5jb25zdHJ1Y3RBZGRyZXNzaW5nTW9kZTIzUmVnaXN0ZXIoaW5zdHJ1Y3Rpb24sIHJtLCBjb25kT3ApOwoJCQkJfQoJCQkJYWRkcmVzcy53cml0ZXNQQyA9ICEhdyAmJiBybiA9PSB0aGlzLlBDOwoKCQkJCWlmICgoaW5zdHJ1Y3Rpb24gJiAweDAwMDAwMDkwKSA9PSAweDAwMDAwMDkwKSB7CgkJCQkJaWYgKGxvYWQpIHsKCQkJCQkJLy8gTG9hZCBbc2lnbmVkXSBoYWxmd29yZC9ieXRlCgkJCQkJCWlmIChoKSB7CgkJCQkJCQlpZiAocykgewoJCQkJCQkJCS8vIExEUlNICgkJCQkJCQkJb3AgPSB0aGlzLmFybUNvbXBpbGVyLmNvbnN0cnVjdExEUlNIKHJkLCBhZGRyZXNzLCBjb25kT3ApOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkvLyBMRFJICgkJCQkJCQkJb3AgPSB0aGlzLmFybUNvbXBpbGVyLmNvbnN0cnVjdExEUkgocmQsIGFkZHJlc3MsIGNvbmRPcCk7CgkJCQkJCQl9CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlpZiAocykgewoJCQkJCQkJCS8vIExEUlNCCgkJCQkJCQkJb3AgPSB0aGlzLmFybUNvbXBpbGVyLmNvbnN0cnVjdExEUlNCKHJkLCBhZGRyZXNzLCBjb25kT3ApOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfSBlbHNlIGlmICghcyAmJiBoKSB7CgkJCQkJCS8vIFNUUkgKCQkJCQkJb3AgPSB0aGlzLmFybUNvbXBpbGVyLmNvbnN0cnVjdFNUUkgocmQsIGFkZHJlc3MsIGNvbmRPcCk7CgkJCQkJfQoJCQkJfQoJCQkJb3Aud3JpdGVzUEMgPSByZCA9PSB0aGlzLlBDIHx8IGFkZHJlc3Mud3JpdGVzUEM7CgkJCX0KCQkJYnJlYWs7CgkJY2FzZSAweDA0MDAwMDAwOgoJCWNhc2UgMHgwNjAwMDAwMDoKCQkJLy8gTERSL1NUUgoJCQl2YXIgcmQgPSAoaW5zdHJ1Y3Rpb24gJiAweDAwMDBGMDAwKSA+PiAxMjsKCQkJdmFyIGxvYWQgPSBpbnN0cnVjdGlvbiAmIDB4MDAxMDAwMDA7CgkJCXZhciBiID0gaW5zdHJ1Y3Rpb24gJiAweDAwNDAwMDAwOwoJCQl2YXIgaSA9IGluc3RydWN0aW9uICYgMHgwMjAwMDAwMDsKCgkJCXZhciBhZGRyZXNzID0gZnVuY3Rpb24oKSB7CgkJCQl0aHJvdyAiVW5pbXBsZW1lbnRlZCBtZW1vcnkgYWNjZXNzOiAweCIgKyBpbnN0cnVjdGlvbi50b1N0cmluZygxNik7CgkJCX07CgkJCWlmICh+aW5zdHJ1Y3Rpb24gJiAweDAxMDAwMDAwKSB7CgkJCQkvLyBDbGVhciB0aGUgVyBiaXQgaWYgdGhlIFAgYml0IGlzIGNsZWFyLS13ZSBkb24ndCBzdXBwb3J0IG1lbW9yeSB0cmFuc2xhdGlvbiwgc28gdGhlc2UgdHVybiBpbnRvIHJlZ3VsYXIgYWNjZXNzZXMKCQkJCWluc3RydWN0aW9uICY9IDB4RkZERkZGRkY7CgkJCX0KCQkJaWYgKGkpIHsKCQkJCS8vIFJlZ2lzdGVyIG9mZnNldAoJCQkJdmFyIHJtID0gaW5zdHJ1Y3Rpb24gJiAweDAwMDAwMDBGOwoJCQkJdmFyIHNoaWZ0VHlwZSA9IGluc3RydWN0aW9uICYgMHgwMDAwMDA2MDsKCQkJCXZhciBzaGlmdEltbWVkaWF0ZSA9IChpbnN0cnVjdGlvbiAmIDB4MDAwMDBGODApID4+IDc7CgkJCQkKCQkJCWlmIChzaGlmdFR5cGUgfHwgc2hpZnRJbW1lZGlhdGUpIHsKCQkJCQl2YXIgc2hpZnRPcCA9IHRoaXMuYmFycmVsU2hpZnRJbW1lZGlhdGUoc2hpZnRUeXBlLCBzaGlmdEltbWVkaWF0ZSwgcm0pOwoJCQkJCWFkZHJlc3MgPSB0aGlzLmFybUNvbXBpbGVyLmNvbnN0cnVjdEFkZHJlc3NpbmdNb2RlMlJlZ2lzdGVyU2hpZnRlZChpbnN0cnVjdGlvbiwgc2hpZnRPcCwgY29uZE9wKTsKCQkJCX0gZWxzZSB7CgkJCQkJYWRkcmVzcyA9IHRoaXMuYXJtQ29tcGlsZXIuY29uc3RydWN0QWRkcmVzc2luZ01vZGUyM1JlZ2lzdGVyKGluc3RydWN0aW9uLCBybSwgY29uZE9wKTsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCS8vIEltbWVkaWF0ZQoJCQkJdmFyIG9mZnNldCA9IGluc3RydWN0aW9uICYgMHgwMDAwMEZGRjsKCQkJCWFkZHJlc3MgPSB0aGlzLmFybUNvbXBpbGVyLmNvbnN0cnVjdEFkZHJlc3NpbmdNb2RlMjNJbW1lZGlhdGUoaW5zdHJ1Y3Rpb24sIG9mZnNldCwgY29uZE9wKTsKCQkJfQoJCQlpZiAobG9hZCkgewoJCQkJaWYgKGIpIHsKCQkJCQkvLyBMRFJCCgkJCQkJb3AgPSB0aGlzLmFybUNvbXBpbGVyLmNvbnN0cnVjdExEUkIocmQsIGFkZHJlc3MsIGNvbmRPcCk7CgkJCQl9IGVsc2UgewoJCQkJCS8vIExEUgoJCQkJCW9wID0gdGhpcy5hcm1Db21waWxlci5jb25zdHJ1Y3RMRFIocmQsIGFkZHJlc3MsIGNvbmRPcCk7CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlpZiAoYikgewoJCQkJCS8vIFNUUkIKCQkJCQlvcCA9IHRoaXMuYXJtQ29tcGlsZXIuY29uc3RydWN0U1RSQihyZCwgYWRkcmVzcywgY29uZE9wKTsKCQkJCX0gZWxzZSB7CgkJCQkJLy8gU1RSCgkJCQkJb3AgPSB0aGlzLmFybUNvbXBpbGVyLmNvbnN0cnVjdFNUUihyZCwgYWRkcmVzcywgY29uZE9wKTsKCQkJCX0KCQkJfQoJCQlvcC53cml0ZXNQQyA9IHJkID09IHRoaXMuUEMgfHwgYWRkcmVzcy53cml0ZXNQQzsKCQkJYnJlYWs7CgkJY2FzZSAweDA4MDAwMDAwOgoJCQkvLyBCbG9jayBkYXRhIHRyYW5zZmVyCgkJCXZhciBsb2FkID0gaW5zdHJ1Y3Rpb24gJiAweDAwMTAwMDAwOwoJCQl2YXIgdyA9IGluc3RydWN0aW9uICYgMHgwMDIwMDAwMDsKCQkJdmFyIHVzZXIgPSBpbnN0cnVjdGlvbiAmIDB4MDA0MDAwMDA7CgkJCXZhciB1ID0gaW5zdHJ1Y3Rpb24gJiAweDAwODAwMDAwOwoJCQl2YXIgcCA9IGluc3RydWN0aW9uICYgMHgwMTAwMDAwMDsKCQkJdmFyIHJzID0gaW5zdHJ1Y3Rpb24gJiAweDAwMDBGRkZGOwoJCQl2YXIgcm4gPSAoaW5zdHJ1Y3Rpb24gJiAweDAwMEYwMDAwKSA+PiAxNjsKCgkJCXZhciBhZGRyZXNzOwoJCQl2YXIgaW1tZWRpYXRlID0gMDsKCQkJdmFyIG9mZnNldCA9IDA7CgkJCXZhciBvdmVybGFwID0gZmFsc2U7CgkJCWlmICh1KSB7CgkJCQlpZiAocCkgewoJCQkJCWltbWVkaWF0ZSA9IDQ7CgkJCQl9CgkJCQlmb3IgKHZhciBtID0gMHgwMSwgaSA9IDA7IGkgPCAxNjsgbSA8PD0gMSwgKytpKSB7CgkJCQkJaWYgKHJzICYgbSkgewoJCQkJCQlpZiAodyAmJiBpID09IHJuICYmICFvZmZzZXQpIHsKCQkJCQkJCXJzICY9IH5tOwoJCQkJCQkJaW1tZWRpYXRlICs9IDQ7CgkJCQkJCQlvdmVybGFwID0gdHJ1ZTsKCQkJCQkJfQoJCQkJCQlvZmZzZXQgKz0gNDsKCQkJCQl9CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlpZiAoIXApIHsKCQkJCQlpbW1lZGlhdGUgPSA0OwoJCQkJfQoJCQkJZm9yICh2YXIgbSA9IDB4MDEsIGkgPSAwOyBpIDwgMTY7IG0gPDw9IDEsICsraSkgewoJCQkJCWlmIChycyAmIG0pIHsKCQkJCQkJaWYgKHcgJiYgaSA9PSBybiAmJiAhb2Zmc2V0KSB7CgkJCQkJCQlycyAmPSB+bTsKCQkJCQkJCWltbWVkaWF0ZSArPSA0OwoJCQkJCQkJb3ZlcmxhcCA9IHRydWU7CgkJCQkJCX0KCQkJCQkJaW1tZWRpYXRlIC09IDQ7CgkJCQkJCW9mZnNldCAtPSA0OwoJCQkJCX0KCQkJCX0KCQkJfQoJCQlpZiAodykgewoJCQkJYWRkcmVzcyA9IHRoaXMuYXJtQ29tcGlsZXIuY29uc3RydWN0QWRkcmVzc2luZ01vZGU0V3JpdGViYWNrKGltbWVkaWF0ZSwgb2Zmc2V0LCBybiwgb3ZlcmxhcCk7CgkJCX0gZWxzZSB7CgkJCQlhZGRyZXNzID0gdGhpcy5hcm1Db21waWxlci5jb25zdHJ1Y3RBZGRyZXNzaW5nTW9kZTQoaW1tZWRpYXRlLCBybik7CgkJCX0KCQkJaWYgKGxvYWQpIHsKCQkJCS8vIExETQoJCQkJaWYgKHVzZXIpIHsKCQkJCQlvcCA9IHRoaXMuYXJtQ29tcGlsZXIuY29uc3RydWN0TERNUyhycywgYWRkcmVzcywgY29uZE9wKTsKCQkJCX0gZWxzZSB7CgkJCQkJb3AgPSB0aGlzLmFybUNvbXBpbGVyLmNvbnN0cnVjdExETShycywgYWRkcmVzcywgY29uZE9wKTsKCQkJCX0KCQkJCW9wLndyaXRlc1BDID0gISEocnMgJiAoMSA8PCAxNSkpOwoJCQl9IGVsc2UgewoJCQkJLy8gU1RNCgkJCQlpZiAodXNlcikgewoJCQkJCW9wID0gdGhpcy5hcm1Db21waWxlci5jb25zdHJ1Y3RTVE1TKHJzLCBhZGRyZXNzLCBjb25kT3ApOwoJCQkJfSBlbHNlIHsKCQkJCQlvcCA9IHRoaXMuYXJtQ29tcGlsZXIuY29uc3RydWN0U1RNKHJzLCBhZGRyZXNzLCBjb25kT3ApOwoJCQkJfQoJCQkJb3Aud3JpdGVzUEMgPSBmYWxzZTsKCQkJfQoJCQlicmVhazsKCQljYXNlIDB4MEEwMDAwMDA6CgkJCS8vIEJyYW5jaAoJCQl2YXIgaW1tZWRpYXRlID0gaW5zdHJ1Y3Rpb24gJiAweDAwRkZGRkZGOwoJCQlpZiAoaW1tZWRpYXRlICYgMHgwMDgwMDAwMCkgewoJCQkJaW1tZWRpYXRlIHw9IDB4RkYwMDAwMDA7CgkJCX0KCQkJaW1tZWRpYXRlIDw8PSAyOwoJCQl2YXIgbGluayA9IGluc3RydWN0aW9uICYgMHgwMTAwMDAwMDsKCQkJaWYgKGxpbmspIHsKCQkJCW9wID0gdGhpcy5hcm1Db21waWxlci5jb25zdHJ1Y3RCTChpbW1lZGlhdGUsIGNvbmRPcCk7CgkJCX0gZWxzZSB7CgkJCQlvcCA9IHRoaXMuYXJtQ29tcGlsZXIuY29uc3RydWN0QihpbW1lZGlhdGUsIGNvbmRPcCk7CgkJCX0KCQkJb3Aud3JpdGVzUEMgPSB0cnVlOwoJCQlvcC5maXhlZEp1bXAgPSB0cnVlOwoJCQlicmVhazsKCQljYXNlIDB4MEMwMDAwMDA6CgkJCS8vIENvcHJvY2Vzc29yIGRhdGEgdHJhbnNmZXIKCQkJYnJlYWs7CgkJY2FzZSAweDBFMDAwMDAwOgoJCQkvLyBDb3Byb2Nlc3NvciBkYXRhIG9wZXJhdGlvbi9TV0kKCQkJaWYgKChpbnN0cnVjdGlvbiAmIDB4MEYwMDAwMDApID09IDB4MEYwMDAwMDApIHsKCQkJCS8vIFNXSQoJCQkJdmFyIGltbWVkaWF0ZSA9IChpbnN0cnVjdGlvbiAmIDB4MDBGRkZGRkYpOwoJCQkJb3AgPSB0aGlzLmFybUNvbXBpbGVyLmNvbnN0cnVjdFNXSShpbW1lZGlhdGUsIGNvbmRPcCk7CgkJCQlvcC53cml0ZXNQQyA9IGZhbHNlOwoJCQl9CgkJCWJyZWFrOwoJCWRlZmF1bHQ6CgkJCXRocm93ICdCYWQgb3Bjb2RlOiAweCcgKyBpbnN0cnVjdGlvbi50b1N0cmluZygxNik7CgkJfQoJfQoKCW9wLmV4ZWNNb2RlID0gdGhpcy5NT0RFX0FSTTsKCW9wLmZpeGVkSnVtcCA9IG9wLmZpeGVkSnVtcCB8fCBmYWxzZTsKCXJldHVybiBvcDsKfTsKCkFSTUNvcmUucHJvdG90eXBlLmNvbXBpbGVUaHVtYiA9IGZ1bmN0aW9uKGluc3RydWN0aW9uKSB7Cgl2YXIgb3AgPSB0aGlzLmJhZE9wKGluc3RydWN0aW9uICYgMHhGRkZGKTsKCXZhciBjcHUgPSB0aGlzOwoJdmFyIGdwcnMgPSB0aGlzLmdwcnM7CglpZiAoKGluc3RydWN0aW9uICYgMHhGQzAwKSA9PSAweDQwMDApIHsKCQkvLyBEYXRhLXByb2Nlc3NpbmcgcmVnaXN0ZXIKCQl2YXIgcm0gPSAoaW5zdHJ1Y3Rpb24gJiAweDAwMzgpID4+IDM7CgkJdmFyIHJkID0gaW5zdHJ1Y3Rpb24gJiAweDAwMDc7CgkJc3dpdGNoIChpbnN0cnVjdGlvbiAmIDB4MDNDMCkgewoJCWNhc2UgMHgwMDAwOgoJCQkvLyBBTkQKCQkJb3AgPSB0aGlzLnRodW1iQ29tcGlsZXIuY29uc3RydWN0QU5EKHJkLCBybSk7CgkJCWJyZWFrOwoJCWNhc2UgMHgwMDQwOgoJCQkvLyBFT1IKCQkJb3AgPSB0aGlzLnRodW1iQ29tcGlsZXIuY29uc3RydWN0RU9SKHJkLCBybSk7CgkJCWJyZWFrOwoJCWNhc2UgMHgwMDgwOgoJCQkvLyBMU0woMikKCQkJb3AgPSB0aGlzLnRodW1iQ29tcGlsZXIuY29uc3RydWN0TFNMMihyZCwgcm0pOwoJCQlicmVhazsKCQljYXNlIDB4MDBDMDoKCQkJLy8gTFNSKDIpCgkJCW9wID0gdGhpcy50aHVtYkNvbXBpbGVyLmNvbnN0cnVjdExTUjIocmQsIHJtKTsKCQkJYnJlYWs7CgkJY2FzZSAweDAxMDA6CgkJCS8vIEFTUigyKQoJCQlvcCA9IHRoaXMudGh1bWJDb21waWxlci5jb25zdHJ1Y3RBU1IyKHJkLCBybSk7CgkJCWJyZWFrOwoJCWNhc2UgMHgwMTQwOgoJCQkvLyBBREMKCQkJb3AgPSB0aGlzLnRodW1iQ29tcGlsZXIuY29uc3RydWN0QURDKHJkLCBybSk7CgkJCWJyZWFrOwoJCWNhc2UgMHgwMTgwOgoJCQkvLyBTQkMKCQkJb3AgPSB0aGlzLnRodW1iQ29tcGlsZXIuY29uc3RydWN0U0JDKHJkLCBybSk7CgkJCWJyZWFrOwoJCWNhc2UgMHgwMUMwOgoJCQkvLyBST1IKCQkJb3AgPSB0aGlzLnRodW1iQ29tcGlsZXIuY29uc3RydWN0Uk9SKHJkLCBybSk7CgkJCWJyZWFrOwoJCWNhc2UgMHgwMjAwOgoJCQkvLyBUU1QKCQkJb3AgPSB0aGlzLnRodW1iQ29tcGlsZXIuY29uc3RydWN0VFNUKHJkLCBybSk7CgkJCWJyZWFrOwoJCWNhc2UgMHgwMjQwOgoJCQkvLyBORUcKCQkJb3AgPSB0aGlzLnRodW1iQ29tcGlsZXIuY29uc3RydWN0TkVHKHJkLCBybSk7CgkJCWJyZWFrOwoJCWNhc2UgMHgwMjgwOgoJCQkvLyBDTVAoMikKCQkJb3AgPSB0aGlzLnRodW1iQ29tcGlsZXIuY29uc3RydWN0Q01QMihyZCwgcm0pOwoJCQlicmVhazsKCQljYXNlIDB4MDJDMDoKCQkJLy8gQ01OCgkJCW9wID0gdGhpcy50aHVtYkNvbXBpbGVyLmNvbnN0cnVjdENNTihyZCwgcm0pOwoJCQlicmVhazsKCQljYXNlIDB4MDMwMDoKCQkJLy8gT1JSCgkJCW9wID0gdGhpcy50aHVtYkNvbXBpbGVyLmNvbnN0cnVjdE9SUihyZCwgcm0pOwoJCQlicmVhazsKCQljYXNlIDB4MDM0MDoKCQkJLy8gTVVMCgkJCW9wID0gdGhpcy50aHVtYkNvbXBpbGVyLmNvbnN0cnVjdE1VTChyZCwgcm0pOwoJCQlicmVhazsKCQljYXNlIDB4MDM4MDoKCQkJLy8gQklDCgkJCW9wID0gdGhpcy50aHVtYkNvbXBpbGVyLmNvbnN0cnVjdEJJQyhyZCwgcm0pOwoJCQlicmVhazsKCQljYXNlIDB4MDNDMDoKCQkJLy8gTVZOCgkJCW9wID0gdGhpcy50aHVtYkNvbXBpbGVyLmNvbnN0cnVjdE1WTihyZCwgcm0pOwoJCQlicmVhazsKCQl9CgkJb3Aud3JpdGVzUEMgPSBmYWxzZTsKCX0gZWxzZSBpZiAoKGluc3RydWN0aW9uICYgMHhGQzAwKSA9PSAweDQ0MDApIHsKCQkvLyBTcGVjaWFsIGRhdGEgcHJvY2Vzc2luZyAvIGJyYW5jaC9leGNoYW5nZSBpbnN0cnVjdGlvbiBzZXQKCQl2YXIgcm0gPSAoaW5zdHJ1Y3Rpb24gJiAweDAwNzgpID4+IDM7CgkJdmFyIHJuID0gaW5zdHJ1Y3Rpb24gJiAweDAwMDc7CgkJdmFyIGgxID0gaW5zdHJ1Y3Rpb24gJiAweDAwODA7CgkJdmFyIHJkID0gcm4gfCAoaDEgPj4gNCk7CgkJc3dpdGNoIChpbnN0cnVjdGlvbiAmIDB4MDMwMCkgewoJCWNhc2UgMHgwMDAwOgoJCQkvLyBBREQoNCkKCQkJb3AgPSB0aGlzLnRodW1iQ29tcGlsZXIuY29uc3RydWN0QURENChyZCwgcm0pCgkJCW9wLndyaXRlc1BDID0gcmQgPT0gdGhpcy5QQzsKCQkJYnJlYWs7CgkJY2FzZSAweDAxMDA6CgkJCS8vIENNUCgzKQoJCQlvcCA9IHRoaXMudGh1bWJDb21waWxlci5jb25zdHJ1Y3RDTVAzKHJkLCBybSk7CgkJCW9wLndyaXRlc1BDID0gZmFsc2U7CgkJCWJyZWFrOwoJCWNhc2UgMHgwMjAwOgoJCQkvLyBNT1YoMykKCQkJb3AgPSB0aGlzLnRodW1iQ29tcGlsZXIuY29uc3RydWN0TU9WMyhyZCwgcm0pOwoJCQlvcC53cml0ZXNQQyA9IHJkID09IHRoaXMuUEM7CgkJCWJyZWFrOwoJCWNhc2UgMHgwMzAwOgoJCQkvLyBCWAoJCQlvcCA9IHRoaXMudGh1bWJDb21waWxlci5jb25zdHJ1Y3RCWChyZCwgcm0pOwoJCQlvcC53cml0ZXNQQyA9IHRydWU7CgkJCW9wLmZpeGVkSnVtcCA9IGZhbHNlOwoJCQlicmVhazsKCQl9Cgl9IGVsc2UgaWYgKChpbnN0cnVjdGlvbiAmIDB4RjgwMCkgPT0gMHgxODAwKSB7CgkJLy8gQWRkL3N1YnRyYWN0CgkJdmFyIHJtID0gKGluc3RydWN0aW9uICYgMHgwMUMwKSA+PiA2OwoJCXZhciBybiA9IChpbnN0cnVjdGlvbiAmIDB4MDAzOCkgPj4gMzsKCQl2YXIgcmQgPSBpbnN0cnVjdGlvbiAmIDB4MDAwNzsKCQlzd2l0Y2ggKGluc3RydWN0aW9uICYgMHgwNjAwKSB7CgkJY2FzZSAweDAwMDA6CgkJCS8vIEFERCgzKQoJCQlvcCA9IHRoaXMudGh1bWJDb21waWxlci5jb25zdHJ1Y3RBREQzKHJkLCBybiwgcm0pOwoJCQlicmVhazsKCQljYXNlIDB4MDIwMDoKCQkJLy8gU1VCKDMpCgkJCW9wID0gdGhpcy50aHVtYkNvbXBpbGVyLmNvbnN0cnVjdFNVQjMocmQsIHJuLCBybSk7CgkJCWJyZWFrOwoJCWNhc2UgMHgwNDAwOgoJCQl2YXIgaW1tZWRpYXRlID0gKGluc3RydWN0aW9uICYgMHgwMUMwKSA+PiA2OwoJCQlpZiAoaW1tZWRpYXRlKSB7CgkJCQkvLyBBREQoMSkKCQkJCW9wID0gdGhpcy50aHVtYkNvbXBpbGVyLmNvbnN0cnVjdEFERDEocmQsIHJuLCBpbW1lZGlhdGUpOwoJCQl9IGVsc2UgewoJCQkJLy8gTU9WKDIpCgkJCQlvcCA9IHRoaXMudGh1bWJDb21waWxlci5jb25zdHJ1Y3RNT1YyKHJkLCBybiwgcm0pOwoJCQl9CgkJCWJyZWFrOwoJCWNhc2UgMHgwNjAwOgoJCQkvLyBTVUIoMSkKCQkJdmFyIGltbWVkaWF0ZSA9IChpbnN0cnVjdGlvbiAmIDB4MDFDMCkgPj4gNjsKCQkJb3AgPSB0aGlzLnRodW1iQ29tcGlsZXIuY29uc3RydWN0U1VCMShyZCwgcm4sIGltbWVkaWF0ZSk7CgkJCWJyZWFrOwoJCX0KCQlvcC53cml0ZXNQQyA9IGZhbHNlOwoJfSBlbHNlIGlmICghKGluc3RydWN0aW9uICYgMHhFMDAwKSkgewoJCS8vIFNoaWZ0IGJ5IGltbWVkaWF0ZQoJCXZhciByZCA9IGluc3RydWN0aW9uICYgMHgwMDA3OwoJCXZhciBybSA9IChpbnN0cnVjdGlvbiAmIDB4MDAzOCkgPj4gMzsKCQl2YXIgaW1tZWRpYXRlID0gKGluc3RydWN0aW9uICYgMHgwN0MwKSA+PiA2OwoJCXN3aXRjaCAoaW5zdHJ1Y3Rpb24gJiAweDE4MDApIHsKCQljYXNlIDB4MDAwMDoKCQkJLy8gTFNMKDEpCgkJCW9wID0gdGhpcy50aHVtYkNvbXBpbGVyLmNvbnN0cnVjdExTTDEocmQsIHJtLCBpbW1lZGlhdGUpOwoJCQlicmVhazsKCQljYXNlIDB4MDgwMDoKCQkJLy8gTFNSKDEpCgkJCW9wID0gdGhpcy50aHVtYkNvbXBpbGVyLmNvbnN0cnVjdExTUjEocmQsIHJtLCBpbW1lZGlhdGUpOwoJCQlicmVhazsKCQljYXNlIDB4MTAwMDoKCQkJLy8gQVNSKDEpCgkJCW9wID0gdGhpcy50aHVtYkNvbXBpbGVyLmNvbnN0cnVjdEFTUjEocmQsIHJtLCBpbW1lZGlhdGUpOwoJCQlicmVhazsKCQljYXNlIDB4MTgwMDoKCQkJYnJlYWs7CgkJfQoJCW9wLndyaXRlc1BDID0gZmFsc2U7Cgl9IGVsc2UgaWYgKChpbnN0cnVjdGlvbiAmIDB4RTAwMCkgPT0gMHgyMDAwKSB7CgkJLy8gQWRkL3N1YnRyYWN0L2NvbXBhcmUvbW92ZSBpbW1lZGlhdGUKCQl2YXIgaW1tZWRpYXRlID0gaW5zdHJ1Y3Rpb24gJiAweDAwRkY7CgkJdmFyIHJuID0gKGluc3RydWN0aW9uICYgMHgwNzAwKSA+PiA4OwoJCXN3aXRjaCAoaW5zdHJ1Y3Rpb24gJiAweDE4MDApIHsKCQljYXNlIDB4MDAwMDoKCQkJLy8gTU9WKDEpCgkJCW9wID0gdGhpcy50aHVtYkNvbXBpbGVyLmNvbnN0cnVjdE1PVjEocm4sIGltbWVkaWF0ZSk7CgkJCWJyZWFrOwoJCWNhc2UgMHgwODAwOgoJCQkvLyBDTVAoMSkKCQkJb3AgPSB0aGlzLnRodW1iQ29tcGlsZXIuY29uc3RydWN0Q01QMShybiwgaW1tZWRpYXRlKTsKCQkJYnJlYWs7CgkJY2FzZSAweDEwMDA6CgkJCS8vIEFERCgyKQoJCQlvcCA9IHRoaXMudGh1bWJDb21waWxlci5jb25zdHJ1Y3RBREQyKHJuLCBpbW1lZGlhdGUpOwoJCQlicmVhazsKCQljYXNlIDB4MTgwMDoKCQkJLy8gU1VCKDIpCgkJCW9wID0gdGhpcy50aHVtYkNvbXBpbGVyLmNvbnN0cnVjdFNVQjIocm4sIGltbWVkaWF0ZSk7CgkJCWJyZWFrOwoJCX0KCQlvcC53cml0ZXNQQyA9IGZhbHNlOwoJfSBlbHNlIGlmICgoaW5zdHJ1Y3Rpb24gJiAweEY4MDApID09IDB4NDgwMCkgewoJCS8vIExEUigzKQoJCXZhciByZCA9IChpbnN0cnVjdGlvbiAmIDB4MDcwMCkgPj4gODsKCQl2YXIgaW1tZWRpYXRlID0gKGluc3RydWN0aW9uICYgMHgwMEZGKSA8PCAyOwoJCW9wID0gdGhpcy50aHVtYkNvbXBpbGVyLmNvbnN0cnVjdExEUjMocmQsIGltbWVkaWF0ZSk7CgkJb3Aud3JpdGVzUEMgPSBmYWxzZTsKCX0gZWxzZSBpZiAoKGluc3RydWN0aW9uICYgMHhGMDAwKSA9PSAweDUwMDApIHsKCQkvLyBMb2FkIGFuZCBzdG9yZSB3aXRoIHJlbGF0aXZlIG9mZnNldAoJCXZhciByZCA9IGluc3RydWN0aW9uICYgMHgwMDA3OwoJCXZhciBybiA9IChpbnN0cnVjdGlvbiAmIDB4MDAzOCkgPj4gMzsKCQl2YXIgcm0gPSAoaW5zdHJ1Y3Rpb24gJiAweDAxQzApID4+IDY7CgkJdmFyIG9wY29kZSA9IGluc3RydWN0aW9uICYgMHgwRTAwOwoJCXN3aXRjaCAob3Bjb2RlKSB7CgkJY2FzZSAweDAwMDA6CgkJCS8vIFNUUigyKQoJCQlvcCA9IHRoaXMudGh1bWJDb21waWxlci5jb25zdHJ1Y3RTVFIyKHJkLCBybiwgcm0pOwoJCQlicmVhazsKCQljYXNlIDB4MDIwMDoKCQkJLy8gU1RSSCgyKQoJCQlvcCA9IHRoaXMudGh1bWJDb21waWxlci5jb25zdHJ1Y3RTVFJIMihyZCwgcm4sIHJtKTsKCQkJYnJlYWs7CgkJY2FzZSAweDA0MDA6CgkJCS8vIFNUUkIoMikKCQkJb3AgPSB0aGlzLnRodW1iQ29tcGlsZXIuY29uc3RydWN0U1RSQjIocmQsIHJuLCBybSk7CgkJCWJyZWFrOwoJCWNhc2UgMHgwNjAwOgoJCQkvLyBMRFJTQgoJCQlvcCA9IHRoaXMudGh1bWJDb21waWxlci5jb25zdHJ1Y3RMRFJTQihyZCwgcm4sIHJtKTsKCQkJYnJlYWs7CgkJY2FzZSAweDA4MDA6CgkJCS8vIExEUigyKQoJCQlvcCA9IHRoaXMudGh1bWJDb21waWxlci5jb25zdHJ1Y3RMRFIyKHJkLCBybiwgcm0pOwoJCQlicmVhazsKCQljYXNlIDB4MEEwMDoKCQkJLy8gTERSSCgyKQoJCQlvcCA9IHRoaXMudGh1bWJDb21waWxlci5jb25zdHJ1Y3RMRFJIMihyZCwgcm4sIHJtKTsKCQkJYnJlYWs7CgkJY2FzZSAweDBDMDA6CgkJCS8vIExEUkIoMikKCQkJb3AgPSB0aGlzLnRodW1iQ29tcGlsZXIuY29uc3RydWN0TERSQjIocmQsIHJuLCBybSk7CgkJCWJyZWFrOwoJCWNhc2UgMHgwRTAwOgoJCQkvLyBMRFJTSAoJCQlvcCA9IHRoaXMudGh1bWJDb21waWxlci5jb25zdHJ1Y3RMRFJTSChyZCwgcm4sIHJtKTsKCQkJYnJlYWs7CgkJfQoJCW9wLndyaXRlc1BDID0gZmFsc2U7Cgl9IGVsc2UgaWYgKChpbnN0cnVjdGlvbiAmIDB4RTAwMCkgPT0gMHg2MDAwKSB7CgkJLy8gTG9hZCBhbmQgc3RvcmUgd2l0aCBpbW1lZGlhdGUgb2Zmc2V0CgkJdmFyIHJkID0gaW5zdHJ1Y3Rpb24gJiAweDAwMDc7CgkJdmFyIHJuID0gKGluc3RydWN0aW9uICYgMHgwMDM4KSA+PiAzOwoJCXZhciBpbW1lZGlhdGUgPSAoaW5zdHJ1Y3Rpb24gJiAweDA3QzApID4+IDQ7CgkJdmFyIGIgPSBpbnN0cnVjdGlvbiAmIDB4MTAwMDsKCQlpZiAoYikgewoJCQlpbW1lZGlhdGUgPj49IDI7CgkJfQoJCXZhciBsb2FkID0gaW5zdHJ1Y3Rpb24gJiAweDA4MDA7CgkJaWYgKGxvYWQpIHsKCQkJaWYgKGIpIHsKCQkJCS8vIExEUkIoMSkKCQkJCW9wID0gdGhpcy50aHVtYkNvbXBpbGVyLmNvbnN0cnVjdExEUkIxKHJkLCBybiwgaW1tZWRpYXRlKTsKCQkJfSBlbHNlIHsKCQkJCS8vIExEUigxKQoJCQkJb3AgPSB0aGlzLnRodW1iQ29tcGlsZXIuY29uc3RydWN0TERSMShyZCwgcm4sIGltbWVkaWF0ZSk7CgkJCX0KCQl9IGVsc2UgewoJCQlpZiAoYikgewoJCQkJLy8gU1RSQigxKQoJCQkJb3AgPSB0aGlzLnRodW1iQ29tcGlsZXIuY29uc3RydWN0U1RSQjEocmQsIHJuLCBpbW1lZGlhdGUpOwoJCQl9IGVsc2UgewoJCQkJLy8gU1RSKDEpCgkJCQlvcCA9IHRoaXMudGh1bWJDb21waWxlci5jb25zdHJ1Y3RTVFIxKHJkLCBybiwgaW1tZWRpYXRlKTsKCQkJfQoJCX0KCQlvcC53cml0ZXNQQyA9IGZhbHNlOwoJfSBlbHNlIGlmICgoaW5zdHJ1Y3Rpb24gJiAweEY2MDApID09IDB4QjQwMCkgewoJCS8vIFB1c2ggYW5kIHBvcCByZWdpc3RlcnMKCQl2YXIgciA9ICEhKGluc3RydWN0aW9uICYgMHgwMTAwKTsKCQl2YXIgcnMgPSBpbnN0cnVjdGlvbiAmIDB4MDBGRjsKCQlpZiAoaW5zdHJ1Y3Rpb24gJiAweDA4MDApIHsKCQkJLy8gUE9QCgkJCW9wID0gdGhpcy50aHVtYkNvbXBpbGVyLmNvbnN0cnVjdFBPUChycywgcik7CgkJCW9wLndyaXRlc1BDID0gcjsKCQkJb3AuZml4ZWRKdW1wID0gZmFsc2U7CgkJfSBlbHNlIHsKCQkJLy8gUFVTSAoJCQlvcCA9IHRoaXMudGh1bWJDb21waWxlci5jb25zdHJ1Y3RQVVNIKHJzLCByKTsKCQkJb3Aud3JpdGVzUEMgPSBmYWxzZTsKCQl9Cgl9IGVsc2UgaWYgKGluc3RydWN0aW9uICYgMHg4MDAwKSB7CgkJc3dpdGNoIChpbnN0cnVjdGlvbiAmIDB4NzAwMCkgewoJCWNhc2UgMHgwMDAwOgoJCQkvLyBMb2FkIGFuZCBzdG9yZSBoYWxmd29yZAoJCQl2YXIgcmQgPSBpbnN0cnVjdGlvbiAmIDB4MDAwNzsKCQkJdmFyIHJuID0gKGluc3RydWN0aW9uICYgMHgwMDM4KSA+PiAzOwoJCQl2YXIgaW1tZWRpYXRlID0gKGluc3RydWN0aW9uICYgMHgwN0MwKSA+PiA1OwoJCQlpZiAoaW5zdHJ1Y3Rpb24gJiAweDA4MDApIHsKCQkJCS8vIExEUkgoMSkKCQkJCW9wID0gdGhpcy50aHVtYkNvbXBpbGVyLmNvbnN0cnVjdExEUkgxKHJkLCBybiwgaW1tZWRpYXRlKTsKCQkJfSBlbHNlIHsKCQkJCS8vIFNUUkgoMSkKCQkJCW9wID0gdGhpcy50aHVtYkNvbXBpbGVyLmNvbnN0cnVjdFNUUkgxKHJkLCBybiwgaW1tZWRpYXRlKTsKCQkJfQoJCQlvcC53cml0ZXNQQyA9IGZhbHNlOwoJCQlicmVhazsKCQljYXNlIDB4MTAwMDoKCQkJLy8gU1AtcmVsYXRpdmUgbG9hZCBhbmQgc3RvcmUKCQkJdmFyIHJkID0gKGluc3RydWN0aW9uICYgMHgwNzAwKSA+PiA4OwoJCQl2YXIgaW1tZWRpYXRlID0gKGluc3RydWN0aW9uICYgMHgwMEZGKSA8PCAyOwoJCQl2YXIgbG9hZCA9IGluc3RydWN0aW9uICYgMHgwODAwOwoJCQlpZiAobG9hZCkgewoJCQkJLy8gTERSKDQpCgkJCQlvcCA9IHRoaXMudGh1bWJDb21waWxlci5jb25zdHJ1Y3RMRFI0KHJkLCBpbW1lZGlhdGUpOwoJCQl9IGVsc2UgewoJCQkJLy8gU1RSKDMpCgkJCQlvcCA9IHRoaXMudGh1bWJDb21waWxlci5jb25zdHJ1Y3RTVFIzKHJkLCBpbW1lZGlhdGUpOwoJCQl9CgkJCW9wLndyaXRlc1BDID0gZmFsc2U7CgkJCWJyZWFrOwoJCWNhc2UgMHgyMDAwOgoJCQkvLyBMb2FkIGFkZHJlc3MKCQkJdmFyIHJkID0gKGluc3RydWN0aW9uICYgMHgwNzAwKSA+PiA4OwoJCQl2YXIgaW1tZWRpYXRlID0gKGluc3RydWN0aW9uICYgMHgwMEZGKSA8PCAyOwoJCQlpZiAoaW5zdHJ1Y3Rpb24gJiAweDA4MDApIHsKCQkJCS8vIEFERCg2KQoJCQkJb3AgPSB0aGlzLnRodW1iQ29tcGlsZXIuY29uc3RydWN0QURENihyZCwgaW1tZWRpYXRlKTsKCQkJfSBlbHNlIHsKCQkJCS8vIEFERCg1KQoJCQkJb3AgPSB0aGlzLnRodW1iQ29tcGlsZXIuY29uc3RydWN0QURENShyZCwgaW1tZWRpYXRlKTsKCQkJfQoJCQlvcC53cml0ZXNQQyA9IGZhbHNlOwoJCQlicmVhazsKCQljYXNlIDB4MzAwMDoKCQkJLy8gTWlzY2VsbGFuZW91cwoJCQlpZiAoIShpbnN0cnVjdGlvbiAmIDB4MEYwMCkpIHsKCQkJCS8vIEFkanVzdCBzdGFjayBwb2ludGVyCgkJCQkvLyBBREQoNykvU1VCKDQpCgkJCQl2YXIgYiA9IGluc3RydWN0aW9uICYgMHgwMDgwOwoJCQkJdmFyIGltbWVkaWF0ZSA9IChpbnN0cnVjdGlvbiAmIDB4N0YpIDw8IDI7CgkJCQlpZiAoYikgewoJCQkJCWltbWVkaWF0ZSA9IC1pbW1lZGlhdGU7CgkJCQl9CgkJCQlvcCA9IHRoaXMudGh1bWJDb21waWxlci5jb25zdHJ1Y3RBREQ3KGltbWVkaWF0ZSkKCQkJCW9wLndyaXRlc1BDID0gZmFsc2U7CgkJCX0KCQkJYnJlYWs7CgkJY2FzZSAweDQwMDA6CgkJCS8vIE11bHRpcGxlIGxvYWQgYW5kIHN0b3JlCgkJCXZhciBybiA9IChpbnN0cnVjdGlvbiAmIDB4MDcwMCkgPj4gODsKCQkJdmFyIHJzID0gaW5zdHJ1Y3Rpb24gJiAweDAwRkY7CgkJCWlmIChpbnN0cnVjdGlvbiAmIDB4MDgwMCkgewoJCQkJLy8gTERNSUEKCQkJCW9wID0gdGhpcy50aHVtYkNvbXBpbGVyLmNvbnN0cnVjdExETUlBKHJuLCBycyk7CgkJCX0gZWxzZSB7CgkJCQkvLyBTVE1JQQoJCQkJb3AgPSB0aGlzLnRodW1iQ29tcGlsZXIuY29uc3RydWN0U1RNSUEocm4sIHJzKTsKCQkJfQoJCQlvcC53cml0ZXNQQyA9IGZhbHNlOwoJCQlicmVhazsKCQljYXNlIDB4NTAwMDoKCQkJLy8gQ29uZGl0aW9uYWwgYnJhbmNoCgkJCXZhciBjb25kID0gKGluc3RydWN0aW9uICYgMHgwRjAwKSA+PiA4OwoJCQl2YXIgaW1tZWRpYXRlID0gKGluc3RydWN0aW9uICYgMHgwMEZGKTsKCQkJaWYgKGNvbmQgPT0gMHhGKSB7CgkJCQkvLyBTV0kKCQkJCW9wID0gdGhpcy50aHVtYkNvbXBpbGVyLmNvbnN0cnVjdFNXSShpbW1lZGlhdGUpOwoJCQkJb3Aud3JpdGVzUEMgPSBmYWxzZTsKCQkJfSBlbHNlIHsKCQkJCS8vIEIoMSkKCQkJCWlmIChpbnN0cnVjdGlvbiAmIDB4MDA4MCkgewoJCQkJCWltbWVkaWF0ZSB8PSAweEZGRkZGRjAwOwoJCQkJfQoJCQkJaW1tZWRpYXRlIDw8PSAxOwoJCQkJdmFyIGNvbmRPcCA9IHRoaXMuY29uZHNbY29uZF07CgkJCQlvcCA9IHRoaXMudGh1bWJDb21waWxlci5jb25zdHJ1Y3RCMShpbW1lZGlhdGUsIGNvbmRPcCk7CgkJCQlvcC53cml0ZXNQQyA9IHRydWU7CgkJCQlvcC5maXhlZEp1bXAgPSB0cnVlOwoJCQl9CgkJCWJyZWFrOwoJCWNhc2UgMHg2MDAwOgoJCWNhc2UgMHg3MDAwOgoJCQkvLyBCTChYKQoJCQl2YXIgaW1tZWRpYXRlID0gaW5zdHJ1Y3Rpb24gJiAweDA3RkY7CgkJCXZhciBoID0gaW5zdHJ1Y3Rpb24gJiAweDE4MDA7CgkJCXN3aXRjaCAoaCkgewoJCQljYXNlIDB4MDAwMDoKCQkJCS8vIEIoMikKCQkJCWlmIChpbW1lZGlhdGUgJiAweDA0MDApIHsKCQkJCQlpbW1lZGlhdGUgfD0gMHhGRkZGRjgwMDsKCQkJCX0KCQkJCWltbWVkaWF0ZSA8PD0gMTsKCQkJCW9wID0gdGhpcy50aHVtYkNvbXBpbGVyLmNvbnN0cnVjdEIyKGltbWVkaWF0ZSk7CgkJCQlvcC53cml0ZXNQQyA9IHRydWU7CgkJCQlvcC5maXhlZEp1bXAgPSB0cnVlOwoJCQkJYnJlYWs7CgkJCWNhc2UgMHgwODAwOgoJCQkJLy8gQkxYIChBUk12NVQpCgkJCQkvKm9wID0gZnVuY3Rpb24oKSB7CgkJCQkJdmFyIHBjID0gZ3Byc1tjcHUuUENdOwoJCQkJCWdwcnNbY3B1LlBDXSA9IChncHJzW2NwdS5MUl0gKyAoaW1tZWRpYXRlIDw8IDEpKSAmIDB4RkZGRkZGRkM7CgkJCQkJZ3Byc1tjcHUuTFJdID0gcGMgLSAxOwoJCQkJCWNwdS5zd2l0Y2hFeGVjTW9kZShjcHUuTU9ERV9BUk0pOwoJCQkJfSovCgkJCQlicmVhazsKCQkJY2FzZSAweDEwMDA6CgkJCQkvLyBCTCgxKQoJCQkJaWYgKGltbWVkaWF0ZSAmIDB4MDQwMCkgewoJCQkJCWltbWVkaWF0ZSB8PSAweEZGRkZGQzAwOwoJCQkJfQoJCQkJaW1tZWRpYXRlIDw8PSAxMjsKCQkJCW9wID0gdGhpcy50aHVtYkNvbXBpbGVyLmNvbnN0cnVjdEJMMShpbW1lZGlhdGUpOwoJCQkJb3Aud3JpdGVzUEMgPSBmYWxzZTsKCQkJCWJyZWFrOwoJCQljYXNlIDB4MTgwMDoKCQkJCS8vIEJMKDIpCgkJCQlvcCA9IHRoaXMudGh1bWJDb21waWxlci5jb25zdHJ1Y3RCTDIoaW1tZWRpYXRlKTsKCQkJCW9wLndyaXRlc1BDID0gdHJ1ZTsKCQkJCW9wLmZpeGVkSnVtcCA9IGZhbHNlOwoJCQkJYnJlYWs7CgkJCX0KCQkJYnJlYWs7CgkJZGVmYXVsdDoKCQkJdGhpcy5XQVJOKCJVbmRlZmluZWQgaW5zdHJ1Y3Rpb246IDB4IiArIGluc3RydWN0aW9uLnRvU3RyaW5nKDE2KSk7CgkJfQoJfSBlbHNlIHsKCQl0aHJvdyAnQmFkIG9wY29kZTogMHgnICsgaW5zdHJ1Y3Rpb24udG9TdHJpbmcoMTYpOwoJfQoKCW9wLmV4ZWNNb2RlID0gdGhpcy5NT0RFX1RIVU1COwoJb3AuZml4ZWRKdW1wID0gb3AuZml4ZWRKdW1wIHx8IGZhbHNlOwoJcmV0dXJuIG9wOwp9Owo="></script>
<script src="data:@file/javascript;base64,QVJNQ29yZUFybSA9IGZ1bmN0aW9uIChjcHUpIHsKCXRoaXMuY3B1ID0gY3B1OwoKCXRoaXMuYWRkcmVzc2luZ01vZGUyM0ltbWVkaWF0ZSA9IFsKCQkvLyAwMDB4MAoJCWZ1bmN0aW9uKHJuLCBvZmZzZXQsIGNvbmRPcCkgewoJCQl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJCQl2YXIgYWRkcmVzcyA9IGZ1bmN0aW9uKCkgewoJCQkJdmFyIGFkZHIgPSBncHJzW3JuXTsKCQkJCWlmICghY29uZE9wIHx8IGNvbmRPcCgpKSB7CgkJCQkJZ3Byc1tybl0gLT0gb2Zmc2V0OwoJCQkJfQoJCQkJcmV0dXJuIGFkZHI7CgkJCX07CgkJCWFkZHJlc3Mud3JpdGVzUEMgPSBybiA9PSBjcHUuUEM7CgkJCXJldHVybiBhZGRyZXNzOwoJCX0sCgoJCS8vIDAwMHhXCgkJbnVsbCwKCgkJbnVsbCwKCQludWxsLAoKCQkvLyAwMFV4MAoJCWZ1bmN0aW9uKHJuLCBvZmZzZXQsIGNvbmRPcCkgewoJCQl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJCQl2YXIgYWRkcmVzcyA9IGZ1bmN0aW9uKCkgewoJCQkJdmFyIGFkZHIgPSBncHJzW3JuXTsKCQkJCWlmICghY29uZE9wIHx8IGNvbmRPcCgpKSB7CgkJCQkJZ3Byc1tybl0gKz0gb2Zmc2V0OwoJCQkJfQoJCQkJcmV0dXJuIGFkZHI7CgkJCX07CgkJCWFkZHJlc3Mud3JpdGVzUEMgPSBybiA9PSBjcHUuUEM7CgkJCXJldHVybiBhZGRyZXNzOwoJCX0sCgoJCS8vIDAwVXhXCgkJbnVsbCwKCgkJbnVsbCwKCQludWxsLAoKCQkvLyAwUDB4MAoJCWZ1bmN0aW9uKHJuLCBvZmZzZXQsIGNvbmRPcCkgewoJCQl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJCQl2YXIgYWRkcmVzcyA9IGZ1bmN0aW9uKCkgewoJCQkJcmV0dXJuIGFkZHIgPSBncHJzW3JuXSAtIG9mZnNldDsKCQkJfTsKCQkJYWRkcmVzcy53cml0ZXNQQyA9IGZhbHNlOwoJCQlyZXR1cm4gYWRkcmVzczsKCQl9LAoKCQkvLyAwUDB4VwoJCWZ1bmN0aW9uKHJuLCBvZmZzZXQsIGNvbmRPcCkgewoJCQl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJCQl2YXIgYWRkcmVzcyA9IGZ1bmN0aW9uKCkgewoJCQkJdmFyIGFkZHIgPSBncHJzW3JuXSAtIG9mZnNldDsKCQkJCWlmICghY29uZE9wIHx8IGNvbmRPcCgpKSB7CgkJCQkJZ3Byc1tybl0gPSBhZGRyOwoJCQkJfQoJCQkJcmV0dXJuIGFkZHI7CgkJCX07CgkJCWFkZHJlc3Mud3JpdGVzUEMgPSBybiA9PSBjcHUuUEM7CgkJCXJldHVybiBhZGRyZXNzOwoJCX0sCgoJCW51bGwsCgkJbnVsbCwKCgkJLy8gMFBVeDAKCQlmdW5jdGlvbihybiwgb2Zmc2V0LCBjb25kT3ApIHsKCQkJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCQkJdmFyIGFkZHJlc3MgPSBmdW5jdGlvbigpIHsKCQkJCXJldHVybiBhZGRyID0gZ3Byc1tybl0gKyBvZmZzZXQ7CgkJCX07CgkJCWFkZHJlc3Mud3JpdGVzUEMgPSBmYWxzZTsKCQkJcmV0dXJuIGFkZHJlc3M7CgkJfSwKCgkJLy8gMFBVeFcKCQlmdW5jdGlvbihybiwgb2Zmc2V0LCBjb25kT3ApIHsKCQkJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCQkJdmFyIGFkZHJlc3MgPSBmdW5jdGlvbigpIHsKCQkJCXZhciBhZGRyID0gZ3Byc1tybl0gKyBvZmZzZXQ7CgkJCQlpZiAoIWNvbmRPcCB8fCBjb25kT3AoKSkgewoJCQkJCWdwcnNbcm5dID0gYWRkcjsKCQkJCX0KCQkJCXJldHVybiBhZGRyOwoJCQl9OwoJCQlhZGRyZXNzLndyaXRlc1BDID0gcm4gPT0gY3B1LlBDOwoJCQlyZXR1cm4gYWRkcmVzczsKCQl9LAoKCQludWxsLAoJCW51bGwsCgldOwoKCXRoaXMuYWRkcmVzc2luZ01vZGUyM1JlZ2lzdGVyID0gWwoJCS8vIEkwMHgwCgkJZnVuY3Rpb24ocm4sIHJtLCBjb25kT3ApIHsKCQkJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCQkJdmFyIGFkZHJlc3MgPSBmdW5jdGlvbigpIHsKCQkJCXZhciBhZGRyID0gZ3Byc1tybl07CgkJCQlpZiAoIWNvbmRPcCB8fCBjb25kT3AoKSkgewoJCQkJCWdwcnNbcm5dIC09IGdwcnNbcm1dOwoJCQkJfQoJCQkJcmV0dXJuIGFkZHI7CgkJCX07CgkJCWFkZHJlc3Mud3JpdGVzUEMgPSBybiA9PSBjcHUuUEM7CgkJCXJldHVybiBhZGRyZXNzOwoJCX0sCgoJCS8vIEkwMHhXCgkJbnVsbCwKCgkJbnVsbCwKCQludWxsLAoKCQkvLyBJMFV4MAoJCWZ1bmN0aW9uKHJuLCBybSwgY29uZE9wKSB7CgkJCXZhciBncHJzID0gY3B1LmdwcnM7CgkJCXZhciBhZGRyZXNzID0gZnVuY3Rpb24oKSB7CgkJCQl2YXIgYWRkciA9IGdwcnNbcm5dOwoJCQkJaWYgKCFjb25kT3AgfHwgY29uZE9wKCkpIHsKCQkJCQlncHJzW3JuXSArPSBncHJzW3JtXTsKCQkJCX0KCQkJCXJldHVybiBhZGRyOwoJCQl9OwoJCQlhZGRyZXNzLndyaXRlc1BDID0gcm4gPT0gY3B1LlBDOwoJCQlyZXR1cm4gYWRkcmVzczsKCQl9LAoKCQkvLyBJMFV4VwoJCW51bGwsCgoJCW51bGwsCgkJbnVsbCwKCgkJLy8gSVAweDAKCQlmdW5jdGlvbihybiwgcm0sIGNvbmRPcCkgewoJCQl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJCQl2YXIgYWRkcmVzcyA9IGZ1bmN0aW9uKCkgewoJCQkJcmV0dXJuIGdwcnNbcm5dIC0gZ3Byc1tybV07CgkJCX07CgkJCWFkZHJlc3Mud3JpdGVzUEMgPSBmYWxzZTsKCQkJcmV0dXJuIGFkZHJlc3M7CgkJfSwKCgkJLy8gSVAweFcKCQlmdW5jdGlvbihybiwgcm0sIGNvbmRPcCkgewoJCQl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJCQl2YXIgYWRkcmVzcyA9IGZ1bmN0aW9uKCkgewoJCQkJdmFyIGFkZHIgPSBncHJzW3JuXSAtIGdwcnNbcm1dOwoJCQkJaWYgKCFjb25kT3AgfHwgY29uZE9wKCkpIHsKCQkJCQlncHJzW3JuXSA9IGFkZHI7CgkJCQl9CgkJCQlyZXR1cm4gYWRkcjsKCQkJfTsKCQkJYWRkcmVzcy53cml0ZXNQQyA9IHJuID09IGNwdS5QQzsKCQkJcmV0dXJuIGFkZHJlc3M7CgkJfSwKCgkJbnVsbCwKCQludWxsLAoKCQkvLyBJUFV4MAoJCWZ1bmN0aW9uKHJuLCBybSwgY29uZE9wKSB7CgkJCXZhciBncHJzID0gY3B1LmdwcnM7CgkJCXZhciBhZGRyZXNzID0gZnVuY3Rpb24oKSB7CgkJCQl2YXIgYWRkciA9IGdwcnNbcm5dICsgZ3Byc1tybV07CgkJCQlyZXR1cm4gYWRkcjsKCQkJfTsKCQkJYWRkcmVzcy53cml0ZXNQQyA9IGZhbHNlOwoJCQlyZXR1cm4gYWRkcmVzczsKCQl9LAoKCQkvLyBJUFV4VwoJCWZ1bmN0aW9uKHJuLCBybSwgY29uZE9wKSB7CgkJCXZhciBncHJzID0gY3B1LmdwcnM7CgkJCXZhciBhZGRyZXNzID0gZnVuY3Rpb24oKSB7CgkJCQl2YXIgYWRkciA9IGdwcnNbcm5dICsgZ3Byc1tybV07CgkJCQlpZiAoIWNvbmRPcCB8fCBjb25kT3AoKSkgewoJCQkJCWdwcnNbcm5dID0gYWRkcjsKCQkJCX0KCQkJCXJldHVybiBhZGRyOwoJCQl9OwoJCQlhZGRyZXNzLndyaXRlc1BDID0gcm4gPT0gY3B1LlBDOwoJCQlyZXR1cm4gYWRkcmVzczsKCQl9LAoKCQludWxsLAoJCW51bGwKCV07CgoJdGhpcy5hZGRyZXNzaW5nTW9kZTJSZWdpc3RlclNoaWZ0ZWQgPSBbCgkJLy8gSTAweDAKCQlmdW5jdGlvbihybiwgc2hpZnRPcCwgY29uZE9wKSB7CgkJCXZhciBncHJzID0gY3B1LmdwcnM7CgkJCXZhciBhZGRyZXNzID0gZnVuY3Rpb24oKSB7CgkJCQl2YXIgYWRkciA9IGdwcnNbcm5dOwoJCQkJaWYgKCFjb25kT3AgfHwgY29uZE9wKCkpIHsKCQkJCQlzaGlmdE9wKCk7CgkJCQkJZ3Byc1tybl0gLT0gY3B1LnNoaWZ0ZXJPcGVyYW5kOwoJCQkJfQoJCQkJcmV0dXJuIGFkZHI7CgkJCX07CgkJCWFkZHJlc3Mud3JpdGVzUEMgPSBybiA9PSBjcHUuUEM7CgkJCXJldHVybiBhZGRyZXNzOwoJCX0sCgoJCS8vIEkwMHhXCgkJbnVsbCwKCgkJbnVsbCwKCQludWxsLAoKCQkvLyBJMFV4MAoJCWZ1bmN0aW9uKHJuLCBzaGlmdE9wLCBjb25kT3ApIHsKCQkJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCQkJdmFyIGFkZHJlc3MgPSBmdW5jdGlvbigpIHsKCQkJCXZhciBhZGRyID0gZ3Byc1tybl07CgkJCQlpZiAoIWNvbmRPcCB8fCBjb25kT3AoKSkgewoJCQkJCXNoaWZ0T3AoKTsKCQkJCQlncHJzW3JuXSArPSBjcHUuc2hpZnRlck9wZXJhbmQ7CgkJCQl9CgkJCQlyZXR1cm4gYWRkcjsKCQkJfTsKCQkJYWRkcmVzcy53cml0ZXNQQyA9IHJuID09IGNwdS5QQzsKCQkJcmV0dXJuIGFkZHJlc3M7CgkJfSwKCQkvLyBJMFV4VwoJCW51bGwsCgoJCW51bGwsCgkJbnVsbCwKCgkJLy8gSVAweDAKCQlmdW5jdGlvbihybiwgc2hpZnRPcCwgY29uZE9wKSB7CgkJCXZhciBncHJzID0gY3B1LmdwcnM7CgkJCXZhciBhZGRyZXNzID0gZnVuY3Rpb24oKSB7CgkJCQlzaGlmdE9wKCk7CgkJCQlyZXR1cm4gZ3Byc1tybl0gLSBjcHUuc2hpZnRlck9wZXJhbmQ7CgkJCX07CgkJCWFkZHJlc3Mud3JpdGVzUEMgPSBmYWxzZTsKCQkJcmV0dXJuIGFkZHJlc3M7CgkJfSwKCgkJLy8gSVAweFcKCQlmdW5jdGlvbihybiwgc2hpZnRPcCwgY29uZE9wKSB7CgkJCXZhciBncHJzID0gY3B1LmdwcnM7CgkJCXZhciBhZGRyZXNzID0gZnVuY3Rpb24oKSB7CgkJCQlzaGlmdE9wKCk7CgkJCQl2YXIgYWRkciA9IGdwcnNbcm5dIC0gY3B1LnNoaWZ0ZXJPcGVyYW5kOwoJCQkJaWYgKCFjb25kT3AgfHwgY29uZE9wKCkpIHsKCQkJCQlncHJzW3JuXSA9IGFkZHI7CgkJCQl9CgkJCQlyZXR1cm4gYWRkcjsKCQkJfTsKCQkJYWRkcmVzcy53cml0ZXNQQyA9IHJuID09IGNwdS5QQzsKCQkJcmV0dXJuIGFkZHJlc3M7CgkJfSwKCgkJbnVsbCwKCQludWxsLAoKCQkvLyBJUFV4MAoJCWZ1bmN0aW9uKHJuLCBzaGlmdE9wLCBjb25kT3ApIHsKCQkJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCQkJdmFyIGFkZHJlc3MgPSBmdW5jdGlvbigpIHsKCQkJCXNoaWZ0T3AoKTsKCQkJCXJldHVybiBncHJzW3JuXSArIGNwdS5zaGlmdGVyT3BlcmFuZDsKCQkJfTsKCQkJYWRkcmVzcy53cml0ZXNQQyA9IGZhbHNlOwoJCQlyZXR1cm4gYWRkcmVzczsKCQl9LAoKCQkvLyBJUFV4VwoJCWZ1bmN0aW9uKHJuLCBzaGlmdE9wLCBjb25kT3ApIHsKCQkJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCQkJdmFyIGFkZHJlc3MgPSBmdW5jdGlvbigpIHsKCQkJCXNoaWZ0T3AoKTsKCQkJCXZhciBhZGRyID0gZ3Byc1tybl0gKyBjcHUuc2hpZnRlck9wZXJhbmQ7CgkJCQlpZiAoIWNvbmRPcCB8fCBjb25kT3AoKSkgewoJCQkJCWdwcnNbcm5dID0gYWRkcjsKCQkJCX0KCQkJCXJldHVybiBhZGRyOwoJCQl9OwoJCQlhZGRyZXNzLndyaXRlUEMgPSBybiA9PSBjcHUuUEM7CgkJCXJldHVybiBhZGRyZXNzOwoJCX0sCgoJCW51bGwsCgkJbnVsbCwKCV07Cn0KCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdEFkZHJlc3NpbmdNb2RlMUFTUiA9IGZ1bmN0aW9uKHJzLCBybSkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQkrK2NwdS5jeWNsZXM7CgkJdmFyIHNoaWZ0ID0gZ3Byc1tyc107CgkJaWYgKHJzID09IGNwdS5QQykgewoJCQlzaGlmdCArPSA0OwoJCX0KCQlzaGlmdCAmPSAweEZGOwoJCXZhciBzaGlmdFZhbCA9ICBncHJzW3JtXTsKCQlpZiAocm0gPT0gY3B1LlBDKSB7CgkJCXNoaWZ0VmFsICs9IDQ7CgkJfQoJCWlmIChzaGlmdCA9PSAwKSB7CgkJCWNwdS5zaGlmdGVyT3BlcmFuZCA9IHNoaWZ0VmFsOwoJCQljcHUuc2hpZnRlckNhcnJ5T3V0ID0gY3B1LmNwc3JDOwoJCX0gZWxzZSBpZiAoc2hpZnQgPCAzMikgewoJCQljcHUuc2hpZnRlck9wZXJhbmQgPSBzaGlmdFZhbCA+PiBzaGlmdDsKCQkJY3B1LnNoaWZ0ZXJDYXJyeU91dCA9IHNoaWZ0VmFsICYgKDEgPDwgKHNoaWZ0IC0gMSkpOwoJCX0gZWxzZSBpZiAoZ3Byc1tybV0gPj4gMzEpIHsKCQkJY3B1LnNoaWZ0ZXJPcGVyYW5kID0gMHhGRkZGRkZGRjsKCQkJY3B1LnNoaWZ0ZXJDYXJyeU91dCA9IDB4ODAwMDAwMDA7CgkJfSBlbHNlIHsKCQkJY3B1LnNoaWZ0ZXJPcGVyYW5kID0gMDsKCQkJY3B1LnNoaWZ0ZXJDYXJyeU91dCA9IDA7CgkJfQoJfTsKfTsKCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdEFkZHJlc3NpbmdNb2RlMUltbWVkaWF0ZSA9IGZ1bmN0aW9uKGltbWVkaWF0ZSkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5zaGlmdGVyT3BlcmFuZCA9IGltbWVkaWF0ZTsKCQljcHUuc2hpZnRlckNhcnJ5T3V0ID0gY3B1LmNwc3JDOwoJfTsKfTsKCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdEFkZHJlc3NpbmdNb2RlMUltbWVkaWF0ZVJvdGF0ZSA9IGZ1bmN0aW9uKGltbWVkaWF0ZSwgcm90YXRlKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1LnNoaWZ0ZXJPcGVyYW5kID0gKGltbWVkaWF0ZSA+Pj4gcm90YXRlKSB8IChpbW1lZGlhdGUgPDwgKDMyIC0gcm90YXRlKSk7CgkJY3B1LnNoaWZ0ZXJDYXJyeU91dCA9IGNwdS5zaGlmdGVyT3BlcmFuZCA+PiAzMTsKCX0KfTsKCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdEFkZHJlc3NpbmdNb2RlMUxTTCA9IGZ1bmN0aW9uKHJzLCBybSkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQkrK2NwdS5jeWNsZXM7CgkJdmFyIHNoaWZ0ID0gZ3Byc1tyc107CgkJaWYgKHJzID09IGNwdS5QQykgewoJCQlzaGlmdCArPSA0OwoJCX0KCQlzaGlmdCAmPSAweEZGOwoJCXZhciBzaGlmdFZhbCA9ICBncHJzW3JtXTsKCQlpZiAocm0gPT0gY3B1LlBDKSB7CgkJCXNoaWZ0VmFsICs9IDQ7CgkJfQoJCWlmIChzaGlmdCA9PSAwKSB7CgkJCWNwdS5zaGlmdGVyT3BlcmFuZCA9IHNoaWZ0VmFsOwoJCQljcHUuc2hpZnRlckNhcnJ5T3V0ID0gY3B1LmNwc3JDOwoJCX0gZWxzZSBpZiAoc2hpZnQgPCAzMikgewoJCQljcHUuc2hpZnRlck9wZXJhbmQgPSBzaGlmdFZhbCA8PCBzaGlmdDsKCQkJY3B1LnNoaWZ0ZXJDYXJyeU91dCA9IHNoaWZ0VmFsICYgKDEgPDwgKDMyIC0gc2hpZnQpKTsKCQl9IGVsc2UgaWYgKHNoaWZ0ID09IDMyKSB7CgkJCWNwdS5zaGlmdGVyT3BlcmFuZCA9IDA7CgkJCWNwdS5zaGlmdGVyQ2FycnlPdXQgPSBzaGlmdFZhbCAmIDE7CgkJfSBlbHNlIHsKCQkJY3B1LnNoaWZ0ZXJPcGVyYW5kID0gMDsKCQkJY3B1LnNoaWZ0ZXJDYXJyeU91dCA9IDA7CgkJfQoJfTsKfTsKCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdEFkZHJlc3NpbmdNb2RlMUxTUiA9IGZ1bmN0aW9uKHJzLCBybSkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQkrK2NwdS5jeWNsZXM7CgkJdmFyIHNoaWZ0ID0gZ3Byc1tyc107CgkJaWYgKHJzID09IGNwdS5QQykgewoJCQlzaGlmdCArPSA0OwoJCX0KCQlzaGlmdCAmPSAweEZGOwoJCXZhciBzaGlmdFZhbCA9ICBncHJzW3JtXTsKCQlpZiAocm0gPT0gY3B1LlBDKSB7CgkJCXNoaWZ0VmFsICs9IDQ7CgkJfQoJCWlmIChzaGlmdCA9PSAwKSB7CgkJCWNwdS5zaGlmdGVyT3BlcmFuZCA9IHNoaWZ0VmFsOwoJCQljcHUuc2hpZnRlckNhcnJ5T3V0ID0gY3B1LmNwc3JDOwoJCX0gZWxzZSBpZiAoc2hpZnQgPCAzMikgewoJCQljcHUuc2hpZnRlck9wZXJhbmQgPSBzaGlmdFZhbCA+Pj4gc2hpZnQ7CgkJCWNwdS5zaGlmdGVyQ2FycnlPdXQgPSBzaGlmdFZhbCAmICgxIDw8IChzaGlmdCAtIDEpKTsKCQl9IGVsc2UgaWYgKHNoaWZ0ID09IDMyKSB7CgkJCWNwdS5zaGlmdGVyT3BlcmFuZCA9IDA7CgkJCWNwdS5zaGlmdGVyQ2FycnlPdXQgPSBzaGlmdFZhbCA+PiAzMTsKCQl9IGVsc2UgewoJCQljcHUuc2hpZnRlck9wZXJhbmQgPSAwOwoJCQljcHUuc2hpZnRlckNhcnJ5T3V0ID0gMDsKCQl9Cgl9Owp9OwoKQVJNQ29yZUFybS5wcm90b3R5cGUuY29uc3RydWN0QWRkcmVzc2luZ01vZGUxUk9SID0gZnVuY3Rpb24ocnMsIHJtKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCSsrY3B1LmN5Y2xlczsKCQl2YXIgc2hpZnQgPSBncHJzW3JzXTsKCQlpZiAocnMgPT0gY3B1LlBDKSB7CgkJCXNoaWZ0ICs9IDQ7CgkJfQoJCXNoaWZ0ICY9IDB4RkY7CgkJdmFyIHNoaWZ0VmFsID0gIGdwcnNbcm1dOwoJCWlmIChybSA9PSBjcHUuUEMpIHsKCQkJc2hpZnRWYWwgKz0gNDsKCQl9CgkJdmFyIHJvdGF0ZSA9IHNoaWZ0ICYgMHgxRjsKCQlpZiAoc2hpZnQgPT0gMCkgewoJCQljcHUuc2hpZnRlck9wZXJhbmQgPSBzaGlmdFZhbDsKCQkJY3B1LnNoaWZ0ZXJDYXJyeU91dCA9IGNwdS5jcHNyQzsKCQl9IGVsc2UgaWYgKHJvdGF0ZSkgewoJCQljcHUuc2hpZnRlck9wZXJhbmQgPSAoZ3Byc1tybV0gPj4+IHJvdGF0ZSkgfCAoZ3Byc1tybV0gPDwgKDMyIC0gcm90YXRlKSk7CgkJCWNwdS5zaGlmdGVyQ2FycnlPdXQgPSBzaGlmdFZhbCAmICgxIDw8IChyb3RhdGUgLSAxKSk7CgkJfSBlbHNlIHsKCQkJY3B1LnNoaWZ0ZXJPcGVyYW5kID0gc2hpZnRWYWw7CgkJCWNwdS5zaGlmdGVyQ2FycnlPdXQgPSBzaGlmdFZhbCA+PiAzMTsKCQl9Cgl9Owp9OwoKQVJNQ29yZUFybS5wcm90b3R5cGUuY29uc3RydWN0QWRkcmVzc2luZ01vZGUyM0ltbWVkaWF0ZSA9IGZ1bmN0aW9uKGluc3RydWN0aW9uLCBpbW1lZGlhdGUsIGNvbmRPcCkgewoJdmFyIHJuID0gKGluc3RydWN0aW9uICYgMHgwMDBGMDAwMCkgPj4gMTY7CglyZXR1cm4gdGhpcy5hZGRyZXNzaW5nTW9kZTIzSW1tZWRpYXRlWyhpbnN0cnVjdGlvbiAmIDB4MDFBMDAwMDApID4+IDIxXShybiwgaW1tZWRpYXRlLCBjb25kT3ApOwp9OwoKQVJNQ29yZUFybS5wcm90b3R5cGUuY29uc3RydWN0QWRkcmVzc2luZ01vZGUyM1JlZ2lzdGVyID0gZnVuY3Rpb24oaW5zdHJ1Y3Rpb24sIHJtLCBjb25kT3ApIHsKCXZhciBybiA9IChpbnN0cnVjdGlvbiAmIDB4MDAwRjAwMDApID4+IDE2OwoJcmV0dXJuIHRoaXMuYWRkcmVzc2luZ01vZGUyM1JlZ2lzdGVyWyhpbnN0cnVjdGlvbiAmIDB4MDFBMDAwMDApID4+IDIxXShybiwgcm0sIGNvbmRPcCk7Cn07CgpBUk1Db3JlQXJtLnByb3RvdHlwZS5jb25zdHJ1Y3RBZGRyZXNzaW5nTW9kZTJSZWdpc3RlclNoaWZ0ZWQgPSBmdW5jdGlvbihpbnN0cnVjdGlvbiwgc2hpZnRPcCwgY29uZE9wKSB7Cgl2YXIgcm4gPSAoaW5zdHJ1Y3Rpb24gJiAweDAwMEYwMDAwKSA+PiAxNjsKCXJldHVybiB0aGlzLmFkZHJlc3NpbmdNb2RlMlJlZ2lzdGVyU2hpZnRlZFsoaW5zdHJ1Y3Rpb24gJiAweDAxQTAwMDAwKSA+PiAyMV0ocm4sIHNoaWZ0T3AsIGNvbmRPcCk7Cn07CgpBUk1Db3JlQXJtLnByb3RvdHlwZS5jb25zdHJ1Y3RBZGRyZXNzaW5nTW9kZTQgPSBmdW5jdGlvbihpbW1lZGlhdGUsIHJuKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCXZhciBhZGRyID0gZ3Byc1tybl0gKyBpbW1lZGlhdGU7CgkJcmV0dXJuIGFkZHI7Cgl9Cn07CgpBUk1Db3JlQXJtLnByb3RvdHlwZS5jb25zdHJ1Y3RBZGRyZXNzaW5nTW9kZTRXcml0ZWJhY2sgPSBmdW5jdGlvbihpbW1lZGlhdGUsIG9mZnNldCwgcm4sIG92ZXJsYXApIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24od3JpdGVJbml0aWFsKSB7CgkJdmFyIGFkZHIgPSBncHJzW3JuXSArIGltbWVkaWF0ZTsKCQlpZiAod3JpdGVJbml0aWFsICYmIG92ZXJsYXApIHsKCQkJY3B1Lm1tdS5zdG9yZTMyKGdwcnNbcm5dICsgaW1tZWRpYXRlIC0gNCwgZ3Byc1tybl0pOwoJCX0KCQlncHJzW3JuXSArPSBvZmZzZXQ7CgkJcmV0dXJuIGFkZHI7Cgl9Cn07CgpBUk1Db3JlQXJtLnByb3RvdHlwZS5jb25zdHJ1Y3RBREMgPSBmdW5jdGlvbihyZCwgcm4sIHNoaWZ0T3AsIGNvbmRPcCkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaDMyKGdwcnNbY3B1LlBDXSk7CgkJaWYgKGNvbmRPcCAmJiAhY29uZE9wKCkpIHsKCQkJcmV0dXJuOwoJCX0KCQlzaGlmdE9wKCk7CgkJdmFyIHNoaWZ0ZXJPcGVyYW5kID0gKGNwdS5zaGlmdGVyT3BlcmFuZCA+Pj4gMCkgKyAhIWNwdS5jcHNyQzsKCQlncHJzW3JkXSA9IChncHJzW3JuXSA+Pj4gMCkgKyBzaGlmdGVyT3BlcmFuZDsKCX07Cn07CgpBUk1Db3JlQXJtLnByb3RvdHlwZS5jb25zdHJ1Y3RBRENTID0gZnVuY3Rpb24ocmQsIHJuLCBzaGlmdE9wLCBjb25kT3ApIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2gzMihncHJzW2NwdS5QQ10pOwoJCWlmIChjb25kT3AgJiYgIWNvbmRPcCgpKSB7CgkJCXJldHVybjsKCQl9CgkJc2hpZnRPcCgpOwoJCXZhciBzaGlmdGVyT3BlcmFuZCA9IChjcHUuc2hpZnRlck9wZXJhbmQgPj4+IDApICsgISFjcHUuY3BzckM7CgkJdmFyIGQgPSAoZ3Byc1tybl0gPj4+IDApICsgc2hpZnRlck9wZXJhbmQ7CgkJaWYgKHJkID09IGNwdS5QQyAmJiBjcHUuaGFzU1BTUigpKSB7CgkJCWNwdS51bnBhY2tDUFNSKGNwdS5zcHNyKTsKCQl9IGVsc2UgewoJCQljcHUuY3Bzck4gPSBkID4+IDMxOwoJCQljcHUuY3BzclogPSAhKGQgJiAweEZGRkZGRkZGKTsKCQkJY3B1LmNwc3JDID0gZCA+IDB4RkZGRkZGRkY7CgkJCWNwdS5jcHNyViA9IChncHJzW3JuXSA+PiAzMSkgPT0gKHNoaWZ0ZXJPcGVyYW5kID4+IDMxKSAmJgoJCQkJCQkoZ3Byc1tybl0gPj4gMzEpICE9IChkID4+IDMxKSAmJgoJCQkJCQkoc2hpZnRlck9wZXJhbmQgPj4gMzEpICE9IChkID4+IDMxKTsKCQl9CgkJZ3Byc1tyZF0gPSBkOwoJfTsKfTsKCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdEFERCA9IGZ1bmN0aW9uKHJkLCBybiwgc2hpZnRPcCwgY29uZE9wKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoMzIoZ3Byc1tjcHUuUENdKTsKCQlpZiAoY29uZE9wICYmICFjb25kT3AoKSkgewoJCQlyZXR1cm47CgkJfQoJCXNoaWZ0T3AoKTsKCQlncHJzW3JkXSA9IChncHJzW3JuXSA+Pj4gMCkgKyAoY3B1LnNoaWZ0ZXJPcGVyYW5kID4+PiAwKTsKCX07Cn07CgpBUk1Db3JlQXJtLnByb3RvdHlwZS5jb25zdHJ1Y3RBRERTID0gZnVuY3Rpb24ocmQsIHJuLCBzaGlmdE9wLCBjb25kT3ApIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2gzMihncHJzW2NwdS5QQ10pOwoJCWlmIChjb25kT3AgJiYgIWNvbmRPcCgpKSB7CgkJCXJldHVybjsKCQl9CgkJc2hpZnRPcCgpOwoJCXZhciBkID0gKGdwcnNbcm5dID4+PiAwKSArIChjcHUuc2hpZnRlck9wZXJhbmQgPj4+IDApOwoJCWlmIChyZCA9PSBjcHUuUEMgJiYgY3B1Lmhhc1NQU1IoKSkgewoJCQljcHUudW5wYWNrQ1BTUihjcHUuc3Bzcik7CgkJfSBlbHNlIHsKCQkJY3B1LmNwc3JOID0gZCA+PiAzMTsKCQkJY3B1LmNwc3JaID0gIShkICYgMHhGRkZGRkZGRik7CgkJCWNwdS5jcHNyQyA9IGQgPiAweEZGRkZGRkZGOwoJCQljcHUuY3BzclYgPSAoZ3Byc1tybl0gPj4gMzEpID09IChjcHUuc2hpZnRlck9wZXJhbmQgPj4gMzEpICYmCgkJCQkJCShncHJzW3JuXSA+PiAzMSkgIT0gKGQgPj4gMzEpICYmCgkJCQkJCShjcHUuc2hpZnRlck9wZXJhbmQgPj4gMzEpICE9IChkID4+IDMxKTsKCQl9CgkJZ3Byc1tyZF0gPSBkOwoJfTsKfTsKCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdEFORCA9IGZ1bmN0aW9uKHJkLCBybiwgc2hpZnRPcCwgY29uZE9wKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoMzIoZ3Byc1tjcHUuUENdKTsKCQlpZiAoY29uZE9wICYmICFjb25kT3AoKSkgewoJCQlyZXR1cm47CgkJfQoJCXNoaWZ0T3AoKTsKCQlncHJzW3JkXSA9IGdwcnNbcm5dICYgY3B1LnNoaWZ0ZXJPcGVyYW5kOwoJfTsKfTsKCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdEFORFMgPSBmdW5jdGlvbihyZCwgcm4sIHNoaWZ0T3AsIGNvbmRPcCkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaDMyKGdwcnNbY3B1LlBDXSk7CgkJaWYgKGNvbmRPcCAmJiAhY29uZE9wKCkpIHsKCQkJcmV0dXJuOwoJCX0KCQlzaGlmdE9wKCk7CgkJZ3Byc1tyZF0gPSBncHJzW3JuXSAmIGNwdS5zaGlmdGVyT3BlcmFuZDsKCQlpZiAocmQgPT0gY3B1LlBDICYmIGNwdS5oYXNTUFNSKCkpIHsKCQkJY3B1LnVucGFja0NQU1IoY3B1LnNwc3IpOwoJCX0gZWxzZSB7CgkJCWNwdS5jcHNyTiA9IGdwcnNbcmRdID4+IDMxOwoJCQljcHUuY3BzclogPSAhKGdwcnNbcmRdICYgMHhGRkZGRkZGRik7CgkJCWNwdS5jcHNyQyA9IGNwdS5zaGlmdGVyQ2FycnlPdXQ7CgkJfQoJfTsKfTsKCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdEIgPSBmdW5jdGlvbihpbW1lZGlhdGUsIGNvbmRPcCkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQlpZiAoY29uZE9wICYmICFjb25kT3AoKSkgewoJCQljcHUubW11LndhaXRQcmVmZXRjaDMyKGdwcnNbY3B1LlBDXSk7CgkJCXJldHVybjsKCQl9CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2gzMihncHJzW2NwdS5QQ10pOwoJCWdwcnNbY3B1LlBDXSArPSBpbW1lZGlhdGU7Cgl9Owp9OwoKQVJNQ29yZUFybS5wcm90b3R5cGUuY29uc3RydWN0QklDID0gZnVuY3Rpb24ocmQsIHJuLCBzaGlmdE9wLCBjb25kT3ApIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2gzMihncHJzW2NwdS5QQ10pOwoJCWlmIChjb25kT3AgJiYgIWNvbmRPcCgpKSB7CgkJCXJldHVybjsKCQl9CgkJc2hpZnRPcCgpOwoJCWdwcnNbcmRdID0gZ3Byc1tybl0gJiB+Y3B1LnNoaWZ0ZXJPcGVyYW5kOwoJfTsKfTsKCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdEJJQ1MgPSBmdW5jdGlvbihyZCwgcm4sIHNoaWZ0T3AsIGNvbmRPcCkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaDMyKGdwcnNbY3B1LlBDXSk7CgkJaWYgKGNvbmRPcCAmJiAhY29uZE9wKCkpIHsKCQkJcmV0dXJuOwoJCX0KCQlzaGlmdE9wKCk7CgkJZ3Byc1tyZF0gPSBncHJzW3JuXSAmIH5jcHUuc2hpZnRlck9wZXJhbmQ7CgkJaWYgKHJkID09IGNwdS5QQyAmJiBjcHUuaGFzU1BTUigpKSB7CgkJCWNwdS51bnBhY2tDUFNSKGNwdS5zcHNyKTsKCQl9IGVsc2UgewoJCQljcHUuY3Bzck4gPSBncHJzW3JkXSA+PiAzMTsKCQkJY3B1LmNwc3JaID0gIShncHJzW3JkXSAmIDB4RkZGRkZGRkYpOwoJCQljcHUuY3BzckMgPSBjcHUuc2hpZnRlckNhcnJ5T3V0OwoJCX0KCX07Cn07CgpBUk1Db3JlQXJtLnByb3RvdHlwZS5jb25zdHJ1Y3RCTCA9IGZ1bmN0aW9uKGltbWVkaWF0ZSwgY29uZE9wKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWlmIChjb25kT3AgJiYgIWNvbmRPcCgpKSB7CgkJCWNwdS5tbXUud2FpdFByZWZldGNoMzIoZ3Byc1tjcHUuUENdKTsKCQkJcmV0dXJuOwoJCX0KCQljcHUubW11LndhaXRQcmVmZXRjaDMyKGdwcnNbY3B1LlBDXSk7CgkJZ3Byc1tjcHUuTFJdID0gZ3Byc1tjcHUuUENdIC0gNDsKCQlncHJzW2NwdS5QQ10gKz0gaW1tZWRpYXRlOwoJfTsKfTsKCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdEJYID0gZnVuY3Rpb24ocm0sIGNvbmRPcCkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQlpZiAoY29uZE9wICYmICFjb25kT3AoKSkgewoJCQljcHUubW11LndhaXRQcmVmZXRjaDMyKGdwcnNbY3B1LlBDXSk7CgkJCXJldHVybjsKCQl9CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2gzMihncHJzW2NwdS5QQ10pOwoJCWNwdS5zd2l0Y2hFeGVjTW9kZShncHJzW3JtXSAmIDB4MDAwMDAwMDEpOwoJCWdwcnNbY3B1LlBDXSA9IGdwcnNbcm1dICYgMHhGRkZGRkZGRTsKCX07Cn07CgpBUk1Db3JlQXJtLnByb3RvdHlwZS5jb25zdHJ1Y3RDTU4gPSBmdW5jdGlvbihyZCwgcm4sIHNoaWZ0T3AsIGNvbmRPcCkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaDMyKGdwcnNbY3B1LlBDXSk7CgkJaWYgKGNvbmRPcCAmJiAhY29uZE9wKCkpIHsKCQkJcmV0dXJuOwoJCX0KCQlzaGlmdE9wKCk7CgkJdmFyIGFsdU91dCA9IChncHJzW3JuXSA+Pj4gMCkgKyAoY3B1LnNoaWZ0ZXJPcGVyYW5kID4+PiAwKTsKCQljcHUuY3Bzck4gPSBhbHVPdXQgPj4gMzE7CgkJY3B1LmNwc3JaID0gIShhbHVPdXQgJiAweEZGRkZGRkZGKTsKCQljcHUuY3BzckMgPSBhbHVPdXQgPiAweEZGRkZGRkZGOwoJCWNwdS5jcHNyViA9IChncHJzW3JuXSA+PiAzMSkgPT0gKGNwdS5zaGlmdGVyT3BlcmFuZCA+PiAzMSkgJiYKCQkJCQkoZ3Byc1tybl0gPj4gMzEpICE9IChhbHVPdXQgPj4gMzEpICYmCgkJCQkJKGNwdS5zaGlmdGVyT3BlcmFuZCA+PiAzMSkgIT0gKGFsdU91dCA+PiAzMSk7Cgl9Owp9OwoKQVJNQ29yZUFybS5wcm90b3R5cGUuY29uc3RydWN0Q01QID0gZnVuY3Rpb24ocmQsIHJuLCBzaGlmdE9wLCBjb25kT3ApIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2gzMihncHJzW2NwdS5QQ10pOwoJCWlmIChjb25kT3AgJiYgIWNvbmRPcCgpKSB7CgkJCXJldHVybjsKCQl9CgkJc2hpZnRPcCgpOwoJCXZhciBhbHVPdXQgPSBncHJzW3JuXSAtIGNwdS5zaGlmdGVyT3BlcmFuZDsKCQljcHUuY3Bzck4gPSBhbHVPdXQgPj4gMzE7CgkJY3B1LmNwc3JaID0gIShhbHVPdXQgJiAweEZGRkZGRkZGKTsKCQljcHUuY3BzckMgPSAoZ3Byc1tybl0gPj4+IDApID49IChjcHUuc2hpZnRlck9wZXJhbmQgPj4+IDApOwoJCWNwdS5jcHNyViA9IChncHJzW3JuXSA+PiAzMSkgIT0gKGNwdS5zaGlmdGVyT3BlcmFuZCA+PiAzMSkgJiYKCQkJCQkoZ3Byc1tybl0gPj4gMzEpICE9IChhbHVPdXQgPj4gMzEpOwoJfTsKfTsKCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdEVPUiA9IGZ1bmN0aW9uKHJkLCBybiwgc2hpZnRPcCwgY29uZE9wKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoMzIoZ3Byc1tjcHUuUENdKTsKCQlpZiAoY29uZE9wICYmICFjb25kT3AoKSkgewoJCQlyZXR1cm47CgkJfQoJCXNoaWZ0T3AoKTsKCQlncHJzW3JkXSA9IGdwcnNbcm5dIF4gY3B1LnNoaWZ0ZXJPcGVyYW5kOwoJfTsKfTsKCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdEVPUlMgPSBmdW5jdGlvbihyZCwgcm4sIHNoaWZ0T3AsIGNvbmRPcCkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaDMyKGdwcnNbY3B1LlBDXSk7CgkJaWYgKGNvbmRPcCAmJiAhY29uZE9wKCkpIHsKCQkJcmV0dXJuOwoJCX0KCQlzaGlmdE9wKCk7CgkJZ3Byc1tyZF0gPSBncHJzW3JuXSBeIGNwdS5zaGlmdGVyT3BlcmFuZDsKCQlpZiAocmQgPT0gY3B1LlBDICYmIGNwdS5oYXNTUFNSKCkpIHsKCQkJY3B1LnVucGFja0NQU1IoY3B1LnNwc3IpOwoJCX0gZWxzZSB7CgkJCWNwdS5jcHNyTiA9IGdwcnNbcmRdID4+IDMxOwoJCQljcHUuY3BzclogPSAhKGdwcnNbcmRdICYgMHhGRkZGRkZGRik7CgkJCWNwdS5jcHNyQyA9IGNwdS5zaGlmdGVyQ2FycnlPdXQ7CgkJfQoJfTsKfTsKCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdExETSA9IGZ1bmN0aW9uKHJzLCBhZGRyZXNzLCBjb25kT3ApIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7Cgl2YXIgbW11ID0gY3B1Lm1tdTsKCXJldHVybiBmdW5jdGlvbigpIHsKCQltbXUud2FpdFByZWZldGNoMzIoZ3Byc1tjcHUuUENdKTsKCQlpZiAoY29uZE9wICYmICFjb25kT3AoKSkgewoJCQlyZXR1cm47CgkJfQoJCXZhciBhZGRyID0gYWRkcmVzcyhmYWxzZSk7CgkJdmFyIHRvdGFsID0gMDsKCQl2YXIgbSwgaTsKCQlmb3IgKG0gPSBycywgaSA9IDA7IG07IG0gPj49IDEsICsraSkgewoJCQlpZiAobSAmIDEpIHsKCQkJCWdwcnNbaV0gPSBtbXUubG9hZDMyKGFkZHIgJiAweEZGRkZGRkZDKTsKCQkJCWFkZHIgKz0gNDsKCQkJCSsrdG90YWw7CgkJCX0KCQl9CgkJbW11LndhaXRNdWx0aTMyKGFkZHIsIHRvdGFsKTsKCQkrK2NwdS5jeWNsZXM7Cgl9Owp9OwoKQVJNQ29yZUFybS5wcm90b3R5cGUuY29uc3RydWN0TERNUyA9IGZ1bmN0aW9uKHJzLCBhZGRyZXNzLCBjb25kT3ApIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7Cgl2YXIgbW11ID0gY3B1Lm1tdTsKCXJldHVybiBmdW5jdGlvbigpIHsKCQltbXUud2FpdFByZWZldGNoMzIoZ3Byc1tjcHUuUENdKTsKCQlpZiAoY29uZE9wICYmICFjb25kT3AoKSkgewoJCQlyZXR1cm47CgkJfQoJCXZhciBhZGRyID0gYWRkcmVzcyhmYWxzZSk7CgkJdmFyIHRvdGFsID0gMDsKCQl2YXIgbW9kZSA9IGNwdS5tb2RlOwoJCWNwdS5zd2l0Y2hNb2RlKGNwdS5NT0RFX1NZU1RFTSk7CgkJdmFyIG0sIGk7CgkJZm9yIChtID0gcnMsIGkgPSAwOyBtOyBtID4+PSAxLCArK2kpIHsKCQkJaWYgKG0gJiAxKSB7CgkJCQlncHJzW2ldID0gbW11LmxvYWQzMihhZGRyICYgMHhGRkZGRkZGQyk7CgkJCQlhZGRyICs9IDQ7CgkJCQkrK3RvdGFsOwoJCQl9CgkJfQoJCWNwdS5zd2l0Y2hNb2RlKG1vZGUpOwoJCW1tdS53YWl0TXVsdGkzMihhZGRyLCB0b3RhbCk7CgkJKytjcHUuY3ljbGVzOwoJfTsKfTsKCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdExEUiA9IGZ1bmN0aW9uKHJkLCBhZGRyZXNzLCBjb25kT3ApIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2gzMihncHJzW2NwdS5QQ10pOwoJCWlmIChjb25kT3AgJiYgIWNvbmRPcCgpKSB7CgkJCXJldHVybjsKCQl9CgkJdmFyIGFkZHIgPSBhZGRyZXNzKCk7CgkJZ3Byc1tyZF0gPSBjcHUubW11LmxvYWQzMihhZGRyKTsKCQljcHUubW11LndhaXQzMihhZGRyKTsKCQkrK2NwdS5jeWNsZXM7Cgl9Owp9OwoKQVJNQ29yZUFybS5wcm90b3R5cGUuY29uc3RydWN0TERSQiA9IGZ1bmN0aW9uKHJkLCBhZGRyZXNzLCBjb25kT3ApIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2gzMihncHJzW2NwdS5QQ10pOwoJCWlmIChjb25kT3AgJiYgIWNvbmRPcCgpKSB7CgkJCXJldHVybjsKCQl9CgkJdmFyIGFkZHIgPSBhZGRyZXNzKCk7CgkJZ3Byc1tyZF0gPSBjcHUubW11LmxvYWRVOChhZGRyKTsKCQljcHUubW11LndhaXQoYWRkcik7CgkJKytjcHUuY3ljbGVzOwoJfTsKfTsKCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdExEUkggPSBmdW5jdGlvbihyZCwgYWRkcmVzcywgY29uZE9wKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoMzIoZ3Byc1tjcHUuUENdKTsKCQlpZiAoY29uZE9wICYmICFjb25kT3AoKSkgewoJCQlyZXR1cm47CgkJfQoJCXZhciBhZGRyID0gYWRkcmVzcygpOwoJCWdwcnNbcmRdID0gY3B1Lm1tdS5sb2FkVTE2KGFkZHIpOwoJCWNwdS5tbXUud2FpdChhZGRyKTsKCQkrK2NwdS5jeWNsZXM7Cgl9Owp9OwoKQVJNQ29yZUFybS5wcm90b3R5cGUuY29uc3RydWN0TERSU0IgPSBmdW5jdGlvbihyZCwgYWRkcmVzcywgY29uZE9wKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoMzIoZ3Byc1tjcHUuUENdKTsKCQlpZiAoY29uZE9wICYmICFjb25kT3AoKSkgewoJCQlyZXR1cm47CgkJfQoJCXZhciBhZGRyID0gYWRkcmVzcygpOwoJCWdwcnNbcmRdID0gY3B1Lm1tdS5sb2FkOChhZGRyKTsKCQljcHUubW11LndhaXQoYWRkcik7CgkJKytjcHUuY3ljbGVzOwoJfTsKfTsKCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdExEUlNIID0gZnVuY3Rpb24ocmQsIGFkZHJlc3MsIGNvbmRPcCkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaDMyKGdwcnNbY3B1LlBDXSk7CgkJaWYgKGNvbmRPcCAmJiAhY29uZE9wKCkpIHsKCQkJcmV0dXJuOwoJCX0KCQl2YXIgYWRkciA9IGFkZHJlc3MoKTsKCQlncHJzW3JkXSA9IGNwdS5tbXUubG9hZDE2KGFkZHIpOwoJCWNwdS5tbXUud2FpdChhZGRyKTsKCQkrK2NwdS5jeWNsZXM7Cgl9Owp9OwoKQVJNQ29yZUFybS5wcm90b3R5cGUuY29uc3RydWN0TUxBID0gZnVuY3Rpb24ocmQsIHJuLCBycywgcm0sIGNvbmRPcCkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaDMyKGdwcnNbY3B1LlBDXSk7CgkJaWYgKGNvbmRPcCAmJiAhY29uZE9wKCkpIHsKCQkJcmV0dXJuOwoJCX0KCQkrK2NwdS5jeWNsZXM7CgkJY3B1Lm1tdS53YWl0TXVsKHJzKTsKCQlpZiAoKGdwcnNbcm1dICYgMHhGRkZGMDAwMCkgJiYgKGdwcnNbcnNdICYgMHhGRkZGMDAwMCkpIHsKCQkJLy8gT3VyIGRhdGEgdHlwZSBpcyBhIGRvdWJsZS0td2UnbGwgbG9zZSBiaXRzIGlmIHdlIGRvIGl0IGFsbCBhdCBvbmNlIQoJCQl2YXIgaGkgPSAoKGdwcnNbcm1dICYgMHhGRkZGMDAwMCkgKiBncHJzW3JzXSkgJiAweEZGRkZGRkZGOwoJCQl2YXIgbG8gPSAoKGdwcnNbcm1dICYgMHgwMDAwRkZGRikgKiBncHJzW3JzXSkgJiAweEZGRkZGRkZGOwoJCQlncHJzW3JkXSA9IChoaSArIGxvICsgZ3Byc1tybl0pICYgMHhGRkZGRkZGRjsKCQl9IGVsc2UgewoJCQlncHJzW3JkXSA9IGdwcnNbcm1dICogZ3Byc1tyc10gKyBncHJzW3JuXTsKCQl9Cgl9Owp9OwoKQVJNQ29yZUFybS5wcm90b3R5cGUuY29uc3RydWN0TUxBUyA9IGZ1bmN0aW9uKHJkLCBybiwgcnMsIHJtLCBjb25kT3ApIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2gzMihncHJzW2NwdS5QQ10pOwoJCWlmIChjb25kT3AgJiYgIWNvbmRPcCgpKSB7CgkJCXJldHVybjsKCQl9CgkJKytjcHUuY3ljbGVzOwoJCWNwdS5tbXUud2FpdE11bChycyk7CgkJaWYgKChncHJzW3JtXSAmIDB4RkZGRjAwMDApICYmIChncHJzW3JzXSAmIDB4RkZGRjAwMDApKSB7CgkJCS8vIE91ciBkYXRhIHR5cGUgaXMgYSBkb3VibGUtLXdlJ2xsIGxvc2UgYml0cyBpZiB3ZSBkbyBpdCBhbGwgYXQgb25jZSEKCQkJdmFyIGhpID0gKChncHJzW3JtXSAmIDB4RkZGRjAwMDApICogZ3Byc1tyc10pICYgMHhGRkZGRkZGRjsKCQkJdmFyIGxvID0gKChncHJzW3JtXSAmIDB4MDAwMEZGRkYpICogZ3Byc1tyc10pICYgMHhGRkZGRkZGRjsKCQkJZ3Byc1tyZF0gPSAoaGkgKyBsbyArIGdwcnNbcm5dKSAmIDB4RkZGRkZGRkY7CgkJfSBlbHNlIHsKCQkJZ3Byc1tyZF0gPSBncHJzW3JtXSAqIGdwcnNbcnNdICsgZ3Byc1tybl07CgkJfQoJCWNwdS5jcHNyTiA9IGdwcnNbcmRdID4+IDMxOwoJCWNwdS5jcHNyWiA9ICEoZ3Byc1tyZF0gJiAweEZGRkZGRkZGKTsKCX07Cn07CgpBUk1Db3JlQXJtLnByb3RvdHlwZS5jb25zdHJ1Y3RNT1YgPSBmdW5jdGlvbihyZCwgcm4sIHNoaWZ0T3AsIGNvbmRPcCkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaDMyKGdwcnNbY3B1LlBDXSk7CgkJaWYgKGNvbmRPcCAmJiAhY29uZE9wKCkpIHsKCQkJcmV0dXJuOwoJCX0KCQlzaGlmdE9wKCk7CgkJZ3Byc1tyZF0gPSBjcHUuc2hpZnRlck9wZXJhbmQ7Cgl9Owp9OwoKQVJNQ29yZUFybS5wcm90b3R5cGUuY29uc3RydWN0TU9WUyA9IGZ1bmN0aW9uKHJkLCBybiwgc2hpZnRPcCwgY29uZE9wKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoMzIoZ3Byc1tjcHUuUENdKTsKCQlpZiAoY29uZE9wICYmICFjb25kT3AoKSkgewoJCQlyZXR1cm47CgkJfQoJCXNoaWZ0T3AoKTsKCQlncHJzW3JkXSA9IGNwdS5zaGlmdGVyT3BlcmFuZDsKCQlpZiAocmQgPT0gY3B1LlBDICYmIGNwdS5oYXNTUFNSKCkpIHsKCQkJY3B1LnVucGFja0NQU1IoY3B1LnNwc3IpOwoJCX0gZWxzZSB7CgkJCWNwdS5jcHNyTiA9IGdwcnNbcmRdID4+IDMxOwoJCQljcHUuY3BzclogPSAhKGdwcnNbcmRdICYgMHhGRkZGRkZGRik7CgkJCWNwdS5jcHNyQyA9IGNwdS5zaGlmdGVyQ2FycnlPdXQ7CgkJfQoJfTsKfTsKCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdE1SUyA9IGZ1bmN0aW9uKHJkLCByLCBjb25kT3ApIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2gzMihncHJzW2NwdS5QQ10pOwoJCWlmIChjb25kT3AgJiYgIWNvbmRPcCgpKSB7CgkJCXJldHVybjsKCQl9CgkJaWYgKHIpIHsKCQkJZ3Byc1tyZF0gPSBjcHUuc3BzcjsKCQl9IGVsc2UgewoJCQlncHJzW3JkXSA9IGNwdS5wYWNrQ1BTUigpOwoJCX0KCX07Cn07CgpBUk1Db3JlQXJtLnByb3RvdHlwZS5jb25zdHJ1Y3RNU1IgPSBmdW5jdGlvbihybSwgciwgaW5zdHJ1Y3Rpb24sIGltbWVkaWF0ZSwgY29uZE9wKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJdmFyIGMgPSBpbnN0cnVjdGlvbiAmIDB4MDAwMTAwMDA7CgkvL3ZhciB4ID0gaW5zdHJ1Y3Rpb24gJiAweDAwMDIwMDAwOwoJLy92YXIgcyA9IGluc3RydWN0aW9uICYgMHgwMDA0MDAwMDsKCXZhciBmID0gaW5zdHJ1Y3Rpb24gJiAweDAwMDgwMDAwOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoMzIoZ3Byc1tjcHUuUENdKTsKCQlpZiAoY29uZE9wICYmICFjb25kT3AoKSkgewoJCQlyZXR1cm47CgkJfQoJCXZhciBvcGVyYW5kOwoJCWlmIChpbnN0cnVjdGlvbiAmIDB4MDIwMDAwMDApIHsKCQkJb3BlcmFuZCA9IGltbWVkaWF0ZTsKCQl9IGVsc2UgewoJCQlvcGVyYW5kID0gZ3Byc1tybV07CgkJfQoJCXZhciBtYXNrID0gKGMgPyAweDAwMDAwMEZGIDogMHgwMDAwMDAwMCkgfAoJCQkJICAgLy8oeCA/IDB4MDAwMEZGMDAgOiAweDAwMDAwMDAwKSB8IC8vIElycmVsZXZhbnQgb24gQVJNdjRUCgkJCQkgICAvLyhzID8gMHgwMEZGMDAwMCA6IDB4MDAwMDAwMDApIHwgLy8gSXJyZWxldmFudCBvbiBBUk12NFQKCQkJCSAgIChmID8gMHhGRjAwMDAwMCA6IDB4MDAwMDAwMDApOwoKCQlpZiAocikgewoJCQltYXNrICY9IGNwdS5VU0VSX01BU0sgfCBjcHUuUFJJVl9NQVNLIHwgY3B1LlNUQVRFX01BU0s7CgkJCWNwdS5zcHNyID0gKGNwdS5zcHNyICYgfm1hc2spIHwgKG9wZXJhbmQgJiBtYXNrKTsKCQl9IGVsc2UgewoJCQlpZiAobWFzayAmIGNwdS5VU0VSX01BU0spIHsKCQkJCWNwdS5jcHNyTiA9IG9wZXJhbmQgPj4gMzE7CgkJCQljcHUuY3BzclogPSBvcGVyYW5kICYgMHg0MDAwMDAwMDsKCQkJCWNwdS5jcHNyQyA9IG9wZXJhbmQgJiAweDIwMDAwMDAwOwoJCQkJY3B1LmNwc3JWID0gb3BlcmFuZCAmIDB4MTAwMDAwMDA7CgkJCX0KCQkJaWYgKGNwdS5tb2RlICE9IGNwdS5NT0RFX1VTRVIgJiYgKG1hc2sgJiBjcHUuUFJJVl9NQVNLKSkgewoJCQkJY3B1LnN3aXRjaE1vZGUoKG9wZXJhbmQgJiAweDAwMDAwMDBGKSB8IDB4MDAwMDAwMTApOwoJCQkJY3B1LmNwc3JJID0gb3BlcmFuZCAmIDB4MDAwMDAwODA7CgkJCQljcHUuY3BzckYgPSBvcGVyYW5kICYgMHgwMDAwMDA0MDsKCQkJfQoJCX0KCX07Cn07CgpBUk1Db3JlQXJtLnByb3RvdHlwZS5jb25zdHJ1Y3RNVUwgPSBmdW5jdGlvbihyZCwgcnMsIHJtLCBjb25kT3ApIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2gzMihncHJzW2NwdS5QQ10pOwoJCWlmIChjb25kT3AgJiYgIWNvbmRPcCgpKSB7CgkJCXJldHVybjsKCQl9CgkJY3B1Lm1tdS53YWl0TXVsKGdwcnNbcnNdKTsKCQlpZiAoKGdwcnNbcm1dICYgMHhGRkZGMDAwMCkgJiYgKGdwcnNbcnNdICYgMHhGRkZGMDAwMCkpIHsKCQkJLy8gT3VyIGRhdGEgdHlwZSBpcyBhIGRvdWJsZS0td2UnbGwgbG9zZSBiaXRzIGlmIHdlIGRvIGl0IGFsbCBhdCBvbmNlIQoJCQl2YXIgaGkgPSAoKGdwcnNbcm1dICYgMHhGRkZGMDAwMCkgKiBncHJzW3JzXSkgfCAwOwoJCQl2YXIgbG8gPSAoKGdwcnNbcm1dICYgMHgwMDAwRkZGRikgKiBncHJzW3JzXSkgfCAwOwoJCQlncHJzW3JkXSA9IGhpICsgbG87CgkJfSBlbHNlIHsKCQkJZ3Byc1tyZF0gPSBncHJzW3JtXSAqIGdwcnNbcnNdOwoJCX0KCX07Cn07CgpBUk1Db3JlQXJtLnByb3RvdHlwZS5jb25zdHJ1Y3RNVUxTID0gZnVuY3Rpb24ocmQsIHJzLCBybSwgY29uZE9wKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoMzIoZ3Byc1tjcHUuUENdKTsKCQlpZiAoY29uZE9wICYmICFjb25kT3AoKSkgewoJCQlyZXR1cm47CgkJfQoJCWNwdS5tbXUud2FpdE11bChncHJzW3JzXSk7CgkJaWYgKChncHJzW3JtXSAmIDB4RkZGRjAwMDApICYmIChncHJzW3JzXSAmIDB4RkZGRjAwMDApKSB7CgkJCS8vIE91ciBkYXRhIHR5cGUgaXMgYSBkb3VibGUtLXdlJ2xsIGxvc2UgYml0cyBpZiB3ZSBkbyBpdCBhbGwgYXQgb25jZSEKCQkJdmFyIGhpID0gKChncHJzW3JtXSAmIDB4RkZGRjAwMDApICogZ3Byc1tyc10pIHwgMDsKCQkJdmFyIGxvID0gKChncHJzW3JtXSAmIDB4MDAwMEZGRkYpICogZ3Byc1tyc10pIHwgMDsKCQkJZ3Byc1tyZF0gPSBoaSArIGxvOwoJCX0gZWxzZSB7CgkJCWdwcnNbcmRdID0gZ3Byc1tybV0gKiBncHJzW3JzXTsKCQl9CgkJY3B1LmNwc3JOID0gZ3Byc1tyZF0gPj4gMzE7CgkJY3B1LmNwc3JaID0gIShncHJzW3JkXSAmIDB4RkZGRkZGRkYpOwoJfTsKfTsKCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdE1WTiA9IGZ1bmN0aW9uKHJkLCBybiwgc2hpZnRPcCwgY29uZE9wKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoMzIoZ3Byc1tjcHUuUENdKTsKCQlpZiAoY29uZE9wICYmICFjb25kT3AoKSkgewoJCQlyZXR1cm47CgkJfQoJCXNoaWZ0T3AoKTsKCQlncHJzW3JkXSA9IH5jcHUuc2hpZnRlck9wZXJhbmQ7Cgl9Owp9OwoKQVJNQ29yZUFybS5wcm90b3R5cGUuY29uc3RydWN0TVZOUyA9IGZ1bmN0aW9uKHJkLCBybiwgc2hpZnRPcCwgY29uZE9wKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoMzIoZ3Byc1tjcHUuUENdKTsKCQlpZiAoY29uZE9wICYmICFjb25kT3AoKSkgewoJCQlyZXR1cm47CgkJfQoJCXNoaWZ0T3AoKTsKCQlncHJzW3JkXSA9IH5jcHUuc2hpZnRlck9wZXJhbmQ7CgkJaWYgKHJkID09IGNwdS5QQyAmJiBjcHUuaGFzU1BTUigpKSB7CgkJCWNwdS51bnBhY2tDUFNSKGNwdS5zcHNyKTsKCQl9IGVsc2UgewoJCQljcHUuY3Bzck4gPSBncHJzW3JkXSA+PiAzMTsKCQkJY3B1LmNwc3JaID0gIShncHJzW3JkXSAmIDB4RkZGRkZGRkYpOwoJCQljcHUuY3BzckMgPSBjcHUuc2hpZnRlckNhcnJ5T3V0OwoJCX0KCX07Cn07CgpBUk1Db3JlQXJtLnByb3RvdHlwZS5jb25zdHJ1Y3RPUlIgPSBmdW5jdGlvbihyZCwgcm4sIHNoaWZ0T3AsIGNvbmRPcCkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaDMyKGdwcnNbY3B1LlBDXSk7CgkJaWYgKGNvbmRPcCAmJiAhY29uZE9wKCkpIHsKCQkJcmV0dXJuOwoJCX0KCQlzaGlmdE9wKCk7CgkJZ3Byc1tyZF0gPSBncHJzW3JuXSB8IGNwdS5zaGlmdGVyT3BlcmFuZDsKCX0KfTsKCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdE9SUlMgPSBmdW5jdGlvbihyZCwgcm4sIHNoaWZ0T3AsIGNvbmRPcCkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaDMyKGdwcnNbY3B1LlBDXSk7CgkJaWYgKGNvbmRPcCAmJiAhY29uZE9wKCkpIHsKCQkJcmV0dXJuOwoJCX0KCQlzaGlmdE9wKCk7CgkJZ3Byc1tyZF0gPSBncHJzW3JuXSB8IGNwdS5zaGlmdGVyT3BlcmFuZDsKCQlpZiAocmQgPT0gY3B1LlBDICYmIGNwdS5oYXNTUFNSKCkpIHsKCQkJY3B1LnVucGFja0NQU1IoY3B1LnNwc3IpOwoJCX0gZWxzZSB7CgkJCWNwdS5jcHNyTiA9IGdwcnNbcmRdID4+IDMxOwoJCQljcHUuY3BzclogPSAhKGdwcnNbcmRdICYgMHhGRkZGRkZGRik7CgkJCWNwdS5jcHNyQyA9IGNwdS5zaGlmdGVyQ2FycnlPdXQ7CgkJfQoJfTsKfTsKCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdFJTQiA9IGZ1bmN0aW9uKHJkLCBybiwgc2hpZnRPcCwgY29uZE9wKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoMzIoZ3Byc1tjcHUuUENdKTsKCQlpZiAoY29uZE9wICYmICFjb25kT3AoKSkgewoJCQlyZXR1cm47CgkJfQoJCXNoaWZ0T3AoKTsKCQlncHJzW3JkXSA9IGNwdS5zaGlmdGVyT3BlcmFuZCAtIGdwcnNbcm5dOwoJfTsKfTsKCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdFJTQlMgPSBmdW5jdGlvbihyZCwgcm4sIHNoaWZ0T3AsIGNvbmRPcCkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaDMyKGdwcnNbY3B1LlBDXSk7CgkJaWYgKGNvbmRPcCAmJiAhY29uZE9wKCkpIHsKCQkJcmV0dXJuOwoJCX0KCQlzaGlmdE9wKCk7CgkJdmFyIGQgPSBjcHUuc2hpZnRlck9wZXJhbmQgLSBncHJzW3JuXTsKCQlpZiAocmQgPT0gY3B1LlBDICYmIGNwdS5oYXNTUFNSKCkpIHsKCQkJY3B1LnVucGFja0NQU1IoY3B1LnNwc3IpOwoJCX0gZWxzZSB7CgkJCWNwdS5jcHNyTiA9IGQgPj4gMzE7CgkJCWNwdS5jcHNyWiA9ICEoZCAmIDB4RkZGRkZGRkYpOwoJCQljcHUuY3BzckMgPSAoY3B1LnNoaWZ0ZXJPcGVyYW5kID4+PiAwKSA+PSAoZ3Byc1tybl0gPj4+IDApOwoJCQljcHUuY3BzclYgPSAoY3B1LnNoaWZ0ZXJPcGVyYW5kID4+IDMxKSAhPSAoZ3Byc1tybl0gPj4gMzEpICYmCgkJCQkJCShjcHUuc2hpZnRlck9wZXJhbmQgPj4gMzEpICE9IChkID4+IDMxKTsKCQl9CgkJZ3Byc1tyZF0gPSBkOwoJfTsKfTsKCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdFJTQyA9IGZ1bmN0aW9uKHJkLCBybiwgc2hpZnRPcCwgY29uZE9wKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoMzIoZ3Byc1tjcHUuUENdKTsKCQlpZiAoY29uZE9wICYmICFjb25kT3AoKSkgewoJCQlyZXR1cm47CgkJfQoJCXNoaWZ0T3AoKTsKCQl2YXIgbiA9IChncHJzW3JuXSA+Pj4gMCkgKyAhY3B1LmNwc3JDOwoJCWdwcnNbcmRdID0gKGNwdS5zaGlmdGVyT3BlcmFuZCA+Pj4gMCkgLSBuOwoJfTsKfTsKCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdFJTQ1MgPSBmdW5jdGlvbihyZCwgcm4sIHNoaWZ0T3AsIGNvbmRPcCkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaDMyKGdwcnNbY3B1LlBDXSk7CgkJaWYgKGNvbmRPcCAmJiAhY29uZE9wKCkpIHsKCQkJcmV0dXJuOwoJCX0KCQlzaGlmdE9wKCk7CgkJdmFyIG4gPSAoZ3Byc1tybl0gPj4+IDApICsgIWNwdS5jcHNyQzsKCQl2YXIgZCA9IChjcHUuc2hpZnRlck9wZXJhbmQgPj4+IDApIC0gbjsKCQlpZiAocmQgPT0gY3B1LlBDICYmIGNwdS5oYXNTUFNSKCkpIHsKCQkJY3B1LnVucGFja0NQU1IoY3B1LnNwc3IpOwoJCX0gZWxzZSB7CgkJCWNwdS5jcHNyTiA9IGQgPj4gMzE7CgkJCWNwdS5jcHNyWiA9ICEoZCAmIDB4RkZGRkZGRkYpOwoJCQljcHUuY3BzckMgPSAoY3B1LnNoaWZ0ZXJPcGVyYW5kID4+PiAwKSA+PSAoZCA+Pj4gMCk7CgkJCWNwdS5jcHNyViA9IChjcHUuc2hpZnRlck9wZXJhbmQgPj4gMzEpICE9IChuID4+IDMxKSAmJgoJCQkJCQkoY3B1LnNoaWZ0ZXJPcGVyYW5kID4+IDMxKSAhPSAoZCA+PiAzMSk7CgkJfQoJCWdwcnNbcmRdID0gZDsKCX07Cn07CgpBUk1Db3JlQXJtLnByb3RvdHlwZS5jb25zdHJ1Y3RTQkMgPSBmdW5jdGlvbihyZCwgcm4sIHNoaWZ0T3AsIGNvbmRPcCkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaDMyKGdwcnNbY3B1LlBDXSk7CgkJaWYgKGNvbmRPcCAmJiAhY29uZE9wKCkpIHsKCQkJcmV0dXJuOwoJCX0KCQlzaGlmdE9wKCk7CgkJdmFyIHNoaWZ0ZXJPcGVyYW5kID0gKGNwdS5zaGlmdGVyT3BlcmFuZCA+Pj4gMCkgKyAhY3B1LmNwc3JDOwoJCWdwcnNbcmRdID0gKGdwcnNbcm5dID4+PiAwKSAtIHNoaWZ0ZXJPcGVyYW5kOwoJfTsKfTsKCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdFNCQ1MgPSBmdW5jdGlvbihyZCwgcm4sIHNoaWZ0T3AsIGNvbmRPcCkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaDMyKGdwcnNbY3B1LlBDXSk7CgkJaWYgKGNvbmRPcCAmJiAhY29uZE9wKCkpIHsKCQkJcmV0dXJuOwoJCX0KCQlzaGlmdE9wKCk7CgkJdmFyIHNoaWZ0ZXJPcGVyYW5kID0gKGNwdS5zaGlmdGVyT3BlcmFuZCA+Pj4gMCkgKyAhY3B1LmNwc3JDOwoJCXZhciBkID0gKGdwcnNbcm5dID4+PiAwKSAtIHNoaWZ0ZXJPcGVyYW5kOwoJCWlmIChyZCA9PSBjcHUuUEMgJiYgY3B1Lmhhc1NQU1IoKSkgewoJCQljcHUudW5wYWNrQ1BTUihjcHUuc3Bzcik7CgkJfSBlbHNlIHsKCQkJY3B1LmNwc3JOID0gZCA+PiAzMTsKCQkJY3B1LmNwc3JaID0gIShkICYgMHhGRkZGRkZGRik7CgkJCWNwdS5jcHNyQyA9IChncHJzW3JuXSA+Pj4gMCkgPj0gKGQgPj4+IDApOwoJCQljcHUuY3BzclYgPSAoZ3Byc1tybl0gPj4gMzEpICE9IChzaGlmdGVyT3BlcmFuZCA+PiAzMSkgJiYKCQkJCQkJKGdwcnNbcm5dID4+IDMxKSAhPSAoZCA+PiAzMSk7CgkJfQoJCWdwcnNbcmRdID0gZDsKCX07Cn07CgpBUk1Db3JlQXJtLnByb3RvdHlwZS5jb25zdHJ1Y3RTTUxBTCA9IGZ1bmN0aW9uKHJkLCBybiwgcnMsIHJtLCBjb25kT3ApIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBTSElGVF8zMiA9IDEvMHgxMDAwMDAwMDA7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoMzIoZ3Byc1tjcHUuUENdKTsKCQlpZiAoY29uZE9wICYmICFjb25kT3AoKSkgewoJCQlyZXR1cm47CgkJfQoJCWNwdS5jeWNsZXMgKz0gMjsKCQljcHUubW11LndhaXRNdWwocnMpOwoJCXZhciBoaSA9IChncHJzW3JtXSAmIDB4RkZGRjAwMDApICogZ3Byc1tyc107CgkJdmFyIGxvID0gKGdwcnNbcm1dICYgMHgwMDAwRkZGRikgKiBncHJzW3JzXTsKCQl2YXIgY2FycnkgPSAoZ3Byc1tybl0gPj4+IDApICsgaGkgKyBsbzsKCQlncHJzW3JuXSA9IGNhcnJ5OwoJCWdwcnNbcmRdICs9IE1hdGguZmxvb3IoY2FycnkgKiBTSElGVF8zMik7Cgl9Owp9OwoKQVJNQ29yZUFybS5wcm90b3R5cGUuY29uc3RydWN0U01MQUxTID0gZnVuY3Rpb24ocmQsIHJuLCBycywgcm0sIGNvbmRPcCkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIFNISUZUXzMyID0gMS8weDEwMDAwMDAwMDsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2gzMihncHJzW2NwdS5QQ10pOwoJCWlmIChjb25kT3AgJiYgIWNvbmRPcCgpKSB7CgkJCXJldHVybjsKCQl9CgkJY3B1LmN5Y2xlcyArPSAyOwoJCWNwdS5tbXUud2FpdE11bChycyk7CgkJdmFyIGhpID0gKGdwcnNbcm1dICYgMHhGRkZGMDAwMCkgKiBncHJzW3JzXTsKCQl2YXIgbG8gPSAoZ3Byc1tybV0gJiAweDAwMDBGRkZGKSAqIGdwcnNbcnNdOwoJCXZhciBjYXJyeSA9IChncHJzW3JuXSA+Pj4gMCkgKyBoaSArIGxvOwoJCWdwcnNbcm5dID0gY2Fycnk7CgkJZ3Byc1tyZF0gKz0gTWF0aC5mbG9vcihjYXJyeSAqIFNISUZUXzMyKTsKCQljcHUuY3Bzck4gPSBncHJzW3JkXSA+PiAzMTsKCQljcHUuY3BzclogPSAhKChncHJzW3JkXSAmIDB4RkZGRkZGRkYpIHx8IChncHJzW3JuXSAmIDB4RkZGRkZGRkYpKTsKCX07Cn07CgpBUk1Db3JlQXJtLnByb3RvdHlwZS5jb25zdHJ1Y3RTTVVMTCA9IGZ1bmN0aW9uKHJkLCBybiwgcnMsIHJtLCBjb25kT3ApIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBTSElGVF8zMiA9IDEvMHgxMDAwMDAwMDA7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoMzIoZ3Byc1tjcHUuUENdKTsKCQlpZiAoY29uZE9wICYmICFjb25kT3AoKSkgewoJCQlyZXR1cm47CgkJfQoJCSsrY3B1LmN5Y2xlczsKCQljcHUubW11LndhaXRNdWwoZ3Byc1tyc10pOwoJCXZhciBoaSA9ICgoZ3Byc1tybV0gJiAweEZGRkYwMDAwKSA+PiAwKSAqIChncHJzW3JzXSA+PiAwKTsKCQl2YXIgbG8gPSAoKGdwcnNbcm1dICYgMHgwMDAwRkZGRikgPj4gMCkgKiAoZ3Byc1tyc10gPj4gMCk7CgkJZ3Byc1tybl0gPSAoKGhpICYgMHhGRkZGRkZGRikgKyAobG8gJiAweEZGRkZGRkZGKSkgJiAweEZGRkZGRkZGOwoJCWdwcnNbcmRdID0gTWF0aC5mbG9vcihoaSAqIFNISUZUXzMyICsgbG8gKiBTSElGVF8zMik7Cgl9Owp9OwoKQVJNQ29yZUFybS5wcm90b3R5cGUuY29uc3RydWN0U01VTExTID0gZnVuY3Rpb24ocmQsIHJuLCBycywgcm0sIGNvbmRPcCkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIFNISUZUXzMyID0gMS8weDEwMDAwMDAwMDsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2gzMihncHJzW2NwdS5QQ10pOwoJCWlmIChjb25kT3AgJiYgIWNvbmRPcCgpKSB7CgkJCXJldHVybjsKCQl9CgkJKytjcHUuY3ljbGVzOwoJCWNwdS5tbXUud2FpdE11bChncHJzW3JzXSk7CgkJdmFyIGhpID0gKChncHJzW3JtXSAmIDB4RkZGRjAwMDApID4+IDApICogKGdwcnNbcnNdID4+IDApOwoJCXZhciBsbyA9ICgoZ3Byc1tybV0gJiAweDAwMDBGRkZGKSA+PiAwKSAqIChncHJzW3JzXSA+PiAwKTsKCQlncHJzW3JuXSA9ICgoaGkgJiAweEZGRkZGRkZGKSArIChsbyAmIDB4RkZGRkZGRkYpKSAmIDB4RkZGRkZGRkY7CgkJZ3Byc1tyZF0gPSBNYXRoLmZsb29yKGhpICogU0hJRlRfMzIgKyBsbyAqIFNISUZUXzMyKTsKCQljcHUuY3Bzck4gPSBncHJzW3JkXSA+PiAzMTsKCQljcHUuY3BzclogPSAhKChncHJzW3JkXSAmIDB4RkZGRkZGRkYpIHx8IChncHJzW3JuXSAmIDB4RkZGRkZGRkYpKTsKCX07Cn07CgpBUk1Db3JlQXJtLnByb3RvdHlwZS5jb25zdHJ1Y3RTVE0gPSBmdW5jdGlvbihycywgYWRkcmVzcywgY29uZE9wKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJdmFyIG1tdSA9IGNwdS5tbXU7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJaWYgKGNvbmRPcCAmJiAhY29uZE9wKCkpIHsKCQkJbW11LndhaXRQcmVmZXRjaDMyKGdwcnNbY3B1LlBDXSk7CgkJCXJldHVybjsKCQl9CgkJbW11LndhaXQzMihncHJzW2NwdS5QQ10pOwoJCXZhciBhZGRyID0gYWRkcmVzcyh0cnVlKTsKCQl2YXIgdG90YWwgPSAwOwoJCXZhciBtLCBpOwoJCWZvciAobSA9IHJzLCBpID0gMDsgbTsgbSA+Pj0gMSwgKytpKSB7CgkJCWlmIChtICYgMSkgewoJCQkJbW11LnN0b3JlMzIoYWRkciwgZ3Byc1tpXSk7CgkJCQlhZGRyICs9IDQ7CgkJCQkrK3RvdGFsOwoJCQl9CgkJfQoJCW1tdS53YWl0TXVsdGkzMihhZGRyLCB0b3RhbCk7Cgl9Owp9OwoKQVJNQ29yZUFybS5wcm90b3R5cGUuY29uc3RydWN0U1RNUyA9IGZ1bmN0aW9uKHJzLCBhZGRyZXNzLCBjb25kT3ApIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7Cgl2YXIgbW11ID0gY3B1Lm1tdTsKCXJldHVybiBmdW5jdGlvbigpIHsKCQlpZiAoY29uZE9wICYmICFjb25kT3AoKSkgewoJCQltbXUud2FpdFByZWZldGNoMzIoZ3Byc1tjcHUuUENdKTsKCQkJcmV0dXJuOwoJCX0KCQltbXUud2FpdDMyKGdwcnNbY3B1LlBDXSk7CgkJdmFyIG1vZGUgPSBjcHUubW9kZTsKCQl2YXIgYWRkciA9IGFkZHJlc3ModHJ1ZSk7CgkJdmFyIHRvdGFsID0gMDsKCQl2YXIgbSwgaTsKCQljcHUuc3dpdGNoTW9kZShjcHUuTU9ERV9TWVNURU0pOwoJCWZvciAobSA9IHJzLCBpID0gMDsgbTsgbSA+Pj0gMSwgKytpKSB7CgkJCWlmIChtICYgMSkgewoJCQkJbW11LnN0b3JlMzIoYWRkciwgZ3Byc1tpXSk7CgkJCQlhZGRyICs9IDQ7CgkJCQkrK3RvdGFsOwoJCQl9CgkJfQoJCWNwdS5zd2l0Y2hNb2RlKG1vZGUpOwoJCW1tdS53YWl0TXVsdGkzMihhZGRyLCB0b3RhbCk7Cgl9Owp9OwoKQVJNQ29yZUFybS5wcm90b3R5cGUuY29uc3RydWN0U1RSID0gZnVuY3Rpb24ocmQsIGFkZHJlc3MsIGNvbmRPcCkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQlpZiAoY29uZE9wICYmICFjb25kT3AoKSkgewoJCQljcHUubW11LndhaXRQcmVmZXRjaDMyKGdwcnNbY3B1LlBDXSk7CgkJCXJldHVybjsKCQl9CgkJdmFyIGFkZHIgPSBhZGRyZXNzKCk7CgkJY3B1Lm1tdS5zdG9yZTMyKGFkZHIsIGdwcnNbcmRdKTsKCQljcHUubW11LndhaXQzMihhZGRyKTsKCQljcHUubW11LndhaXQzMihncHJzW2NwdS5QQ10pOwoJfTsKfTsKCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdFNUUkIgPSBmdW5jdGlvbihyZCwgYWRkcmVzcywgY29uZE9wKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWlmIChjb25kT3AgJiYgIWNvbmRPcCgpKSB7CgkJCWNwdS5tbXUud2FpdFByZWZldGNoMzIoZ3Byc1tjcHUuUENdKTsKCQkJcmV0dXJuOwoJCX0KCQl2YXIgYWRkciA9IGFkZHJlc3MoKTsKCQljcHUubW11LnN0b3JlOChhZGRyLCBncHJzW3JkXSk7CgkJY3B1Lm1tdS53YWl0KGFkZHIpOwoJCWNwdS5tbXUud2FpdDMyKGdwcnNbY3B1LlBDXSk7Cgl9Owp9OwoKQVJNQ29yZUFybS5wcm90b3R5cGUuY29uc3RydWN0U1RSSCA9IGZ1bmN0aW9uKHJkLCBhZGRyZXNzLCBjb25kT3ApIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJaWYgKGNvbmRPcCAmJiAhY29uZE9wKCkpIHsKCQkJY3B1Lm1tdS53YWl0UHJlZmV0Y2gzMihncHJzW2NwdS5QQ10pOwoJCQlyZXR1cm47CgkJfQoJCXZhciBhZGRyID0gYWRkcmVzcygpOwoJCWNwdS5tbXUuc3RvcmUxNihhZGRyLCBncHJzW3JkXSk7CgkJY3B1Lm1tdS53YWl0KGFkZHIpOwoJCWNwdS5tbXUud2FpdDMyKGdwcnNbY3B1LlBDXSk7Cgl9Owp9OwoKQVJNQ29yZUFybS5wcm90b3R5cGUuY29uc3RydWN0U1VCID0gZnVuY3Rpb24ocmQsIHJuLCBzaGlmdE9wLCBjb25kT3ApIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2gzMihncHJzW2NwdS5QQ10pOwoJCWlmIChjb25kT3AgJiYgIWNvbmRPcCgpKSB7CgkJCXJldHVybjsKCQl9CgkJc2hpZnRPcCgpOwoJCWdwcnNbcmRdID0gZ3Byc1tybl0gLSBjcHUuc2hpZnRlck9wZXJhbmQ7Cgl9Owp9OwoKQVJNQ29yZUFybS5wcm90b3R5cGUuY29uc3RydWN0U1VCUyA9IGZ1bmN0aW9uKHJkLCBybiwgc2hpZnRPcCwgY29uZE9wKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoMzIoZ3Byc1tjcHUuUENdKTsKCQlpZiAoY29uZE9wICYmICFjb25kT3AoKSkgewoJCQlyZXR1cm47CgkJfQoJCXNoaWZ0T3AoKTsKCQl2YXIgZCA9IGdwcnNbcm5dIC0gY3B1LnNoaWZ0ZXJPcGVyYW5kOwoJCWlmIChyZCA9PSBjcHUuUEMgJiYgY3B1Lmhhc1NQU1IoKSkgewoJCQljcHUudW5wYWNrQ1BTUihjcHUuc3Bzcik7CgkJfSBlbHNlIHsKCQkJY3B1LmNwc3JOID0gZCA+PiAzMTsKCQkJY3B1LmNwc3JaID0gIShkICYgMHhGRkZGRkZGRik7CgkJCWNwdS5jcHNyQyA9IChncHJzW3JuXSA+Pj4gMCkgPj0gKGNwdS5zaGlmdGVyT3BlcmFuZCA+Pj4gMCk7CgkJCWNwdS5jcHNyViA9IChncHJzW3JuXSA+PiAzMSkgIT0gKGNwdS5zaGlmdGVyT3BlcmFuZCA+PiAzMSkgJiYKCQkJCQkJKGdwcnNbcm5dID4+IDMxKSAhPSAoZCA+PiAzMSk7CgkJfQoJCWdwcnNbcmRdID0gZDsKCX07Cn07CgpBUk1Db3JlQXJtLnByb3RvdHlwZS5jb25zdHJ1Y3RTV0kgPSBmdW5jdGlvbihpbW1lZGlhdGUsIGNvbmRPcCkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQlpZiAoY29uZE9wICYmICFjb25kT3AoKSkgewoJCQljcHUubW11LndhaXRQcmVmZXRjaDMyKGdwcnNbY3B1LlBDXSk7CgkJCXJldHVybjsKCQl9CgkJY3B1LmlycS5zd2kzMihpbW1lZGlhdGUpOwoJCWNwdS5tbXUud2FpdFByZWZldGNoMzIoZ3Byc1tjcHUuUENdKTsKCX07Cn07CgpBUk1Db3JlQXJtLnByb3RvdHlwZS5jb25zdHJ1Y3RTV1AgPSBmdW5jdGlvbihyZCwgcm4sIHJtLCBjb25kT3ApIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2gzMihncHJzW2NwdS5QQ10pOwoJCWlmIChjb25kT3AgJiYgIWNvbmRPcCgpKSB7CgkJCXJldHVybjsKCQl9CgkJY3B1Lm1tdS53YWl0MzIoZ3Byc1tybl0pOwoJCWNwdS5tbXUud2FpdDMyKGdwcnNbcm5dKTsKCQl2YXIgZCA9IGNwdS5tbXUubG9hZDMyKGdwcnNbcm5dKTsKCQljcHUubW11LnN0b3JlMzIoZ3Byc1tybl0sIGdwcnNbcm1dKTsKCQlncHJzW3JkXSA9IGQ7CgkJKytjcHUuY3ljbGVzOwoJfQp9OwoKQVJNQ29yZUFybS5wcm90b3R5cGUuY29uc3RydWN0U1dQQiA9IGZ1bmN0aW9uKHJkLCBybiwgcm0sIGNvbmRPcCkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaDMyKGdwcnNbY3B1LlBDXSk7CgkJaWYgKGNvbmRPcCAmJiAhY29uZE9wKCkpIHsKCQkJcmV0dXJuOwoJCX0KCQljcHUubW11LndhaXQoZ3Byc1tybl0pOwoJCWNwdS5tbXUud2FpdChncHJzW3JuXSk7CgkJdmFyIGQgPSBjcHUubW11LmxvYWQ4KGdwcnNbcm5dKTsKCQljcHUubW11LnN0b3JlOChncHJzW3JuXSwgZ3Byc1tybV0pOwoJCWdwcnNbcmRdID0gZDsKCQkrK2NwdS5jeWNsZXM7Cgl9Cn07CgpBUk1Db3JlQXJtLnByb3RvdHlwZS5jb25zdHJ1Y3RURVEgPSBmdW5jdGlvbihyZCwgcm4sIHNoaWZ0T3AsIGNvbmRPcCkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaDMyKGdwcnNbY3B1LlBDXSk7CgkJaWYgKGNvbmRPcCAmJiAhY29uZE9wKCkpIHsKCQkJcmV0dXJuOwoJCX0KCQlzaGlmdE9wKCk7CgkJdmFyIGFsdU91dCA9IGdwcnNbcm5dIF4gY3B1LnNoaWZ0ZXJPcGVyYW5kOwoJCWNwdS5jcHNyTiA9IGFsdU91dCA+PiAzMTsKCQljcHUuY3BzclogPSAhKGFsdU91dCAmIDB4RkZGRkZGRkYpOwoJCWNwdS5jcHNyQyA9IGNwdS5zaGlmdGVyQ2FycnlPdXQ7Cgl9Owp9OwoKQVJNQ29yZUFybS5wcm90b3R5cGUuY29uc3RydWN0VFNUID0gZnVuY3Rpb24ocmQsIHJuLCBzaGlmdE9wLCBjb25kT3ApIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2gzMihncHJzW2NwdS5QQ10pOwoJCWlmIChjb25kT3AgJiYgIWNvbmRPcCgpKSB7CgkJCXJldHVybjsKCQl9CgkJc2hpZnRPcCgpOwoJCXZhciBhbHVPdXQgPSBncHJzW3JuXSAmIGNwdS5zaGlmdGVyT3BlcmFuZDsKCQljcHUuY3Bzck4gPSBhbHVPdXQgPj4gMzE7CgkJY3B1LmNwc3JaID0gIShhbHVPdXQgJiAweEZGRkZGRkZGKTsKCQljcHUuY3BzckMgPSBjcHUuc2hpZnRlckNhcnJ5T3V0OwoJfTsKfTsKCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdFVNTEFMID0gZnVuY3Rpb24ocmQsIHJuLCBycywgcm0sIGNvbmRPcCkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIFNISUZUXzMyID0gMS8weDEwMDAwMDAwMDsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2gzMihncHJzW2NwdS5QQ10pOwoJCWlmIChjb25kT3AgJiYgIWNvbmRPcCgpKSB7CgkJCXJldHVybjsKCQl9CgkJY3B1LmN5Y2xlcyArPSAyOwoJCWNwdS5tbXUud2FpdE11bChycyk7CgkJdmFyIGhpID0gKChncHJzW3JtXSAmIDB4RkZGRjAwMDApID4+PiAwKSAqIChncHJzW3JzXSA+Pj4gMCk7CgkJdmFyIGxvID0gKGdwcnNbcm1dICYgMHgwMDAwRkZGRikgKiAoZ3Byc1tyc10gPj4+IDApOwoJCXZhciBjYXJyeSA9IChncHJzW3JuXSA+Pj4gMCkgKyBoaSArIGxvOwoJCWdwcnNbcm5dID0gY2Fycnk7CgkJZ3Byc1tyZF0gKz0gY2FycnkgKiBTSElGVF8zMjsKCX07Cn07CgpBUk1Db3JlQXJtLnByb3RvdHlwZS5jb25zdHJ1Y3RVTUxBTFMgPSBmdW5jdGlvbihyZCwgcm4sIHJzLCBybSwgY29uZE9wKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgU0hJRlRfMzIgPSAxLzB4MTAwMDAwMDAwOwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaDMyKGdwcnNbY3B1LlBDXSk7CgkJaWYgKGNvbmRPcCAmJiAhY29uZE9wKCkpIHsKCQkJcmV0dXJuOwoJCX0KCQljcHUuY3ljbGVzICs9IDI7CgkJY3B1Lm1tdS53YWl0TXVsKHJzKTsKCQl2YXIgaGkgPSAoKGdwcnNbcm1dICYgMHhGRkZGMDAwMCkgPj4+IDApICogKGdwcnNbcnNdID4+PiAwKTsKCQl2YXIgbG8gPSAoZ3Byc1tybV0gJiAweDAwMDBGRkZGKSAqIChncHJzW3JzXSA+Pj4gMCk7CgkJdmFyIGNhcnJ5ID0gKGdwcnNbcm5dID4+PiAwKSArIGhpICsgbG87CgkJZ3Byc1tybl0gPSBjYXJyeTsKCQlncHJzW3JkXSArPSBjYXJyeSAqIFNISUZUXzMyOwoJCWNwdS5jcHNyTiA9IGdwcnNbcmRdID4+IDMxOwoJCWNwdS5jcHNyWiA9ICEoKGdwcnNbcmRdICYgMHhGRkZGRkZGRikgfHwgKGdwcnNbcm5dICYgMHhGRkZGRkZGRikpOwoJfTsKfTsKCkFSTUNvcmVBcm0ucHJvdG90eXBlLmNvbnN0cnVjdFVNVUxMID0gZnVuY3Rpb24ocmQsIHJuLCBycywgcm0sIGNvbmRPcCkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIFNISUZUXzMyID0gMS8weDEwMDAwMDAwMDsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2gzMihncHJzW2NwdS5QQ10pOwoJCWlmIChjb25kT3AgJiYgIWNvbmRPcCgpKSB7CgkJCXJldHVybjsKCQl9CgkJKytjcHUuY3ljbGVzOwoJCWNwdS5tbXUud2FpdE11bChncHJzW3JzXSk7CgkJdmFyIGhpID0gKChncHJzW3JtXSAmIDB4RkZGRjAwMDApID4+PiAwKSAqIChncHJzW3JzXSA+Pj4gMCk7CgkJdmFyIGxvID0gKChncHJzW3JtXSAmIDB4MDAwMEZGRkYpID4+PiAwKSAqIChncHJzW3JzXSA+Pj4gMCk7CgkJZ3Byc1tybl0gPSAoKGhpICYgMHhGRkZGRkZGRikgKyAobG8gJiAweEZGRkZGRkZGKSkgJiAweEZGRkZGRkZGOwoJCWdwcnNbcmRdID0gKGhpICogU0hJRlRfMzIgKyBsbyAqIFNISUZUXzMyKSA+Pj4gMDsKCX07Cn07CgpBUk1Db3JlQXJtLnByb3RvdHlwZS5jb25zdHJ1Y3RVTVVMTFMgPSBmdW5jdGlvbihyZCwgcm4sIHJzLCBybSwgY29uZE9wKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgU0hJRlRfMzIgPSAxLzB4MTAwMDAwMDAwOwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaDMyKGdwcnNbY3B1LlBDXSk7CgkJaWYgKGNvbmRPcCAmJiAhY29uZE9wKCkpIHsKCQkJcmV0dXJuOwoJCX0KCQkrK2NwdS5jeWNsZXM7CgkJY3B1Lm1tdS53YWl0TXVsKGdwcnNbcnNdKTsKCQl2YXIgaGkgPSAoKGdwcnNbcm1dICYgMHhGRkZGMDAwMCkgPj4+IDApICogKGdwcnNbcnNdID4+PiAwKTsKCQl2YXIgbG8gPSAoKGdwcnNbcm1dICYgMHgwMDAwRkZGRikgPj4+IDApICogKGdwcnNbcnNdID4+PiAwKTsKCQlncHJzW3JuXSA9ICgoaGkgJiAweEZGRkZGRkZGKSArIChsbyAmIDB4RkZGRkZGRkYpKSAmIDB4RkZGRkZGRkY7CgkJZ3Byc1tyZF0gPSAoaGkgKiBTSElGVF8zMiArIGxvICogU0hJRlRfMzIpID4+PiAwOwoJCWNwdS5jcHNyTiA9IGdwcnNbcmRdID4+IDMxOwoJCWNwdS5jcHNyWiA9ICEoKGdwcnNbcmRdICYgMHhGRkZGRkZGRikgfHwgKGdwcnNbcm5dICYgMHhGRkZGRkZGRikpOwoJfTsKfTsK"></script>
<script src="data:@file/javascript;base64,QVJNQ29yZVRodW1iID0gZnVuY3Rpb24gKGNwdSkgewoJdGhpcy5jcHUgPSBjcHU7Cn07CgpBUk1Db3JlVGh1bWIucHJvdG90eXBlLmNvbnN0cnVjdEFEQyA9IGZ1bmN0aW9uKHJkLCBybSkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaChncHJzW2NwdS5QQ10pOwoJCXZhciBtID0gKGdwcnNbcm1dID4+PiAwKSArICEhY3B1LmNwc3JDOwoJCXZhciBvbGREID0gZ3Byc1tyZF07CgkJdmFyIGQgPSAob2xkRCA+Pj4gMCkgKyBtOwoJCXZhciBvbGREbiA9IG9sZEQgPj4gMzE7CgkJdmFyIGRuID0gZCA+PiAzMTsKCQl2YXIgbW4gPSBtID4+IDMxOwoJCWNwdS5jcHNyTiA9IGRuOwoJCWNwdS5jcHNyWiA9ICEoZCAmIDB4RkZGRkZGRkYpOwoJCWNwdS5jcHNyQyA9IGQgPiAweEZGRkZGRkZGOwoJCWNwdS5jcHNyViA9IG9sZERuID09IG1uICYmIG9sZERuICE9IGRuICYmIG1uICE9IGRuOwoJCWdwcnNbcmRdID0gZDsKCX07Cn07CgpBUk1Db3JlVGh1bWIucHJvdG90eXBlLmNvbnN0cnVjdEFERDEgPSBmdW5jdGlvbihyZCwgcm4sIGltbWVkaWF0ZSkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaChncHJzW2NwdS5QQ10pOwoJCXZhciBkID0gKGdwcnNbcm5dID4+PiAwKSArIGltbWVkaWF0ZTsKCQljcHUuY3Bzck4gPSBkID4+IDMxOwoJCWNwdS5jcHNyWiA9ICEoZCAmIDB4RkZGRkZGRkYpOwoJCWNwdS5jcHNyQyA9IGQgPiAweEZGRkZGRkZGOwoJCWNwdS5jcHNyViA9ICEoZ3Byc1tybl0gPj4gMzEpICYmICgoZ3Byc1tybl0gPj4gMzEgXiBkKSA+PiAzMSkgJiYgKGQgPj4gMzEpOwoJCWdwcnNbcmRdID0gZDsKCX07Cn07CgpBUk1Db3JlVGh1bWIucHJvdG90eXBlLmNvbnN0cnVjdEFERDIgPSBmdW5jdGlvbihybiwgaW1tZWRpYXRlKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoKGdwcnNbY3B1LlBDXSk7CgkJdmFyIGQgPSAoZ3Byc1tybl0gPj4+IDApICsgaW1tZWRpYXRlOwoJCWNwdS5jcHNyTiA9IGQgPj4gMzE7CgkJY3B1LmNwc3JaID0gIShkICYgMHhGRkZGRkZGRik7CgkJY3B1LmNwc3JDID0gZCA+IDB4RkZGRkZGRkY7CgkJY3B1LmNwc3JWID0gIShncHJzW3JuXSA+PiAzMSkgJiYgKChncHJzW3JuXSBeIGQpID4+IDMxKSAmJiAoKGltbWVkaWF0ZSBeIGQpID4+IDMxKTsKCQlncHJzW3JuXSA9IGQ7Cgl9Owp9OwoKQVJNQ29yZVRodW1iLnByb3RvdHlwZS5jb25zdHJ1Y3RBREQzID0gZnVuY3Rpb24ocmQsIHJuLCBybSkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaChncHJzW2NwdS5QQ10pOwoJCXZhciBkID0gKGdwcnNbcm5dID4+PiAwKSArIChncHJzW3JtXSA+Pj4gMCk7CgkJY3B1LmNwc3JOID0gZCA+PiAzMTsKCQljcHUuY3BzclogPSAhKGQgJiAweEZGRkZGRkZGKTsKCQljcHUuY3BzckMgPSBkID4gMHhGRkZGRkZGRjsKCQljcHUuY3BzclYgPSAhKChncHJzW3JuXSBeIGdwcnNbcm1dKSA+PiAzMSkgJiYgKChncHJzW3JuXSBeIGQpID4+IDMxKSAmJiAoKGdwcnNbcm1dIF4gZCkgPj4gMzEpOwoJCWdwcnNbcmRdID0gZDsKCX07Cn07CgpBUk1Db3JlVGh1bWIucHJvdG90eXBlLmNvbnN0cnVjdEFERDQgPSBmdW5jdGlvbihyZCwgcm0pIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2goZ3Byc1tjcHUuUENdKTsKCQlncHJzW3JkXSArPSBncHJzW3JtXTsKCX07Cn07CgpBUk1Db3JlVGh1bWIucHJvdG90eXBlLmNvbnN0cnVjdEFERDUgPSBmdW5jdGlvbihyZCwgaW1tZWRpYXRlKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoKGdwcnNbY3B1LlBDXSk7CgkJZ3Byc1tyZF0gPSAoZ3Byc1tjcHUuUENdICYgMHhGRkZGRkZGQykgKyBpbW1lZGlhdGU7Cgl9Owp9OwoKQVJNQ29yZVRodW1iLnByb3RvdHlwZS5jb25zdHJ1Y3RBREQ2ID0gZnVuY3Rpb24ocmQsIGltbWVkaWF0ZSkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaChncHJzW2NwdS5QQ10pOwoJCWdwcnNbcmRdID0gZ3Byc1tjcHUuU1BdICsgaW1tZWRpYXRlOwoJfTsKfTsKCkFSTUNvcmVUaHVtYi5wcm90b3R5cGUuY29uc3RydWN0QURENyA9IGZ1bmN0aW9uKGltbWVkaWF0ZSkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaChncHJzW2NwdS5QQ10pOwoJCWdwcnNbY3B1LlNQXSArPSBpbW1lZGlhdGU7Cgl9Owp9OwoKQVJNQ29yZVRodW1iLnByb3RvdHlwZS5jb25zdHJ1Y3RBTkQgPSBmdW5jdGlvbihyZCwgcm0pIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2goZ3Byc1tjcHUuUENdKTsKCQlncHJzW3JkXSA9IGdwcnNbcmRdICYgZ3Byc1tybV07CgkJY3B1LmNwc3JOID0gZ3Byc1tyZF0gPj4gMzE7CgkJY3B1LmNwc3JaID0gIShncHJzW3JkXSAmIDB4RkZGRkZGRkYpOwoJfTsKfTsKCkFSTUNvcmVUaHVtYi5wcm90b3R5cGUuY29uc3RydWN0QVNSMSA9IGZ1bmN0aW9uKHJkLCBybSwgaW1tZWRpYXRlKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoKGdwcnNbY3B1LlBDXSk7CgkJaWYgKGltbWVkaWF0ZSA9PSAwKSB7CgkJCWNwdS5jcHNyQyA9IGdwcnNbcm1dID4+IDMxOwoJCQlpZiAoY3B1LmNwc3JDKSB7CgkJCQlncHJzW3JkXSA9IDB4RkZGRkZGRkY7CgkJCX0gZWxzZSB7CgkJCQlncHJzW3JkXSA9IDA7CgkJCX0KCQl9IGVsc2UgewoJCQljcHUuY3BzckMgPSBncHJzW3JtXSAmICgxIDw8IChpbW1lZGlhdGUgLSAxKSk7CgkJCWdwcnNbcmRdID0gZ3Byc1tybV0gPj4gaW1tZWRpYXRlOwoJCX0KCQljcHUuY3Bzck4gPSBncHJzW3JkXSA+PiAzMTsKCQljcHUuY3BzclogPSAhKGdwcnNbcmRdICYgMHhGRkZGRkZGRik7Cgl9Owp9OwoKQVJNQ29yZVRodW1iLnByb3RvdHlwZS5jb25zdHJ1Y3RBU1IyID0gZnVuY3Rpb24ocmQsIHJtKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoKGdwcnNbY3B1LlBDXSk7CgkJdmFyIHJzID0gZ3Byc1tybV0gJiAweEZGOwoJCWlmIChycykgewoJCQlpZiAocnMgPCAzMikgewoJCQkJY3B1LmNwc3JDID0gZ3Byc1tyZF0gJiAoMSA8PCAocnMgLSAxKSk7CgkJCQlncHJzW3JkXSA+Pj0gcnM7CgkJCX0gZWxzZSB7CgkJCQljcHUuY3BzckMgPSBncHJzW3JkXSA+PiAzMTsKCQkJCWlmIChjcHUuY3BzckMpIHsKCQkJCQlncHJzW3JkXSA9IDB4RkZGRkZGRkY7CgkJCQl9IGVsc2UgewoJCQkJCWdwcnNbcmRdID0gMDsKCQkJCX0KCQkJfQoJCX0KCQljcHUuY3Bzck4gPSBncHJzW3JkXSA+PiAzMTsKCQljcHUuY3BzclogPSAhKGdwcnNbcmRdICYgMHhGRkZGRkZGRik7Cgl9Owp9OwoKQVJNQ29yZVRodW1iLnByb3RvdHlwZS5jb25zdHJ1Y3RCMSA9IGZ1bmN0aW9uKGltbWVkaWF0ZSwgY29uZE9wKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoKGdwcnNbY3B1LlBDXSk7CgkJaWYgKGNvbmRPcCgpKSB7CgkJCWdwcnNbY3B1LlBDXSArPSBpbW1lZGlhdGU7CgkJfQoJfTsKfTsKCkFSTUNvcmVUaHVtYi5wcm90b3R5cGUuY29uc3RydWN0QjIgPSBmdW5jdGlvbihpbW1lZGlhdGUpIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2goZ3Byc1tjcHUuUENdKTsKCQlncHJzW2NwdS5QQ10gKz0gaW1tZWRpYXRlOwoJfTsKfTsKCkFSTUNvcmVUaHVtYi5wcm90b3R5cGUuY29uc3RydWN0QklDID0gZnVuY3Rpb24ocmQsIHJtKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoKGdwcnNbY3B1LlBDXSk7CgkJZ3Byc1tyZF0gPSBncHJzW3JkXSAmIH5ncHJzW3JtXTsKCQljcHUuY3Bzck4gPSBncHJzW3JkXSA+PiAzMTsKCQljcHUuY3BzclogPSAhKGdwcnNbcmRdICYgMHhGRkZGRkZGRik7Cgl9Owp9OwoKQVJNQ29yZVRodW1iLnByb3RvdHlwZS5jb25zdHJ1Y3RCTDEgPSBmdW5jdGlvbihpbW1lZGlhdGUpIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2goZ3Byc1tjcHUuUENdKTsKCQlncHJzW2NwdS5MUl0gPSBncHJzW2NwdS5QQ10gKyBpbW1lZGlhdGU7Cgl9Cn07CgpBUk1Db3JlVGh1bWIucHJvdG90eXBlLmNvbnN0cnVjdEJMMiA9IGZ1bmN0aW9uKGltbWVkaWF0ZSkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaChncHJzW2NwdS5QQ10pOwoJCXZhciBwYyA9IGdwcnNbY3B1LlBDXTsKCQlncHJzW2NwdS5QQ10gPSBncHJzW2NwdS5MUl0gKyAoaW1tZWRpYXRlIDw8IDEpOwoJCWdwcnNbY3B1LkxSXSA9IHBjIC0gMTsKCX0KfTsKCkFSTUNvcmVUaHVtYi5wcm90b3R5cGUuY29uc3RydWN0QlggPSBmdW5jdGlvbihyZCwgcm0pIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2goZ3Byc1tjcHUuUENdKTsKCQljcHUuc3dpdGNoRXhlY01vZGUoZ3Byc1tybV0gJiAweDAwMDAwMDAxKTsKCQl2YXIgbWlzYWxpZ24gPSAwOwoJCWlmIChybSA9PSAxNSkgewoJCQltaXNhbGlnbiA9IGdwcnNbcm1dICYgMHgwMDAwMDAwMjsKCQl9CgkJZ3Byc1tjcHUuUENdID0gZ3Byc1tybV0gJiAweEZGRkZGRkZFIC0gbWlzYWxpZ247Cgl9Owp9OwoKQVJNQ29yZVRodW1iLnByb3RvdHlwZS5jb25zdHJ1Y3RDTU4gPSBmdW5jdGlvbihyZCwgcm0pIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2goZ3Byc1tjcHUuUENdKTsKCQl2YXIgYWx1T3V0ID0gKGdwcnNbcmRdID4+PiAwKSArIChncHJzW3JtXSA+Pj4gMCk7CgkJY3B1LmNwc3JOID0gYWx1T3V0ID4+IDMxOwoJCWNwdS5jcHNyWiA9ICEoYWx1T3V0ICYgMHhGRkZGRkZGRik7CgkJY3B1LmNwc3JDID0gYWx1T3V0ID4gMHhGRkZGRkZGRjsKCQljcHUuY3BzclYgPSAoZ3Byc1tyZF0gPj4gMzEpID09IChncHJzW3JtXSA+PiAzMSkgJiYKCQkJCQkoZ3Byc1tyZF0gPj4gMzEpICE9IChhbHVPdXQgPj4gMzEpICYmCgkJCQkJKGdwcnNbcm1dID4+IDMxKSAhPSAoYWx1T3V0ID4+IDMxKTsKCX07Cn07CgpBUk1Db3JlVGh1bWIucHJvdG90eXBlLmNvbnN0cnVjdENNUDEgPSBmdW5jdGlvbihybiwgaW1tZWRpYXRlKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoKGdwcnNbY3B1LlBDXSk7CgkJdmFyIGFsdU91dCA9IGdwcnNbcm5dIC0gaW1tZWRpYXRlOwoJCWNwdS5jcHNyTiA9IGFsdU91dCA+PiAzMTsKCQljcHUuY3BzclogPSAhKGFsdU91dCAmIDB4RkZGRkZGRkYpOwoJCWNwdS5jcHNyQyA9IChncHJzW3JuXSA+Pj4gMCkgPj0gaW1tZWRpYXRlOwoJCWNwdS5jcHNyViA9IChncHJzW3JuXSA+PiAzMSkgJiYgKChncHJzW3JuXSBeIGFsdU91dCkgPj4gMzEpOwoJfTsKfQoKQVJNQ29yZVRodW1iLnByb3RvdHlwZS5jb25zdHJ1Y3RDTVAyID0gZnVuY3Rpb24ocmQsIHJtKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoKGdwcnNbY3B1LlBDXSk7CgkJdmFyIGQgPSBncHJzW3JkXTsKCQl2YXIgbSA9IGdwcnNbcm1dOwoJCXZhciBhbHVPdXQgPSBkIC0gbTsKCQl2YXIgYW4gPSBhbHVPdXQgPj4gMzE7CgkJdmFyIGRuID0gZCA+PiAzMTsKCQljcHUuY3Bzck4gPSBhbjsKCQljcHUuY3BzclogPSAhKGFsdU91dCAmIDB4RkZGRkZGRkYpOwoJCWNwdS5jcHNyQyA9IChkID4+PiAwKSA+PSAobSA+Pj4gMCk7CgkJY3B1LmNwc3JWID0gZG4gIT0gKG0gPj4gMzEpICYmIGRuICE9IGFuOwoJfTsKfTsKCkFSTUNvcmVUaHVtYi5wcm90b3R5cGUuY29uc3RydWN0Q01QMyA9IGZ1bmN0aW9uKHJkLCBybSkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaChncHJzW2NwdS5QQ10pOwoJCXZhciBhbHVPdXQgPSBncHJzW3JkXSAtIGdwcnNbcm1dOwoJCWNwdS5jcHNyTiA9IGFsdU91dCA+PiAzMTsKCQljcHUuY3BzclogPSAhKGFsdU91dCAmIDB4RkZGRkZGRkYpOwoJCWNwdS5jcHNyQyA9IChncHJzW3JkXSA+Pj4gMCkgPj0gKGdwcnNbcm1dID4+PiAwKTsKCQljcHUuY3BzclYgPSAoKGdwcnNbcmRdIF4gZ3Byc1tybV0pID4+IDMxKSAmJiAoKGdwcnNbcmRdIF4gYWx1T3V0KSA+PiAzMSk7Cgl9Owp9OwoKQVJNQ29yZVRodW1iLnByb3RvdHlwZS5jb25zdHJ1Y3RFT1IgPSBmdW5jdGlvbihyZCwgcm0pIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2goZ3Byc1tjcHUuUENdKTsKCQlncHJzW3JkXSA9IGdwcnNbcmRdIF4gZ3Byc1tybV07CgkJY3B1LmNwc3JOID0gZ3Byc1tyZF0gPj4gMzE7CgkJY3B1LmNwc3JaID0gIShncHJzW3JkXSAmIDB4RkZGRkZGRkYpOwoJfTsKfTsKCkFSTUNvcmVUaHVtYi5wcm90b3R5cGUuY29uc3RydWN0TERNSUEgPSBmdW5jdGlvbihybiwgcnMpIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2goZ3Byc1tjcHUuUENdKTsKCQl2YXIgYWRkcmVzcyA9IGdwcnNbcm5dOwoJCXZhciB0b3RhbCA9IDA7CgkJdmFyIG0sIGk7CgkJZm9yIChtID0gMHgwMSwgaSA9IDA7IGkgPCA4OyBtIDw8PSAxLCArK2kpIHsKCQkJaWYgKHJzICYgbSkgewoJCQkJZ3Byc1tpXSA9IGNwdS5tbXUubG9hZDMyKGFkZHJlc3MpOwoJCQkJYWRkcmVzcyArPSA0OwoJCQkJKyt0b3RhbDsKCQkJfQoJCX0KCQljcHUubW11LndhaXRNdWx0aTMyKGFkZHJlc3MsIHRvdGFsKTsKCQlpZiAoISgoMSA8PCBybikgJiBycykpIHsKCQkJZ3Byc1tybl0gPSBhZGRyZXNzOwoJCX0KCX07Cn07CgpBUk1Db3JlVGh1bWIucHJvdG90eXBlLmNvbnN0cnVjdExEUjEgPSBmdW5jdGlvbihyZCwgcm4sIGltbWVkaWF0ZSkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaChncHJzW2NwdS5QQ10pOwoJCXZhciBuID0gZ3Byc1tybl0gKyBpbW1lZGlhdGU7CgkJZ3Byc1tyZF0gPSBjcHUubW11LmxvYWQzMihuKTsKCQljcHUubW11LndhaXQzMihuKTsKCQkrK2NwdS5jeWNsZXM7Cgl9Owp9OwoKQVJNQ29yZVRodW1iLnByb3RvdHlwZS5jb25zdHJ1Y3RMRFIyID0gZnVuY3Rpb24ocmQsIHJuLCBybSkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaChncHJzW2NwdS5QQ10pOwoJCWdwcnNbcmRdID0gY3B1Lm1tdS5sb2FkMzIoZ3Byc1tybl0gKyBncHJzW3JtXSk7CgkJY3B1Lm1tdS53YWl0MzIoZ3Byc1tybl0gKyBncHJzW3JtXSk7CgkJKytjcHUuY3ljbGVzOwoJfQp9OwoKQVJNQ29yZVRodW1iLnByb3RvdHlwZS5jb25zdHJ1Y3RMRFIzID0gZnVuY3Rpb24ocmQsIGltbWVkaWF0ZSkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaChncHJzW2NwdS5QQ10pOwoJCWdwcnNbcmRdID0gY3B1Lm1tdS5sb2FkMzIoKGdwcnNbY3B1LlBDXSAmIDB4RkZGRkZGRkMpICsgaW1tZWRpYXRlKTsKCQljcHUubW11LndhaXQzMihncHJzW2NwdS5QQ10pOwoJCSsrY3B1LmN5Y2xlczsKCX07Cn07CgpBUk1Db3JlVGh1bWIucHJvdG90eXBlLmNvbnN0cnVjdExEUjQgPSBmdW5jdGlvbihyZCwgaW1tZWRpYXRlKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoKGdwcnNbY3B1LlBDXSk7CgkJZ3Byc1tyZF0gPSBjcHUubW11LmxvYWQzMihncHJzW2NwdS5TUF0gKyBpbW1lZGlhdGUpOwoJCWNwdS5tbXUud2FpdDMyKGdwcnNbY3B1LlNQXSArIGltbWVkaWF0ZSk7CgkJKytjcHUuY3ljbGVzOwoJfTsKfTsKCkFSTUNvcmVUaHVtYi5wcm90b3R5cGUuY29uc3RydWN0TERSQjEgPSBmdW5jdGlvbihyZCwgcm4sIGltbWVkaWF0ZSkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQl2YXIgbiA9IGdwcnNbcm5dICsgaW1tZWRpYXRlOwoJCWNwdS5tbXUud2FpdFByZWZldGNoKGdwcnNbY3B1LlBDXSk7CgkJZ3Byc1tyZF0gPSBjcHUubW11LmxvYWRVOChuKTsKCQljcHUubW11LndhaXQobik7CgkJKytjcHUuY3ljbGVzOwoJfTsKfTsKCkFSTUNvcmVUaHVtYi5wcm90b3R5cGUuY29uc3RydWN0TERSQjIgPSBmdW5jdGlvbihyZCwgcm4sIHJtKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoKGdwcnNbY3B1LlBDXSk7CgkJZ3Byc1tyZF0gPSBjcHUubW11LmxvYWRVOChncHJzW3JuXSArIGdwcnNbcm1dKTsKCQljcHUubW11LndhaXQoZ3Byc1tybl0gKyBncHJzW3JtXSk7CgkJKytjcHUuY3ljbGVzOwoJfTsKfTsKCkFSTUNvcmVUaHVtYi5wcm90b3R5cGUuY29uc3RydWN0TERSSDEgPSBmdW5jdGlvbihyZCwgcm4sIGltbWVkaWF0ZSkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQl2YXIgbiA9IGdwcnNbcm5dICsgaW1tZWRpYXRlOwoJCWNwdS5tbXUud2FpdFByZWZldGNoKGdwcnNbY3B1LlBDXSk7CgkJZ3Byc1tyZF0gPSBjcHUubW11LmxvYWRVMTYobik7CgkJY3B1Lm1tdS53YWl0KG4pOwoJCSsrY3B1LmN5Y2xlczsKCX07Cn07CgpBUk1Db3JlVGh1bWIucHJvdG90eXBlLmNvbnN0cnVjdExEUkgyID0gZnVuY3Rpb24ocmQsIHJuLCBybSkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaChncHJzW2NwdS5QQ10pOwoJCWdwcnNbcmRdID0gY3B1Lm1tdS5sb2FkVTE2KGdwcnNbcm5dICsgZ3Byc1tybV0pOwoJCWNwdS5tbXUud2FpdChncHJzW3JuXSArIGdwcnNbcm1dKTsKCQkrK2NwdS5jeWNsZXM7Cgl9Owp9OwoKQVJNQ29yZVRodW1iLnByb3RvdHlwZS5jb25zdHJ1Y3RMRFJTQiA9IGZ1bmN0aW9uKHJkLCBybiwgcm0pIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2goZ3Byc1tjcHUuUENdKTsKCQlncHJzW3JkXSA9IGNwdS5tbXUubG9hZDgoZ3Byc1tybl0gKyBncHJzW3JtXSk7CgkJY3B1Lm1tdS53YWl0KGdwcnNbcm5dICsgZ3Byc1tybV0pOwoJCSsrY3B1LmN5Y2xlczsKCX07Cn07CgpBUk1Db3JlVGh1bWIucHJvdG90eXBlLmNvbnN0cnVjdExEUlNIID0gZnVuY3Rpb24ocmQsIHJuLCBybSkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaChncHJzW2NwdS5QQ10pOwoJCWdwcnNbcmRdID0gY3B1Lm1tdS5sb2FkMTYoZ3Byc1tybl0gKyBncHJzW3JtXSk7CgkJY3B1Lm1tdS53YWl0KGdwcnNbcm5dICsgZ3Byc1tybV0pOwoJCSsrY3B1LmN5Y2xlczsKCX07Cn07CgpBUk1Db3JlVGh1bWIucHJvdG90eXBlLmNvbnN0cnVjdExTTDEgPSBmdW5jdGlvbihyZCwgcm0sIGltbWVkaWF0ZSkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaChncHJzW2NwdS5QQ10pOwoJCWlmIChpbW1lZGlhdGUgPT0gMCkgewoJCQlncHJzW3JkXSA9IGdwcnNbcm1dOwoJCX0gZWxzZSB7CgkJCWNwdS5jcHNyQyA9IGdwcnNbcm1dICYgKDEgPDwgKDMyIC0gaW1tZWRpYXRlKSk7CgkJCWdwcnNbcmRdID0gZ3Byc1tybV0gPDwgaW1tZWRpYXRlOwoJCX0KCQljcHUuY3Bzck4gPSBncHJzW3JkXSA+PiAzMTsKCQljcHUuY3BzclogPSAhKGdwcnNbcmRdICYgMHhGRkZGRkZGRik7Cgl9Owp9OwoKQVJNQ29yZVRodW1iLnByb3RvdHlwZS5jb25zdHJ1Y3RMU0wyID0gZnVuY3Rpb24ocmQsIHJtKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoKGdwcnNbY3B1LlBDXSk7CgkJdmFyIHJzID0gZ3Byc1tybV0gJiAweEZGOwoJCWlmIChycykgewoJCQlpZiAocnMgPCAzMikgewoJCQkJY3B1LmNwc3JDID0gZ3Byc1tyZF0gJiAoMSA8PCAoMzIgLSBycykpOwoJCQkJZ3Byc1tyZF0gPDw9IHJzOwoJCQl9IGVsc2UgewoJCQkJaWYgKHJzID4gMzIpIHsKCQkJCQljcHUuY3BzckMgPSAwOwoJCQkJfSBlbHNlIHsKCQkJCQljcHUuY3BzckMgPSBncHJzW3JkXSAmIDB4MDAwMDAwMDE7CgkJCQl9CgkJCQlncHJzW3JkXSA9IDA7CgkJCX0KCQl9CgkJY3B1LmNwc3JOID0gZ3Byc1tyZF0gPj4gMzE7CgkJY3B1LmNwc3JaID0gIShncHJzW3JkXSAmIDB4RkZGRkZGRkYpOwoJfTsKfTsKCkFSTUNvcmVUaHVtYi5wcm90b3R5cGUuY29uc3RydWN0TFNSMSA9IGZ1bmN0aW9uKHJkLCBybSwgaW1tZWRpYXRlKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoKGdwcnNbY3B1LlBDXSk7CgkJaWYgKGltbWVkaWF0ZSA9PSAwKSB7CgkJCWNwdS5jcHNyQyA9IGdwcnNbcm1dID4+IDMxOwoJCQlncHJzW3JkXSA9IDA7CgkJfSBlbHNlIHsKCQkJY3B1LmNwc3JDID0gZ3Byc1tybV0gJiAoMSA8PCAoaW1tZWRpYXRlIC0gMSkpOwoJCQlncHJzW3JkXSA9IGdwcnNbcm1dID4+PiBpbW1lZGlhdGU7CgkJfQoJCWNwdS5jcHNyTiA9IDA7CgkJY3B1LmNwc3JaID0gIShncHJzW3JkXSAmIDB4RkZGRkZGRkYpOwoJfTsKfQoKQVJNQ29yZVRodW1iLnByb3RvdHlwZS5jb25zdHJ1Y3RMU1IyID0gZnVuY3Rpb24ocmQsIHJtKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoKGdwcnNbY3B1LlBDXSk7CgkJdmFyIHJzID0gZ3Byc1tybV0gJiAweEZGOwoJCWlmIChycykgewoJCQlpZiAocnMgPCAzMikgewoJCQkJY3B1LmNwc3JDID0gZ3Byc1tyZF0gJiAoMSA8PCAocnMgLSAxKSk7CgkJCQlncHJzW3JkXSA+Pj49IHJzOwoJCQl9IGVsc2UgewoJCQkJaWYgKHJzID4gMzIpIHsKCQkJCQljcHUuY3BzckMgPSAwOwoJCQkJfSBlbHNlIHsKCQkJCQljcHUuY3BzckMgPSBncHJzW3JkXSA+PiAzMTsKCQkJCX0KCQkJCWdwcnNbcmRdID0gMDsKCQkJfQoJCX0KCQljcHUuY3Bzck4gPSBncHJzW3JkXSA+PiAzMTsKCQljcHUuY3BzclogPSAhKGdwcnNbcmRdICYgMHhGRkZGRkZGRik7Cgl9Owp9OwoKQVJNQ29yZVRodW1iLnByb3RvdHlwZS5jb25zdHJ1Y3RNT1YxID0gZnVuY3Rpb24ocm4sIGltbWVkaWF0ZSkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaChncHJzW2NwdS5QQ10pOwoJCWdwcnNbcm5dID0gaW1tZWRpYXRlOwoJCWNwdS5jcHNyTiA9IGltbWVkaWF0ZSA+PiAzMTsKCQljcHUuY3BzclogPSAhKGltbWVkaWF0ZSAmIDB4RkZGRkZGRkYpOwoJfTsKfTsKCkFSTUNvcmVUaHVtYi5wcm90b3R5cGUuY29uc3RydWN0TU9WMiA9IGZ1bmN0aW9uKHJkLCBybiwgcm0pIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2goZ3Byc1tjcHUuUENdKTsKCQl2YXIgZCA9IGdwcnNbcm5dOwoJCWNwdS5jcHNyTiA9IGQgPj4gMzE7CgkJY3B1LmNwc3JaID0gIShkICYgMHhGRkZGRkZGRik7CgkJY3B1LmNwc3JDID0gMDsKCQljcHUuY3BzclYgPSAwOwoJCWdwcnNbcmRdID0gZDsKCX07Cn07CgpBUk1Db3JlVGh1bWIucHJvdG90eXBlLmNvbnN0cnVjdE1PVjMgPSBmdW5jdGlvbihyZCwgcm0pIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2goZ3Byc1tjcHUuUENdKTsKCQlncHJzW3JkXSA9IGdwcnNbcm1dOwoJfTsKfTsKCkFSTUNvcmVUaHVtYi5wcm90b3R5cGUuY29uc3RydWN0TVVMID0gZnVuY3Rpb24ocmQsIHJtKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoKGdwcnNbY3B1LlBDXSk7CgkJY3B1Lm1tdS53YWl0TXVsKGdwcnNbcm1dKTsKCQlpZiAoKGdwcnNbcm1dICYgMHhGRkZGMDAwMCkgJiYgKGdwcnNbcmRdICYgMHhGRkZGMDAwMCkpIHsKCQkJLy8gT3VyIGRhdGEgdHlwZSBpcyBhIGRvdWJsZS0td2UnbGwgbG9zZSBiaXRzIGlmIHdlIGRvIGl0IGFsbCBhdCBvbmNlIQoJCQl2YXIgaGkgPSAoKGdwcnNbcmRdICYgMHhGRkZGMDAwMCkgKiBncHJzW3JtXSkgJiAweEZGRkZGRkZGOwoJCQl2YXIgbG8gPSAoKGdwcnNbcmRdICYgMHgwMDAwRkZGRikgKiBncHJzW3JtXSkgJiAweEZGRkZGRkZGOwoJCQlncHJzW3JkXSA9IChoaSArIGxvKSAmIDB4RkZGRkZGRkY7CgkJfSBlbHNlIHsKCQkJZ3Byc1tyZF0gKj0gZ3Byc1tybV07CgkJfQoJCWNwdS5jcHNyTiA9IGdwcnNbcmRdID4+IDMxOwoJCWNwdS5jcHNyWiA9ICEoZ3Byc1tyZF0gJiAweEZGRkZGRkZGKTsKCX07Cn07CgpBUk1Db3JlVGh1bWIucHJvdG90eXBlLmNvbnN0cnVjdE1WTiA9IGZ1bmN0aW9uKHJkLCBybSkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaChncHJzW2NwdS5QQ10pOwoJCWdwcnNbcmRdID0gfmdwcnNbcm1dOwoJCWNwdS5jcHNyTiA9IGdwcnNbcmRdID4+IDMxOwoJCWNwdS5jcHNyWiA9ICEoZ3Byc1tyZF0gJiAweEZGRkZGRkZGKTsKCX07Cn07CgpBUk1Db3JlVGh1bWIucHJvdG90eXBlLmNvbnN0cnVjdE5FRyA9IGZ1bmN0aW9uKHJkLCBybSkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaChncHJzW2NwdS5QQ10pOwoJCXZhciBkID0gLWdwcnNbcm1dOwoJCWNwdS5jcHNyTiA9IGQgPj4gMzE7CgkJY3B1LmNwc3JaID0gIShkICYgMHhGRkZGRkZGRik7CgkJY3B1LmNwc3JDID0gMCA+PSAoZCA+Pj4gMCk7CgkJY3B1LmNwc3JWID0gKGdwcnNbcm1dID4+IDMxKSAmJiAoZCA+PiAzMSk7CgkJZ3Byc1tyZF0gPSBkOwoJfTsKfTsKCkFSTUNvcmVUaHVtYi5wcm90b3R5cGUuY29uc3RydWN0T1JSID0gZnVuY3Rpb24ocmQsIHJtKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoKGdwcnNbY3B1LlBDXSk7CgkJZ3Byc1tyZF0gPSBncHJzW3JkXSB8IGdwcnNbcm1dOwoJCWNwdS5jcHNyTiA9IGdwcnNbcmRdID4+IDMxOwoJCWNwdS5jcHNyWiA9ICEoZ3Byc1tyZF0gJiAweEZGRkZGRkZGKTsKCX07Cn07CgpBUk1Db3JlVGh1bWIucHJvdG90eXBlLmNvbnN0cnVjdFBPUCA9IGZ1bmN0aW9uKHJzLCByKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoKGdwcnNbY3B1LlBDXSk7CgkJKytjcHUuY3ljbGVzOwoJCXZhciBhZGRyZXNzID0gZ3Byc1tjcHUuU1BdOwoJCXZhciB0b3RhbCA9IDA7CgkJdmFyIG0sIGk7CgkJZm9yIChtID0gMHgwMSwgaSA9IDA7IGkgPCA4OyBtIDw8PSAxLCArK2kpIHsKCQkJaWYgKHJzICYgbSkgewoJCQkJY3B1Lm1tdS53YWl0U2VxMzIoYWRkcmVzcyk7CgkJCQlncHJzW2ldID0gY3B1Lm1tdS5sb2FkMzIoYWRkcmVzcyk7CgkJCQlhZGRyZXNzICs9IDQ7CgkJCQkrK3RvdGFsOwoJCQl9CgkJfQoJCWlmIChyKSB7CgkJCWdwcnNbY3B1LlBDXSA9IGNwdS5tbXUubG9hZDMyKGFkZHJlc3MpICYgMHhGRkZGRkZGRTsKCQkJYWRkcmVzcyArPSA0OwoJCQkrK3RvdGFsOwoJCX0KCQljcHUubW11LndhaXRNdWx0aTMyKGFkZHJlc3MsIHRvdGFsKTsKCQlncHJzW2NwdS5TUF0gPSBhZGRyZXNzOwoJfTsKfTsKCkFSTUNvcmVUaHVtYi5wcm90b3R5cGUuY29uc3RydWN0UFVTSCA9IGZ1bmN0aW9uKHJzLCByKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCXZhciBhZGRyZXNzID0gZ3Byc1tjcHUuU1BdIC0gNDsKCQl2YXIgdG90YWwgPSAwOwoJCWNwdS5tbXUud2FpdFByZWZldGNoKGdwcnNbY3B1LlBDXSk7CgkJaWYgKHIpIHsKCQkJY3B1Lm1tdS5zdG9yZTMyKGFkZHJlc3MsIGdwcnNbY3B1LkxSXSk7CgkJCWFkZHJlc3MgLT0gNDsKCQkJKyt0b3RhbDsKCQl9CgkJdmFyIG0sIGk7CgkJZm9yIChtID0gMHg4MCwgaSA9IDc7IG07IG0gPj49IDEsIC0taSkgewoJCQlpZiAocnMgJiBtKSB7CgkJCQljcHUubW11LnN0b3JlMzIoYWRkcmVzcywgZ3Byc1tpXSk7CgkJCQlhZGRyZXNzIC09IDQ7CgkJCQkrK3RvdGFsOwoJCQkJYnJlYWs7CgkJCX0KCQl9CgkJZm9yIChtID4+PSAxLCAtLWk7IG07IG0gPj49IDEsIC0taSkgewoJCQlpZiAocnMgJiBtKSB7CgkJCQljcHUubW11LnN0b3JlMzIoYWRkcmVzcywgZ3Byc1tpXSk7CgkJCQlhZGRyZXNzIC09IDQ7CgkJCQkrK3RvdGFsOwoJCQl9CgkJfQoJCWNwdS5tbXUud2FpdE11bHRpMzIoYWRkcmVzcywgdG90YWwpOwoJCWdwcnNbY3B1LlNQXSA9IGFkZHJlc3MgKyA0OwoJfTsKfTsKCkFSTUNvcmVUaHVtYi5wcm90b3R5cGUuY29uc3RydWN0Uk9SID0gZnVuY3Rpb24ocmQsIHJtKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoKGdwcnNbY3B1LlBDXSk7CgkJdmFyIHJzID0gZ3Byc1tybV0gJiAweEZGOwoJCWlmIChycykgewoJCQl2YXIgcjQgPSBycyAmIDB4MUY7CgkJCWlmIChyNCA+IDApIHsKCQkJCWNwdS5jcHNyQyA9IGdwcnNbcmRdICYgKDEgPDwgKHI0IC0gMSkpOwoJCQkJZ3Byc1tyZF0gPSAoZ3Byc1tyZF0gPj4+IHI0KSB8IChncHJzW3JkXSA8PCAoMzIgLSByNCkpOwoJCQl9IGVsc2UgewoJCQkJY3B1LmNwc3JDID0gZ3Byc1tyZF0gPj4gMzE7CgkJCX0KCQl9CgkJY3B1LmNwc3JOID0gZ3Byc1tyZF0gPj4gMzE7CgkJY3B1LmNwc3JaID0gIShncHJzW3JkXSAmIDB4RkZGRkZGRkYpOwoJfTsKfTsKCkFSTUNvcmVUaHVtYi5wcm90b3R5cGUuY29uc3RydWN0U0JDID0gZnVuY3Rpb24ocmQsIHJtKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoKGdwcnNbY3B1LlBDXSk7CgkJdmFyIG0gPSAoZ3Byc1tybV0gPj4+IDApICsgIWNwdS5jcHNyQzsKCQl2YXIgZCA9IChncHJzW3JkXSA+Pj4gMCkgLSBtOwoJCWNwdS5jcHNyTiA9IGQgPj4gMzE7CgkJY3B1LmNwc3JaID0gIShkICYgMHhGRkZGRkZGRik7CgkJY3B1LmNwc3JDID0gKGdwcnNbcmRdID4+PiAwKSA+PSAoZCA+Pj4gMCk7CgkJY3B1LmNwc3JWID0gKChncHJzW3JkXSBeIG0pID4+IDMxKSAmJiAoKGdwcnNbcmRdIF4gZCkgPj4gMzEpOwoJCWdwcnNbcmRdID0gZDsKCX07Cn07CgpBUk1Db3JlVGh1bWIucHJvdG90eXBlLmNvbnN0cnVjdFNUTUlBID0gZnVuY3Rpb24ocm4sIHJzKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdChncHJzW2NwdS5QQ10pOwoJCXZhciBhZGRyZXNzID0gZ3Byc1tybl07CgkJdmFyIHRvdGFsID0gMDsKCQl2YXIgbSwgaTsKCQlmb3IgKG0gPSAweDAxLCBpID0gMDsgaSA8IDg7IG0gPDw9IDEsICsraSkgewoJCQlpZiAocnMgJiBtKSB7CgkJCQljcHUubW11LnN0b3JlMzIoYWRkcmVzcywgZ3Byc1tpXSk7CgkJCQlhZGRyZXNzICs9IDQ7CgkJCQkrK3RvdGFsOwoJCQkJYnJlYWs7CgkJCX0KCQl9CgkJZm9yIChtIDw8PSAxLCArK2k7IGkgPCA4OyBtIDw8PSAxLCArK2kpIHsKCQkJaWYgKHJzICYgbSkgewoJCQkJY3B1Lm1tdS5zdG9yZTMyKGFkZHJlc3MsIGdwcnNbaV0pOwoJCQkJYWRkcmVzcyArPSA0OwoJCQkJKyt0b3RhbDsKCQkJfQoJCX0KCQljcHUubW11LndhaXRNdWx0aTMyKGFkZHJlc3MsIHRvdGFsKTsKCQlncHJzW3JuXSA9IGFkZHJlc3M7Cgl9Owp9OwoKQVJNQ29yZVRodW1iLnByb3RvdHlwZS5jb25zdHJ1Y3RTVFIxID0gZnVuY3Rpb24ocmQsIHJuLCBpbW1lZGlhdGUpIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJdmFyIG4gPSBncHJzW3JuXSArIGltbWVkaWF0ZTsKCQljcHUubW11LnN0b3JlMzIobiwgZ3Byc1tyZF0pOwoJCWNwdS5tbXUud2FpdChncHJzW2NwdS5QQ10pOwoJCWNwdS5tbXUud2FpdDMyKG4pOwoJfTsKfTsKCkFSTUNvcmVUaHVtYi5wcm90b3R5cGUuY29uc3RydWN0U1RSMiA9IGZ1bmN0aW9uKHJkLCBybiwgcm0pIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS5zdG9yZTMyKGdwcnNbcm5dICsgZ3Byc1tybV0sIGdwcnNbcmRdKTsKCQljcHUubW11LndhaXQoZ3Byc1tjcHUuUENdKTsKCQljcHUubW11LndhaXQzMihncHJzW3JuXSArIGdwcnNbcm1dKTsKCX07Cn07CgpBUk1Db3JlVGh1bWIucHJvdG90eXBlLmNvbnN0cnVjdFNUUjMgPSBmdW5jdGlvbihyZCwgaW1tZWRpYXRlKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUuc3RvcmUzMihncHJzW2NwdS5TUF0gKyBpbW1lZGlhdGUsIGdwcnNbcmRdKTsKCQljcHUubW11LndhaXQoZ3Byc1tjcHUuUENdKTsKCQljcHUubW11LndhaXQzMihncHJzW2NwdS5TUF0gKyBpbW1lZGlhdGUpOwoJfTsKfTsKCkFSTUNvcmVUaHVtYi5wcm90b3R5cGUuY29uc3RydWN0U1RSQjEgPSBmdW5jdGlvbihyZCwgcm4sIGltbWVkaWF0ZSkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQl2YXIgbiA9IGdwcnNbcm5dICsgaW1tZWRpYXRlOwoJCWNwdS5tbXUuc3RvcmU4KG4sIGdwcnNbcmRdKTsKCQljcHUubW11LndhaXQoZ3Byc1tjcHUuUENdKTsKCQljcHUubW11LndhaXQobik7Cgl9Owp9OwoKQVJNQ29yZVRodW1iLnByb3RvdHlwZS5jb25zdHJ1Y3RTVFJCMiA9IGZ1bmN0aW9uKHJkLCBybiwgcm0pIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS5zdG9yZTgoZ3Byc1tybl0gKyBncHJzW3JtXSwgZ3Byc1tyZF0pOwoJCWNwdS5tbXUud2FpdChncHJzW2NwdS5QQ10pOwoJCWNwdS5tbXUud2FpdChncHJzW3JuXSArIGdwcnNbcm1dKTsKCX0KfTsKCkFSTUNvcmVUaHVtYi5wcm90b3R5cGUuY29uc3RydWN0U1RSSDEgPSBmdW5jdGlvbihyZCwgcm4sIGltbWVkaWF0ZSkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQl2YXIgbiA9IGdwcnNbcm5dICsgaW1tZWRpYXRlOwoJCWNwdS5tbXUuc3RvcmUxNihuLCBncHJzW3JkXSk7CgkJY3B1Lm1tdS53YWl0KGdwcnNbY3B1LlBDXSk7CgkJY3B1Lm1tdS53YWl0KG4pOwoJfTsKfTsKCkFSTUNvcmVUaHVtYi5wcm90b3R5cGUuY29uc3RydWN0U1RSSDIgPSBmdW5jdGlvbihyZCwgcm4sIHJtKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUuc3RvcmUxNihncHJzW3JuXSArIGdwcnNbcm1dLCBncHJzW3JkXSk7CgkJY3B1Lm1tdS53YWl0KGdwcnNbY3B1LlBDXSk7CgkJY3B1Lm1tdS53YWl0KGdwcnNbcm5dICsgZ3Byc1tybV0pOwoJfQp9OwoKQVJNQ29yZVRodW1iLnByb3RvdHlwZS5jb25zdHJ1Y3RTVUIxID0gZnVuY3Rpb24ocmQsIHJuLCBpbW1lZGlhdGUpIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2goZ3Byc1tjcHUuUENdKTsKCQl2YXIgZCA9IGdwcnNbcm5dIC0gaW1tZWRpYXRlOwoJCWNwdS5jcHNyTiA9IGQgPj4gMzE7CgkJY3B1LmNwc3JaID0gIShkICYgMHhGRkZGRkZGRik7CgkJY3B1LmNwc3JDID0gKGdwcnNbcm5dID4+PiAwKSA+PSBpbW1lZGlhdGU7CgkJY3B1LmNwc3JWID0gKGdwcnNbcm5dID4+IDMxKSAmJiAoKGdwcnNbcm5dIF4gZCkgPj4gMzEpOwoJCWdwcnNbcmRdID0gZDsKCX07Cn0KCkFSTUNvcmVUaHVtYi5wcm90b3R5cGUuY29uc3RydWN0U1VCMiA9IGZ1bmN0aW9uKHJuLCBpbW1lZGlhdGUpIHsKCXZhciBjcHUgPSB0aGlzLmNwdTsKCXZhciBncHJzID0gY3B1LmdwcnM7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJY3B1Lm1tdS53YWl0UHJlZmV0Y2goZ3Byc1tjcHUuUENdKTsKCQl2YXIgZCA9IGdwcnNbcm5dIC0gaW1tZWRpYXRlOwoJCWNwdS5jcHNyTiA9IGQgPj4gMzE7CgkJY3B1LmNwc3JaID0gIShkICYgMHhGRkZGRkZGRik7CgkJY3B1LmNwc3JDID0gKGdwcnNbcm5dID4+PiAwKSA+PSBpbW1lZGlhdGU7CgkJY3B1LmNwc3JWID0gKGdwcnNbcm5dID4+IDMxKSAmJiAoKGdwcnNbcm5dIF4gZCkgPj4gMzEpOwoJCWdwcnNbcm5dID0gZDsKCX07Cn07CgpBUk1Db3JlVGh1bWIucHJvdG90eXBlLmNvbnN0cnVjdFNVQjMgPSBmdW5jdGlvbihyZCwgcm4sIHJtKSB7Cgl2YXIgY3B1ID0gdGhpcy5jcHU7Cgl2YXIgZ3BycyA9IGNwdS5ncHJzOwoJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCWNwdS5tbXUud2FpdFByZWZldGNoKGdwcnNbY3B1LlBDXSk7CgkJdmFyIGQgPSBncHJzW3JuXSAtIGdwcnNbcm1dOwoJCWNwdS5jcHNyTiA9IGQgPj4gMzE7CgkJY3B1LmNwc3JaID0gIShkICYgMHhGRkZGRkZGRik7CgkJY3B1LmNwc3JDID0gKGdwcnNbcm5dID4+PiAwKSA+PSAoZ3Byc1tybV0gPj4+IDApOwoJCWNwdS5jcHNyViA9IChncHJzW3JuXSA+PiAzMSkgIT0gKGdwcnNbcm1dID4+IDMxKSAmJgoJCQkJCShncHJzW3JuXSA+PiAzMSkgIT0gKGQgPj4gMzEpOwoJCWdwcnNbcmRdID0gZDsKCX07Cn07CgpBUk1Db3JlVGh1bWIucHJvdG90eXBlLmNvbnN0cnVjdFNXSSA9IGZ1bmN0aW9uKGltbWVkaWF0ZSkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUuaXJxLnN3aShpbW1lZGlhdGUpOwoJCWNwdS5tbXUud2FpdFByZWZldGNoKGdwcnNbY3B1LlBDXSk7Cgl9Cn07CgpBUk1Db3JlVGh1bWIucHJvdG90eXBlLmNvbnN0cnVjdFRTVCA9IGZ1bmN0aW9uKHJkLCBybSkgewoJdmFyIGNwdSA9IHRoaXMuY3B1OwoJdmFyIGdwcnMgPSBjcHUuZ3ByczsKCXJldHVybiBmdW5jdGlvbigpIHsKCQljcHUubW11LndhaXRQcmVmZXRjaChncHJzW2NwdS5QQ10pOwoJCXZhciBhbHVPdXQgPSBncHJzW3JkXSAmIGdwcnNbcm1dOwoJCWNwdS5jcHNyTiA9IGFsdU91dCA+PiAzMTsKCQljcHUuY3BzclogPSAhKGFsdU91dCAmIDB4RkZGRkZGRkYpOwoJfTsKfTsK"></script>
<script src="data:@file/javascript;base64,ZnVuY3Rpb24gTWVtb3J5VmlldyhtZW1vcnksIG9mZnNldCkgewoJdGhpcy5pbmhlcml0KCk7Cgl0aGlzLmJ1ZmZlciA9IG1lbW9yeTsKCXRoaXMudmlldyA9IG5ldyBEYXRhVmlldyh0aGlzLmJ1ZmZlciwgdHlwZW9mKG9mZnNldCkgPT09ICJudW1iZXIiID8gb2Zmc2V0IDogMCk7Cgl0aGlzLm1hc2sgPSBtZW1vcnkuYnl0ZUxlbmd0aCAtIDE7Cgl0aGlzLnJlc2V0TWFzaygpOwp9OwoKTWVtb3J5Vmlldy5wcm90b3R5cGUucmVzZXRNYXNrID0gZnVuY3Rpb24oKSB7Cgl0aGlzLm1hc2s4ID0gdGhpcy5tYXNrICYgMHhGRkZGRkZGRjsKCXRoaXMubWFzazE2ID0gdGhpcy5tYXNrICYgMHhGRkZGRkZGRTsKCXRoaXMubWFzazMyID0gdGhpcy5tYXNrICYgMHhGRkZGRkZGQzsKfTsKCk1lbW9yeVZpZXcucHJvdG90eXBlLmxvYWQ4ID0gZnVuY3Rpb24ob2Zmc2V0KSB7CglyZXR1cm4gdGhpcy52aWV3LmdldEludDgob2Zmc2V0ICYgdGhpcy5tYXNrOCk7Cn07CgpNZW1vcnlWaWV3LnByb3RvdHlwZS5sb2FkMTYgPSBmdW5jdGlvbihvZmZzZXQpIHsKCS8vIFVuYWxpZ25lZCAxNi1iaXQgbG9hZHMgYXJlIHVucHJlZGljdGFibGUuLi5sZXQncyBqdXN0IHByZXRlbmQgdGhleSB3b3JrCglyZXR1cm4gdGhpcy52aWV3LmdldEludDE2KG9mZnNldCAmIHRoaXMubWFzaywgdHJ1ZSk7Cn07CgpNZW1vcnlWaWV3LnByb3RvdHlwZS5sb2FkVTggPSBmdW5jdGlvbihvZmZzZXQpIHsKCXJldHVybiB0aGlzLnZpZXcuZ2V0VWludDgob2Zmc2V0ICYgdGhpcy5tYXNrOCk7Cn07CgpNZW1vcnlWaWV3LnByb3RvdHlwZS5sb2FkVTE2ID0gZnVuY3Rpb24ob2Zmc2V0KSB7CgkvLyBVbmFsaWduZWQgMTYtYml0IGxvYWRzIGFyZSB1bnByZWRpY3RhYmxlLi4ubGV0J3MganVzdCBwcmV0ZW5kIHRoZXkgd29yawoJcmV0dXJuIHRoaXMudmlldy5nZXRVaW50MTYob2Zmc2V0ICYgdGhpcy5tYXNrLCB0cnVlKTsKfTsKCk1lbW9yeVZpZXcucHJvdG90eXBlLmxvYWQzMiA9IGZ1bmN0aW9uKG9mZnNldCkgewoJLy8gVW5hbGlnbmVkIDMyLWJpdCBsb2FkcyBhcmUgInJvdGF0ZWQiIHNvIHRoZXkgbWFrZSBzb21lIHNlbWJsYW5jZSBvZiBzZW5zZQoJdmFyIHJvdGF0ZSA9IChvZmZzZXQgJiAzKSA8PCAzOwoJdmFyIG1lbSA9IHRoaXMudmlldy5nZXRJbnQzMihvZmZzZXQgJiB0aGlzLm1hc2szMiwgdHJ1ZSk7CglyZXR1cm4gKG1lbSA+Pj4gcm90YXRlKSB8IChtZW0gPDwgKDMyIC0gcm90YXRlKSk7Cn07CgpNZW1vcnlWaWV3LnByb3RvdHlwZS5zdG9yZTggPSBmdW5jdGlvbihvZmZzZXQsIHZhbHVlKSB7Cgl0aGlzLnZpZXcuc2V0SW50OChvZmZzZXQgJiB0aGlzLm1hc2s4LCB2YWx1ZSk7Cn07CgpNZW1vcnlWaWV3LnByb3RvdHlwZS5zdG9yZTE2ID0gZnVuY3Rpb24ob2Zmc2V0LCB2YWx1ZSkgewoJdGhpcy52aWV3LnNldEludDE2KG9mZnNldCAmIHRoaXMubWFzazE2LCB2YWx1ZSwgdHJ1ZSk7Cn07CgpNZW1vcnlWaWV3LnByb3RvdHlwZS5zdG9yZTMyID0gZnVuY3Rpb24ob2Zmc2V0LCB2YWx1ZSkgewoJdGhpcy52aWV3LnNldEludDMyKG9mZnNldCAmIHRoaXMubWFzazMyLCB2YWx1ZSwgdHJ1ZSk7Cn07CgpNZW1vcnlWaWV3LnByb3RvdHlwZS5pbnZhbGlkYXRlUGFnZSA9IGZ1bmN0aW9uKGFkZHJlc3MpIHt9OwoKTWVtb3J5Vmlldy5wcm90b3R5cGUucmVwbGFjZURhdGEgPSBmdW5jdGlvbihtZW1vcnksIG9mZnNldCkgewoJdGhpcy5idWZmZXIgPSBtZW1vcnk7Cgl0aGlzLnZpZXcgPSBuZXcgRGF0YVZpZXcodGhpcy5idWZmZXIsIHR5cGVvZihvZmZzZXQpID09PSAibnVtYmVyIiA/IG9mZnNldCA6IDApOwoJaWYgKHRoaXMuaWNhY2hlKSB7CgkJdGhpcy5pY2FjaGUgPSBuZXcgQXJyYXkodGhpcy5pY2FjaGUubGVuZ3RoKTsKCX0KfTsKCmZ1bmN0aW9uIE1lbW9yeUJsb2NrKHNpemUsIGNhY2hlQml0cykgewoJTWVtb3J5Vmlldy5jYWxsKHRoaXMsIG5ldyBBcnJheUJ1ZmZlcihzaXplKSk7Cgl0aGlzLklDQUNIRV9QQUdFX0JJVFMgPSBjYWNoZUJpdHM7Cgl0aGlzLlBBR0VfTUFTSyA9ICgyIDw8IHRoaXMuSUNBQ0hFX1BBR0VfQklUUykgLSAxOwoJdGhpcy5pY2FjaGUgPSBuZXcgQXJyYXkoc2l6ZSA+PiAodGhpcy5JQ0FDSEVfUEFHRV9CSVRTICsgMSkpOwp9OwoKTWVtb3J5QmxvY2sucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShNZW1vcnlWaWV3LnByb3RvdHlwZSk7CgpNZW1vcnlCbG9jay5wcm90b3R5cGUuaW52YWxpZGF0ZVBhZ2UgPSBmdW5jdGlvbihhZGRyZXNzKSB7Cgl2YXIgcGFnZSA9IHRoaXMuaWNhY2hlWyhhZGRyZXNzICYgdGhpcy5tYXNrKSA+PiB0aGlzLklDQUNIRV9QQUdFX0JJVFNdOwoJaWYgKHBhZ2UpIHsKCQlwYWdlLmludmFsaWQgPSB0cnVlOwoJfQp9OwoKZnVuY3Rpb24gUk9NVmlldyhyb20sIG9mZnNldCkgewoJTWVtb3J5Vmlldy5jYWxsKHRoaXMsIHJvbSwgb2Zmc2V0KTsKCXRoaXMuSUNBQ0hFX1BBR0VfQklUUyA9IDEwOwoJdGhpcy5QQUdFX01BU0sgPSAoMiA8PCB0aGlzLklDQUNIRV9QQUdFX0JJVFMpIC0gMTsKCXRoaXMuaWNhY2hlID0gbmV3IEFycmF5KHJvbS5ieXRlTGVuZ3RoID4+ICh0aGlzLklDQUNIRV9QQUdFX0JJVFMgKyAxKSk7Cgl0aGlzLm1hc2sgPSAweDAxRkZGRkZGOwoJdGhpcy5yZXNldE1hc2soKTsKfTsKClJPTVZpZXcucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShNZW1vcnlWaWV3LnByb3RvdHlwZSk7CgpST01WaWV3LnByb3RvdHlwZS5zdG9yZTggPSBmdW5jdGlvbihvZmZzZXQsIHZhbHVlKSB7fTsKClJPTVZpZXcucHJvdG90eXBlLnN0b3JlMTYgPSBmdW5jdGlvbihvZmZzZXQsIHZhbHVlKSB7CglpZiAob2Zmc2V0IDwgMHhDQSAmJiBvZmZzZXQgPj0gMHhDNCkgewoJCWlmICghdGhpcy5ncGlvKSB7CgkJCXRoaXMuZ3BpbyA9IHRoaXMubW11LmFsbG9jR1BJTyh0aGlzKTsKCQl9CgkJdGhpcy5ncGlvLnN0b3JlMTYob2Zmc2V0LCB2YWx1ZSk7Cgl9Cn07CgpST01WaWV3LnByb3RvdHlwZS5zdG9yZTMyID0gZnVuY3Rpb24ob2Zmc2V0LCB2YWx1ZSkgewoJaWYgKG9mZnNldCA8IDB4Q0EgJiYgb2Zmc2V0ID49IDB4QzQpIHsKCQlpZiAoIXRoaXMuZ3BpbykgewoJCQl0aGlzLmdwaW8gPSB0aGlzLm1tdS5hbGxvY0dQSU8odGhpcyk7CgkJfQoJCXRoaXMuZ3Bpby5zdG9yZTMyKG9mZnNldCwgdmFsdWUpOwoJfQp9OwoKZnVuY3Rpb24gQklPU1ZpZXcocm9tLCBvZmZzZXQpIHsKCU1lbW9yeVZpZXcuY2FsbCh0aGlzLCByb20sIG9mZnNldCk7Cgl0aGlzLklDQUNIRV9QQUdFX0JJVFMgPSAxNjsKCXRoaXMuUEFHRV9NQVNLID0gKDIgPDwgdGhpcy5JQ0FDSEVfUEFHRV9CSVRTKSAtIDE7Cgl0aGlzLmljYWNoZSA9IG5ldyBBcnJheSgxKTsKfTsKCkJJT1NWaWV3LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoTWVtb3J5Vmlldy5wcm90b3R5cGUpOwoKQklPU1ZpZXcucHJvdG90eXBlLmxvYWQ4ID0gZnVuY3Rpb24ob2Zmc2V0KSB7CglpZiAob2Zmc2V0ID49IHRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpIHsKCQlyZXR1cm4gLTE7Cgl9CglyZXR1cm4gdGhpcy52aWV3LmdldEludDgob2Zmc2V0KTsKfTsKCkJJT1NWaWV3LnByb3RvdHlwZS5sb2FkMTYgPSBmdW5jdGlvbihvZmZzZXQpIHsKCWlmIChvZmZzZXQgPj0gdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCkgewoJCXJldHVybiAtMTsKCX0KCXJldHVybiB0aGlzLnZpZXcuZ2V0SW50MTYob2Zmc2V0LCB0cnVlKTsKfTsKCkJJT1NWaWV3LnByb3RvdHlwZS5sb2FkVTggPSBmdW5jdGlvbihvZmZzZXQpIHsKCWlmIChvZmZzZXQgPj0gdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCkgewoJCXJldHVybiAtMTsKCX0KCXJldHVybiB0aGlzLnZpZXcuZ2V0VWludDgob2Zmc2V0KTsKfTsKCkJJT1NWaWV3LnByb3RvdHlwZS5sb2FkVTE2ID0gZnVuY3Rpb24ob2Zmc2V0KSB7CglpZiAob2Zmc2V0ID49IHRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpIHsKCQlyZXR1cm4gLTE7Cgl9CglyZXR1cm4gdGhpcy52aWV3LmdldFVpbnQxNihvZmZzZXQsIHRydWUpOwp9OwoKQklPU1ZpZXcucHJvdG90eXBlLmxvYWQzMiA9IGZ1bmN0aW9uKG9mZnNldCkgewoJaWYgKG9mZnNldCA+PSB0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKSB7CgkJcmV0dXJuIC0xOwoJfQoJcmV0dXJuIHRoaXMudmlldy5nZXRJbnQzMihvZmZzZXQsIHRydWUpOwp9OwoKQklPU1ZpZXcucHJvdG90eXBlLnN0b3JlOCA9IGZ1bmN0aW9uKG9mZnNldCwgdmFsdWUpIHt9OwoKQklPU1ZpZXcucHJvdG90eXBlLnN0b3JlMTYgPSBmdW5jdGlvbihvZmZzZXQsIHZhbHVlKSB7fTsKCkJJT1NWaWV3LnByb3RvdHlwZS5zdG9yZTMyID0gZnVuY3Rpb24ob2Zmc2V0LCB2YWx1ZSkge307CgpmdW5jdGlvbiBCYWRNZW1vcnkobW11LCBjcHUpIHsKCXRoaXMuaW5oZXJpdCgpOwoJdGhpcy5jcHUgPSBjcHU7Cgl0aGlzLm1tdSA9IG1tdQp9OwoKQmFkTWVtb3J5LnByb3RvdHlwZS5sb2FkOCA9IGZ1bmN0aW9uKG9mZnNldCkgewoJcmV0dXJuIHRoaXMubW11LmxvYWQ4KHRoaXMuY3B1LmdwcnNbdGhpcy5jcHUuUENdIC0gdGhpcy5jcHUuaW5zdHJ1Y3Rpb25XaWR0aCArIChvZmZzZXQgJiAweDMpKTsKfTsKCkJhZE1lbW9yeS5wcm90b3R5cGUubG9hZDE2ID0gZnVuY3Rpb24ob2Zmc2V0KSB7CglyZXR1cm4gdGhpcy5tbXUubG9hZDE2KHRoaXMuY3B1LmdwcnNbdGhpcy5jcHUuUENdIC0gdGhpcy5jcHUuaW5zdHJ1Y3Rpb25XaWR0aCArIChvZmZzZXQgJiAweDIpKTsKfTsKCkJhZE1lbW9yeS5wcm90b3R5cGUubG9hZFU4ID0gZnVuY3Rpb24ob2Zmc2V0KSB7CglyZXR1cm4gdGhpcy5tbXUubG9hZFU4KHRoaXMuY3B1LmdwcnNbdGhpcy5jcHUuUENdIC0gdGhpcy5jcHUuaW5zdHJ1Y3Rpb25XaWR0aCArIChvZmZzZXQgJiAweDMpKTsKfTsKCkJhZE1lbW9yeS5wcm90b3R5cGUubG9hZFUxNiA9IGZ1bmN0aW9uKG9mZnNldCkgewoJcmV0dXJuIHRoaXMubW11LmxvYWRVMTYodGhpcy5jcHUuZ3Byc1t0aGlzLmNwdS5QQ10gLSB0aGlzLmNwdS5pbnN0cnVjdGlvbldpZHRoICsgKG9mZnNldCAmIDB4MikpOwp9OwoKQmFkTWVtb3J5LnByb3RvdHlwZS5sb2FkMzIgPSBmdW5jdGlvbihvZmZzZXQpIHsKCWlmICh0aGlzLmNwdS5leGVjTW9kZSA9PSB0aGlzLmNwdS5NT0RFX0FSTSkgewoJCXJldHVybiB0aGlzLm1tdS5sb2FkMzIodGhpcy5jcHUuZ3Byc1t0aGlzLmNwdS5ncHJzLlBDXSAtIHRoaXMuY3B1Lmluc3RydWN0aW9uV2lkdGgpOwoJfSBlbHNlIHsKCQl2YXIgaGFsZndvcmQgPSB0aGlzLm1tdS5sb2FkVTE2KHRoaXMuY3B1LmdwcnNbdGhpcy5jcHUuUENdIC0gdGhpcy5jcHUuaW5zdHJ1Y3Rpb25XaWR0aCk7CgkJcmV0dXJuIGhhbGZ3b3JkIHwgKGhhbGZ3b3JkIDw8IDE2KTsKCX0KfTsKCkJhZE1lbW9yeS5wcm90b3R5cGUuc3RvcmU4ID0gZnVuY3Rpb24ob2Zmc2V0LCB2YWx1ZSkge307CgpCYWRNZW1vcnkucHJvdG90eXBlLnN0b3JlMTYgPSBmdW5jdGlvbihvZmZzZXQsIHZhbHVlKSB7fTsKCkJhZE1lbW9yeS5wcm90b3R5cGUuc3RvcmUzMiA9IGZ1bmN0aW9uKG9mZnNldCwgdmFsdWUpIHt9OwoKQmFkTWVtb3J5LnByb3RvdHlwZS5pbnZhbGlkYXRlUGFnZSA9IGZ1bmN0aW9uKGFkZHJlc3MpIHt9OwoKZnVuY3Rpb24gR2FtZUJveUFkdmFuY2VNTVUoKSB7Cgl0aGlzLmluaGVyaXQoKTsKCXRoaXMuUkVHSU9OX0JJT1MgPSAweDA7Cgl0aGlzLlJFR0lPTl9XT1JLSU5HX1JBTSA9IDB4MjsKCXRoaXMuUkVHSU9OX1dPUktJTkdfSVJBTSA9IDB4MzsKCXRoaXMuUkVHSU9OX0lPID0gMHg0OwoJdGhpcy5SRUdJT05fUEFMRVRURV9SQU0gPSAweDU7Cgl0aGlzLlJFR0lPTl9WUkFNID0gMHg2OwoJdGhpcy5SRUdJT05fT0FNID0gMHg3OwoJdGhpcy5SRUdJT05fQ0FSVDAgPSAweDg7Cgl0aGlzLlJFR0lPTl9DQVJUMSA9IDB4QTsKCXRoaXMuUkVHSU9OX0NBUlQyID0gMHhDOwoJdGhpcy5SRUdJT05fQ0FSVF9TUkFNID0gMHhFOwoKCXRoaXMuQkFTRV9CSU9TID0gMHgwMDAwMDAwMDsKCXRoaXMuQkFTRV9XT1JLSU5HX1JBTSA9IDB4MDIwMDAwMDA7Cgl0aGlzLkJBU0VfV09SS0lOR19JUkFNID0gMHgwMzAwMDAwMDsKCXRoaXMuQkFTRV9JTyA9IDB4MDQwMDAwMDA7Cgl0aGlzLkJBU0VfUEFMRVRURV9SQU0gPSAweDA1MDAwMDAwOwoJdGhpcy5CQVNFX1ZSQU0gPSAweDA2MDAwMDAwOwoJdGhpcy5CQVNFX09BTSA9IDB4MDcwMDAwMDA7Cgl0aGlzLkJBU0VfQ0FSVDAgPSAweDA4MDAwMDAwOwoJdGhpcy5CQVNFX0NBUlQxID0gMHgwQTAwMDAwMDsKCXRoaXMuQkFTRV9DQVJUMiA9IDB4MEMwMDAwMDA7Cgl0aGlzLkJBU0VfQ0FSVF9TUkFNID0gMHgwRTAwMDAwMDsKCgl0aGlzLkJBU0VfTUFTSyA9IDB4MEYwMDAwMDA7Cgl0aGlzLkJBU0VfT0ZGU0VUID0gMjQ7Cgl0aGlzLk9GRlNFVF9NQVNLID0gMHgwMEZGRkZGRjsKCgl0aGlzLlNJWkVfQklPUyA9IDB4MDAwMDQwMDA7Cgl0aGlzLlNJWkVfV09SS0lOR19SQU0gPSAweDAwMDQwMDAwOwoJdGhpcy5TSVpFX1dPUktJTkdfSVJBTSA9IDB4MDAwMDgwMDA7Cgl0aGlzLlNJWkVfSU8gPSAweDAwMDAwNDAwOwoJdGhpcy5TSVpFX1BBTEVUVEVfUkFNID0gMHgwMDAwMDQwMDsKCXRoaXMuU0laRV9WUkFNID0gMHgwMDAxODAwMDsKCXRoaXMuU0laRV9PQU0gPSAweDAwMDAwNDAwOwoJdGhpcy5TSVpFX0NBUlQwID0gMHgwMjAwMDAwMDsKCXRoaXMuU0laRV9DQVJUMSA9IDB4MDIwMDAwMDA7Cgl0aGlzLlNJWkVfQ0FSVDIgPSAweDAyMDAwMDAwOwoJdGhpcy5TSVpFX0NBUlRfU1JBTSA9IDB4MDAwMDgwMDA7Cgl0aGlzLlNJWkVfQ0FSVF9GTEFTSDUxMiA9IDB4MDAwMTAwMDA7Cgl0aGlzLlNJWkVfQ0FSVF9GTEFTSDFNID0gMHgwMDAyMDAwMDsKCXRoaXMuU0laRV9DQVJUX0VFUFJPTSA9IDB4MDAwMDIwMDA7CgoJdGhpcy5ETUFfVElNSU5HX05PVyA9IDA7Cgl0aGlzLkRNQV9USU1JTkdfVkJMQU5LID0gMTsKCXRoaXMuRE1BX1RJTUlOR19IQkxBTksgPSAyOwoJdGhpcy5ETUFfVElNSU5HX0NVU1RPTSA9IDM7CgoJdGhpcy5ETUFfSU5DUkVNRU5UID0gMDsKCXRoaXMuRE1BX0RFQ1JFTUVOVCA9IDE7Cgl0aGlzLkRNQV9GSVhFRCA9IDI7Cgl0aGlzLkRNQV9JTkNSRU1FTlRfUkVMT0FEID0gMzsKCgl0aGlzLkRNQV9PRkZTRVQgPSBbIDEsIC0xLCAwLCAxIF07CgoJdGhpcy5XQUlUU1RBVEVTID0gWyAwLCAwLCAyLCAwLCAwLCAwLCAwLCAwLCA0LCA0LCA0LCA0LCA0LCA0LCA0IF07Cgl0aGlzLldBSVRTVEFURVNfMzIgPSBbIDAsIDAsIDUsIDAsIDAsIDEsIDAsIDEsIDcsIDcsIDksIDksIDEzLCAxMywgOCBdOwoJdGhpcy5XQUlUU1RBVEVTX1NFUSA9IFsgMCwgMCwgMiwgMCwgMCwgMCwgMCwgMCwgMiwgMiwgNCwgNCwgOCwgOCwgNCBdOwoJdGhpcy5XQUlUU1RBVEVTX1NFUV8zMiA9IFsgMCwgMCwgNSwgMCwgMCwgMSwgMCwgMSwgNSwgNSwgOSwgOSwgMTcsIDE3LCA4IF07Cgl0aGlzLk5VTExXQUlUID0gWyAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwIF07CgoJZm9yICh2YXIgaSA9IDE1OyBpIDwgMjU2OyArK2kpIHsKCQl0aGlzLldBSVRTVEFURVNbaV0gPSAwOwoJCXRoaXMuV0FJVFNUQVRFU18zMltpXSA9IDA7CgkJdGhpcy5XQUlUU1RBVEVTX1NFUVtpXSA9IDA7CgkJdGhpcy5XQUlUU1RBVEVTX1NFUV8zMltpXSA9IDA7CgkJdGhpcy5OVUxMV0FJVFtpXSA9IDA7Cgl9CgoJdGhpcy5ST01fV1MgPSBbIDQsIDMsIDIsIDggXTsKCXRoaXMuUk9NX1dTX1NFUSA9IFsKCQlbIDIsIDEgXSwKCQlbIDQsIDEgXSwKCQlbIDgsIDEgXQoJXTsKCgl0aGlzLklDQUNIRV9QQUdFX0JJVFMgPSA4OwoJdGhpcy5QQUdFX01BU0sgPSAoMiA8PCB0aGlzLklDQUNIRV9QQUdFX0JJVFMpIC0gMTsKCgl0aGlzLmJpb3MgPSBudWxsOwp9OwoKR2FtZUJveUFkdmFuY2VNTVUucHJvdG90eXBlLm1tYXAgPSBmdW5jdGlvbihyZWdpb24sIG9iamVjdCkgewoJdGhpcy5tZW1vcnlbcmVnaW9uXSA9IG9iamVjdDsKfQoKR2FtZUJveUFkdmFuY2VNTVUucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7Cgl0aGlzLmJhZE1lbW9yeSA9IG5ldyBCYWRNZW1vcnkodGhpcywgdGhpcy5jcHUpOwoJdGhpcy5tZW1vcnkgPSBbCgkJdGhpcy5iaW9zLAoJCXRoaXMuYmFkTWVtb3J5LCAvLyBVbnVzZWQKCQluZXcgTWVtb3J5QmxvY2sodGhpcy5TSVpFX1dPUktJTkdfUkFNLCA5KSwKCQluZXcgTWVtb3J5QmxvY2sodGhpcy5TSVpFX1dPUktJTkdfSVJBTSwgNyksCgkJbnVsbCwgLy8gVGhpcyBpcyBvd25lZCBieSBHYW1lQm95QWR2YW5jZUlPCgkJbnVsbCwgLy8gVGhpcyBpcyBvd25lZCBieSBHYW1lQm95QWR2YW5jZVBhbGV0dGUKCQludWxsLCAvLyBUaGlzIGlzIG93bmVkIGJ5IEdhbWVCb3lBZHZhbmNlVlJBTQoJCW51bGwsIC8vIFRoaXMgaXMgb3duZWQgYnkgR2FtZUJveUFkdmFuY2VPQU0KCQl0aGlzLmJhZE1lbW9yeSwKCQl0aGlzLmJhZE1lbW9yeSwKCQl0aGlzLmJhZE1lbW9yeSwKCQl0aGlzLmJhZE1lbW9yeSwKCQl0aGlzLmJhZE1lbW9yeSwKCQl0aGlzLmJhZE1lbW9yeSwKCQl0aGlzLmJhZE1lbW9yeSwKCQl0aGlzLmJhZE1lbW9yeSAvLyBVbnVzZWQKCV07Cglmb3IgKHZhciBpID0gMTY7IGkgPCAyNTY7ICsraSkgewoJCXRoaXMubWVtb3J5W2ldID0gdGhpcy5iYWRNZW1vcnk7Cgl9CgoJdGhpcy53YWl0c3RhdGVzID0gdGhpcy5XQUlUU1RBVEVTLnNsaWNlKDApOwoJdGhpcy53YWl0c3RhdGVzU2VxID0gdGhpcy5XQUlUU1RBVEVTX1NFUS5zbGljZSgwKTsKCXRoaXMud2FpdHN0YXRlczMyID0gdGhpcy5XQUlUU1RBVEVTXzMyLnNsaWNlKDApOwoJdGhpcy53YWl0c3RhdGVzU2VxMzIgPSB0aGlzLldBSVRTVEFURVNfU0VRXzMyLnNsaWNlKDApOwoJdGhpcy53YWl0c3RhdGVzUHJlZmV0Y2ggPSB0aGlzLldBSVRTVEFURVNfU0VRLnNsaWNlKDApOwoJdGhpcy53YWl0c3RhdGVzUHJlZmV0Y2gzMiA9IHRoaXMuV0FJVFNUQVRFU19TRVFfMzIuc2xpY2UoMCk7CgoJdGhpcy5jYXJ0ID0gbnVsbDsKCXRoaXMuc2F2ZSA9IG51bGw7CgoJdGhpcy5ETUFfUkVHSVNURVIgPSBbCgkJdGhpcy5jb3JlLmlvLkRNQTBDTlRfSEkgPj4gMSwKCQl0aGlzLmNvcmUuaW8uRE1BMUNOVF9ISSA+PiAxLAoJCXRoaXMuY29yZS5pby5ETUEyQ05UX0hJID4+IDEsCgkJdGhpcy5jb3JlLmlvLkRNQTNDTlRfSEkgPj4gMQoJXTsKfTsKCkdhbWVCb3lBZHZhbmNlTU1VLnByb3RvdHlwZS5mcmVlemUgPSBmdW5jdGlvbigpIHsKCXJldHVybiB7CgkJJ3JhbSc6IFNlcmlhbGl6ZXIucHJlZml4KHRoaXMubWVtb3J5W3RoaXMuUkVHSU9OX1dPUktJTkdfUkFNXS5idWZmZXIpLAoJCSdpcmFtJzogU2VyaWFsaXplci5wcmVmaXgodGhpcy5tZW1vcnlbdGhpcy5SRUdJT05fV09SS0lOR19JUkFNXS5idWZmZXIpLAoJfTsKfTsKCkdhbWVCb3lBZHZhbmNlTU1VLnByb3RvdHlwZS5kZWZyb3N0ID0gZnVuY3Rpb24oZnJvc3QpIHsKCXRoaXMubWVtb3J5W3RoaXMuUkVHSU9OX1dPUktJTkdfUkFNXS5yZXBsYWNlRGF0YShmcm9zdC5yYW0pOwoJdGhpcy5tZW1vcnlbdGhpcy5SRUdJT05fV09SS0lOR19JUkFNXS5yZXBsYWNlRGF0YShmcm9zdC5pcmFtKTsKfTsKCkdhbWVCb3lBZHZhbmNlTU1VLnByb3RvdHlwZS5sb2FkQmlvcyA9IGZ1bmN0aW9uKGJpb3MsIHJlYWwpIHsKCXRoaXMuYmlvcyA9IG5ldyBCSU9TVmlldyhiaW9zKTsKCXRoaXMuYmlvcy5yZWFsID0gISFyZWFsOwp9OwoKR2FtZUJveUFkdmFuY2VNTVUucHJvdG90eXBlLmxvYWRSb20gPSBmdW5jdGlvbihyb20sIHByb2Nlc3MpIHsKCXZhciBjYXJ0ID0gewoJCXRpdGxlOiBudWxsLAoJCWNvZGU6IG51bGwsCgkJbWFrZXI6IG51bGwsCgkJbWVtb3J5OiByb20sCgkJc2F2ZVR5cGU6IG51bGwsCgl9OwoKCXZhciBsbyA9IG5ldyBST01WaWV3KHJvbSk7CglpZiAobG8udmlldy5nZXRVaW50OCgweEIyKSAhPSAweDk2KSB7CgkJLy8gTm90IGEgdmFsaWQgUk9NCgkJcmV0dXJuIG51bGw7Cgl9Cglsby5tbXUgPSB0aGlzOyAvLyBOZWVkZWQgZm9yIEdQSU8KCXRoaXMubWVtb3J5W3RoaXMuUkVHSU9OX0NBUlQwXSA9IGxvOwoJdGhpcy5tZW1vcnlbdGhpcy5SRUdJT05fQ0FSVDFdID0gbG87Cgl0aGlzLm1lbW9yeVt0aGlzLlJFR0lPTl9DQVJUMl0gPSBsbzsKCglpZiAocm9tLmJ5dGVMZW5ndGggPiAweDAxMDAwMDAwKSB7CgkJdmFyIGhpID0gbmV3IFJPTVZpZXcocm9tLCAweDAxMDAwMDAwKTsKCQl0aGlzLm1lbW9yeVt0aGlzLlJFR0lPTl9DQVJUMCArIDFdID0gaGk7CgkJdGhpcy5tZW1vcnlbdGhpcy5SRUdJT05fQ0FSVDEgKyAxXSA9IGhpOwoJCXRoaXMubWVtb3J5W3RoaXMuUkVHSU9OX0NBUlQyICsgMV0gPSBoaTsKCX0KCglpZiAocHJvY2VzcykgewoJCXZhciBuYW1lID0gJyc7CgkJZm9yICh2YXIgaSA9IDA7IGkgPCAxMjsgKytpKSB7CgkJCXZhciBjID0gbG8ubG9hZFU4KGkgKyAweEEwKTsKCQkJaWYgKCFjKSB7CgkJCQlicmVhazsKCQkJfQoJCQluYW1lICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYyk7CgkJfQoJCWNhcnQudGl0bGUgPSBuYW1lOwoKCQl2YXIgY29kZSA9ICcnOwoJCWZvciAodmFyIGkgPSAwOyBpIDwgNDsgKytpKSB7CgkJCXZhciBjID0gbG8ubG9hZFU4KGkgKyAweEFDKTsKCQkJaWYgKCFjKSB7CgkJCQlicmVhazsKCQkJfQoJCQljb2RlICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYyk7CgkJfQoJCWNhcnQuY29kZSA9IGNvZGU7CgoJCXZhciBtYWtlciA9ICcnOwoJCWZvciAodmFyIGkgPSAwOyBpIDwgMjsgKytpKSB7CgkJCXZhciBjID0gbG8ubG9hZFU4KGkgKyAweEIwKTsKCQkJaWYgKCFjKSB7CgkJCQlicmVhazsKCQkJfQoJCQltYWtlciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMpOwoJCX0KCQljYXJ0Lm1ha2VyID0gbWFrZXI7CgoJCS8vIEZpbmQgc2F2ZWRhdGEgdHlwZQoJCXZhciBzdGF0ZSA9ICcnOwoJCXZhciBuZXh0OwoJCXZhciB0ZXJtaW5hbCA9IGZhbHNlOwoJCWZvciAodmFyIGkgPSAweEU0OyBpIDwgcm9tLmJ5dGVMZW5ndGggJiYgIXRlcm1pbmFsOyArK2kpIHsKCQkJbmV4dCA9IFN0cmluZy5mcm9tQ2hhckNvZGUobG8ubG9hZFU4KGkpKTsKCQkJc3RhdGUgKz0gbmV4dDsKCQkJc3dpdGNoIChzdGF0ZSkgewoJCQljYXNlICdGJzoKCQkJY2FzZSAnRkwnOgoJCQljYXNlICdGTEEnOgoJCQljYXNlICdGTEFTJzoKCQkJY2FzZSAnRkxBU0gnOgoJCQljYXNlICdGTEFTSF8nOgoJCQljYXNlICdGTEFTSDUnOgoJCQljYXNlICdGTEFTSDUxJzoKCQkJY2FzZSAnRkxBU0g1MTInOgoJCQljYXNlICdGTEFTSDUxMl8nOgoJCQljYXNlICdGTEFTSDEnOgoJCQljYXNlICdGTEFTSDFNJzoKCQkJY2FzZSAnRkxBU0gxTV8nOgoJCQljYXNlICdTJzoKCQkJY2FzZSAnU1InOgoJCQljYXNlICdTUkEnOgoJCQljYXNlICdTUkFNJzoKCQkJY2FzZSAnU1JBTV8nOgoJCQljYXNlICdFJzoKCQkJY2FzZSAnRUUnOgoJCQljYXNlICdFRVAnOgoJCQljYXNlICdFRVBSJzoKCQkJY2FzZSAnRUVQUk8nOgoJCQljYXNlICdFRVBST00nOgoJCQljYXNlICdFRVBST01fJzoKCQkJCWJyZWFrOwoJCQljYXNlICdGTEFTSF9WJzoKCQkJY2FzZSAnRkxBU0g1MTJfVic6CgkJCWNhc2UgJ0ZMQVNIMU1fVic6CgkJCWNhc2UgJ1NSQU1fVic6CgkJCWNhc2UgJ0VFUFJPTV9WJzoKCQkJCXRlcm1pbmFsID0gdHJ1ZTsKCQkJCWJyZWFrOwoJCQlkZWZhdWx0OgoJCQkJc3RhdGUgPSBuZXh0OwoJCQkJYnJlYWs7CgkJCX0KCQl9CgkJaWYgKHRlcm1pbmFsKSB7CgkJCWNhcnQuc2F2ZVR5cGUgPSBzdGF0ZTsKCQkJc3dpdGNoIChzdGF0ZSkgewoJCQljYXNlICdGTEFTSF9WJzoKCQkJY2FzZSAnRkxBU0g1MTJfVic6CgkJCQl0aGlzLnNhdmUgPSB0aGlzLm1lbW9yeVt0aGlzLlJFR0lPTl9DQVJUX1NSQU1dID0gbmV3IEZsYXNoU2F2ZWRhdGEodGhpcy5TSVpFX0NBUlRfRkxBU0g1MTIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgJ0ZMQVNIMU1fVic6CgkJCQl0aGlzLnNhdmUgPSB0aGlzLm1lbW9yeVt0aGlzLlJFR0lPTl9DQVJUX1NSQU1dID0gbmV3IEZsYXNoU2F2ZWRhdGEodGhpcy5TSVpFX0NBUlRfRkxBU0gxTSk7CgkJCQlicmVhazsKCQkJY2FzZSAnU1JBTV9WJzoKCQkJCXRoaXMuc2F2ZSA9IHRoaXMubWVtb3J5W3RoaXMuUkVHSU9OX0NBUlRfU1JBTV0gPSBuZXcgU1JBTVNhdmVkYXRhKHRoaXMuU0laRV9DQVJUX1NSQU0pOwoJCQkJYnJlYWs7CgkJCWNhc2UgJ0VFUFJPTV9WJzoKCQkJCXRoaXMuc2F2ZSA9IHRoaXMubWVtb3J5W3RoaXMuUkVHSU9OX0NBUlQyICsgMV0gPSBuZXcgRUVQUk9NU2F2ZWRhdGEodGhpcy5TSVpFX0NBUlRfRUVQUk9NLCB0aGlzKTsKCQkJCWJyZWFrOwoJCQl9CgkJfQoJCWlmICghdGhpcy5zYXZlKSB7CgkJCS8vIEFzc3VtZSB3ZSBoYXZlIFNSQU0KCQkJdGhpcy5zYXZlID0gdGhpcy5tZW1vcnlbdGhpcy5SRUdJT05fQ0FSVF9TUkFNXSA9IG5ldyBTUkFNU2F2ZWRhdGEodGhpcy5TSVpFX0NBUlRfU1JBTSk7CgkJfQoJfQoKCXRoaXMuY2FydCA9IGNhcnQ7CglyZXR1cm4gY2FydDsKfTsKCkdhbWVCb3lBZHZhbmNlTU1VLnByb3RvdHlwZS5sb2FkU2F2ZWRhdGEgPSBmdW5jdGlvbihzYXZlKSB7Cgl0aGlzLnNhdmUucmVwbGFjZURhdGEoc2F2ZSk7Cn07CgpHYW1lQm95QWR2YW5jZU1NVS5wcm90b3R5cGUubG9hZDggPSBmdW5jdGlvbihvZmZzZXQpIHsKCXJldHVybiB0aGlzLm1lbW9yeVtvZmZzZXQgPj4+IHRoaXMuQkFTRV9PRkZTRVRdLmxvYWQ4KG9mZnNldCAmIDB4MDBGRkZGRkYpOwp9OwoKR2FtZUJveUFkdmFuY2VNTVUucHJvdG90eXBlLmxvYWQxNiA9IGZ1bmN0aW9uKG9mZnNldCkgewoJcmV0dXJuIHRoaXMubWVtb3J5W29mZnNldCA+Pj4gdGhpcy5CQVNFX09GRlNFVF0ubG9hZDE2KG9mZnNldCAmIDB4MDBGRkZGRkYpOwp9OwoKR2FtZUJveUFkdmFuY2VNTVUucHJvdG90eXBlLmxvYWQzMiA9IGZ1bmN0aW9uKG9mZnNldCkgewoJcmV0dXJuIHRoaXMubWVtb3J5W29mZnNldCA+Pj4gdGhpcy5CQVNFX09GRlNFVF0ubG9hZDMyKG9mZnNldCAmIDB4MDBGRkZGRkYpOwp9OwoKR2FtZUJveUFkdmFuY2VNTVUucHJvdG90eXBlLmxvYWRVOCA9IGZ1bmN0aW9uKG9mZnNldCkgewoJcmV0dXJuIHRoaXMubWVtb3J5W29mZnNldCA+Pj4gdGhpcy5CQVNFX09GRlNFVF0ubG9hZFU4KG9mZnNldCAmIDB4MDBGRkZGRkYpOwp9OwoKR2FtZUJveUFkdmFuY2VNTVUucHJvdG90eXBlLmxvYWRVMTYgPSBmdW5jdGlvbihvZmZzZXQpIHsKCXJldHVybiB0aGlzLm1lbW9yeVtvZmZzZXQgPj4+IHRoaXMuQkFTRV9PRkZTRVRdLmxvYWRVMTYob2Zmc2V0ICYgMHgwMEZGRkZGRik7Cn07CgpHYW1lQm95QWR2YW5jZU1NVS5wcm90b3R5cGUuc3RvcmU4ID0gZnVuY3Rpb24ob2Zmc2V0LCB2YWx1ZSkgewoJdmFyIG1hc2tlZE9mZnNldCA9IG9mZnNldCAmIDB4MDBGRkZGRkY7Cgl2YXIgbWVtb3J5ID0gdGhpcy5tZW1vcnlbb2Zmc2V0ID4+PiB0aGlzLkJBU0VfT0ZGU0VUXTsKCW1lbW9yeS5zdG9yZTgobWFza2VkT2Zmc2V0LCB2YWx1ZSk7CgltZW1vcnkuaW52YWxpZGF0ZVBhZ2UobWFza2VkT2Zmc2V0KTsKfTsKCkdhbWVCb3lBZHZhbmNlTU1VLnByb3RvdHlwZS5zdG9yZTE2ID0gZnVuY3Rpb24ob2Zmc2V0LCB2YWx1ZSkgewoJdmFyIG1hc2tlZE9mZnNldCA9IG9mZnNldCAmIDB4MDBGRkZGRkU7Cgl2YXIgbWVtb3J5ID0gdGhpcy5tZW1vcnlbb2Zmc2V0ID4+PiB0aGlzLkJBU0VfT0ZGU0VUXTsKCW1lbW9yeS5zdG9yZTE2KG1hc2tlZE9mZnNldCwgdmFsdWUpOwoJbWVtb3J5LmludmFsaWRhdGVQYWdlKG1hc2tlZE9mZnNldCk7Cn07CgpHYW1lQm95QWR2YW5jZU1NVS5wcm90b3R5cGUuc3RvcmUzMiA9IGZ1bmN0aW9uKG9mZnNldCwgdmFsdWUpIHsKCXZhciBtYXNrZWRPZmZzZXQgPSBvZmZzZXQgJiAweDAwRkZGRkZDOwoJdmFyIG1lbW9yeSA9IHRoaXMubWVtb3J5W29mZnNldCA+Pj4gdGhpcy5CQVNFX09GRlNFVF07CgltZW1vcnkuc3RvcmUzMihtYXNrZWRPZmZzZXQsIHZhbHVlKTsKCW1lbW9yeS5pbnZhbGlkYXRlUGFnZShtYXNrZWRPZmZzZXQpOwoJbWVtb3J5LmludmFsaWRhdGVQYWdlKG1hc2tlZE9mZnNldCArIDIpOwp9OwoKR2FtZUJveUFkdmFuY2VNTVUucHJvdG90eXBlLndhaXRQcmVmZXRjaCA9IGZ1bmN0aW9uKG1lbW9yeSkgewoJdGhpcy5jcHUuY3ljbGVzICs9IDEgKyB0aGlzLndhaXRzdGF0ZXNQcmVmZXRjaFttZW1vcnkgPj4+IHRoaXMuQkFTRV9PRkZTRVRdOwp9OwoKR2FtZUJveUFkdmFuY2VNTVUucHJvdG90eXBlLndhaXRQcmVmZXRjaDMyID0gZnVuY3Rpb24obWVtb3J5KSB7Cgl0aGlzLmNwdS5jeWNsZXMgKz0gMSArIHRoaXMud2FpdHN0YXRlc1ByZWZldGNoMzJbbWVtb3J5ID4+PiB0aGlzLkJBU0VfT0ZGU0VUXTsKfTsKCkdhbWVCb3lBZHZhbmNlTU1VLnByb3RvdHlwZS53YWl0ID0gZnVuY3Rpb24obWVtb3J5KSB7Cgl0aGlzLmNwdS5jeWNsZXMgKz0gMSArIHRoaXMud2FpdHN0YXRlc1ttZW1vcnkgPj4+IHRoaXMuQkFTRV9PRkZTRVRdOwp9OwoKR2FtZUJveUFkdmFuY2VNTVUucHJvdG90eXBlLndhaXQzMiA9IGZ1bmN0aW9uKG1lbW9yeSkgewoJdGhpcy5jcHUuY3ljbGVzICs9IDEgKyB0aGlzLndhaXRzdGF0ZXMzMlttZW1vcnkgPj4+IHRoaXMuQkFTRV9PRkZTRVRdOwp9OwoKR2FtZUJveUFkdmFuY2VNTVUucHJvdG90eXBlLndhaXRTZXEgPSBmdW5jdGlvbihtZW1vcnkpIHsKCXRoaXMuY3B1LmN5Y2xlcyArPSAxICsgdGhpcy53YWl0c3RhdGVzU2VxW21lbW9yeSA+Pj4gdGhpcy5CQVNFX09GRlNFVF07Cn07CgpHYW1lQm95QWR2YW5jZU1NVS5wcm90b3R5cGUud2FpdFNlcTMyID0gZnVuY3Rpb24obWVtb3J5KSB7Cgl0aGlzLmNwdS5jeWNsZXMgKz0gMSArIHRoaXMud2FpdHN0YXRlc1NlcTMyW21lbW9yeSA+Pj4gdGhpcy5CQVNFX09GRlNFVF07Cn07CgpHYW1lQm95QWR2YW5jZU1NVS5wcm90b3R5cGUud2FpdE11bCA9IGZ1bmN0aW9uKHJzKSB7CglpZiAoKHJzICYgMHhGRkZGRkYwMCA9PSAweEZGRkZGRjAwKSB8fCAhKHJzICYgMHhGRkZGRkYwMCkpIHsKCQl0aGlzLmNwdS5jeWNsZXMgKz0gMTsKCX0gZWxzZSBpZiAoKHJzICYgMHhGRkZGMDAwMCA9PSAweEZGRkYwMDAwKSB8fCAhKHJzICYgMHhGRkZGMDAwMCkpIHsKCQl0aGlzLmNwdS5jeWNsZXMgKz0gMjsKCX0gZWxzZSBpZiAoKHJzICYgMHhGRjAwMDAwMCA9PSAweEZGMDAwMDAwKSB8fCAhKHJzICYgMHhGRjAwMDAwMCkpIHsKCQl0aGlzLmNwdS5jeWNsZXMgKz0gMzsKCX0gZWxzZSB7CgkJdGhpcy5jcHUuY3ljbGVzICs9IDQ7Cgl9Cn0KCkdhbWVCb3lBZHZhbmNlTU1VLnByb3RvdHlwZS53YWl0TXVsdGkzMiA9IGZ1bmN0aW9uKG1lbW9yeSwgc2VxKSB7Cgl0aGlzLmNwdS5jeWNsZXMgKz0gMSArIHRoaXMud2FpdHN0YXRlczMyW21lbW9yeSA+Pj4gdGhpcy5CQVNFX09GRlNFVF07Cgl0aGlzLmNwdS5jeWNsZXMgKz0gKDEgKyB0aGlzLndhaXRzdGF0ZXNTZXEzMlttZW1vcnkgPj4+IHRoaXMuQkFTRV9PRkZTRVRdKSAqIChzZXEgLSAxKTsKfTsKCkdhbWVCb3lBZHZhbmNlTU1VLnByb3RvdHlwZS5hZGRyZXNzVG9QYWdlID0gZnVuY3Rpb24ocmVnaW9uLCBhZGRyZXNzKSB7CglyZXR1cm4gYWRkcmVzcyA+PiB0aGlzLm1lbW9yeVtyZWdpb25dLklDQUNIRV9QQUdFX0JJVFM7Cn07CgpHYW1lQm95QWR2YW5jZU1NVS5wcm90b3R5cGUuYWNjZXNzUGFnZSA9IGZ1bmN0aW9uKHJlZ2lvbiwgcGFnZUlkKSB7Cgl2YXIgbWVtb3J5ID0gdGhpcy5tZW1vcnlbcmVnaW9uXTsKCXZhciBwYWdlID0gbWVtb3J5LmljYWNoZVtwYWdlSWRdOwoJaWYgKCFwYWdlIHx8IHBhZ2UuaW52YWxpZCkgewoJCXBhZ2UgPSB7CgkJCXRodW1iOiBuZXcgQXJyYXkoMSA8PCAobWVtb3J5LklDQUNIRV9QQUdFX0JJVFMpKSwKCQkJYXJtOiBuZXcgQXJyYXkoMSA8PCBtZW1vcnkuSUNBQ0hFX1BBR0VfQklUUyAtIDEpLAoJCQlpbnZhbGlkOiBmYWxzZQoJCX0KCQltZW1vcnkuaWNhY2hlW3BhZ2VJZF0gPSBwYWdlOwoJfQoJcmV0dXJuIHBhZ2U7Cn07CgpHYW1lQm95QWR2YW5jZU1NVS5wcm90b3R5cGUuc2NoZWR1bGVEbWEgPSBmdW5jdGlvbihudW1iZXIsIGluZm8pIHsKCXN3aXRjaCAoaW5mby50aW1pbmcpIHsKCWNhc2UgdGhpcy5ETUFfVElNSU5HX05PVzoKCQl0aGlzLnNlcnZpY2VEbWEobnVtYmVyLCBpbmZvKTsKCQlicmVhazsKCWNhc2UgdGhpcy5ETUFfVElNSU5HX0hCTEFOSzoKCQkvLyBIYW5kbGVkIGltcGxpY2l0bHkKCQlicmVhazsKCWNhc2UgdGhpcy5ETUFfVElNSU5HX1ZCTEFOSzoKCQkvLyBIYW5kbGVkIGltcGxpY2l0bHkKCQlicmVhazsKCWNhc2UgdGhpcy5ETUFfVElNSU5HX0NVU1RPTToKCQlzd2l0Y2ggKG51bWJlcikgewoJCWNhc2UgMDoKCQkJdGhpcy5jb3JlLldBUk4oJ0Rpc2NhcmRpbmcgaW52YWxpZCBETUEwIHNjaGVkdWxpbmcnKTsKCQkJYnJlYWs7CgkJY2FzZSAxOgoJCWNhc2UgMjoKCQkJdGhpcy5jcHUuaXJxLmF1ZGlvLnNjaGVkdWxlRklGT0RtYShudW1iZXIsIGluZm8pOwoJCQlicmVhazsKCQljYXNlIDM6CgkJCXRoaXMuY3B1LmlycS52aWRlby5zY2hlZHVsZVZDYXB0dXJlRG1hKGRtYSwgaW5mbyk7CgkJCWJyZWFrOwoJCX0KCX0KfTsKCkdhbWVCb3lBZHZhbmNlTU1VLnByb3RvdHlwZS5ydW5IYmxhbmtEbWFzID0gZnVuY3Rpb24oKSB7Cgl2YXIgZG1hOwoJZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNwdS5pcnEuZG1hLmxlbmd0aDsgKytpKSB7CgkJZG1hID0gdGhpcy5jcHUuaXJxLmRtYVtpXTsKCQlpZiAoZG1hLmVuYWJsZSAmJiBkbWEudGltaW5nID09IHRoaXMuRE1BX1RJTUlOR19IQkxBTkspIHsKCQkJdGhpcy5zZXJ2aWNlRG1hKGksIGRtYSk7CgkJfQoJfQp9OwoKR2FtZUJveUFkdmFuY2VNTVUucHJvdG90eXBlLnJ1blZibGFua0RtYXMgPSBmdW5jdGlvbigpIHsKCXZhciBkbWE7Cglmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY3B1LmlycS5kbWEubGVuZ3RoOyArK2kpIHsKCQlkbWEgPSB0aGlzLmNwdS5pcnEuZG1hW2ldOwoJCWlmIChkbWEuZW5hYmxlICYmIGRtYS50aW1pbmcgPT0gdGhpcy5ETUFfVElNSU5HX1ZCTEFOSykgewoJCQl0aGlzLnNlcnZpY2VEbWEoaSwgZG1hKTsKCQl9Cgl9Cn07CgpHYW1lQm95QWR2YW5jZU1NVS5wcm90b3R5cGUuc2VydmljZURtYSA9IGZ1bmN0aW9uKG51bWJlciwgaW5mbykgewoJaWYgKCFpbmZvLmVuYWJsZSkgewoJCS8vIFRoZXJlIHdhcyBhIERNQSBzY2hlZHVsZWQgdGhhdCBnb3QgY2FuY2VsZWQKCQlyZXR1cm47Cgl9CgoJdmFyIHdpZHRoID0gaW5mby53aWR0aDsKCXZhciBzb3VyY2VPZmZzZXQgPSB0aGlzLkRNQV9PRkZTRVRbaW5mby5zcmNDb250cm9sXSAqIHdpZHRoOwoJdmFyIGRlc3RPZmZzZXQgPSB0aGlzLkRNQV9PRkZTRVRbaW5mby5kc3RDb250cm9sXSAqIHdpZHRoOwoJdmFyIHdvcmRzUmVtYWluaW5nID0gaW5mby5uZXh0Q291bnQ7Cgl2YXIgc291cmNlID0gaW5mby5uZXh0U291cmNlICYgdGhpcy5PRkZTRVRfTUFTSzsKCXZhciBkZXN0ID0gaW5mby5uZXh0RGVzdCAmIHRoaXMuT0ZGU0VUX01BU0s7Cgl2YXIgc291cmNlUmVnaW9uID0gaW5mby5uZXh0U291cmNlID4+PiB0aGlzLkJBU0VfT0ZGU0VUOwoJdmFyIGRlc3RSZWdpb24gPSBpbmZvLm5leHREZXN0ID4+PiB0aGlzLkJBU0VfT0ZGU0VUOwoJdmFyIHNvdXJjZUJsb2NrID0gdGhpcy5tZW1vcnlbc291cmNlUmVnaW9uXTsKCXZhciBkZXN0QmxvY2sgPSB0aGlzLm1lbW9yeVtkZXN0UmVnaW9uXTsKCXZhciBzb3VyY2VWaWV3ID0gbnVsbDsKCXZhciBkZXN0VmlldyA9IG51bGw7Cgl2YXIgc291cmNlTWFzayA9IDB4RkZGRkZGRkY7Cgl2YXIgZGVzdE1hc2sgPSAweEZGRkZGRkZGOwoJdmFyIHdvcmQ7CgoJaWYgKGRlc3RCbG9jay5JQ0FDSEVfUEFHRV9CSVRTKSB7CgkJdmFyIGVuZFBhZ2UgPSAoZGVzdCArIHdvcmRzUmVtYWluaW5nICogd2lkdGgpID4+IGRlc3RCbG9jay5JQ0FDSEVfUEFHRV9CSVRTOwoJCWZvciAodmFyIGkgPSBkZXN0ID4+IGRlc3RCbG9jay5JQ0FDSEVfUEFHRV9CSVRTOyBpIDw9IGVuZFBhZ2U7ICsraSkgewoJCQlkZXN0QmxvY2suaW52YWxpZGF0ZVBhZ2UoaSA8PCBkZXN0QmxvY2suSUNBQ0hFX1BBR0VfQklUUyk7CgkJfQoJfQoKCWlmIChkZXN0UmVnaW9uID09IHRoaXMuUkVHSU9OX1dPUktJTkdfUkFNIHx8IGRlc3RSZWdpb24gPT0gdGhpcy5SRUdJT05fV09SS0lOR19JUkFNKSB7CgkJZGVzdFZpZXcgPSBkZXN0QmxvY2sudmlldzsKCQlkZXN0TWFzayA9IGRlc3RCbG9jay5tYXNrOwoJfQoKCWlmIChzb3VyY2VSZWdpb24gPT0gdGhpcy5SRUdJT05fV09SS0lOR19SQU0gfHwgc291cmNlUmVnaW9uID09IHRoaXMuUkVHSU9OX1dPUktJTkdfSVJBTSB8fCBzb3VyY2VSZWdpb24gPT0gdGhpcy5SRUdJT05fQ0FSVDAgfHwgc291cmNlUmVnaW9uID09IHRoaXMuUkVHSU9OX0NBUlQxKSB7CgkJc291cmNlVmlldyA9IHNvdXJjZUJsb2NrLnZpZXc7CgkJc291cmNlTWFzayA9IHNvdXJjZUJsb2NrLm1hc2s7Cgl9CgoJaWYgKHNvdXJjZUJsb2NrICYmIGRlc3RCbG9jaykgewoJCWlmIChzb3VyY2VWaWV3ICYmIGRlc3RWaWV3KSB7CgkJCWlmICh3aWR0aCA9PSA0KSB7CgkJCQlzb3VyY2UgJj0gMHhGRkZGRkZGQzsKCQkJCWRlc3QgJj0gMHhGRkZGRkZGQzsKCQkJCXdoaWxlICh3b3Jkc1JlbWFpbmluZy0tKSB7CgkJCQkJd29yZCA9IHNvdXJjZVZpZXcuZ2V0SW50MzIoc291cmNlICYgc291cmNlTWFzayk7CgkJCQkJZGVzdFZpZXcuc2V0SW50MzIoZGVzdCAmIGRlc3RNYXNrLCB3b3JkKTsKCQkJCQlzb3VyY2UgKz0gc291cmNlT2Zmc2V0OwoJCQkJCWRlc3QgKz0gZGVzdE9mZnNldDsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCXdoaWxlICh3b3Jkc1JlbWFpbmluZy0tKSB7CgkJCQkJd29yZCA9IHNvdXJjZVZpZXcuZ2V0VWludDE2KHNvdXJjZSAmIHNvdXJjZU1hc2spOwoJCQkJCWRlc3RWaWV3LnNldFVpbnQxNihkZXN0ICYgZGVzdE1hc2ssIHdvcmQpOwoJCQkJCXNvdXJjZSArPSBzb3VyY2VPZmZzZXQ7CgkJCQkJZGVzdCArPSBkZXN0T2Zmc2V0OwoJCQkJfQoJCQl9CgkJfSBlbHNlIGlmIChzb3VyY2VWaWV3KSB7CgkJCWlmICh3aWR0aCA9PSA0KSB7CgkJCQlzb3VyY2UgJj0gMHhGRkZGRkZGQzsKCQkJCWRlc3QgJj0gMHhGRkZGRkZGQzsKCQkJCXdoaWxlICh3b3Jkc1JlbWFpbmluZy0tKSB7CgkJCQkJd29yZCA9IHNvdXJjZVZpZXcuZ2V0SW50MzIoc291cmNlICYgc291cmNlTWFzaywgdHJ1ZSk7CgkJCQkJZGVzdEJsb2NrLnN0b3JlMzIoZGVzdCwgd29yZCk7CgkJCQkJc291cmNlICs9IHNvdXJjZU9mZnNldDsKCQkJCQlkZXN0ICs9IGRlc3RPZmZzZXQ7CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQl3aGlsZSAod29yZHNSZW1haW5pbmctLSkgewoJCQkJCXdvcmQgPSBzb3VyY2VWaWV3LmdldFVpbnQxNihzb3VyY2UgJiBzb3VyY2VNYXNrLCB0cnVlKTsKCQkJCQlkZXN0QmxvY2suc3RvcmUxNihkZXN0LCB3b3JkKTsKCQkJCQlzb3VyY2UgKz0gc291cmNlT2Zmc2V0OwoJCQkJCWRlc3QgKz0gZGVzdE9mZnNldDsKCQkJCX0KCQkJfQoJCX0gZWxzZSB7CgkJCWlmICh3aWR0aCA9PSA0KSB7CgkJCQlzb3VyY2UgJj0gMHhGRkZGRkZGQzsKCQkJCWRlc3QgJj0gMHhGRkZGRkZGQzsKCQkJCXdoaWxlICh3b3Jkc1JlbWFpbmluZy0tKSB7CgkJCQkJd29yZCA9IHNvdXJjZUJsb2NrLmxvYWQzMihzb3VyY2UpOwoJCQkJCWRlc3RCbG9jay5zdG9yZTMyKGRlc3QsIHdvcmQpOwoJCQkJCXNvdXJjZSArPSBzb3VyY2VPZmZzZXQ7CgkJCQkJZGVzdCArPSBkZXN0T2Zmc2V0OwoJCQkJfQoJCQl9IGVsc2UgewoJCQkJd2hpbGUgKHdvcmRzUmVtYWluaW5nLS0pIHsKCQkJCQl3b3JkID0gc291cmNlQmxvY2subG9hZFUxNihzb3VyY2UpOwoJCQkJCWRlc3RCbG9jay5zdG9yZTE2KGRlc3QsIHdvcmQpOwoJCQkJCXNvdXJjZSArPSBzb3VyY2VPZmZzZXQ7CgkJCQkJZGVzdCArPSBkZXN0T2Zmc2V0OwoJCQkJfQoJCQl9CgkJfQoJfSBlbHNlIHsKCQl0aGlzLmNvcmUuV0FSTignSW52YWxpZCBETUEnKTsKCX0KCglpZiAoaW5mby5kb0lycSkgewoJCWluZm8ubmV4dElSUSA9IHRoaXMuY3B1LmN5Y2xlcyArIDI7CgkJaW5mby5uZXh0SVJRICs9ICh3aWR0aCA9PSA0ID8gdGhpcy53YWl0c3RhdGVzMzJbc291cmNlUmVnaW9uXSArIHRoaXMud2FpdHN0YXRlczMyW2Rlc3RSZWdpb25dCgkJICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy53YWl0c3RhdGVzW3NvdXJjZVJlZ2lvbl0gKyB0aGlzLndhaXRzdGF0ZXNbZGVzdFJlZ2lvbl0pOwoJCWluZm8ubmV4dElSUSArPSAoaW5mby5jb3VudCAtIDEpICogKHdpZHRoID09IDQgPyB0aGlzLndhaXRzdGF0ZXNTZXEzMltzb3VyY2VSZWdpb25dICsgdGhpcy53YWl0c3RhdGVzU2VxMzJbZGVzdFJlZ2lvbl0KCQkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy53YWl0c3RhdGVzU2VxW3NvdXJjZVJlZ2lvbl0gKyB0aGlzLndhaXRzdGF0ZXNTZXFbZGVzdFJlZ2lvbl0pOwoJfQoKCWluZm8ubmV4dFNvdXJjZSA9IHNvdXJjZSB8IChzb3VyY2VSZWdpb24gPDwgdGhpcy5CQVNFX09GRlNFVCk7CglpbmZvLm5leHREZXN0ID0gZGVzdCB8IChkZXN0UmVnaW9uIDw8IHRoaXMuQkFTRV9PRkZTRVQpOwoJaW5mby5uZXh0Q291bnQgPSB3b3Jkc1JlbWFpbmluZzsKCglpZiAoIWluZm8ucmVwZWF0KSB7CgkJaW5mby5lbmFibGUgPSBmYWxzZTsKCgkJLy8gQ2xlYXIgdGhlIGVuYWJsZSBiaXQgaW4gbWVtb3J5CgkJdmFyIGlvID0gdGhpcy5tZW1vcnlbdGhpcy5SRUdJT05fSU9dOwoJCWlvLnJlZ2lzdGVyc1t0aGlzLkRNQV9SRUdJU1RFUltudW1iZXJdXSAmPSAweDdGRTA7Cgl9IGVsc2UgewoJCWluZm8ubmV4dENvdW50ID0gaW5mby5jb3VudDsKCQlpZiAoaW5mby5kc3RDb250cm9sID09IHRoaXMuRE1BX0lOQ1JFTUVOVF9SRUxPQUQpIHsKCQkJaW5mby5uZXh0RGVzdCA9IGluZm8uZGVzdDsKCQl9CgkJdGhpcy5zY2hlZHVsZURtYShudW1iZXIsIGluZm8pOwoJfQp9OwoKR2FtZUJveUFkdmFuY2VNTVUucHJvdG90eXBlLmFkanVzdFRpbWluZ3MgPSBmdW5jdGlvbih3b3JkKSB7Cgl2YXIgc3JhbSA9IHdvcmQgJiAweDAwMDM7Cgl2YXIgd3MwID0gKHdvcmQgJiAweDAwMEMpID4+IDI7Cgl2YXIgd3Mwc2VxID0gKHdvcmQgJiAweDAwMTApID4+IDQ7Cgl2YXIgd3MxID0gKHdvcmQgJiAweDAwNjApID4+IDU7Cgl2YXIgd3Mxc2VxID0gKHdvcmQgJiAweDAwODApID4+IDc7Cgl2YXIgd3MyID0gKHdvcmQgJiAweDAzMDApID4+IDg7Cgl2YXIgd3Myc2VxID0gKHdvcmQgJiAweDA0MDApID4+IDEwOwoJdmFyIHByZWZldGNoID0gd29yZCAmIDB4NDAwMDsKCgl0aGlzLndhaXRzdGF0ZXNbdGhpcy5SRUdJT05fQ0FSVF9TUkFNXSA9IHRoaXMuUk9NX1dTW3NyYW1dOwoJdGhpcy53YWl0c3RhdGVzU2VxW3RoaXMuUkVHSU9OX0NBUlRfU1JBTV0gPSB0aGlzLlJPTV9XU1tzcmFtXTsKCXRoaXMud2FpdHN0YXRlczMyW3RoaXMuUkVHSU9OX0NBUlRfU1JBTV0gPSB0aGlzLlJPTV9XU1tzcmFtXTsKCXRoaXMud2FpdHN0YXRlc1NlcTMyW3RoaXMuUkVHSU9OX0NBUlRfU1JBTV0gPSB0aGlzLlJPTV9XU1tzcmFtXTsKCgl0aGlzLndhaXRzdGF0ZXNbdGhpcy5SRUdJT05fQ0FSVDBdID0gdGhpcy53YWl0c3RhdGVzW3RoaXMuUkVHSU9OX0NBUlQwICsgMV0gPSB0aGlzLlJPTV9XU1t3czBdOwoJdGhpcy53YWl0c3RhdGVzW3RoaXMuUkVHSU9OX0NBUlQxXSA9IHRoaXMud2FpdHN0YXRlc1t0aGlzLlJFR0lPTl9DQVJUMSArIDFdID0gdGhpcy5ST01fV1Nbd3MxXTsKCXRoaXMud2FpdHN0YXRlc1t0aGlzLlJFR0lPTl9DQVJUMl0gPSB0aGlzLndhaXRzdGF0ZXNbdGhpcy5SRUdJT05fQ0FSVDIgKyAxXSA9IHRoaXMuUk9NX1dTW3dzMl07CgoJdGhpcy53YWl0c3RhdGVzU2VxW3RoaXMuUkVHSU9OX0NBUlQwXSA9IHRoaXMud2FpdHN0YXRlc1NlcVt0aGlzLlJFR0lPTl9DQVJUMCArIDFdID0gdGhpcy5ST01fV1NfU0VRWzBdW3dzMHNlcV07Cgl0aGlzLndhaXRzdGF0ZXNTZXFbdGhpcy5SRUdJT05fQ0FSVDFdID0gdGhpcy53YWl0c3RhdGVzU2VxW3RoaXMuUkVHSU9OX0NBUlQxICsgMV0gPSB0aGlzLlJPTV9XU19TRVFbMV1bd3Mxc2VxXTsKCXRoaXMud2FpdHN0YXRlc1NlcVt0aGlzLlJFR0lPTl9DQVJUMl0gPSB0aGlzLndhaXRzdGF0ZXNTZXFbdGhpcy5SRUdJT05fQ0FSVDIgKyAxXSA9IHRoaXMuUk9NX1dTX1NFUVsyXVt3czJzZXFdOwoKCXRoaXMud2FpdHN0YXRlczMyW3RoaXMuUkVHSU9OX0NBUlQwXSA9IHRoaXMud2FpdHN0YXRlczMyW3RoaXMuUkVHSU9OX0NBUlQwICsgMV0gPSB0aGlzLndhaXRzdGF0ZXNbdGhpcy5SRUdJT05fQ0FSVDBdICsgMSArIHRoaXMud2FpdHN0YXRlc1NlcVt0aGlzLlJFR0lPTl9DQVJUMF07Cgl0aGlzLndhaXRzdGF0ZXMzMlt0aGlzLlJFR0lPTl9DQVJUMV0gPSB0aGlzLndhaXRzdGF0ZXMzMlt0aGlzLlJFR0lPTl9DQVJUMSArIDFdID0gdGhpcy53YWl0c3RhdGVzW3RoaXMuUkVHSU9OX0NBUlQxXSArIDEgKyB0aGlzLndhaXRzdGF0ZXNTZXFbdGhpcy5SRUdJT05fQ0FSVDFdOwoJdGhpcy53YWl0c3RhdGVzMzJbdGhpcy5SRUdJT05fQ0FSVDJdID0gdGhpcy53YWl0c3RhdGVzMzJbdGhpcy5SRUdJT05fQ0FSVDIgKyAxXSA9IHRoaXMud2FpdHN0YXRlc1t0aGlzLlJFR0lPTl9DQVJUMl0gKyAxICsgdGhpcy53YWl0c3RhdGVzU2VxW3RoaXMuUkVHSU9OX0NBUlQyXTsKCgl0aGlzLndhaXRzdGF0ZXNTZXEzMlt0aGlzLlJFR0lPTl9DQVJUMF0gPSB0aGlzLndhaXRzdGF0ZXNTZXEzMlt0aGlzLlJFR0lPTl9DQVJUMCArIDFdID0gMiAqIHRoaXMud2FpdHN0YXRlc1NlcVt0aGlzLlJFR0lPTl9DQVJUMF0gKyAxOwoJdGhpcy53YWl0c3RhdGVzU2VxMzJbdGhpcy5SRUdJT05fQ0FSVDFdID0gdGhpcy53YWl0c3RhdGVzU2VxMzJbdGhpcy5SRUdJT05fQ0FSVDEgKyAxXSA9IDIgKiB0aGlzLndhaXRzdGF0ZXNTZXFbdGhpcy5SRUdJT05fQ0FSVDFdICsgMTsKCXRoaXMud2FpdHN0YXRlc1NlcTMyW3RoaXMuUkVHSU9OX0NBUlQyXSA9IHRoaXMud2FpdHN0YXRlc1NlcTMyW3RoaXMuUkVHSU9OX0NBUlQyICsgMV0gPSAyICogdGhpcy53YWl0c3RhdGVzU2VxW3RoaXMuUkVHSU9OX0NBUlQyXSArIDE7CgoJaWYgKHByZWZldGNoKSB7CgkJdGhpcy53YWl0c3RhdGVzUHJlZmV0Y2hbdGhpcy5SRUdJT05fQ0FSVDBdID0gdGhpcy53YWl0c3RhdGVzUHJlZmV0Y2hbdGhpcy5SRUdJT05fQ0FSVDAgKyAxXSA9IDA7CgkJdGhpcy53YWl0c3RhdGVzUHJlZmV0Y2hbdGhpcy5SRUdJT05fQ0FSVDFdID0gdGhpcy53YWl0c3RhdGVzUHJlZmV0Y2hbdGhpcy5SRUdJT05fQ0FSVDEgKyAxXSA9IDA7CgkJdGhpcy53YWl0c3RhdGVzUHJlZmV0Y2hbdGhpcy5SRUdJT05fQ0FSVDJdID0gdGhpcy53YWl0c3RhdGVzUHJlZmV0Y2hbdGhpcy5SRUdJT05fQ0FSVDIgKyAxXSA9IDA7CgoJCXRoaXMud2FpdHN0YXRlc1ByZWZldGNoMzJbdGhpcy5SRUdJT05fQ0FSVDBdID0gdGhpcy53YWl0c3RhdGVzUHJlZmV0Y2gzMlt0aGlzLlJFR0lPTl9DQVJUMCArIDFdID0gMDsKCQl0aGlzLndhaXRzdGF0ZXNQcmVmZXRjaDMyW3RoaXMuUkVHSU9OX0NBUlQxXSA9IHRoaXMud2FpdHN0YXRlc1ByZWZldGNoMzJbdGhpcy5SRUdJT05fQ0FSVDEgKyAxXSA9IDA7CgkJdGhpcy53YWl0c3RhdGVzUHJlZmV0Y2gzMlt0aGlzLlJFR0lPTl9DQVJUMl0gPSB0aGlzLndhaXRzdGF0ZXNQcmVmZXRjaDMyW3RoaXMuUkVHSU9OX0NBUlQyICsgMV0gPSAwOwoJfSBlbHNlIHsKCQl0aGlzLndhaXRzdGF0ZXNQcmVmZXRjaFt0aGlzLlJFR0lPTl9DQVJUMF0gPSB0aGlzLndhaXRzdGF0ZXNQcmVmZXRjaFt0aGlzLlJFR0lPTl9DQVJUMCArIDFdID0gdGhpcy53YWl0c3RhdGVzU2VxW3RoaXMuUkVHSU9OX0NBUlQwXTsKCQl0aGlzLndhaXRzdGF0ZXNQcmVmZXRjaFt0aGlzLlJFR0lPTl9DQVJUMV0gPSB0aGlzLndhaXRzdGF0ZXNQcmVmZXRjaFt0aGlzLlJFR0lPTl9DQVJUMSArIDFdID0gdGhpcy53YWl0c3RhdGVzU2VxW3RoaXMuUkVHSU9OX0NBUlQxXTsKCQl0aGlzLndhaXRzdGF0ZXNQcmVmZXRjaFt0aGlzLlJFR0lPTl9DQVJUMl0gPSB0aGlzLndhaXRzdGF0ZXNQcmVmZXRjaFt0aGlzLlJFR0lPTl9DQVJUMiArIDFdID0gdGhpcy53YWl0c3RhdGVzU2VxW3RoaXMuUkVHSU9OX0NBUlQyXTsKCgkJdGhpcy53YWl0c3RhdGVzUHJlZmV0Y2gzMlt0aGlzLlJFR0lPTl9DQVJUMF0gPSB0aGlzLndhaXRzdGF0ZXNQcmVmZXRjaDMyW3RoaXMuUkVHSU9OX0NBUlQwICsgMV0gPSB0aGlzLndhaXRzdGF0ZXNTZXEzMlt0aGlzLlJFR0lPTl9DQVJUMF07CgkJdGhpcy53YWl0c3RhdGVzUHJlZmV0Y2gzMlt0aGlzLlJFR0lPTl9DQVJUMV0gPSB0aGlzLndhaXRzdGF0ZXNQcmVmZXRjaDMyW3RoaXMuUkVHSU9OX0NBUlQxICsgMV0gPSB0aGlzLndhaXRzdGF0ZXNTZXEzMlt0aGlzLlJFR0lPTl9DQVJUMV07CgkJdGhpcy53YWl0c3RhdGVzUHJlZmV0Y2gzMlt0aGlzLlJFR0lPTl9DQVJUMl0gPSB0aGlzLndhaXRzdGF0ZXNQcmVmZXRjaDMyW3RoaXMuUkVHSU9OX0NBUlQyICsgMV0gPSB0aGlzLndhaXRzdGF0ZXNTZXEzMlt0aGlzLlJFR0lPTl9DQVJUMl07Cgl9Cn07CgpHYW1lQm95QWR2YW5jZU1NVS5wcm90b3R5cGUuc2F2ZU5lZWRzRmx1c2ggPSBmdW5jdGlvbigpIHsKCXJldHVybiB0aGlzLnNhdmUud3JpdGVQZW5kaW5nOwp9OwoKR2FtZUJveUFkdmFuY2VNTVUucHJvdG90eXBlLmZsdXNoU2F2ZSA9IGZ1bmN0aW9uKCkgewoJdGhpcy5zYXZlLndyaXRlUGVuZGluZyA9IGZhbHNlOwp9OwoKR2FtZUJveUFkdmFuY2VNTVUucHJvdG90eXBlLmFsbG9jR1BJTyA9IGZ1bmN0aW9uKHJvbSkgewoJcmV0dXJuIG5ldyBHYW1lQm95QWR2YW5jZUdQSU8odGhpcy5jb3JlLCByb20pOwp9Owo="></script>
<script src="data:@file/javascript;base64,ZnVuY3Rpb24gR2FtZUJveUFkdmFuY2VJTygpIHsKCS8vIFZpZGVvCgl0aGlzLkRJU1BDTlQgPSAweDAwMDsKCXRoaXMuR1JFRU5TV1AgPSAweDAwMjsKCXRoaXMuRElTUFNUQVQgPSAweDAwNDsKCXRoaXMuVkNPVU5UID0gMHgwMDY7Cgl0aGlzLkJHMENOVCA9IDB4MDA4OwoJdGhpcy5CRzFDTlQgPSAweDAwQTsKCXRoaXMuQkcyQ05UID0gMHgwMEM7Cgl0aGlzLkJHM0NOVCA9IDB4MDBFOwoJdGhpcy5CRzBIT0ZTID0gMHgwMTA7Cgl0aGlzLkJHMFZPRlMgPSAweDAxMjsKCXRoaXMuQkcxSE9GUyA9IDB4MDE0OwoJdGhpcy5CRzFWT0ZTID0gMHgwMTY7Cgl0aGlzLkJHMkhPRlMgPSAweDAxODsKCXRoaXMuQkcyVk9GUyA9IDB4MDFBOwoJdGhpcy5CRzNIT0ZTID0gMHgwMUM7Cgl0aGlzLkJHM1ZPRlMgPSAweDAxRTsKCXRoaXMuQkcyUEEgPSAweDAyMDsKCXRoaXMuQkcyUEIgPSAweDAyMjsKCXRoaXMuQkcyUEMgPSAweDAyNDsKCXRoaXMuQkcyUEQgPSAweDAyNjsKCXRoaXMuQkcyWF9MTyA9IDB4MDI4OwoJdGhpcy5CRzJYX0hJID0gMHgwMkE7Cgl0aGlzLkJHMllfTE8gPSAweDAyQzsKCXRoaXMuQkcyWV9ISSA9IDB4MDJFOwoJdGhpcy5CRzNQQSA9IDB4MDMwOwoJdGhpcy5CRzNQQiA9IDB4MDMyOwoJdGhpcy5CRzNQQyA9IDB4MDM0OwoJdGhpcy5CRzNQRCA9IDB4MDM2OwoJdGhpcy5CRzNYX0xPID0gMHgwMzg7Cgl0aGlzLkJHM1hfSEkgPSAweDAzQTsKCXRoaXMuQkczWV9MTyA9IDB4MDNDOwoJdGhpcy5CRzNZX0hJID0gMHgwM0U7Cgl0aGlzLldJTjBIID0gMHgwNDA7Cgl0aGlzLldJTjFIID0gMHgwNDI7Cgl0aGlzLldJTjBWID0gMHgwNDQ7Cgl0aGlzLldJTjFWID0gMHgwNDY7Cgl0aGlzLldJTklOID0gMHgwNDg7Cgl0aGlzLldJTk9VVCA9IDB4MDRBOwoJdGhpcy5NT1NBSUMgPSAweDA0QzsKCXRoaXMuQkxEQ05UID0gMHgwNTA7Cgl0aGlzLkJMREFMUEhBID0gMHgwNTI7Cgl0aGlzLkJMRFkgPSAweDA1NDsKCgkvLyBTb3VuZAoJdGhpcy5TT1VORDFDTlRfTE8gPSAweDA2MDsKCXRoaXMuU09VTkQxQ05UX0hJID0gMHgwNjI7Cgl0aGlzLlNPVU5EMUNOVF9YID0gMHgwNjQ7Cgl0aGlzLlNPVU5EMkNOVF9MTyA9IDB4MDY4OwoJdGhpcy5TT1VORDJDTlRfSEkgPSAweDA2QzsKCXRoaXMuU09VTkQzQ05UX0xPID0gMHgwNzA7Cgl0aGlzLlNPVU5EM0NOVF9ISSA9IDB4MDcyOwoJdGhpcy5TT1VORDNDTlRfWCA9IDB4MDc0OwoJdGhpcy5TT1VORDRDTlRfTE8gPSAweDA3ODsKCXRoaXMuU09VTkQ0Q05UX0hJID0gMHgwN0M7Cgl0aGlzLlNPVU5EQ05UX0xPID0gMHgwODA7Cgl0aGlzLlNPVU5EQ05UX0hJID0gMHgwODI7Cgl0aGlzLlNPVU5EQ05UX1ggPSAweDA4NDsKCXRoaXMuU09VTkRCSUFTID0gMHgwODg7Cgl0aGlzLldBVkVfUkFNMF9MTyA9IDB4MDkwOwoJdGhpcy5XQVZFX1JBTTBfSEkgPSAweDA5MjsKCXRoaXMuV0FWRV9SQU0xX0xPID0gMHgwOTQ7Cgl0aGlzLldBVkVfUkFNMV9ISSA9IDB4MDk2OwoJdGhpcy5XQVZFX1JBTTJfTE8gPSAweDA5ODsKCXRoaXMuV0FWRV9SQU0yX0hJID0gMHgwOUE7Cgl0aGlzLldBVkVfUkFNM19MTyA9IDB4MDlDOwoJdGhpcy5XQVZFX1JBTTNfSEkgPSAweDA5RTsKCXRoaXMuRklGT19BX0xPID0gMHgwQTA7Cgl0aGlzLkZJRk9fQV9ISSA9IDB4MEEyOwoJdGhpcy5GSUZPX0JfTE8gPSAweDBBNDsKCXRoaXMuRklGT19CX0hJID0gMHgwQTY7CgoJLy8gRE1BCgl0aGlzLkRNQTBTQURfTE8gPSAweDBCMDsKCXRoaXMuRE1BMFNBRF9ISSA9IDB4MEIyOwoJdGhpcy5ETUEwREFEX0xPID0gMHgwQjQ7Cgl0aGlzLkRNQTBEQURfSEkgPSAweDBCNjsKCXRoaXMuRE1BMENOVF9MTyA9IDB4MEI4OwoJdGhpcy5ETUEwQ05UX0hJID0gMHgwQkE7Cgl0aGlzLkRNQTFTQURfTE8gPSAweDBCQzsKCXRoaXMuRE1BMVNBRF9ISSA9IDB4MEJFOwoJdGhpcy5ETUExREFEX0xPID0gMHgwQzA7Cgl0aGlzLkRNQTFEQURfSEkgPSAweDBDMjsKCXRoaXMuRE1BMUNOVF9MTyA9IDB4MEM0OwoJdGhpcy5ETUExQ05UX0hJID0gMHgwQzY7Cgl0aGlzLkRNQTJTQURfTE8gPSAweDBDODsKCXRoaXMuRE1BMlNBRF9ISSA9IDB4MENBOwoJdGhpcy5ETUEyREFEX0xPID0gMHgwQ0M7Cgl0aGlzLkRNQTJEQURfSEkgPSAweDBDRTsKCXRoaXMuRE1BMkNOVF9MTyA9IDB4MEQwOwoJdGhpcy5ETUEyQ05UX0hJID0gMHgwRDI7Cgl0aGlzLkRNQTNTQURfTE8gPSAweDBENDsKCXRoaXMuRE1BM1NBRF9ISSA9IDB4MEQ2OwoJdGhpcy5ETUEzREFEX0xPID0gMHgwRDg7Cgl0aGlzLkRNQTNEQURfSEkgPSAweDBEQTsKCXRoaXMuRE1BM0NOVF9MTyA9IDB4MERDOwoJdGhpcy5ETUEzQ05UX0hJID0gMHgwREU7CgoJLy8gVGltZXJzCgl0aGlzLlRNMENOVF9MTyA9IDB4MTAwOwoJdGhpcy5UTTBDTlRfSEkgPSAweDEwMjsKCXRoaXMuVE0xQ05UX0xPID0gMHgxMDQ7Cgl0aGlzLlRNMUNOVF9ISSA9IDB4MTA2OwoJdGhpcy5UTTJDTlRfTE8gPSAweDEwODsKCXRoaXMuVE0yQ05UX0hJID0gMHgxMEE7Cgl0aGlzLlRNM0NOVF9MTyA9IDB4MTBDOwoJdGhpcy5UTTNDTlRfSEkgPSAweDEwRTsKCgkvLyBTSU8gKG5vdGU6IHNvbWUgb2YgdGhlc2UgYXJlIHJlcGVhdGVkKQoJdGhpcy5TSU9EQVRBMzJfTE8gPSAweDEyMDsKCXRoaXMuU0lPTVVMVEkwID0gMHgxMjA7Cgl0aGlzLlNJT0RBVEEzMl9ISSA9IDB4MTIyOwoJdGhpcy5TSU9NVUxUSTEgPSAweDEyMjsKCXRoaXMuU0lPTVVMVEkyID0gMHgxMjQ7Cgl0aGlzLlNJT01VTFRJMyA9IDB4MTI2OwoJdGhpcy5TSU9DTlQgPSAweDEyODsKCXRoaXMuU0lPTUxUX1NFTkQgPSAweDEyQTsKCXRoaXMuU0lPREFUQTggPSAweDEyQTsKCXRoaXMuUkNOVCA9IDB4MTM0OwoJdGhpcy5KT1lDTlQgPSAweDE0MDsKCXRoaXMuSk9ZX1JFQ1YgPSAweDE1MDsKCXRoaXMuSk9ZX1RSQU5TID0gMHgxNTQ7Cgl0aGlzLkpPWVNUQVQgPSAweDE1ODsKCgkvLyBLZXlwYWQKCXRoaXMuS0VZSU5QVVQgPSAweDEzMDsKCXRoaXMuS0VZQ05UID0gMHgxMzI7CgoJLy8gSW50ZXJydXB0cywgZXRjCgl0aGlzLklFID0gMHgyMDA7Cgl0aGlzLklGID0gMHgyMDI7Cgl0aGlzLldBSVRDTlQgPSAweDIwNDsKCXRoaXMuSU1FID0gMHgyMDg7CgoJdGhpcy5QT1NURkxHID0gMHgzMDA7Cgl0aGlzLkhBTFRDTlQgPSAweDMwMTsKCgl0aGlzLkRFRkFVTFRfRElTUENOVCA9IDB4MDA4MDsKCXRoaXMuREVGQVVMVF9TT1VOREJJQVMgPSAweDIwMDsKCXRoaXMuREVGQVVMVF9CR1BBID0gMTsKCXRoaXMuREVGQVVMVF9CR1BEID0gMTsKCXRoaXMuREVGQVVMVF9SQ05UID0gMHg4MDAwOwp9OwoKR2FtZUJveUFkdmFuY2VJTy5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbigpIHsKCXRoaXMucmVnaXN0ZXJzID0gbmV3IFVpbnQxNkFycmF5KHRoaXMuY3B1Lm1tdS5TSVpFX0lPKTsKCgl0aGlzLnJlZ2lzdGVyc1t0aGlzLkRJU1BDTlQgPj4gMV0gPSB0aGlzLkRFRkFVTFRfRElTUENOVDsKCXRoaXMucmVnaXN0ZXJzW3RoaXMuU09VTkRCSUFTID4+IDFdID0gdGhpcy5ERUZBVUxUX1NPVU5EQklBUzsKCXRoaXMucmVnaXN0ZXJzW3RoaXMuQkcyUEEgPj4gMV0gPSB0aGlzLkRFRkFVTFRfQkdQQTsKCXRoaXMucmVnaXN0ZXJzW3RoaXMuQkcyUEQgPj4gMV0gPSB0aGlzLkRFRkFVTFRfQkdQRDsKCXRoaXMucmVnaXN0ZXJzW3RoaXMuQkczUEEgPj4gMV0gPSB0aGlzLkRFRkFVTFRfQkdQQTsKCXRoaXMucmVnaXN0ZXJzW3RoaXMuQkczUEQgPj4gMV0gPSB0aGlzLkRFRkFVTFRfQkdQRDsKCXRoaXMucmVnaXN0ZXJzW3RoaXMuUkNOVCA+PiAxXSA9IHRoaXMuREVGQVVMVF9SQ05UOwp9OwoKR2FtZUJveUFkdmFuY2VJTy5wcm90b3R5cGUuZnJlZXplID0gZnVuY3Rpb24oKSB7CglyZXR1cm4gewoJCSdyZWdpc3RlcnMnOiBTZXJpYWxpemVyLnByZWZpeCh0aGlzLnJlZ2lzdGVycy5idWZmZXIpCgl9Owp9OwoKR2FtZUJveUFkdmFuY2VJTy5wcm90b3R5cGUuZGVmcm9zdCA9IGZ1bmN0aW9uKGZyb3N0KSB7Cgl0aGlzLnJlZ2lzdGVycyA9IG5ldyBVaW50MTZBcnJheShmcm9zdC5yZWdpc3RlcnMpOwoJLy8gVmlkZW8gcmVnaXN0ZXJzIGRvbid0IHNlcmlhbGl6ZSB0aGVtc2VsdmVzCglmb3IgKHZhciBpID0gMDsgaSA8PSB0aGlzLkJMRFk7IGkgKz0gMikgewoJCXRoaXMuc3RvcmUxNih0aGlzLnJlZ2lzdGVyc1tpID4+IDFdKTsKCX0KfTsKCkdhbWVCb3lBZHZhbmNlSU8ucHJvdG90eXBlLmxvYWQ4ID0gZnVuY3Rpb24ob2Zmc2V0KSB7Cgl0aHJvdyAnVW5pbXBsbWVuZXRlZCB1bmFsaWduZWQgSS9PIGFjY2Vzcyc7Cn0KCkdhbWVCb3lBZHZhbmNlSU8ucHJvdG90eXBlLmxvYWQxNiA9IGZ1bmN0aW9uKG9mZnNldCkgewoJcmV0dXJuICh0aGlzLmxvYWRVMTYob2Zmc2V0KSA8PCAxNikgPj4gMTY7Cn0KCkdhbWVCb3lBZHZhbmNlSU8ucHJvdG90eXBlLmxvYWQzMiA9IGZ1bmN0aW9uKG9mZnNldCkgewoJb2Zmc2V0ICY9IDB4RkZGRkZGRkM7Cglzd2l0Y2ggKG9mZnNldCkgewoJY2FzZSB0aGlzLkRNQTBDTlRfTE86CgljYXNlIHRoaXMuRE1BMUNOVF9MTzoKCWNhc2UgdGhpcy5ETUEyQ05UX0xPOgoJY2FzZSB0aGlzLkRNQTNDTlRfTE86CgkJcmV0dXJuIHRoaXMubG9hZFUxNihvZmZzZXQgfCAyKSA8PCAxNjsKCWNhc2UgdGhpcy5JTUU6CgkJcmV0dXJuIHRoaXMubG9hZFUxNihvZmZzZXQpICYgMHhGRkZGOwoJY2FzZSB0aGlzLkpPWV9SRUNWOgoJY2FzZSB0aGlzLkpPWV9UUkFOUzoKIAkJdGhpcy5jb3JlLlNUVUIoJ1VuaW1wbGVtZW50ZWQgSk9ZIHJlZ2lzdGVyIHJlYWQ6IDB4JyArIG9mZnNldC50b1N0cmluZygxNikpOwogCQlyZXR1cm4gMDsKCX0KCglyZXR1cm4gdGhpcy5sb2FkVTE2KG9mZnNldCkgfCAodGhpcy5sb2FkVTE2KG9mZnNldCB8IDIpIDw8IDE2KTsKfTsKCkdhbWVCb3lBZHZhbmNlSU8ucHJvdG90eXBlLmxvYWRVOCA9IGZ1bmN0aW9uKG9mZnNldCkgewoJdmFyIG9kZCA9IG9mZnNldCAmIDB4MDAwMTsKCXZhciB2YWx1ZSA9IHRoaXMubG9hZFUxNihvZmZzZXQgJiAweEZGRkUpOwoJcmV0dXJuICh2YWx1ZSA+Pj4gKG9kZCA8PCAzKSkgJiAweEZGOwp9CgpHYW1lQm95QWR2YW5jZUlPLnByb3RvdHlwZS5sb2FkVTE2ID0gZnVuY3Rpb24ob2Zmc2V0KSB7Cglzd2l0Y2ggKG9mZnNldCkgewoJY2FzZSB0aGlzLkRJU1BDTlQ6CgljYXNlIHRoaXMuQkcwQ05UOgoJY2FzZSB0aGlzLkJHMUNOVDoKCWNhc2UgdGhpcy5CRzJDTlQ6CgljYXNlIHRoaXMuQkczQ05UOgoJY2FzZSB0aGlzLldJTklOOgoJY2FzZSB0aGlzLldJTk9VVDoKCWNhc2UgdGhpcy5TT1VORDFDTlRfTE86CgljYXNlIHRoaXMuU09VTkQzQ05UX0xPOgoJY2FzZSB0aGlzLlNPVU5EQ05UX0xPOgoJY2FzZSB0aGlzLlNPVU5EQ05UX0hJOgoJY2FzZSB0aGlzLlNPVU5EQklBUzoKCWNhc2UgdGhpcy5CTERDTlQ6CgljYXNlIHRoaXMuQkxEQUxQSEE6CgoJY2FzZSB0aGlzLlRNMENOVF9ISToKCWNhc2UgdGhpcy5UTTFDTlRfSEk6CgljYXNlIHRoaXMuVE0yQ05UX0hJOgoJY2FzZSB0aGlzLlRNM0NOVF9ISToKCWNhc2UgdGhpcy5ETUEwQ05UX0hJOgoJY2FzZSB0aGlzLkRNQTFDTlRfSEk6CgljYXNlIHRoaXMuRE1BMkNOVF9ISToKCWNhc2UgdGhpcy5ETUEzQ05UX0hJOgoJY2FzZSB0aGlzLlJDTlQ6CgljYXNlIHRoaXMuV0FJVENOVDoKCWNhc2UgdGhpcy5JRToKCWNhc2UgdGhpcy5JRjoKCWNhc2UgdGhpcy5JTUU6CgljYXNlIHRoaXMuUE9TVEZMRzoKCQkvLyBIYW5kbGVkIHRyYW5zcGFyZW50bHkgYnkgdGhlIHdyaXR0ZW4gcmVnaXN0ZXJzCgkJYnJlYWs7CgoJLy8gVmlkZW8KCWNhc2UgdGhpcy5ESVNQU1RBVDoKCQlyZXR1cm4gdGhpcy5yZWdpc3RlcnNbb2Zmc2V0ID4+IDFdIHwgdGhpcy52aWRlby5yZWFkRGlzcGxheVN0YXQoKTsKCWNhc2UgdGhpcy5WQ09VTlQ6CgkJcmV0dXJuIHRoaXMudmlkZW8udmNvdW50OwoKCS8vIFNvdW5kCgljYXNlIHRoaXMuU09VTkQxQ05UX0hJOgoJY2FzZSB0aGlzLlNPVU5EMkNOVF9MTzoKCQlyZXR1cm4gdGhpcy5yZWdpc3RlcnNbb2Zmc2V0ID4+IDFdICYgMHhGRkMwOwoJY2FzZSB0aGlzLlNPVU5EMUNOVF9YOgoJY2FzZSB0aGlzLlNPVU5EMkNOVF9ISToKCWNhc2UgdGhpcy5TT1VORDNDTlRfWDoKCQlyZXR1cm4gdGhpcy5yZWdpc3RlcnNbb2Zmc2V0ID4+IDFdICYgMHg0MDAwOwoJY2FzZSB0aGlzLlNPVU5EM0NOVF9ISToKCQlyZXR1cm4gdGhpcy5yZWdpc3RlcnNbb2Zmc2V0ID4+IDFdICYgMHhFMDAwOwoJY2FzZSB0aGlzLlNPVU5ENENOVF9MTzoKCQlyZXR1cm4gdGhpcy5yZWdpc3RlcnNbb2Zmc2V0ID4+IDFdICYgMHhGRjAwOwoJY2FzZSB0aGlzLlNPVU5ENENOVF9ISToKCQlyZXR1cm4gdGhpcy5yZWdpc3RlcnNbb2Zmc2V0ID4+IDFdICYgMHg0MEZGOwoJY2FzZSB0aGlzLlNPVU5EQ05UX1g6CgkJdGhpcy5jb3JlLlNUVUIoJ1VuaW1wbGVtZW50ZWQgc291bmQgcmVnaXN0ZXIgcmVhZDogU09VTkRDTlRfWCcpOwoJCXJldHVybiB0aGlzLnJlZ2lzdGVyc1tvZmZzZXQgPj4gMV0gfCAweDAwMDA7CgoJLy8gVGltZXJzCgljYXNlIHRoaXMuVE0wQ05UX0xPOgoJCXJldHVybiB0aGlzLmNwdS5pcnEudGltZXJSZWFkKDApOwoJY2FzZSB0aGlzLlRNMUNOVF9MTzoKCQlyZXR1cm4gdGhpcy5jcHUuaXJxLnRpbWVyUmVhZCgxKTsKCWNhc2UgdGhpcy5UTTJDTlRfTE86CgkJcmV0dXJuIHRoaXMuY3B1LmlycS50aW1lclJlYWQoMik7CgljYXNlIHRoaXMuVE0zQ05UX0xPOgoJCXJldHVybiB0aGlzLmNwdS5pcnEudGltZXJSZWFkKDMpOwoKCS8vIFNJTwoJY2FzZSB0aGlzLlNJT0NOVDoKCQlyZXR1cm4gdGhpcy5zaW8ucmVhZFNJT0NOVCgpOwoKCWNhc2UgdGhpcy5LRVlJTlBVVDoKCQl0aGlzLmtleXBhZC5wb2xsR2FtZXBhZHMoKTsKCQlyZXR1cm4gdGhpcy5rZXlwYWQuY3VycmVudERvd247CgljYXNlIHRoaXMuS0VZQ05UOgoJCXRoaXMuY29yZS5TVFVCKCdVbmltcGxlbWVudGVkIEkvTyByZWdpc3RlciByZWFkOiBLRVlDTlQnKTsKCQlyZXR1cm4gMDsKCgljYXNlIHRoaXMuQkcwSE9GUzoKCWNhc2UgdGhpcy5CRzBWT0ZTOgoJY2FzZSB0aGlzLkJHMUhPRlM6CgljYXNlIHRoaXMuQkcxVk9GUzoKCWNhc2UgdGhpcy5CRzJIT0ZTOgoJY2FzZSB0aGlzLkJHMlZPRlM6CgljYXNlIHRoaXMuQkczSE9GUzoKCWNhc2UgdGhpcy5CRzNWT0ZTOgoJY2FzZSB0aGlzLkJHMlBBOgoJY2FzZSB0aGlzLkJHMlBCOgoJY2FzZSB0aGlzLkJHMlBDOgoJY2FzZSB0aGlzLkJHMlBEOgoJY2FzZSB0aGlzLkJHM1BBOgoJY2FzZSB0aGlzLkJHM1BCOgoJY2FzZSB0aGlzLkJHM1BDOgoJY2FzZSB0aGlzLkJHM1BEOgoJY2FzZSB0aGlzLkJHMlhfTE86CgljYXNlIHRoaXMuQkcyWF9ISToKCWNhc2UgdGhpcy5CRzJZX0xPOgoJY2FzZSB0aGlzLkJHMllfSEk6CgljYXNlIHRoaXMuQkczWF9MTzoKCWNhc2UgdGhpcy5CRzNYX0hJOgoJY2FzZSB0aGlzLkJHM1lfTE86CgljYXNlIHRoaXMuQkczWV9ISToKCWNhc2UgdGhpcy5XSU4wSDoKCWNhc2UgdGhpcy5XSU4xSDoKCWNhc2UgdGhpcy5XSU4wVjoKCWNhc2UgdGhpcy5XSU4xVjoKCWNhc2UgdGhpcy5CTERZOgoJY2FzZSB0aGlzLkRNQTBTQURfTE86CgljYXNlIHRoaXMuRE1BMFNBRF9ISToKCWNhc2UgdGhpcy5ETUEwREFEX0xPOgoJY2FzZSB0aGlzLkRNQTBEQURfSEk6CgljYXNlIHRoaXMuRE1BMENOVF9MTzoKCWNhc2UgdGhpcy5ETUExU0FEX0xPOgoJY2FzZSB0aGlzLkRNQTFTQURfSEk6CgljYXNlIHRoaXMuRE1BMURBRF9MTzoKCWNhc2UgdGhpcy5ETUExREFEX0hJOgoJY2FzZSB0aGlzLkRNQTFDTlRfTE86CgljYXNlIHRoaXMuRE1BMlNBRF9MTzoKCWNhc2UgdGhpcy5ETUEyU0FEX0hJOgoJY2FzZSB0aGlzLkRNQTJEQURfTE86CgljYXNlIHRoaXMuRE1BMkRBRF9ISToKCWNhc2UgdGhpcy5ETUEyQ05UX0xPOgoJY2FzZSB0aGlzLkRNQTNTQURfTE86CgljYXNlIHRoaXMuRE1BM1NBRF9ISToKCWNhc2UgdGhpcy5ETUEzREFEX0xPOgoJY2FzZSB0aGlzLkRNQTNEQURfSEk6CgljYXNlIHRoaXMuRE1BM0NOVF9MTzoKCWNhc2UgdGhpcy5GSUZPX0FfTE86CgljYXNlIHRoaXMuRklGT19BX0hJOgoJY2FzZSB0aGlzLkZJRk9fQl9MTzoKCWNhc2UgdGhpcy5GSUZPX0JfSEk6CgkJdGhpcy5jb3JlLldBUk4oJ1JlYWQgZm9yIHdyaXRlLW9ubHkgcmVnaXN0ZXI6IDB4JyArIG9mZnNldC50b1N0cmluZygxNikpOwoJCXJldHVybiB0aGlzLmNvcmUubW11LmJhZE1lbW9yeS5sb2FkVTE2KDApOwoKCWNhc2UgdGhpcy5NT1NBSUM6CgkJdGhpcy5jb3JlLldBUk4oJ1JlYWQgZm9yIHdyaXRlLW9ubHkgcmVnaXN0ZXI6IDB4JyArIG9mZnNldC50b1N0cmluZygxNikpOwoJCXJldHVybiAwOwoKCWNhc2UgdGhpcy5TSU9NVUxUSTA6CiAJY2FzZSB0aGlzLlNJT01VTFRJMToKIAljYXNlIHRoaXMuU0lPTVVMVEkyOgogCWNhc2UgdGhpcy5TSU9NVUxUSTM6CiAJCXJldHVybiB0aGlzLnNpby5yZWFkKChvZmZzZXQgLSB0aGlzLlNJT01VTFRJMCkgPj4gMSk7CgogCWNhc2UgdGhpcy5TSU9EQVRBODoKIAkJdGhpcy5jb3JlLlNUVUIoJ1VuaW1wbGVtZW50ZWQgU0lPIHJlZ2lzdGVyIHJlYWQ6IDB4JyArIG9mZnNldC50b1N0cmluZygxNikpOwogCQlyZXR1cm4gMDsKCWNhc2UgdGhpcy5KT1lDTlQ6CgljYXNlIHRoaXMuSk9ZU1RBVDoKIAkJdGhpcy5jb3JlLlNUVUIoJ1VuaW1wbGVtZW50ZWQgSk9ZIHJlZ2lzdGVyIHJlYWQ6IDB4JyArIG9mZnNldC50b1N0cmluZygxNikpOwogCQlyZXR1cm4gMDsKCglkZWZhdWx0OgoJCXRoaXMuY29yZS5XQVJOKCdCYWQgSS9PIHJlZ2lzdGVyIHJlYWQ6IDB4JyArIG9mZnNldC50b1N0cmluZygxNikpOwoJCXJldHVybiB0aGlzLmNvcmUubW11LmJhZE1lbW9yeS5sb2FkVTE2KDApOwoJfQoJcmV0dXJuIHRoaXMucmVnaXN0ZXJzW29mZnNldCA+PiAxXTsKfTsKCkdhbWVCb3lBZHZhbmNlSU8ucHJvdG90eXBlLnN0b3JlOCA9IGZ1bmN0aW9uKG9mZnNldCwgdmFsdWUpIHsKCXN3aXRjaCAob2Zmc2V0KSB7CgljYXNlIHRoaXMuV0lOSU46CgkJdGhpcy52YWx1ZSAmIDB4M0Y7CgkJYnJlYWs7CgljYXNlIHRoaXMuV0lOSU4gfCAxOgoJCXRoaXMudmFsdWUgJiAweDNGOwoJCWJyZWFrOwoJY2FzZSB0aGlzLldJTk9VVDoKCQl0aGlzLnZhbHVlICYgMHgzRjsKCQlicmVhazsKCWNhc2UgdGhpcy5XSU5PVVQgfCAxOgoJCXRoaXMudmFsdWUgJiAweDNGOwoJCWJyZWFrOwoJY2FzZSB0aGlzLlNPVU5EMUNOVF9MTzoKCWNhc2UgdGhpcy5TT1VORDFDTlRfTE8gfCAxOgoJY2FzZSB0aGlzLlNPVU5EMUNOVF9ISToKCWNhc2UgdGhpcy5TT1VORDFDTlRfSEkgfCAxOgoJY2FzZSB0aGlzLlNPVU5EMUNOVF9YOgoJY2FzZSB0aGlzLlNPVU5EMUNOVF9YIHwgMToKCWNhc2UgdGhpcy5TT1VORDJDTlRfTE86CgljYXNlIHRoaXMuU09VTkQyQ05UX0xPIHwgMToKCWNhc2UgdGhpcy5TT1VORDJDTlRfSEk6CgljYXNlIHRoaXMuU09VTkQyQ05UX0hJIHwgMToKCWNhc2UgdGhpcy5TT1VORDNDTlRfTE86CgljYXNlIHRoaXMuU09VTkQzQ05UX0xPIHwgMToKCWNhc2UgdGhpcy5TT1VORDNDTlRfSEk6CgljYXNlIHRoaXMuU09VTkQzQ05UX0hJIHwgMToKCWNhc2UgdGhpcy5TT1VORDNDTlRfWDoKCWNhc2UgdGhpcy5TT1VORDNDTlRfWCB8IDE6CgljYXNlIHRoaXMuU09VTkQ0Q05UX0xPOgoJY2FzZSB0aGlzLlNPVU5ENENOVF9MTyB8IDE6CgljYXNlIHRoaXMuU09VTkQ0Q05UX0hJOgoJY2FzZSB0aGlzLlNPVU5ENENOVF9ISSB8IDE6CgljYXNlIHRoaXMuU09VTkRDTlRfTE86CgljYXNlIHRoaXMuU09VTkRDTlRfTE8gfCAxOgoJY2FzZSB0aGlzLlNPVU5EQ05UX1g6CgljYXNlIHRoaXMuSUY6CgljYXNlIHRoaXMuSU1FOgoJCWJyZWFrOwoJY2FzZSB0aGlzLlNPVU5EQklBUyB8IDE6CgkJdGhpcy5TVFVCX1JFRygnc291bmQnLCBvZmZzZXQpOwoJCWJyZWFrOwoJY2FzZSB0aGlzLkhBTFRDTlQ6CgkJdmFsdWUgJj0gMHg4MDsKCQlpZiAoIXZhbHVlKSB7CgkJCXRoaXMuY29yZS5pcnEuaGFsdCgpOwoJCX0gZWxzZSB7CgkJCXRoaXMuY29yZS5TVFVCKCdTdG9wJyk7CgkJfQoJCXJldHVybjsKCWRlZmF1bHQ6CgkJdGhpcy5TVFVCX1JFRygnOC1iaXQgSS9PJywgb2Zmc2V0KTsKCQlicmVhazsKCX0KCglpZiAob2Zmc2V0ICYgMSkgewoJCXZhbHVlIDw8PSA4OwoJCXZhbHVlIHw9ICh0aGlzLnJlZ2lzdGVyc1tvZmZzZXQgPj4gMV0gJiAweDAwRkYpOwoJfSBlbHNlIHsKCQl2YWx1ZSAmPSAweDAwRkY7CgkJdmFsdWUgfD0gKHRoaXMucmVnaXN0ZXJzW29mZnNldCA+PiAxXSAmIDB4RkYwMCk7Cgl9Cgl0aGlzLnN0b3JlMTYob2Zmc2V0ICYgMHhGRkZGRkZFLCB2YWx1ZSk7Cn07CgpHYW1lQm95QWR2YW5jZUlPLnByb3RvdHlwZS5zdG9yZTE2ID0gZnVuY3Rpb24ob2Zmc2V0LCB2YWx1ZSkgewoJc3dpdGNoIChvZmZzZXQpIHsKCS8vIFZpZGVvCgljYXNlIHRoaXMuRElTUENOVDoKCQl0aGlzLnZpZGVvLnJlbmRlclBhdGgud3JpdGVEaXNwbGF5Q29udHJvbCh2YWx1ZSk7CgkJYnJlYWs7CgljYXNlIHRoaXMuRElTUFNUQVQ6CgkJdmFsdWUgJj0gdGhpcy52aWRlby5ESVNQU1RBVF9NQVNLOwoJCXRoaXMudmlkZW8ud3JpdGVEaXNwbGF5U3RhdCh2YWx1ZSk7CgkJYnJlYWs7CgljYXNlIHRoaXMuQkcwQ05UOgoJCXRoaXMudmlkZW8ucmVuZGVyUGF0aC53cml0ZUJhY2tncm91bmRDb250cm9sKDAsIHZhbHVlKTsKCQlicmVhazsKCWNhc2UgdGhpcy5CRzFDTlQ6CgkJdGhpcy52aWRlby5yZW5kZXJQYXRoLndyaXRlQmFja2dyb3VuZENvbnRyb2woMSwgdmFsdWUpOwoJCWJyZWFrOwoJY2FzZSB0aGlzLkJHMkNOVDoKCQl0aGlzLnZpZGVvLnJlbmRlclBhdGgud3JpdGVCYWNrZ3JvdW5kQ29udHJvbCgyLCB2YWx1ZSk7CgkJYnJlYWs7CgljYXNlIHRoaXMuQkczQ05UOgoJCXRoaXMudmlkZW8ucmVuZGVyUGF0aC53cml0ZUJhY2tncm91bmRDb250cm9sKDMsIHZhbHVlKTsKCQlicmVhazsKCWNhc2UgdGhpcy5CRzBIT0ZTOgoJCXRoaXMudmlkZW8ucmVuZGVyUGF0aC53cml0ZUJhY2tncm91bmRIT2Zmc2V0KDAsIHZhbHVlKTsKCQlicmVhazsKCWNhc2UgdGhpcy5CRzBWT0ZTOgoJCXRoaXMudmlkZW8ucmVuZGVyUGF0aC53cml0ZUJhY2tncm91bmRWT2Zmc2V0KDAsIHZhbHVlKTsKCQlicmVhazsKCWNhc2UgdGhpcy5CRzFIT0ZTOgoJCXRoaXMudmlkZW8ucmVuZGVyUGF0aC53cml0ZUJhY2tncm91bmRIT2Zmc2V0KDEsIHZhbHVlKTsKCQlicmVhazsKCWNhc2UgdGhpcy5CRzFWT0ZTOgoJCXRoaXMudmlkZW8ucmVuZGVyUGF0aC53cml0ZUJhY2tncm91bmRWT2Zmc2V0KDEsIHZhbHVlKTsKCQlicmVhazsKCWNhc2UgdGhpcy5CRzJIT0ZTOgoJCXRoaXMudmlkZW8ucmVuZGVyUGF0aC53cml0ZUJhY2tncm91bmRIT2Zmc2V0KDIsIHZhbHVlKTsKCQlicmVhazsKCWNhc2UgdGhpcy5CRzJWT0ZTOgoJCXRoaXMudmlkZW8ucmVuZGVyUGF0aC53cml0ZUJhY2tncm91bmRWT2Zmc2V0KDIsIHZhbHVlKTsKCQlicmVhazsKCWNhc2UgdGhpcy5CRzNIT0ZTOgoJCXRoaXMudmlkZW8ucmVuZGVyUGF0aC53cml0ZUJhY2tncm91bmRIT2Zmc2V0KDMsIHZhbHVlKTsKCQlicmVhazsKCWNhc2UgdGhpcy5CRzNWT0ZTOgoJCXRoaXMudmlkZW8ucmVuZGVyUGF0aC53cml0ZUJhY2tncm91bmRWT2Zmc2V0KDMsIHZhbHVlKTsKCQlicmVhazsKCWNhc2UgdGhpcy5CRzJYX0xPOgoJCXRoaXMudmlkZW8ucmVuZGVyUGF0aC53cml0ZUJhY2tncm91bmRSZWZYKDIsICh0aGlzLnJlZ2lzdGVyc1sob2Zmc2V0ID4+IDEpIHwgMV0gPDwgMTYpIHwgdmFsdWUpOwoJCWJyZWFrOwoJY2FzZSB0aGlzLkJHMlhfSEk6CgkJdGhpcy52aWRlby5yZW5kZXJQYXRoLndyaXRlQmFja2dyb3VuZFJlZlgoMiwgdGhpcy5yZWdpc3RlcnNbKG9mZnNldCA+PiAxKSBeIDFdIHwgKHZhbHVlIDw8IDE2KSk7CgkJYnJlYWs7CgljYXNlIHRoaXMuQkcyWV9MTzoKCQl0aGlzLnZpZGVvLnJlbmRlclBhdGgud3JpdGVCYWNrZ3JvdW5kUmVmWSgyLCAodGhpcy5yZWdpc3RlcnNbKG9mZnNldCA+PiAxKSB8IDFdIDw8IDE2KSB8IHZhbHVlKTsKCQlicmVhazsKCWNhc2UgdGhpcy5CRzJZX0hJOgoJCXRoaXMudmlkZW8ucmVuZGVyUGF0aC53cml0ZUJhY2tncm91bmRSZWZZKDIsIHRoaXMucmVnaXN0ZXJzWyhvZmZzZXQgPj4gMSkgXiAxXSB8ICh2YWx1ZSA8PCAxNikpOwoJCWJyZWFrOwoJY2FzZSB0aGlzLkJHMlBBOgoJCXRoaXMudmlkZW8ucmVuZGVyUGF0aC53cml0ZUJhY2tncm91bmRQYXJhbUEoMiwgdmFsdWUpOwoJCWJyZWFrOwoJY2FzZSB0aGlzLkJHMlBCOgoJCXRoaXMudmlkZW8ucmVuZGVyUGF0aC53cml0ZUJhY2tncm91bmRQYXJhbUIoMiwgdmFsdWUpOwoJCWJyZWFrOwoJY2FzZSB0aGlzLkJHMlBDOgoJCXRoaXMudmlkZW8ucmVuZGVyUGF0aC53cml0ZUJhY2tncm91bmRQYXJhbUMoMiwgdmFsdWUpOwoJCWJyZWFrOwoJY2FzZSB0aGlzLkJHMlBEOgoJCXRoaXMudmlkZW8ucmVuZGVyUGF0aC53cml0ZUJhY2tncm91bmRQYXJhbUQoMiwgdmFsdWUpOwoJCWJyZWFrOwoJY2FzZSB0aGlzLkJHM1hfTE86CgkJdGhpcy52aWRlby5yZW5kZXJQYXRoLndyaXRlQmFja2dyb3VuZFJlZlgoMywgKHRoaXMucmVnaXN0ZXJzWyhvZmZzZXQgPj4gMSkgfCAxXSA8PCAxNikgfCB2YWx1ZSk7CgkJYnJlYWs7CgljYXNlIHRoaXMuQkczWF9ISToKCQl0aGlzLnZpZGVvLnJlbmRlclBhdGgud3JpdGVCYWNrZ3JvdW5kUmVmWCgzLCB0aGlzLnJlZ2lzdGVyc1sob2Zmc2V0ID4+IDEpIF4gMV0gfCAodmFsdWUgPDwgMTYpKTsKCQlicmVhazsKCWNhc2UgdGhpcy5CRzNZX0xPOgoJCXRoaXMudmlkZW8ucmVuZGVyUGF0aC53cml0ZUJhY2tncm91bmRSZWZZKDMsICh0aGlzLnJlZ2lzdGVyc1sob2Zmc2V0ID4+IDEpIHwgMV0gPDwgMTYpIHwgdmFsdWUpOwoJCWJyZWFrOwoJY2FzZSB0aGlzLkJHM1lfSEk6CgkJdGhpcy52aWRlby5yZW5kZXJQYXRoLndyaXRlQmFja2dyb3VuZFJlZlkoMywgdGhpcy5yZWdpc3RlcnNbKG9mZnNldCA+PiAxKSBeIDFdIHwgKHZhbHVlIDw8IDE2KSk7CgkJYnJlYWs7CgljYXNlIHRoaXMuQkczUEE6CgkJdGhpcy52aWRlby5yZW5kZXJQYXRoLndyaXRlQmFja2dyb3VuZFBhcmFtQSgzLCB2YWx1ZSk7CgkJYnJlYWs7CgljYXNlIHRoaXMuQkczUEI6CgkJdGhpcy52aWRlby5yZW5kZXJQYXRoLndyaXRlQmFja2dyb3VuZFBhcmFtQigzLCB2YWx1ZSk7CgkJYnJlYWs7CgljYXNlIHRoaXMuQkczUEM6CgkJdGhpcy52aWRlby5yZW5kZXJQYXRoLndyaXRlQmFja2dyb3VuZFBhcmFtQygzLCB2YWx1ZSk7CgkJYnJlYWs7CgljYXNlIHRoaXMuQkczUEQ6CgkJdGhpcy52aWRlby5yZW5kZXJQYXRoLndyaXRlQmFja2dyb3VuZFBhcmFtRCgzLCB2YWx1ZSk7CgkJYnJlYWs7CgljYXNlIHRoaXMuV0lOMEg6CgkJdGhpcy52aWRlby5yZW5kZXJQYXRoLndyaXRlV2luMEgodmFsdWUpOwoJCWJyZWFrOwoJY2FzZSB0aGlzLldJTjFIOgoJCXRoaXMudmlkZW8ucmVuZGVyUGF0aC53cml0ZVdpbjFIKHZhbHVlKTsKCQlicmVhazsKCWNhc2UgdGhpcy5XSU4wVjoKCQl0aGlzLnZpZGVvLnJlbmRlclBhdGgud3JpdGVXaW4wVih2YWx1ZSk7CgkJYnJlYWs7CgljYXNlIHRoaXMuV0lOMVY6CgkJdGhpcy52aWRlby5yZW5kZXJQYXRoLndyaXRlV2luMVYodmFsdWUpOwoJCWJyZWFrOwoJY2FzZSB0aGlzLldJTklOOgoJCXZhbHVlICY9IDB4M0YzRjsKCQl0aGlzLnZpZGVvLnJlbmRlclBhdGgud3JpdGVXaW5Jbih2YWx1ZSk7CgkJYnJlYWs7CgljYXNlIHRoaXMuV0lOT1VUOgoJCXZhbHVlICY9IDB4M0YzRjsKCQl0aGlzLnZpZGVvLnJlbmRlclBhdGgud3JpdGVXaW5PdXQodmFsdWUpOwoJCWJyZWFrOwoJY2FzZSB0aGlzLkJMRENOVDoKCQl2YWx1ZSAmPSAweDdGRkY7CgkJdGhpcy52aWRlby5yZW5kZXJQYXRoLndyaXRlQmxlbmRDb250cm9sKHZhbHVlKTsKCQlicmVhazsKCWNhc2UgdGhpcy5CTERBTFBIQToKCQl2YWx1ZSAmPSAweDFGMUY7CgkJdGhpcy52aWRlby5yZW5kZXJQYXRoLndyaXRlQmxlbmRBbHBoYSh2YWx1ZSk7CgkJYnJlYWs7CgljYXNlIHRoaXMuQkxEWToKCQl2YWx1ZSAmPSAweDAwMUY7CgkJdGhpcy52aWRlby5yZW5kZXJQYXRoLndyaXRlQmxlbmRZKHZhbHVlKTsKCQlicmVhazsKCWNhc2UgdGhpcy5NT1NBSUM6CgkJdGhpcy52aWRlby5yZW5kZXJQYXRoLndyaXRlTW9zYWljKHZhbHVlKTsKCQlicmVhazsKCgkvLyBTb3VuZAoJY2FzZSB0aGlzLlNPVU5EMUNOVF9MTzoKCQl2YWx1ZSAmPSAweDAwN0Y7CgkJdGhpcy5hdWRpby53cml0ZVNxdWFyZUNoYW5uZWxTd2VlcCgwLCB2YWx1ZSk7CgkJYnJlYWs7CgljYXNlIHRoaXMuU09VTkQxQ05UX0hJOgoJCXRoaXMuYXVkaW8ud3JpdGVTcXVhcmVDaGFubmVsRExFKDAsIHZhbHVlKTsKCQlicmVhazsKCWNhc2UgdGhpcy5TT1VORDFDTlRfWDoKCQl2YWx1ZSAmPSAweEM3RkY7CgkJdGhpcy5hdWRpby53cml0ZVNxdWFyZUNoYW5uZWxGQygwLCB2YWx1ZSk7CgkJdmFsdWUgJj0gfjB4ODAwMDsKCQlicmVhazsKCWNhc2UgdGhpcy5TT1VORDJDTlRfTE86CgkJdGhpcy5hdWRpby53cml0ZVNxdWFyZUNoYW5uZWxETEUoMSwgdmFsdWUpOwoJCWJyZWFrOwoJY2FzZSB0aGlzLlNPVU5EMkNOVF9ISToKCQl2YWx1ZSAmPSAweEM3RkY7CgkJdGhpcy5hdWRpby53cml0ZVNxdWFyZUNoYW5uZWxGQygxLCB2YWx1ZSk7CgkJdmFsdWUgJj0gfjB4ODAwMDsKCQlicmVhazsKCWNhc2UgdGhpcy5TT1VORDNDTlRfTE86CgkJdmFsdWUgJj0gMHgwMEUwOwoJCXRoaXMuYXVkaW8ud3JpdGVDaGFubmVsM0xvKHZhbHVlKTsKCQlicmVhazsKCWNhc2UgdGhpcy5TT1VORDNDTlRfSEk6CgkJdmFsdWUgJj0gMHhFMEZGOwoJCXRoaXMuYXVkaW8ud3JpdGVDaGFubmVsM0hpKHZhbHVlKTsKCQlicmVhazsKCWNhc2UgdGhpcy5TT1VORDNDTlRfWDoKCQl2YWx1ZSAmPSAweEM3RkY7CgkJdGhpcy5hdWRpby53cml0ZUNoYW5uZWwzWCh2YWx1ZSk7CgkJdmFsdWUgJj0gfjB4ODAwMDsKCQlicmVhazsKCWNhc2UgdGhpcy5TT1VORDRDTlRfTE86CgkJdmFsdWUgJj0gMHhGRjNGOwoJCXRoaXMuYXVkaW8ud3JpdGVDaGFubmVsNExFKHZhbHVlKTsKCQlicmVhazsKCWNhc2UgdGhpcy5TT1VORDRDTlRfSEk6CgkJdmFsdWUgJj0gMHhDMEZGOwoJCXRoaXMuYXVkaW8ud3JpdGVDaGFubmVsNEZDKHZhbHVlKTsKCQl2YWx1ZSAmPSB+MHg4MDAwOwoJCWJyZWFrOwoJY2FzZSB0aGlzLlNPVU5EQ05UX0xPOgoJCXZhbHVlICY9IDB4RkY3NzsKCQl0aGlzLmF1ZGlvLndyaXRlU291bmRDb250cm9sTG8odmFsdWUpOwoJCWJyZWFrOwoJY2FzZSB0aGlzLlNPVU5EQ05UX0hJOgoJCXZhbHVlICY9IDB4RkYwRjsKCQl0aGlzLmF1ZGlvLndyaXRlU291bmRDb250cm9sSGkodmFsdWUpOwoJCWJyZWFrOwoJY2FzZSB0aGlzLlNPVU5EQ05UX1g6CgkJdmFsdWUgJj0gMHgwMDgwOwoJCXRoaXMuYXVkaW8ud3JpdGVFbmFibGUodmFsdWUpOwoJCWJyZWFrOwoJY2FzZSB0aGlzLldBVkVfUkFNMF9MTzoKCWNhc2UgdGhpcy5XQVZFX1JBTTBfSEk6CgljYXNlIHRoaXMuV0FWRV9SQU0xX0xPOgoJY2FzZSB0aGlzLldBVkVfUkFNMV9ISToKCWNhc2UgdGhpcy5XQVZFX1JBTTJfTE86CgljYXNlIHRoaXMuV0FWRV9SQU0yX0hJOgoJY2FzZSB0aGlzLldBVkVfUkFNM19MTzoKCWNhc2UgdGhpcy5XQVZFX1JBTTNfSEk6CgkJdGhpcy5hdWRpby53cml0ZVdhdmVEYXRhKG9mZnNldCAtIHRoaXMuV0FWRV9SQU0wX0xPLCB2YWx1ZSwgMik7CgkJYnJlYWs7CgoJLy8gRE1BCgljYXNlIHRoaXMuRE1BMFNBRF9MTzoKCWNhc2UgdGhpcy5ETUEwREFEX0xPOgoJY2FzZSB0aGlzLkRNQTFTQURfTE86CgljYXNlIHRoaXMuRE1BMURBRF9MTzoKCWNhc2UgdGhpcy5ETUEyU0FEX0xPOgoJY2FzZSB0aGlzLkRNQTJEQURfTE86CgljYXNlIHRoaXMuRE1BM1NBRF9MTzoKCWNhc2UgdGhpcy5ETUEzREFEX0xPOgoJCXRoaXMuc3RvcmUzMihvZmZzZXQsICh0aGlzLnJlZ2lzdGVyc1sob2Zmc2V0ID4+IDEpICsgMV0gPDwgMTYpIHwgdmFsdWUpOwoJCXJldHVybjsKCgljYXNlIHRoaXMuRE1BMFNBRF9ISToKCWNhc2UgdGhpcy5ETUEwREFEX0hJOgoJY2FzZSB0aGlzLkRNQTFTQURfSEk6CgljYXNlIHRoaXMuRE1BMURBRF9ISToKCWNhc2UgdGhpcy5ETUEyU0FEX0hJOgoJY2FzZSB0aGlzLkRNQTJEQURfSEk6CgljYXNlIHRoaXMuRE1BM1NBRF9ISToKCWNhc2UgdGhpcy5ETUEzREFEX0hJOgoJCXRoaXMuc3RvcmUzMihvZmZzZXQgLSAyLCB0aGlzLnJlZ2lzdGVyc1sob2Zmc2V0ID4+IDEpIC0gMV0gfCAodmFsdWUgPDwgMTYpKTsKCQlyZXR1cm47CgoJY2FzZSB0aGlzLkRNQTBDTlRfTE86CgkJdGhpcy5jcHUuaXJxLmRtYVNldFdvcmRDb3VudCgwLCB2YWx1ZSk7CgkJYnJlYWs7CgljYXNlIHRoaXMuRE1BMENOVF9ISToKCQkvLyBUaGUgRE1BIHJlZ2lzdGVycyBuZWVkIHRvIHNldCB0aGUgdmFsdWVzIGJlZm9yZSB3cml0aW5nIHRoZSBjb250cm9sLCBhcyB3cml0aW5nIHRoZQoJCS8vIGNvbnRyb2wgY2FuIHN5bmNocm9ub3VzbHkgdHJpZ2dlciBhIERNQSB0cmFuc2ZlcgoJCXRoaXMucmVnaXN0ZXJzW29mZnNldCA+PiAxXSA9IHZhbHVlICYgMHhGRkUwOwoJCXRoaXMuY3B1LmlycS5kbWFXcml0ZUNvbnRyb2woMCwgdmFsdWUpOwoJCXJldHVybjsKCWNhc2UgdGhpcy5ETUExQ05UX0xPOgoJCXRoaXMuY3B1LmlycS5kbWFTZXRXb3JkQ291bnQoMSwgdmFsdWUpOwoJCWJyZWFrOwoJY2FzZSB0aGlzLkRNQTFDTlRfSEk6CgkJdGhpcy5yZWdpc3RlcnNbb2Zmc2V0ID4+IDFdID0gdmFsdWUgJiAweEZGRTA7CgkJdGhpcy5jcHUuaXJxLmRtYVdyaXRlQ29udHJvbCgxLCB2YWx1ZSk7CgkJcmV0dXJuOwoJY2FzZSB0aGlzLkRNQTJDTlRfTE86CgkJdGhpcy5jcHUuaXJxLmRtYVNldFdvcmRDb3VudCgyLCB2YWx1ZSk7CgkJYnJlYWs7CgljYXNlIHRoaXMuRE1BMkNOVF9ISToKCQl0aGlzLnJlZ2lzdGVyc1tvZmZzZXQgPj4gMV0gPSB2YWx1ZSAmIDB4RkZFMDsKCQl0aGlzLmNwdS5pcnEuZG1hV3JpdGVDb250cm9sKDIsIHZhbHVlKTsKCQlyZXR1cm47CgljYXNlIHRoaXMuRE1BM0NOVF9MTzoKCQl0aGlzLmNwdS5pcnEuZG1hU2V0V29yZENvdW50KDMsIHZhbHVlKTsKCQlicmVhazsKCWNhc2UgdGhpcy5ETUEzQ05UX0hJOgoJCXRoaXMucmVnaXN0ZXJzW29mZnNldCA+PiAxXSA9IHZhbHVlICYgMHhGRkUwOwoJCXRoaXMuY3B1LmlycS5kbWFXcml0ZUNvbnRyb2woMywgdmFsdWUpOwoJCXJldHVybjsKCgkvLyBUaW1lcnMKCWNhc2UgdGhpcy5UTTBDTlRfTE86CgkJdGhpcy5jcHUuaXJxLnRpbWVyU2V0UmVsb2FkKDAsIHZhbHVlKTsKCQlyZXR1cm47CgljYXNlIHRoaXMuVE0xQ05UX0xPOgoJCXRoaXMuY3B1LmlycS50aW1lclNldFJlbG9hZCgxLCB2YWx1ZSk7CgkJcmV0dXJuOwoJY2FzZSB0aGlzLlRNMkNOVF9MTzoKCQl0aGlzLmNwdS5pcnEudGltZXJTZXRSZWxvYWQoMiwgdmFsdWUpOwoJCXJldHVybjsKCWNhc2UgdGhpcy5UTTNDTlRfTE86CgkJdGhpcy5jcHUuaXJxLnRpbWVyU2V0UmVsb2FkKDMsIHZhbHVlKTsKCQlyZXR1cm47CgoJY2FzZSB0aGlzLlRNMENOVF9ISToKCQl2YWx1ZSAmPSAweDAwQzcKCQl0aGlzLmNwdS5pcnEudGltZXJXcml0ZUNvbnRyb2woMCwgdmFsdWUpOwoJCWJyZWFrOwoJY2FzZSB0aGlzLlRNMUNOVF9ISToKCQl2YWx1ZSAmPSAweDAwQzcKCQl0aGlzLmNwdS5pcnEudGltZXJXcml0ZUNvbnRyb2woMSwgdmFsdWUpOwoJCWJyZWFrOwoJY2FzZSB0aGlzLlRNMkNOVF9ISToKCQl2YWx1ZSAmPSAweDAwQzcKCQl0aGlzLmNwdS5pcnEudGltZXJXcml0ZUNvbnRyb2woMiwgdmFsdWUpOwoJCWJyZWFrOwoJY2FzZSB0aGlzLlRNM0NOVF9ISToKCQl2YWx1ZSAmPSAweDAwQzcKCQl0aGlzLmNwdS5pcnEudGltZXJXcml0ZUNvbnRyb2woMywgdmFsdWUpOwoJCWJyZWFrOwoKCS8vIFNJTwoJY2FzZSB0aGlzLlNJT01VTFRJMDoKIAljYXNlIHRoaXMuU0lPTVVMVEkxOgogCWNhc2UgdGhpcy5TSU9NVUxUSTI6CiAJY2FzZSB0aGlzLlNJT01VTFRJMzoKIAljYXNlIHRoaXMuU0lPREFUQTg6CiAJCXRoaXMuU1RVQl9SRUcoJ1NJTycsIG9mZnNldCk7CiAJCWJyZWFrOwoJY2FzZSB0aGlzLlJDTlQ6CgkJdGhpcy5zaW8uc2V0TW9kZSgoKHZhbHVlID4+IDEyKSAmIDB4QykgfCAoKHRoaXMucmVnaXN0ZXJzW3RoaXMuU0lPQ05UID4+IDFdID4+IDEyKSAmIDB4MykpOwoJCXRoaXMuc2lvLndyaXRlUkNOVCh2YWx1ZSk7CgkJYnJlYWs7CgljYXNlIHRoaXMuU0lPQ05UOgoJCXRoaXMuc2lvLnNldE1vZGUoKCh2YWx1ZSA+PiAxMikgJiAweDMpIHwgKCh0aGlzLnJlZ2lzdGVyc1t0aGlzLlJDTlQgPj4gMV0gPj4gMTIpICYgMHhDKSk7CgkJdGhpcy5zaW8ud3JpdGVTSU9DTlQodmFsdWUpOwoJCXJldHVybjsKCWNhc2UgdGhpcy5KT1lDTlQ6CgljYXNlIHRoaXMuSk9ZU1RBVDoKCQl0aGlzLlNUVUJfUkVHKCdKT1knLCBvZmZzZXQpOwoJCWJyZWFrOwoKCS8vIE1pc2MKCWNhc2UgdGhpcy5JRToKCQl2YWx1ZSAmPSAweDNGRkY7CgkJdGhpcy5jcHUuaXJxLnNldEludGVycnVwdHNFbmFibGVkKHZhbHVlKTsKCQlicmVhazsKCWNhc2UgdGhpcy5JRjoKCQl0aGlzLmNwdS5pcnEuZGlzbWlzc0lSUXModmFsdWUpOwoJCXJldHVybjsKCWNhc2UgdGhpcy5XQUlUQ05UOgoJCXZhbHVlICY9IDB4REZGRjsKCQl0aGlzLmNwdS5tbXUuYWRqdXN0VGltaW5ncyh2YWx1ZSk7CgkJYnJlYWs7CgljYXNlIHRoaXMuSU1FOgoJCXZhbHVlICY9IDB4MDAwMTsKCQl0aGlzLmNwdS5pcnEubWFzdGVyRW5hYmxlKHZhbHVlKTsKCQlicmVhazsKCWRlZmF1bHQ6CgkJdGhpcy5TVFVCX1JFRygnSS9PJywgb2Zmc2V0KTsKCX0KCXRoaXMucmVnaXN0ZXJzW29mZnNldCA+PiAxXSA9IHZhbHVlOwp9OwoKR2FtZUJveUFkdmFuY2VJTy5wcm90b3R5cGUuc3RvcmUzMiA9IGZ1bmN0aW9uKG9mZnNldCwgdmFsdWUpIHsKCXN3aXRjaCAob2Zmc2V0KSB7CgljYXNlIHRoaXMuQkcyWF9MTzoKCQl2YWx1ZSAmPSAweDBGRkZGRkZGOwoJCXRoaXMudmlkZW8ucmVuZGVyUGF0aC53cml0ZUJhY2tncm91bmRSZWZYKDIsIHZhbHVlKTsKCQlicmVhazsKCWNhc2UgdGhpcy5CRzJZX0xPOgoJCXZhbHVlICY9IDB4MEZGRkZGRkY7CgkJdGhpcy52aWRlby5yZW5kZXJQYXRoLndyaXRlQmFja2dyb3VuZFJlZlkoMiwgdmFsdWUpOwoJCWJyZWFrOwoJY2FzZSB0aGlzLkJHM1hfTE86CgkJdmFsdWUgJj0gMHgwRkZGRkZGRjsKCQl0aGlzLnZpZGVvLnJlbmRlclBhdGgud3JpdGVCYWNrZ3JvdW5kUmVmWCgzLCB2YWx1ZSk7CgkJYnJlYWs7CgljYXNlIHRoaXMuQkczWV9MTzoKCQl2YWx1ZSAmPSAweDBGRkZGRkZGOwoJCXRoaXMudmlkZW8ucmVuZGVyUGF0aC53cml0ZUJhY2tncm91bmRSZWZZKDMsIHZhbHVlKTsKCQlicmVhazsKCWNhc2UgdGhpcy5ETUEwU0FEX0xPOgoJCXRoaXMuY3B1LmlycS5kbWFTZXRTb3VyY2VBZGRyZXNzKDAsIHZhbHVlKTsKCQlicmVhazsKCWNhc2UgdGhpcy5ETUEwREFEX0xPOgoJCXRoaXMuY3B1LmlycS5kbWFTZXREZXN0QWRkcmVzcygwLCB2YWx1ZSk7CgkJYnJlYWs7CgljYXNlIHRoaXMuRE1BMVNBRF9MTzoKCQl0aGlzLmNwdS5pcnEuZG1hU2V0U291cmNlQWRkcmVzcygxLCB2YWx1ZSk7CgkJYnJlYWs7CgljYXNlIHRoaXMuRE1BMURBRF9MTzoKCQl0aGlzLmNwdS5pcnEuZG1hU2V0RGVzdEFkZHJlc3MoMSwgdmFsdWUpOwoJCWJyZWFrOwoJY2FzZSB0aGlzLkRNQTJTQURfTE86CgkJdGhpcy5jcHUuaXJxLmRtYVNldFNvdXJjZUFkZHJlc3MoMiwgdmFsdWUpOwoJCWJyZWFrOwoJY2FzZSB0aGlzLkRNQTJEQURfTE86CgkJdGhpcy5jcHUuaXJxLmRtYVNldERlc3RBZGRyZXNzKDIsIHZhbHVlKTsKCQlicmVhazsKCWNhc2UgdGhpcy5ETUEzU0FEX0xPOgoJCXRoaXMuY3B1LmlycS5kbWFTZXRTb3VyY2VBZGRyZXNzKDMsIHZhbHVlKTsKCQlicmVhazsKCWNhc2UgdGhpcy5ETUEzREFEX0xPOgoJCXRoaXMuY3B1LmlycS5kbWFTZXREZXN0QWRkcmVzcygzLCB2YWx1ZSk7CgkJYnJlYWs7CgljYXNlIHRoaXMuRklGT19BX0xPOgoJCXRoaXMuYXVkaW8uYXBwZW5kVG9GaWZvQSh2YWx1ZSk7CgkJcmV0dXJuOwoJY2FzZSB0aGlzLkZJRk9fQl9MTzoKCQl0aGlzLmF1ZGlvLmFwcGVuZFRvRmlmb0IodmFsdWUpOwoJCXJldHVybjsKCgkvLyBIaWdoIGJpdHMgb2YgdGhpcyB3cml0ZSBzaG91bGQgYmUgaWdub3JlZAoJY2FzZSB0aGlzLklNRToKCQl0aGlzLnN0b3JlMTYob2Zmc2V0LCB2YWx1ZSAmIDB4RkZGRik7CgkJcmV0dXJuOwoJY2FzZSB0aGlzLkpPWV9SRUNWOgoJY2FzZSB0aGlzLkpPWV9UUkFOUzoKCQl0aGlzLlNUVUJfUkVHKCdKT1knLCBvZmZzZXQpOwoJCXJldHVybjsKCWRlZmF1bHQ6CgkJdGhpcy5zdG9yZTE2KG9mZnNldCwgdmFsdWUgJiAweEZGRkYpOwoJCXRoaXMuc3RvcmUxNihvZmZzZXQgfCAyLCB2YWx1ZSA+Pj4gMTYpOwoJCXJldHVybjsKCX0KCgl0aGlzLnJlZ2lzdGVyc1tvZmZzZXQgPj4gMV0gPSB2YWx1ZSAmIDB4RkZGRjsKCXRoaXMucmVnaXN0ZXJzWyhvZmZzZXQgPj4gMSkgKyAxXSA9IHZhbHVlID4+PiAxNjsKfTsKCkdhbWVCb3lBZHZhbmNlSU8ucHJvdG90eXBlLmludmFsaWRhdGVQYWdlID0gZnVuY3Rpb24oYWRkcmVzcykge307CgpHYW1lQm95QWR2YW5jZUlPLnByb3RvdHlwZS5TVFVCX1JFRyA9IGZ1bmN0aW9uKHR5cGUsIG9mZnNldCkgewoJdGhpcy5jb3JlLlNUVUIoJ1VuaW1wbGVtZW50ZWQgJyArIHR5cGUgKyAnIHJlZ2lzdGVyIHdyaXRlOiAnICsgb2Zmc2V0LnRvU3RyaW5nKDE2KSk7Cn07Cg=="></script>
<script src="data:@file/javascript;base64,dmFyIGFkOwpmdW5jdGlvbiBHYW1lQm95QWR2YW5jZUF1ZGlvKCkgewoJd2luZG93LkF1ZGlvQ29udGV4dCA9IHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dDsKCWlmICh3aW5kb3cuQXVkaW9Db250ZXh0KSB7CgkJdmFyIHNlbGYgPSB0aGlzOwoJCXRoaXMuY29udGV4dCA9IG5ldyBBdWRpb0NvbnRleHQoKTsKCQlhZCA9IHRoaXMuY29udGV4dDsKCQl0aGlzLmJ1ZmZlclNpemUgPSAwOwoJCXRoaXMuYnVmZmVyU2l6ZSA9IDQwOTY7CgkJdGhpcy5tYXhTYW1wbGVzID0gdGhpcy5idWZmZXJTaXplIDw8IDI7CgkJdGhpcy5idWZmZXJzID0gW25ldyBGbG9hdDMyQXJyYXkodGhpcy5tYXhTYW1wbGVzKSwgbmV3IEZsb2F0MzJBcnJheSh0aGlzLm1heFNhbXBsZXMpXTsKCQl0aGlzLnNhbXBsZU1hc2sgPSB0aGlzLm1heFNhbXBsZXMgLSAxOwoJCWlmICh0aGlzLmNvbnRleHQuY3JlYXRlU2NyaXB0UHJvY2Vzc29yKSB7CgkJCXRoaXMuanNBdWRpbyA9IHRoaXMuY29udGV4dC5jcmVhdGVTY3JpcHRQcm9jZXNzb3IodGhpcy5idWZmZXJTaXplKTsKCQl9IGVsc2UgewoJCQl0aGlzLmpzQXVkaW8gPSB0aGlzLmNvbnRleHQuY3JlYXRlSmF2YVNjcmlwdE5vZGUodGhpcy5idWZmZXJTaXplKTsKCQl9CgkJdGhpcy5qc0F1ZGlvLm9uYXVkaW9wcm9jZXNzID0gZnVuY3Rpb24oZSkgeyBzZWxmLmF1ZGlvUHJvY2VzcyhlKSB9OwoJfSBlbHNlIHsKCQl0aGlzLmNvbnRleHQgPSBudWxsOwoJfQoKCXRoaXMubWFzdGVyRW5hYmxlID0gdHJ1ZTsKCXRoaXMubWFzdGVyVm9sdW1lID0gMS4wOwoKCXRoaXMuU09VTkRfTUFYID0gMHg0MDA7Cgl0aGlzLkZJRk9fTUFYID0gMHgyMDA7Cgl0aGlzLlBTR19NQVggPSAweDA4MDsKfTsKCkdhbWVCb3lBZHZhbmNlQXVkaW8ucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7Cgl0aGlzLmZpZm9BID0gW107Cgl0aGlzLmZpZm9CID0gW107Cgl0aGlzLmZpZm9BU2FtcGxlID0gMDsKCXRoaXMuZmlmb0JTYW1wbGUgPSAwOwoKCXRoaXMuZW5hYmxlZCA9IGZhbHNlOwoJaWYgKHRoaXMuY29udGV4dCkgewoJCXRyeSB7CgkJCXRoaXMuanNBdWRpby5kaXNjb25uZWN0KHRoaXMuY29udGV4dC5kZXN0aW5hdGlvbik7CgkJfSBjYXRjaCAoZSkgewoJCX0KCX0KCgl0aGlzLmVuYWJsZUNoYW5uZWwzID0gZmFsc2U7Cgl0aGlzLmVuYWJsZUNoYW5uZWw0ID0gZmFsc2U7Cgl0aGlzLmVuYWJsZUNoYW5uZWxBID0gZmFsc2U7Cgl0aGlzLmVuYWJsZUNoYW5uZWxCID0gZmFsc2U7Cgl0aGlzLmVuYWJsZVJpZ2h0Q2hhbm5lbEEgPSBmYWxzZTsKCXRoaXMuZW5hYmxlTGVmdENoYW5uZWxBID0gZmFsc2U7Cgl0aGlzLmVuYWJsZVJpZ2h0Q2hhbm5lbEIgPSBmYWxzZTsKCXRoaXMuZW5hYmxlTGVmdENoYW5uZWxCID0gZmFsc2U7CgoJdGhpcy5wbGF5aW5nQ2hhbm5lbDMgPSBmYWxzZTsKCXRoaXMucGxheWluZ0NoYW5uZWw0ID0gZmFsc2U7CgoJdGhpcy52b2x1bWVMZWZ0ID0gMDsKCXRoaXMudm9sdW1lUmlnaHQgPSAwOwoJdGhpcy5yYXRpb0NoYW5uZWxBID0gMTsKCXRoaXMucmF0aW9DaGFubmVsQiA9IDE7Cgl0aGlzLmVuYWJsZWRMZWZ0ID0gMDsKCXRoaXMuZW5hYmxlZFJpZ2h0ID0gMDsKCgl0aGlzLmRtYUEgPSAtMTsKCXRoaXMuZG1hQiA9IC0xOwoJdGhpcy5zb3VuZFRpbWVyQSA9IDA7Cgl0aGlzLnNvdW5kVGltZXJCID0gMDsKCgl0aGlzLnNvdW5kUmF0aW8gPSAxOwoJdGhpcy5zb3VuZEJpYXMgPSAweDIwMDsKCgl0aGlzLnNxdWFyZUNoYW5uZWxzID0gbmV3IEFycmF5KCk7Cglmb3IgKHZhciBpID0gMDsgaSA8IDI7ICsraSkgewoJCXRoaXMuc3F1YXJlQ2hhbm5lbHNbaV0gPSB7CgkJCWVuYWJsZWQ6IGZhbHNlLAoJCQlwbGF5aW5nOiBmYWxzZSwKCQkJc2FtcGxlOiAwLAoJCQlkdXR5OiAwLjUsCgkJCWluY3JlbWVudDogMCwKCQkJc3RlcDogMCwKCQkJaW5pdGlhbFZvbHVtZTogMCwKCQkJdm9sdW1lOiAwLAoJCQlmcmVxdWVuY3k6IDAsCgkJCWludGVydmFsOiAwLAoJCQlzd2VlcFN0ZXBzOiAwLAoJCQlzd2VlcEluY3JlbWVudDogMCwKCQkJc3dlZXBJbnRlcnZhbDogMCwKCQkJZG9Td2VlcDogZmFsc2UsCgkJCXJhaXNlOiAwLAoJCQlsb3dlcjogMCwKCQkJbmV4dFN0ZXA6IDAsCgkJCXRpbWVkOiBmYWxzZSwKCQkJbGVuZ3RoOiAwLAoJCQllbmQ6IDAKCQl9Cgl9CgoJdGhpcy53YXZlRGF0YSA9IG5ldyBVaW50OEFycmF5KDMyKTsKCXRoaXMuY2hhbm5lbDNEaW1lbnNpb24gPSAwOwoJdGhpcy5jaGFubmVsM0JhbmsgPSAwOwoJdGhpcy5jaGFubmVsM1ZvbHVtZSA9IDA7Cgl0aGlzLmNoYW5uZWwzSW50ZXJ2YWwgPSAwOwoJdGhpcy5jaGFubmVsM05leHQgPSAwOwoJdGhpcy5jaGFubmVsM0xlbmd0aCA9IDA7Cgl0aGlzLmNoYW5uZWwzVGltZWQgPSBmYWxzZTsKCXRoaXMuY2hhbm5lbDNFbmQgPSAwOwoJdGhpcy5jaGFubmVsM1BvaW50ZXIgPTA7Cgl0aGlzLmNoYW5uZWwzU2FtcGxlID0gMDsKCgl0aGlzLmNwdUZyZXF1ZW5jeSA9IHRoaXMuY29yZS5pcnEuRlJFUVVFTkNZOwoKCXRoaXMuY2hhbm5lbDQgPSB7CgkJc2FtcGxlOiAwLAoJCWxmc3I6IDAsCgkJd2lkdGg6IDE1LAoJCWludGVydmFsOiB0aGlzLmNwdUZyZXF1ZW5jeSAvIDUyNDI4OCwKCQlpbmNyZW1lbnQ6IDAsCgkJc3RlcDogMCwKCQlpbml0aWFsVm9sdW1lOiAwLAoJCXZvbHVtZTogMCwKCQluZXh0U3RlcDogMCwKCQl0aW1lZDogZmFsc2UsCgkJbGVuZ3RoOiAwLAoJCWVuZDogMAoJfTsKCgl0aGlzLm5leHRFdmVudCA9IDA7CgoJdGhpcy5uZXh0U2FtcGxlID0gMDsKCXRoaXMub3V0cHV0UG9pbnRlciA9IDA7Cgl0aGlzLnNhbXBsZVBvaW50ZXIgPSAwOwoKCXRoaXMuYmFja3VwID0gMDsKCXRoaXMudG90YWxTYW1wbGVzID0gMDsKCgl0aGlzLnNhbXBsZVJhdGUgPSAzMjc2ODsKCXRoaXMuc2FtcGxlSW50ZXJ2YWwgPSB0aGlzLmNwdUZyZXF1ZW5jeSAvIHRoaXMuc2FtcGxlUmF0ZTsKCXRoaXMucmVzYW1wbGVSYXRpbyA9IDE7CglpZiAodGhpcy5jb250ZXh0KSB7CgkJdGhpcy5yZXNhbXBsZVJhdGlvID0gdGhpcy5zYW1wbGVSYXRlIC8gdGhpcy5jb250ZXh0LnNhbXBsZVJhdGU7Cgl9CgoJdGhpcy53cml0ZVNxdWFyZUNoYW5uZWxGQygwLCAwKTsKCXRoaXMud3JpdGVTcXVhcmVDaGFubmVsRkMoMSwgMCk7Cgl0aGlzLndyaXRlQ2hhbm5lbDRGQygwKTsKfTsKCkdhbWVCb3lBZHZhbmNlQXVkaW8ucHJvdG90eXBlLmZyZWV6ZSA9IGZ1bmN0aW9uKCkgewoJcmV0dXJuIHsKCQluZXh0U2FtcGxlOiB0aGlzLm5leHRTYW1wbGUKCX07Cn07CgpHYW1lQm95QWR2YW5jZUF1ZGlvLnByb3RvdHlwZS5kZWZyb3N0ID0gZnVuY3Rpb24oZnJvc3QpIHsKCXRoaXMubmV4dFNhbXBsZSA9IGZyb3N0Lm5leHRTYW1wbGU7Cn07CgpHYW1lQm95QWR2YW5jZUF1ZGlvLnByb3RvdHlwZS5wYXVzZSA9IGZ1bmN0aW9uKHBhdXNlZCkgewoJaWYgKHRoaXMuY29udGV4dCkgewoJCWlmIChwYXVzZWQpIHsKCQkJdHJ5IHsKCQkJCXRoaXMuanNBdWRpby5kaXNjb25uZWN0KHRoaXMuY29udGV4dC5kZXN0aW5hdGlvbik7CgkJCX0gY2F0Y2ggKGUpIHsKCQkJCS8vIFNpZ2gKCQkJfQoJCX0gZWxzZSBpZiAodGhpcy5lbmFibGVkKSB7CgkJCXRoaXMuanNBdWRpby5jb25uZWN0KHRoaXMuY29udGV4dC5kZXN0aW5hdGlvbik7CgkJfQoJfQp9OwoKR2FtZUJveUFkdmFuY2VBdWRpby5wcm90b3R5cGUudXBkYXRlVGltZXJzID0gZnVuY3Rpb24oKSB7Cgl2YXIgY3ljbGVzID0gdGhpcy5jcHUuY3ljbGVzOwoJaWYgKCF0aGlzLmVuYWJsZWQgfHwgKGN5Y2xlcyA8IHRoaXMubmV4dEV2ZW50ICYmIGN5Y2xlcyA8IHRoaXMubmV4dFNhbXBsZSkpIHsKCQlyZXR1cm47Cgl9CgoJaWYgKGN5Y2xlcyA+PSB0aGlzLm5leHRFdmVudCkgewoJCXZhciBjaGFubmVsID0gdGhpcy5zcXVhcmVDaGFubmVsc1swXTsKCQl0aGlzLm5leHRFdmVudCA9IEluZmluaXR5OwoJCWlmIChjaGFubmVsLnBsYXlpbmcpIHsKCQkJdGhpcy51cGRhdGVTcXVhcmVDaGFubmVsKGNoYW5uZWwsIGN5Y2xlcyk7CgkJfQoKCQljaGFubmVsID0gdGhpcy5zcXVhcmVDaGFubmVsc1sxXTsKCQlpZiAoY2hhbm5lbC5wbGF5aW5nKSB7CgkJCXRoaXMudXBkYXRlU3F1YXJlQ2hhbm5lbChjaGFubmVsLCBjeWNsZXMpOwoJCX0KCgkJaWYgKHRoaXMuZW5hYmxlQ2hhbm5lbDMgJiYgdGhpcy5wbGF5aW5nQ2hhbm5lbDMpIHsKCQkJaWYgKGN5Y2xlcyA+PSB0aGlzLmNoYW5uZWwzTmV4dCkgewoJCQkJaWYgKHRoaXMuY2hhbm5lbDNXcml0ZSkgewoJCQkJCXZhciBzYW1wbGUgPSB0aGlzLndhdmVEYXRhW3RoaXMuY2hhbm5lbDNQb2ludGVyID4+IDFdOwoJCQkJCXRoaXMuY2hhbm5lbDNTYW1wbGUgPSAoKChzYW1wbGUgPj4gKCh0aGlzLmNoYW5uZWwzUG9pbnRlciAmIDEpIDw8IDIpKSAmIDB4RikgLSAweDgpIC8gODsKCQkJCQl0aGlzLmNoYW5uZWwzUG9pbnRlciA9ICh0aGlzLmNoYW5uZWwzUG9pbnRlciArIDEpOwoJCQkJCWlmICh0aGlzLmNoYW5uZWwzRGltZW5zaW9uICYmIHRoaXMuY2hhbm5lbDNQb2ludGVyID49IDY0KSB7CgkJCQkJCXRoaXMuY2hhbm5lbDNQb2ludGVyIC09IDY0OwoJCQkJCX0gZWxzZSBpZiAoIXRoaXMuY2hhbm5lbDNCYW5rICYmIHRoaXMuY2hhbm5lbDNQb2ludGVyID49IDMyKSB7CgkJCQkJCXRoaXMuY2hhbm5lbDNQb2ludGVyIC09IDMyOwoJCQkJCX0gZWxzZSBpZiAodGhpcy5jaGFubmVsM1BvaW50ZXIgPj0gNjQpIHsKCQkJCQkJdGhpcy5jaGFubmVsM1BvaW50ZXIgLT0gMzI7CgkJCQkJfQoJCQkJfQoJCQkJdGhpcy5jaGFubmVsM05leHQgKz0gdGhpcy5jaGFubmVsM0ludGVydmFsOwoJCQkJaWYgKHRoaXMuY2hhbm5lbDNJbnRlcnZhbCAmJiB0aGlzLm5leHRFdmVudCA+IHRoaXMuY2hhbm5lbDNOZXh0KSB7CgkJCQkJdGhpcy5uZXh0RXZlbnQgPSB0aGlzLmNoYW5uZWwzTmV4dDsKCQkJCX0KCQkJfQoJCQlpZiAodGhpcy5jaGFubmVsM1RpbWVkICYmIGN5Y2xlcyA+PSB0aGlzLmNoYW5uZWwzRW5kKSB7CgkJCQl0aGlzLnBsYXlpbmdDaGFubmVsMyA9IGZhbHNlOwoJCQl9CgkJfQoKCQlpZiAodGhpcy5lbmFibGVDaGFubmVsNCAmJiB0aGlzLnBsYXlpbmdDaGFubmVsNCkgewoJCQlpZiAodGhpcy5jaGFubmVsNC50aW1lZCAmJiBjeWNsZXMgPj0gdGhpcy5jaGFubmVsNC5lbmQpIHsKCQkJCXRoaXMucGxheWluZ0NoYW5uZWw0ID0gZmFsc2U7CgkJCX0gZWxzZSB7CgkJCQlpZiAoY3ljbGVzID49IHRoaXMuY2hhbm5lbDQubmV4dCkgewoJCQkJCXRoaXMuY2hhbm5lbDQubGZzciA+Pj0gMTsKCQkJCQl2YXIgc2FtcGxlID0gdGhpcy5jaGFubmVsNC5sZnNyICYgMTsKCQkJCQl0aGlzLmNoYW5uZWw0Lmxmc3IgfD0gKCgodGhpcy5jaGFubmVsNC5sZnNyID4+IDEpICYgMSkgXiBzYW1wbGUpIDw8ICh0aGlzLmNoYW5uZWw0LndpZHRoIC0gMSk7CgkJCQkJdGhpcy5jaGFubmVsNC5uZXh0ICs9IHRoaXMuY2hhbm5lbDQuaW50ZXJ2YWw7CgkJCQkJdGhpcy5jaGFubmVsNC5zYW1wbGUgPSAoc2FtcGxlIC0gMC41KSAqIDIgKiB0aGlzLmNoYW5uZWw0LnZvbHVtZTsKCQkJCX0KCQkJCXRoaXMudXBkYXRlRW52ZWxvcGUodGhpcy5jaGFubmVsNCwgY3ljbGVzKTsKCQkJCWlmICh0aGlzLm5leHRFdmVudCA+IHRoaXMuY2hhbm5lbDQubmV4dCkgewoJCQkJCXRoaXMubmV4dEV2ZW50ID0gdGhpcy5jaGFubmVsNC5uZXh0OwoJCQkJfQoJCQkJaWYgKHRoaXMuY2hhbm5lbDQudGltZWQgJiYgdGhpcy5uZXh0RXZlbnQgPiB0aGlzLmNoYW5uZWw0LmVuZCkgewoJCQkJCXRoaXMubmV4dEV2ZW50ID0gdGhpcy5jaGFubmVsNC5lbmQ7CgkJCQl9CgkJCX0KCQl9Cgl9CgoJaWYgKGN5Y2xlcyA+PSB0aGlzLm5leHRTYW1wbGUpIHsKCQl0aGlzLnNhbXBsZSgpOwoJCXRoaXMubmV4dFNhbXBsZSArPSB0aGlzLnNhbXBsZUludGVydmFsOwoJfQoKCXRoaXMubmV4dEV2ZW50ID0gTWF0aC5jZWlsKHRoaXMubmV4dEV2ZW50KTsKCWlmICgodGhpcy5uZXh0RXZlbnQgPCBjeWNsZXMpIHx8ICh0aGlzLm5leHRTYW1wbGUgPCBjeWNsZXMpKSB7CgkJLy8gU1RNIGluc3RydWN0aW9ucyBtYXkgdGFrZSBhIGxvbmcgdGltZQoJCXRoaXMudXBkYXRlVGltZXJzKCk7Cgl9Cn07CgpHYW1lQm95QWR2YW5jZUF1ZGlvLnByb3RvdHlwZS53cml0ZUVuYWJsZSA9IGZ1bmN0aW9uKHZhbHVlKSB7Cgl0aGlzLmVuYWJsZWQgPSAhIXZhbHVlOwoJdGhpcy5uZXh0RXZlbnQgPSB0aGlzLmNwdS5jeWNsZXM7Cgl0aGlzLm5leHRTYW1wbGUgPSB0aGlzLm5leHRFdmVudDsKCXRoaXMudXBkYXRlVGltZXJzKCk7Cgl0aGlzLmNvcmUuaXJxLnBvbGxOZXh0RXZlbnQoKTsKCWlmICh0aGlzLmNvbnRleHQpIHsKCQlpZiAodmFsdWUpIHsKCQkJdGhpcy5qc0F1ZGlvLmNvbm5lY3QodGhpcy5jb250ZXh0LmRlc3RpbmF0aW9uKTsKCQl9IGVsc2UgewoJCQl0cnkgewoJCQkJdGhpcy5qc0F1ZGlvLmRpc2Nvbm5lY3QodGhpcy5jb250ZXh0LmRlc3RpbmF0aW9uKTsKCQkJfSBjYXRjaCAoZSkgewoJCQl9CgkJfQoJfQp9OwoKR2FtZUJveUFkdmFuY2VBdWRpby5wcm90b3R5cGUud3JpdGVTb3VuZENvbnRyb2xMbyA9IGZ1bmN0aW9uKHZhbHVlKSB7Cgl0aGlzLm1hc3RlclZvbHVtZUxlZnQgPSB2YWx1ZSAmIDB4NzsKCXRoaXMubWFzdGVyVm9sdW1lUmlnaHQgPSAodmFsdWUgPj4gNCkgJiAweDc7Cgl0aGlzLmVuYWJsZWRMZWZ0ID0gKHZhbHVlID4+IDgpICYgMHhGOwoJdGhpcy5lbmFibGVkUmlnaHQgPSAodmFsdWUgPj4gMTIpICYgMHhGOwoKCXRoaXMuc2V0U3F1YXJlQ2hhbm5lbEVuYWJsZWQodGhpcy5zcXVhcmVDaGFubmVsc1swXSwgKHRoaXMuZW5hYmxlZExlZnQgfCB0aGlzLmVuYWJsZWRSaWdodCkgJiAweDEpOwoJdGhpcy5zZXRTcXVhcmVDaGFubmVsRW5hYmxlZCh0aGlzLnNxdWFyZUNoYW5uZWxzWzFdLCAodGhpcy5lbmFibGVkTGVmdCB8IHRoaXMuZW5hYmxlZFJpZ2h0KSAmIDB4Mik7Cgl0aGlzLmVuYWJsZUNoYW5uZWwzID0gKHRoaXMuZW5hYmxlZExlZnQgfCB0aGlzLmVuYWJsZWRSaWdodCkgJiAweDQ7Cgl0aGlzLnNldENoYW5uZWw0RW5hYmxlZCgodGhpcy5lbmFibGVkTGVmdCB8IHRoaXMuZW5hYmxlZFJpZ2h0KSAmIDB4OCk7CgoJdGhpcy51cGRhdGVUaW1lcnMoKTsKCXRoaXMuY29yZS5pcnEucG9sbE5leHRFdmVudCgpOwp9OwoKR2FtZUJveUFkdmFuY2VBdWRpby5wcm90b3R5cGUud3JpdGVTb3VuZENvbnRyb2xIaSA9IGZ1bmN0aW9uKHZhbHVlKSB7Cglzd2l0Y2ggKHZhbHVlICYgMHgwMDAzKSB7CgljYXNlIDA6CgkJdGhpcy5zb3VuZFJhdGlvID0gMC4yNTsKCQlicmVhazsKCWNhc2UgMToKCQl0aGlzLnNvdW5kUmF0aW8gPSAwLjUwOwoJCWJyZWFrOwoJY2FzZSAyOgoJCXRoaXMuc291bmRSYXRpbyA9IDE7CgkJYnJlYWs7Cgl9Cgl0aGlzLnJhdGlvQ2hhbm5lbEEgPSAoKCh2YWx1ZSAmIDB4MDAwNCkgPj4gMikgKyAxKSAqIDAuNTsKCXRoaXMucmF0aW9DaGFubmVsQiA9ICgoKHZhbHVlICYgMHgwMDA4KSA+PiAzKSArIDEpICogMC41OwoKCXRoaXMuZW5hYmxlUmlnaHRDaGFubmVsQSA9IHZhbHVlICYgMHgwMTAwOwoJdGhpcy5lbmFibGVMZWZ0Q2hhbm5lbEEgPSB2YWx1ZSAmIDB4MDIwMDsKCXRoaXMuZW5hYmxlQ2hhbm5lbEEgID0gdmFsdWUgJiAweDAzMDA7Cgl0aGlzLnNvdW5kVGltZXJBID0gdmFsdWUgJiAweDA0MDA7CglpZiAodmFsdWUgJiAweDA4MDApIHsKCQl0aGlzLmZpZm9BID0gW107Cgl9Cgl0aGlzLmVuYWJsZVJpZ2h0Q2hhbm5lbEIgPSB2YWx1ZSAmIDB4MTAwMDsKCXRoaXMuZW5hYmxlTGVmdENoYW5uZWxCID0gdmFsdWUgJiAweDIwMDA7Cgl0aGlzLmVuYWJsZUNoYW5uZWxCICA9IHZhbHVlICYgMHgzMDAwOwoJdGhpcy5zb3VuZFRpbWVyQiA9IHZhbHVlICYgMHg0MDAwOwoJaWYgKHZhbHVlICYgMHg4MDAwKSB7CgkJdGhpcy5maWZvQiA9IFtdOwoJfQp9OwoKR2FtZUJveUFkdmFuY2VBdWRpby5wcm90b3R5cGUucmVzZXRTcXVhcmVDaGFubmVsID0gZnVuY3Rpb24oY2hhbm5lbCkgewoJaWYgKGNoYW5uZWwuc3RlcCkgewoJCWNoYW5uZWwubmV4dFN0ZXAgPSB0aGlzLmNwdS5jeWNsZXMgKyBjaGFubmVsLnN0ZXA7Cgl9CglpZiAoY2hhbm5lbC5lbmFibGVkICYmICFjaGFubmVsLnBsYXlpbmcpIHsKCQljaGFubmVsLnJhaXNlID0gdGhpcy5jcHUuY3ljbGVzOwoJCWNoYW5uZWwubG93ZXIgPSBjaGFubmVsLnJhaXNlICsgY2hhbm5lbC5kdXR5ICogY2hhbm5lbC5pbnRlcnZhbDsKCQljaGFubmVsLmVuZCA9IHRoaXMuY3B1LmN5Y2xlcyArIGNoYW5uZWwubGVuZ3RoOwoJCXRoaXMubmV4dEV2ZW50ID0gdGhpcy5jcHUuY3ljbGVzOwoJfQoJY2hhbm5lbC5wbGF5aW5nID0gY2hhbm5lbC5lbmFibGVkOwoJdGhpcy51cGRhdGVUaW1lcnMoKTsKCXRoaXMuY29yZS5pcnEucG9sbE5leHRFdmVudCgpOwp9OwoKR2FtZUJveUFkdmFuY2VBdWRpby5wcm90b3R5cGUuc2V0U3F1YXJlQ2hhbm5lbEVuYWJsZWQgPSBmdW5jdGlvbihjaGFubmVsLCBlbmFibGUpIHsKCWlmICghKGNoYW5uZWwuZW5hYmxlZCAmJiBjaGFubmVsLnBsYXlpbmcpICYmIGVuYWJsZSkgewoJCWNoYW5uZWwuZW5hYmxlZCA9ICEhZW5hYmxlOwoJCXRoaXMudXBkYXRlVGltZXJzKCk7CgkJdGhpcy5jb3JlLmlycS5wb2xsTmV4dEV2ZW50KCk7Cgl9IGVsc2UgewoJCWNoYW5uZWwuZW5hYmxlZCA9ICEhZW5hYmxlOwoJfQp9OwoKR2FtZUJveUFkdmFuY2VBdWRpby5wcm90b3R5cGUud3JpdGVTcXVhcmVDaGFubmVsU3dlZXAgPSBmdW5jdGlvbihjaGFubmVsSWQsIHZhbHVlKSB7Cgl2YXIgY2hhbm5lbCA9IHRoaXMuc3F1YXJlQ2hhbm5lbHNbY2hhbm5lbElkXTsKCWNoYW5uZWwuc3dlZXBTdGVwcyA9IHZhbHVlICYgMHgwNzsKCWNoYW5uZWwuc3dlZXBJbmNyZW1lbnQgPSAodmFsdWUgJiAweDA4KSA/IC0xIDogMTsKCWNoYW5uZWwuc3dlZXBJbnRlcnZhbCA9ICgodmFsdWUgPj4gNCkgJiAweDcpICogdGhpcy5jcHVGcmVxdWVuY3kgLyAxMjg7CgljaGFubmVsLmRvU3dlZXAgPSAhIWNoYW5uZWwuc3dlZXBJbnRlcnZhbDsKCWNoYW5uZWwubmV4dFN3ZWVwID0gdGhpcy5jcHUuY3ljbGVzICsgY2hhbm5lbC5zd2VlcEludGVydmFsOwoJdGhpcy5yZXNldFNxdWFyZUNoYW5uZWwoY2hhbm5lbCk7Cn07CgpHYW1lQm95QWR2YW5jZUF1ZGlvLnByb3RvdHlwZS53cml0ZVNxdWFyZUNoYW5uZWxETEUgPSBmdW5jdGlvbihjaGFubmVsSWQsIHZhbHVlKSB7Cgl2YXIgY2hhbm5lbCA9IHRoaXMuc3F1YXJlQ2hhbm5lbHNbY2hhbm5lbElkXTsKCXZhciBkdXR5ID0gKHZhbHVlID4+IDYpICYgMHgzOwoJc3dpdGNoIChkdXR5KSB7CgljYXNlIDA6CgkJY2hhbm5lbC5kdXR5ID0gMC4xMjU7CgkJYnJlYWs7CgljYXNlIDE6CgkJY2hhbm5lbC5kdXR5ID0gMC4yNTsKCQlicmVhazsKCWNhc2UgMjoKCQljaGFubmVsLmR1dHkgPSAwLjU7CgkJYnJlYWs7CgljYXNlIDM6CgkJY2hhbm5lbC5kdXR5ID0gMC43NTsKCQlicmVhazsKCX0KCXRoaXMud3JpdGVDaGFubmVsTEUoY2hhbm5lbCwgdmFsdWUpOwoJdGhpcy5yZXNldFNxdWFyZUNoYW5uZWwoY2hhbm5lbCk7Cn07CgpHYW1lQm95QWR2YW5jZUF1ZGlvLnByb3RvdHlwZS53cml0ZVNxdWFyZUNoYW5uZWxGQyA9IGZ1bmN0aW9uKGNoYW5uZWxJZCwgdmFsdWUpIHsKCXZhciBjaGFubmVsID0gdGhpcy5zcXVhcmVDaGFubmVsc1tjaGFubmVsSWRdOwoJdmFyIGZyZXF1ZW5jeSA9IHZhbHVlICYgMjA0NzsKCWNoYW5uZWwuZnJlcXVlbmN5ID0gZnJlcXVlbmN5OwoJY2hhbm5lbC5pbnRlcnZhbCA9IHRoaXMuY3B1RnJlcXVlbmN5ICogKDIwNDggLSBmcmVxdWVuY3kpIC8gMTMxMDcyOwoJY2hhbm5lbC50aW1lZCA9ICEhKHZhbHVlICYgMHg0MDAwKTsKCglpZiAodmFsdWUgJiAweDgwMDApIHsKCQl0aGlzLnJlc2V0U3F1YXJlQ2hhbm5lbChjaGFubmVsKTsKCQljaGFubmVsLnZvbHVtZSA9IGNoYW5uZWwuaW5pdGlhbFZvbHVtZTsKCX0KfTsKCkdhbWVCb3lBZHZhbmNlQXVkaW8ucHJvdG90eXBlLnVwZGF0ZVNxdWFyZUNoYW5uZWwgPSBmdW5jdGlvbihjaGFubmVsLCBjeWNsZXMpIHsKCWlmIChjaGFubmVsLnRpbWVkICYmIGN5Y2xlcyA+PSBjaGFubmVsLmVuZCkgewoJCWNoYW5uZWwucGxheWluZyA9IGZhbHNlOwoJCXJldHVybjsKCX0KCglpZiAoY2hhbm5lbC5kb1N3ZWVwICYmIGN5Y2xlcyA+PSBjaGFubmVsLm5leHRTd2VlcCkgewoJCWNoYW5uZWwuZnJlcXVlbmN5ICs9IGNoYW5uZWwuc3dlZXBJbmNyZW1lbnQgKiAoY2hhbm5lbC5mcmVxdWVuY3kgPj4gY2hhbm5lbC5zd2VlcFN0ZXBzKTsKCQlpZiAoY2hhbm5lbC5mcmVxdWVuY3kgPCAwKSB7CgkJCWNoYW5uZWwuZnJlcXVlbmN5ID0gMDsKCQl9IGVsc2UgaWYgKGNoYW5uZWwuZnJlcXVlbmN5ID4gMjA0NykgewoJCQljaGFubmVsLmZyZXF1ZW5jeSA9IDIwNDc7CgkJCWNoYW5uZWwucGxheWluZyA9IGZhbHNlOwoJCQlyZXR1cm47CgkJfQoJCWNoYW5uZWwuaW50ZXJ2YWwgPSB0aGlzLmNwdUZyZXF1ZW5jeSAqICgyMDQ4IC0gY2hhbm5lbC5mcmVxdWVuY3kpIC8gMTMxMDcyOwoJCWNoYW5uZWwubmV4dFN3ZWVwICs9IGNoYW5uZWwuc3dlZXBJbnRlcnZhbDsKCX0KCglpZiAoY3ljbGVzID49IGNoYW5uZWwucmFpc2UpIHsKCQljaGFubmVsLnNhbXBsZSA9IGNoYW5uZWwudm9sdW1lOwoJCWNoYW5uZWwubG93ZXIgPSBjaGFubmVsLnJhaXNlICsgY2hhbm5lbC5kdXR5ICogY2hhbm5lbC5pbnRlcnZhbDsKCQljaGFubmVsLnJhaXNlICs9IGNoYW5uZWwuaW50ZXJ2YWw7Cgl9IGVsc2UgaWYgKGN5Y2xlcyA+PSBjaGFubmVsLmxvd2VyKSB7CgkJY2hhbm5lbC5zYW1wbGUgPSAtY2hhbm5lbC52b2x1bWU7CgkJY2hhbm5lbC5sb3dlciArPSBjaGFubmVsLmludGVydmFsOwoJfQoKCXRoaXMudXBkYXRlRW52ZWxvcGUoY2hhbm5lbCwgY3ljbGVzKTsKCglpZiAodGhpcy5uZXh0RXZlbnQgPiBjaGFubmVsLnJhaXNlKSB7CgkJdGhpcy5uZXh0RXZlbnQgPSBjaGFubmVsLnJhaXNlOwoJfQoJaWYgKHRoaXMubmV4dEV2ZW50ID4gY2hhbm5lbC5sb3dlcikgewoJCXRoaXMubmV4dEV2ZW50ID0gY2hhbm5lbC5sb3dlcjsKCX0KCWlmIChjaGFubmVsLnRpbWVkICYmIHRoaXMubmV4dEV2ZW50ID4gY2hhbm5lbC5lbmQpIHsKCQl0aGlzLm5leHRFdmVudCA9IGNoYW5uZWwuZW5kOwoJfQoJaWYgKGNoYW5uZWwuZG9Td2VlcCAmJiB0aGlzLm5leHRFdmVudCA+IGNoYW5uZWwubmV4dFN3ZWVwKSB7CgkJdGhpcy5uZXh0RXZlbnQgPSBjaGFubmVsLm5leHRTd2VlcDsKCX0KfTsKCkdhbWVCb3lBZHZhbmNlQXVkaW8ucHJvdG90eXBlLndyaXRlQ2hhbm5lbDNMbyA9IGZ1bmN0aW9uKHZhbHVlKSB7Cgl0aGlzLmNoYW5uZWwzRGltZW5zaW9uID0gdmFsdWUgJiAweDIwOwoJdGhpcy5jaGFubmVsM0JhbmsgPSB2YWx1ZSAmIDB4NDA7Cgl2YXIgZW5hYmxlID0gdmFsdWUgJiAweDgwOwoJaWYgKCF0aGlzLmNoYW5uZWwzV3JpdGUgJiYgZW5hYmxlKSB7CgkJdGhpcy5jaGFubmVsM1dyaXRlID0gZW5hYmxlOwoJCXRoaXMucmVzZXRDaGFubmVsMygpOwoJfSBlbHNlIHsKCQl0aGlzLmNoYW5uZWwzV3JpdGUgPSBlbmFibGU7Cgl9Cn07CgpHYW1lQm95QWR2YW5jZUF1ZGlvLnByb3RvdHlwZS53cml0ZUNoYW5uZWwzSGkgPSBmdW5jdGlvbih2YWx1ZSkgewoJdGhpcy5jaGFubmVsM0xlbmd0aCA9IHRoaXMuY3B1RnJlcXVlbmN5ICogKDB4MTAwIC0gKHZhbHVlICYgMHhGRikpIC8gMjU2OwoJdmFyIHZvbHVtZSA9ICh2YWx1ZSA+PiAxMykgJiAweDc7Cglzd2l0Y2ggKHZvbHVtZSkgewoJY2FzZSAwOgoJCXRoaXMuY2hhbm5lbDNWb2x1bWUgPSAwOwoJCWJyZWFrOwoJY2FzZSAxOgoJCXRoaXMuY2hhbm5lbDNWb2x1bWUgPSAxOwoJCWJyZWFrOwoJY2FzZSAyOgoJCXRoaXMuY2hhbm5lbDNWb2x1bWUgPSAwLjU7CgkJYnJlYWs7CgljYXNlIDM6CgkJdGhpcy5jaGFubmVsM1ZvbHVtZSA9IDAuMjU7CgkJYnJlYWs7CglkZWZhdWx0OgoJCXRoaXMuY2hhbm5lbDNWb2x1bWUgPSAwLjc1OwoJfQp9OwoKR2FtZUJveUFkdmFuY2VBdWRpby5wcm90b3R5cGUud3JpdGVDaGFubmVsM1ggPSBmdW5jdGlvbih2YWx1ZSkgewoJdGhpcy5jaGFubmVsM0ludGVydmFsID0gdGhpcy5jcHVGcmVxdWVuY3kgKiAoMjA0OCAtICh2YWx1ZSAmIDB4N0ZGKSkgLyAyMDk3MTUyOwoJdGhpcy5jaGFubmVsM1RpbWVkID0gISEodmFsdWUgJiAweDQwMDApOwoJaWYgKHRoaXMuY2hhbm5lbDNXcml0ZSkgewoJCXRoaXMucmVzZXRDaGFubmVsMygpOwoJfQp9OwoKR2FtZUJveUFkdmFuY2VBdWRpby5wcm90b3R5cGUucmVzZXRDaGFubmVsMyA9IGZ1bmN0aW9uKCkgewoJdGhpcy5jaGFubmVsM05leHQgPSB0aGlzLmNwdS5jeWNsZXM7Cgl0aGlzLm5leHRFdmVudCA9IHRoaXMuY2hhbm5lbDNOZXh0OwoJdGhpcy5jaGFubmVsM0VuZCA9IHRoaXMuY3B1LmN5Y2xlcyArIHRoaXMuY2hhbm5lbDNMZW5ndGg7Cgl0aGlzLnBsYXlpbmdDaGFubmVsMyA9IHRoaXMuY2hhbm5lbDNXcml0ZTsKCXRoaXMudXBkYXRlVGltZXJzKCk7Cgl0aGlzLmNvcmUuaXJxLnBvbGxOZXh0RXZlbnQoKTsKfTsKCkdhbWVCb3lBZHZhbmNlQXVkaW8ucHJvdG90eXBlLndyaXRlV2F2ZURhdGEgPSBmdW5jdGlvbihvZmZzZXQsIGRhdGEsIHdpZHRoKSB7CglpZiAoIXRoaXMuY2hhbm5lbDNCYW5rKSB7CgkJb2Zmc2V0ICs9IDE2OwoJfQoJaWYgKHdpZHRoID09IDIpIHsKCQl0aGlzLndhdmVEYXRhW29mZnNldF0gPSBkYXRhICYgMHhGRjsKCQlkYXRhID4+PSA4OwoJCSsrb2Zmc2V0OwoJfQoJdGhpcy53YXZlRGF0YVtvZmZzZXRdID0gZGF0YSAmIDB4RkY7Cn07CgpHYW1lQm95QWR2YW5jZUF1ZGlvLnByb3RvdHlwZS5zZXRDaGFubmVsNEVuYWJsZWQgPSBmdW5jdGlvbihlbmFibGUpIHsKCWlmICghdGhpcy5lbmFibGVDaGFubmVsNCAmJiBlbmFibGUpIHsKCQl0aGlzLmNoYW5uZWw0Lm5leHQgPSB0aGlzLmNwdS5jeWNsZXM7CgkJdGhpcy5jaGFubmVsNC5lbmQgPSB0aGlzLmNwdS5jeWNsZXMgKyB0aGlzLmNoYW5uZWw0Lmxlbmd0aDsKCQl0aGlzLmVuYWJsZUNoYW5uZWw0ID0gdHJ1ZTsKCQl0aGlzLnBsYXlpbmdDaGFubmVsNCA9IHRydWU7CgkJdGhpcy5uZXh0RXZlbnQgPSB0aGlzLmNwdS5jeWNsZXM7CgkJdGhpcy51cGRhdGVFbnZlbG9wZSh0aGlzLmNoYW5uZWw0KTsKCQl0aGlzLnVwZGF0ZVRpbWVycygpOwoJCXRoaXMuY29yZS5pcnEucG9sbE5leHRFdmVudCgpOwoJfSBlbHNlIHsKCQl0aGlzLmVuYWJsZUNoYW5uZWw0ID0gZW5hYmxlOwoJfQp9CgpHYW1lQm95QWR2YW5jZUF1ZGlvLnByb3RvdHlwZS53cml0ZUNoYW5uZWw0TEUgPSBmdW5jdGlvbih2YWx1ZSkgewoJdGhpcy53cml0ZUNoYW5uZWxMRSh0aGlzLmNoYW5uZWw0LCB2YWx1ZSk7Cgl0aGlzLnJlc2V0Q2hhbm5lbDQoKTsKfTsKCkdhbWVCb3lBZHZhbmNlQXVkaW8ucHJvdG90eXBlLndyaXRlQ2hhbm5lbDRGQyA9IGZ1bmN0aW9uKHZhbHVlKSB7Cgl0aGlzLmNoYW5uZWw0LnRpbWVkID0gISEodmFsdWUgJiAweDQwMDApOwoKCXZhciByID0gdmFsdWUgJiAweDc7CglpZiAoIXIpIHsKCQlyID0gMC41OwoJfQoJdmFyIHMgPSAodmFsdWUgPj4gNCkgJiAweEY7Cgl2YXIgaW50ZXJ2YWwgPSB0aGlzLmNwdUZyZXF1ZW5jeSAqIChyICogKDIgPDwgcykpIC8gNTI0Mjg4OwoJaWYgKGludGVydmFsICE9IHRoaXMuY2hhbm5lbDQuaW50ZXJ2YWwpIHsKCQl0aGlzLmNoYW5uZWw0LmludGVydmFsID0gaW50ZXJ2YWw7CgkJdGhpcy5yZXNldENoYW5uZWw0KCk7Cgl9CgoJdmFyIHdpZHRoID0gKHZhbHVlICYgMHg4KSA/IDcgOiAxNTsKCWlmICh3aWR0aCAhPSB0aGlzLmNoYW5uZWw0LndpZHRoKSB7CgkJdGhpcy5jaGFubmVsNC53aWR0aCA9IHdpZHRoOwoJCXRoaXMucmVzZXRDaGFubmVsNCgpOwoJfQoKCWlmICh2YWx1ZSAmIDB4ODAwMCkgewoJCXRoaXMucmVzZXRDaGFubmVsNCgpOwoJfQp9OwoKR2FtZUJveUFkdmFuY2VBdWRpby5wcm90b3R5cGUucmVzZXRDaGFubmVsNCA9IGZ1bmN0aW9uKCkgewoJaWYgKHRoaXMuY2hhbm5lbDQud2lkdGggPT0gMTUpIHsKCQl0aGlzLmNoYW5uZWw0Lmxmc3IgPSAweDQwMDA7Cgl9IGVsc2UgewoJCXRoaXMuY2hhbm5lbDQubGZzciA9IDB4NDA7Cgl9Cgl0aGlzLmNoYW5uZWw0LnZvbHVtZSA9IHRoaXMuY2hhbm5lbDQuaW5pdGlhbFZvbHVtZTsKCWlmICh0aGlzLmNoYW5uZWw0LnN0ZXApIHsKCQl0aGlzLmNoYW5uZWw0Lm5leHRTdGVwID0gdGhpcy5jcHUuY3ljbGVzICsgdGhpcy5jaGFubmVsNC5zdGVwOwoJfQoJdGhpcy5jaGFubmVsNC5lbmQgPSB0aGlzLmNwdS5jeWNsZXMgKyB0aGlzLmNoYW5uZWw0Lmxlbmd0aDsKCXRoaXMuY2hhbm5lbDQubmV4dCA9IHRoaXMuY3B1LmN5Y2xlczsKCXRoaXMubmV4dEV2ZW50ID0gdGhpcy5jaGFubmVsNC5uZXh0OwoKCXRoaXMucGxheWluZ0NoYW5uZWw0ID0gdGhpcy5lbmFibGVDaGFubmVsNDsKCXRoaXMudXBkYXRlVGltZXJzKCk7Cgl0aGlzLmNvcmUuaXJxLnBvbGxOZXh0RXZlbnQoKTsKfTsKCkdhbWVCb3lBZHZhbmNlQXVkaW8ucHJvdG90eXBlLndyaXRlQ2hhbm5lbExFID0gZnVuY3Rpb24oY2hhbm5lbCwgdmFsdWUpIHsKCWNoYW5uZWwubGVuZ3RoID0gdGhpcy5jcHVGcmVxdWVuY3kgKiAoKDB4NDAgLSAodmFsdWUgJiAweDNGKSkgLyAyNTYpOwoKCWlmICh2YWx1ZSAmIDB4MDgwMCkgewoJCWNoYW5uZWwuaW5jcmVtZW50ID0gMSAvIDE2OwoJfSBlbHNlIHsKCQljaGFubmVsLmluY3JlbWVudCA9IC0xIC8gMTY7Cgl9CgljaGFubmVsLmluaXRpYWxWb2x1bWUgPSAoKHZhbHVlID4+IDEyKSAmIDB4RikgLyAxNjsKCgljaGFubmVsLnN0ZXAgPSB0aGlzLmNwdUZyZXF1ZW5jeSAqICgoKHZhbHVlID4+IDgpICYgMHg3KSAvIDY0KTsKfTsKCkdhbWVCb3lBZHZhbmNlQXVkaW8ucHJvdG90eXBlLnVwZGF0ZUVudmVsb3BlID0gZnVuY3Rpb24oY2hhbm5lbCwgY3ljbGVzKSB7CglpZiAoY2hhbm5lbC5zdGVwKSB7CgkJaWYgKGN5Y2xlcyA+PSBjaGFubmVsLm5leHRTdGVwKSB7CgkJCWNoYW5uZWwudm9sdW1lICs9IGNoYW5uZWwuaW5jcmVtZW50OwoJCQlpZiAoY2hhbm5lbC52b2x1bWUgPiAxKSB7CgkJCQljaGFubmVsLnZvbHVtZSA9IDE7CgkJCX0gZWxzZSBpZiAoY2hhbm5lbC52b2x1bWUgPCAwKSB7CgkJCQljaGFubmVsLnZvbHVtZSA9IDA7CgkJCX0KCQkJY2hhbm5lbC5uZXh0U3RlcCArPSBjaGFubmVsLnN0ZXA7CgkJfQoKCQlpZiAodGhpcy5uZXh0RXZlbnQgPiBjaGFubmVsLm5leHRTdGVwKSB7CgkJCXRoaXMubmV4dEV2ZW50ID0gY2hhbm5lbC5uZXh0U3RlcDsKCQl9Cgl9Cn07CgpHYW1lQm95QWR2YW5jZUF1ZGlvLnByb3RvdHlwZS5hcHBlbmRUb0ZpZm9BID0gZnVuY3Rpb24odmFsdWUpIHsKCXZhciBiOwoJaWYgKHRoaXMuZmlmb0EubGVuZ3RoID4gMjgpIHsKCQl0aGlzLmZpZm9BID0gdGhpcy5maWZvQS5zbGljZSgtMjgpOwoJfQoJZm9yICh2YXIgaSA9IDA7IGkgPCA0OyArK2kpIHsKCQliID0gKHZhbHVlICYgMHhGRikgPDwgMjQ7CgkJdmFsdWUgPj49IDg7CgkJdGhpcy5maWZvQS5wdXNoKGIgLyAweDgwMDAwMDAwKTsKCX0KfTsKCkdhbWVCb3lBZHZhbmNlQXVkaW8ucHJvdG90eXBlLmFwcGVuZFRvRmlmb0IgPSBmdW5jdGlvbih2YWx1ZSkgewoJdmFyIGI7CglpZiAodGhpcy5maWZvQi5sZW5ndGggPiAyOCkgewoJCXRoaXMuZmlmb0IgPSB0aGlzLmZpZm9CLnNsaWNlKC0yOCk7Cgl9Cglmb3IgKHZhciBpID0gMDsgaSA8IDQ7ICsraSkgewoJCWIgPSAodmFsdWUgJiAweEZGKSA8PCAyNDsKCQl2YWx1ZSA+Pj0gODsKCQl0aGlzLmZpZm9CLnB1c2goYiAvIDB4ODAwMDAwMDApOwoJfQp9OwoKR2FtZUJveUFkdmFuY2VBdWRpby5wcm90b3R5cGUuc2FtcGxlRmlmb0EgPSBmdW5jdGlvbigpIHsKCWlmICh0aGlzLmZpZm9BLmxlbmd0aCA8PSAxNikgewoJCXZhciBkbWEgPSB0aGlzLmNvcmUuaXJxLmRtYVt0aGlzLmRtYUFdOwoJCWRtYS5uZXh0Q291bnQgPSA0OwoJCXRoaXMuY29yZS5tbXUuc2VydmljZURtYSh0aGlzLmRtYUEsIGRtYSk7Cgl9Cgl0aGlzLmZpZm9BU2FtcGxlID0gdGhpcy5maWZvQS5zaGlmdCgpOwp9OwoKR2FtZUJveUFkdmFuY2VBdWRpby5wcm90b3R5cGUuc2FtcGxlRmlmb0IgPSBmdW5jdGlvbigpIHsKCWlmICh0aGlzLmZpZm9CLmxlbmd0aCA8PSAxNikgewoJCXZhciBkbWEgPSB0aGlzLmNvcmUuaXJxLmRtYVt0aGlzLmRtYUJdOwoJCWRtYS5uZXh0Q291bnQgPSA0OwoJCXRoaXMuY29yZS5tbXUuc2VydmljZURtYSh0aGlzLmRtYUIsIGRtYSk7Cgl9Cgl0aGlzLmZpZm9CU2FtcGxlID0gdGhpcy5maWZvQi5zaGlmdCgpOwp9OwoKR2FtZUJveUFkdmFuY2VBdWRpby5wcm90b3R5cGUuc2NoZWR1bGVGSUZPRG1hID0gZnVuY3Rpb24obnVtYmVyLCBpbmZvKSB7Cglzd2l0Y2ggKGluZm8uZGVzdCkgewoJY2FzZSB0aGlzLmNwdS5tbXUuQkFTRV9JTyB8IHRoaXMuY3B1LmlycS5pby5GSUZPX0FfTE86CgkJLy8gRklYTUU6IGlzIHRoaXMgbmVlZGVkIG9yIGEgaGFjaz8KCQlpbmZvLmRzdENvbnRyb2wgPSAyOwoJCXRoaXMuZG1hQSA9IG51bWJlcjsKCQlicmVhazsKCWNhc2UgdGhpcy5jcHUubW11LkJBU0VfSU8gfCB0aGlzLmNwdS5pcnEuaW8uRklGT19CX0xPOgoJCWluZm8uZHN0Q29udHJvbCA9IDI7CgkJdGhpcy5kbWFCID0gbnVtYmVyOwoJCWJyZWFrOwoJZGVmYXVsdDoKCQl0aGlzLmNvcmUuV0FSTignVHJpZWQgdG8gc2NoZWR1bGUgRklGTyBETUEgZm9yIG5vbi1GSUZPIGRlc3RpbmF0aW9uJyk7CgkJYnJlYWs7Cgl9Cn07CgpHYW1lQm95QWR2YW5jZUF1ZGlvLnByb3RvdHlwZS5zYW1wbGUgPSBmdW5jdGlvbigpIHsKCXZhciBzYW1wbGVMZWZ0ID0gMDsKCXZhciBzYW1wbGVSaWdodCA9IDA7Cgl2YXIgc2FtcGxlOwoJdmFyIGNoYW5uZWw7CgoJY2hhbm5lbCA9IHRoaXMuc3F1YXJlQ2hhbm5lbHNbMF07CglpZiAoY2hhbm5lbC5wbGF5aW5nKSB7CgkJc2FtcGxlID0gY2hhbm5lbC5zYW1wbGUgKiB0aGlzLnNvdW5kUmF0aW8gKiB0aGlzLlBTR19NQVg7CgkJaWYgKHRoaXMuZW5hYmxlZExlZnQgJiAweDEpIHsKCQkJc2FtcGxlTGVmdCArPSBzYW1wbGU7CgkJfQoJCWlmICh0aGlzLmVuYWJsZWRSaWdodCAmIDB4MSkgewoJCQlzYW1wbGVSaWdodCArPSBzYW1wbGU7CgkJfQoJfQoKCWNoYW5uZWwgPSB0aGlzLnNxdWFyZUNoYW5uZWxzWzFdOwoJaWYgKGNoYW5uZWwucGxheWluZykgewoJCXNhbXBsZSA9IGNoYW5uZWwuc2FtcGxlICogdGhpcy5zb3VuZFJhdGlvICogdGhpcy5QU0dfTUFYOwoJCWlmICh0aGlzLmVuYWJsZWRMZWZ0ICYgMHgyKSB7CgkJCXNhbXBsZUxlZnQgKz0gc2FtcGxlOwoJCX0KCQlpZiAodGhpcy5lbmFibGVkUmlnaHQgJiAweDIpIHsKCQkJc2FtcGxlUmlnaHQgKz0gc2FtcGxlOwoJCX0KCX0KCglpZiAodGhpcy5wbGF5aW5nQ2hhbm5lbDMpIHsKCQlzYW1wbGUgPSB0aGlzLmNoYW5uZWwzU2FtcGxlICogdGhpcy5zb3VuZFJhdGlvICogdGhpcy5jaGFubmVsM1ZvbHVtZSAqIHRoaXMuUFNHX01BWDsKCQlpZiAodGhpcy5lbmFibGVkTGVmdCAmIDB4NCkgewoJCQlzYW1wbGVMZWZ0ICs9IHNhbXBsZTsKCQl9CgkJaWYgKHRoaXMuZW5hYmxlZFJpZ2h0ICYgMHg0KSB7CgkJCXNhbXBsZVJpZ2h0ICs9IHNhbXBsZTsKCQl9Cgl9CgoJaWYgKHRoaXMucGxheWluZ0NoYW5uZWw0KSB7CgkJc2FtcGxlID0gdGhpcy5jaGFubmVsNC5zYW1wbGUgKiB0aGlzLnNvdW5kUmF0aW8gKiB0aGlzLlBTR19NQVg7CgkJaWYgKHRoaXMuZW5hYmxlZExlZnQgJiAweDgpIHsKCQkJc2FtcGxlTGVmdCArPSBzYW1wbGU7CgkJfQoJCWlmICh0aGlzLmVuYWJsZWRSaWdodCAmIDB4OCkgewoJCQlzYW1wbGVSaWdodCArPSBzYW1wbGU7CgkJfQoJfQoKCWlmICh0aGlzLmVuYWJsZUNoYW5uZWxBKSB7CgkJc2FtcGxlID0gdGhpcy5maWZvQVNhbXBsZSAqIHRoaXMuRklGT19NQVggKiB0aGlzLnJhdGlvQ2hhbm5lbEE7CgkJaWYgKHRoaXMuZW5hYmxlTGVmdENoYW5uZWxBKSB7CgkJCXNhbXBsZUxlZnQgKz0gc2FtcGxlOwoJCX0KCQlpZiAodGhpcy5lbmFibGVSaWdodENoYW5uZWxBKSB7CgkJCXNhbXBsZVJpZ2h0ICs9IHNhbXBsZTsKCQl9Cgl9CgoJaWYgKHRoaXMuZW5hYmxlQ2hhbm5lbEIpIHsKCQlzYW1wbGUgPSB0aGlzLmZpZm9CU2FtcGxlICogdGhpcy5GSUZPX01BWCAqIHRoaXMucmF0aW9DaGFubmVsQjsKCQlpZiAodGhpcy5lbmFibGVMZWZ0Q2hhbm5lbEIpIHsKCQkJc2FtcGxlTGVmdCArPSBzYW1wbGU7CgkJfQoJCWlmICh0aGlzLmVuYWJsZVJpZ2h0Q2hhbm5lbEIpIHsKCQkJc2FtcGxlUmlnaHQgKz0gc2FtcGxlOwoJCX0KCX0KCgl2YXIgc2FtcGxlUG9pbnRlciA9IHRoaXMuc2FtcGxlUG9pbnRlcjsKCXNhbXBsZUxlZnQgKj0gdGhpcy5tYXN0ZXJWb2x1bWUgLyB0aGlzLlNPVU5EX01BWDsKCXNhbXBsZUxlZnQgPSBNYXRoLm1heChNYXRoLm1pbihzYW1wbGVMZWZ0LCAxKSwgLTEpOwoJc2FtcGxlUmlnaHQgKj0gdGhpcy5tYXN0ZXJWb2x1bWUgLyB0aGlzLlNPVU5EX01BWDsKCXNhbXBsZVJpZ2h0ID0gTWF0aC5tYXgoTWF0aC5taW4oc2FtcGxlUmlnaHQsIDEpLCAtMSk7CglpZiAodGhpcy5idWZmZXJzKSB7CgkJdGhpcy5idWZmZXJzWzBdW3NhbXBsZVBvaW50ZXJdID0gc2FtcGxlTGVmdDsKCQl0aGlzLmJ1ZmZlcnNbMV1bc2FtcGxlUG9pbnRlcl0gPSBzYW1wbGVSaWdodDsKCX0KCXRoaXMuc2FtcGxlUG9pbnRlciA9IChzYW1wbGVQb2ludGVyICsgMSkgJiB0aGlzLnNhbXBsZU1hc2s7Cn07CgpHYW1lQm95QWR2YW5jZUF1ZGlvLnByb3RvdHlwZS5hdWRpb1Byb2Nlc3MgPSBmdW5jdGlvbihhdWRpb1Byb2Nlc3NpbmdFdmVudCkgewoJdmFyIGxlZnQgPSBhdWRpb1Byb2Nlc3NpbmdFdmVudC5vdXRwdXRCdWZmZXIuZ2V0Q2hhbm5lbERhdGEoMCk7Cgl2YXIgcmlnaHQgPSBhdWRpb1Byb2Nlc3NpbmdFdmVudC5vdXRwdXRCdWZmZXIuZ2V0Q2hhbm5lbERhdGEoMSk7CglpZiAodGhpcy5tYXN0ZXJFbmFibGUpIHsKCQl2YXIgaTsKCQl2YXIgbyA9IHRoaXMub3V0cHV0UG9pbnRlcjsKCQlmb3IgKGkgPSAwOyBpIDwgdGhpcy5idWZmZXJTaXplOyArK2ksIG8gKz0gdGhpcy5yZXNhbXBsZVJhdGlvKSB7CgkJCWlmIChvID49IHRoaXMubWF4U2FtcGxlcykgewoJCQkJbyAtPSB0aGlzLm1heFNhbXBsZXM7CgkJCX0KCQkJaWYgKChvIHwgMCkgPT0gdGhpcy5zYW1wbGVQb2ludGVyKSB7CgkJCQkrK3RoaXMuYmFja3VwOwoJCQkJYnJlYWs7CgkJCX0KCQkJbGVmdFtpXSA9IHRoaXMuYnVmZmVyc1swXVtvIHwgMF07CgkJCXJpZ2h0W2ldID0gdGhpcy5idWZmZXJzWzFdW28gfCAwXTsKCQl9CgkJZm9yICg7IGkgPCB0aGlzLmJ1ZmZlclNpemU7ICsraSkgewoJCQlsZWZ0W2ldID0gMDsKCQkJcmlnaHRbaV0gPSAwOwoJCX0KCQl0aGlzLm91dHB1dFBvaW50ZXIgPSBvOwoJCSsrdGhpcy50b3RhbFNhbXBsZXM7Cgl9IGVsc2UgewoJCWZvciAoaSA9IDA7IGkgPCB0aGlzLmJ1ZmZlclNpemU7ICsraSkgewoJCQlsZWZ0W2ldID0gMDsKCQkJcmlnaHRbaV0gPSAwOwoJCX0KCX0KfTsK"></script>
<script src="data:@file/javascript;base64,ZnVuY3Rpb24gR2FtZUJveUFkdmFuY2VWaWRlbygpIHsKCXRoaXMucmVuZGVyUGF0aCA9IG5ldyBHYW1lQm95QWR2YW5jZVNvZnR3YXJlUmVuZGVyZXIoKTsKCgl0aGlzLkNZQ0xFU19QRVJfUElYRUwgPSA0OwoKCXRoaXMuSE9SSVpPTlRBTF9QSVhFTFMgPSAyNDA7Cgl0aGlzLkhCTEFOS19QSVhFTFMgPSA2ODsKCXRoaXMuSERSQVdfTEVOR1RIID0gMTAwNjsKCXRoaXMuSEJMQU5LX0xFTkdUSCA9IDIyNjsKCXRoaXMuSE9SSVpPTlRBTF9MRU5HVEggPSAxMjMyOwoKCXRoaXMuVkVSVElDQUxfUElYRUxTID0gMTYwOwoJdGhpcy5WQkxBTktfUElYRUxTID0gNjg7Cgl0aGlzLlZFUlRJQ0FMX1RPVEFMX1BJWEVMUyA9IDIyODsKCgl0aGlzLlRPVEFMX0xFTkdUSCA9IDI4MDg5NjsKCgl0aGlzLmRyYXdDYWxsYmFjayA9IGZ1bmN0aW9uKCkge307Cgl0aGlzLnZibGFua0NhbGxiYWNrID0gZnVuY3Rpb24oKSB7fTsKfTsKCkdhbWVCb3lBZHZhbmNlVmlkZW8ucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7Cgl0aGlzLnJlbmRlclBhdGguY2xlYXIodGhpcy5jcHUubW11KTsKCgkvLyBESVNQU1RBVAoJdGhpcy5ESVNQU1RBVF9NQVNLID0gMHhGRjM4OwoJdGhpcy5pbkhibGFuayA9IGZhbHNlOwoJdGhpcy5pblZibGFuayA9IGZhbHNlOwoJdGhpcy52Y291bnRlciA9IDA7Cgl0aGlzLnZibGFua0lSUSA9IDA7Cgl0aGlzLmhibGFua0lSUSA9IDA7Cgl0aGlzLnZjb3VudGVySVJRID0gMDsKCXRoaXMudmNvdW50U2V0dGluZyA9IDA7CgoJLy8gVkNPVU5UCgl0aGlzLnZjb3VudCA9IC0xOwoKCXRoaXMubGFzdEhibGFuayA9IDA7Cgl0aGlzLm5leHRIYmxhbmsgPSB0aGlzLkhEUkFXX0xFTkdUSDsKCXRoaXMubmV4dEV2ZW50ID0gdGhpcy5uZXh0SGJsYW5rOwoKCXRoaXMubmV4dEhibGFua0lSUSA9IDA7Cgl0aGlzLm5leHRWYmxhbmtJUlEgPSAwOwoJdGhpcy5uZXh0VmNvdW50ZXJJUlEgPSAwOwp9OwoKR2FtZUJveUFkdmFuY2VWaWRlby5wcm90b3R5cGUuZnJlZXplID0gZnVuY3Rpb24oKSB7CglyZXR1cm4gewoJCSdpbkhibGFuayc6IHRoaXMuaW5IYmxhbmssCgkJJ2luVmJsYW5rJzogdGhpcy5pblZibGFuaywKCQkndmNvdW50ZXInOiB0aGlzLnZjb3VudGVyLAoJCSd2YmxhbmtJUlEnOiB0aGlzLnZibGFua0lSUSwKCQknaGJsYW5rSVJRJzogdGhpcy5oYmxhbmtJUlEsCgkJJ3Zjb3VudGVySVJRJzogdGhpcy52Y291bnRlcklSUSwKCQkndmNvdW50U2V0dGluZyc6IHRoaXMudmNvdW50U2V0dGluZywKCQkndmNvdW50JzogdGhpcy52Y291bnQsCgkJJ2xhc3RIYmxhbmsnOiB0aGlzLmxhc3RIYmxhbmssCgkJJ25leHRIYmxhbmsnOiB0aGlzLm5leHRIYmxhbmssCgkJJ25leHRFdmVudCc6IHRoaXMubmV4dEV2ZW50LAoJCSduZXh0SGJsYW5rSVJRJzogdGhpcy5uZXh0SGJsYW5rSVJRLAoJCSduZXh0VmJsYW5rSVJRJzogdGhpcy5uZXh0VmJsYW5rSVJRLAoJCSduZXh0VmNvdW50ZXJJUlEnOiB0aGlzLm5leHRWY291bnRlcklSUSwKCQkncmVuZGVyUGF0aCc6IHRoaXMucmVuZGVyUGF0aC5mcmVlemUodGhpcy5jb3JlLmVuY29kZUJhc2U2NCkKCX07Cn07CgpHYW1lQm95QWR2YW5jZVZpZGVvLnByb3RvdHlwZS5kZWZyb3N0ID0gZnVuY3Rpb24oZnJvc3QpIHsKCXRoaXMuaW5IYmxhbmsgPSBmcm9zdC5pbkhibGFuazsKCXRoaXMuaW5WYmxhbmsgPSBmcm9zdC5pblZibGFuazsKCXRoaXMudmNvdW50ZXIgPSBmcm9zdC52Y291bnRlcjsKCXRoaXMudmJsYW5rSVJRID0gZnJvc3QudmJsYW5rSVJROwoJdGhpcy5oYmxhbmtJUlEgPSBmcm9zdC5oYmxhbmtJUlE7Cgl0aGlzLnZjb3VudGVySVJRID0gZnJvc3QudmNvdW50ZXJJUlE7Cgl0aGlzLnZjb3VudFNldHRpbmcgPSBmcm9zdC52Y291bnRTZXR0aW5nOwoJdGhpcy52Y291bnQgPSBmcm9zdC52Y291bnQ7Cgl0aGlzLmxhc3RIYmxhbmsgPSBmcm9zdC5sYXN0SGJsYW5rOwoJdGhpcy5uZXh0SGJsYW5rID0gZnJvc3QubmV4dEhibGFuazsKCXRoaXMubmV4dEV2ZW50ID0gZnJvc3QubmV4dEV2ZW50OwoJdGhpcy5uZXh0SGJsYW5rSVJRID0gZnJvc3QubmV4dEhibGFua0lSUTsKCXRoaXMubmV4dFZibGFua0lSUSA9IGZyb3N0Lm5leHRWYmxhbmtJUlE7Cgl0aGlzLm5leHRWY291bnRlcklSUSA9IGZyb3N0Lm5leHRWY291bnRlcklSUTsKCXRoaXMucmVuZGVyUGF0aC5kZWZyb3N0KGZyb3N0LnJlbmRlclBhdGgsIHRoaXMuY29yZS5kZWNvZGVCYXNlNjQpOwp9OwoKR2FtZUJveUFkdmFuY2VWaWRlby5wcm90b3R5cGUuc2V0QmFja2luZyA9IGZ1bmN0aW9uKGJhY2tpbmcpIHsKCXZhciBwaXhlbERhdGEgPSBiYWNraW5nLmNyZWF0ZUltYWdlRGF0YSh0aGlzLkhPUklaT05UQUxfUElYRUxTLCB0aGlzLlZFUlRJQ0FMX1BJWEVMUyk7Cgl0aGlzLmNvbnRleHQgPSBiYWNraW5nOwoKCS8vIENsZWFyIGJhY2tpbmcgZmlyc3QKCWZvciAodmFyIG9mZnNldCA9IDA7IG9mZnNldCA8IHRoaXMuSE9SSVpPTlRBTF9QSVhFTFMgKiB0aGlzLlZFUlRJQ0FMX1BJWEVMUyAqIDQ7KSB7CgkJcGl4ZWxEYXRhLmRhdGFbb2Zmc2V0KytdID0gMHhGRjsKCQlwaXhlbERhdGEuZGF0YVtvZmZzZXQrK10gPSAweEZGOwoJCXBpeGVsRGF0YS5kYXRhW29mZnNldCsrXSA9IDB4RkY7CgkJcGl4ZWxEYXRhLmRhdGFbb2Zmc2V0KytdID0gMHhGRjsKCX0KCgl0aGlzLnJlbmRlclBhdGguc2V0QmFja2luZyhwaXhlbERhdGEpOwp9CgpHYW1lQm95QWR2YW5jZVZpZGVvLnByb3RvdHlwZS51cGRhdGVUaW1lcnMgPSBmdW5jdGlvbihjcHUpIHsKCXZhciBjeWNsZXMgPSBjcHUuY3ljbGVzOwoKCWlmICh0aGlzLm5leHRFdmVudCA8PSBjeWNsZXMpIHsKCQlpZiAodGhpcy5pbkhibGFuaykgewoJCQkvLyBFbmQgSGJsYW5rCgkJCXRoaXMuaW5IYmxhbmsgPSBmYWxzZTsKCQkJdGhpcy5uZXh0RXZlbnQgPSB0aGlzLm5leHRIYmxhbms7CgoJCQkrK3RoaXMudmNvdW50OwoKCQkJc3dpdGNoICh0aGlzLnZjb3VudCkgewoJCQljYXNlIHRoaXMuVkVSVElDQUxfUElYRUxTOgoJCQkJdGhpcy5pblZibGFuayA9IHRydWU7CgkJCQl0aGlzLnJlbmRlclBhdGguZmluaXNoRHJhdyh0aGlzKTsKCQkJCXRoaXMubmV4dFZibGFua0lSUSA9IHRoaXMubmV4dEV2ZW50ICsgdGhpcy5UT1RBTF9MRU5HVEg7CgkJCQl0aGlzLmNwdS5tbXUucnVuVmJsYW5rRG1hcygpOwoJCQkJaWYgKHRoaXMudmJsYW5rSVJRKSB7CgkJCQkJdGhpcy5jcHUuaXJxLnJhaXNlSVJRKHRoaXMuY3B1LmlycS5JUlFfVkJMQU5LKTsKCQkJCX0KCQkJCXRoaXMudmJsYW5rQ2FsbGJhY2soKTsKCQkJCWJyZWFrOwoJCQljYXNlIHRoaXMuVkVSVElDQUxfVE9UQUxfUElYRUxTIC0gMToKCQkJCXRoaXMuaW5WYmxhbmsgPSBmYWxzZTsKCQkJCWJyZWFrOwoJCQljYXNlIHRoaXMuVkVSVElDQUxfVE9UQUxfUElYRUxTOgoJCQkJdGhpcy52Y291bnQgPSAwOwoJCQkJdGhpcy5yZW5kZXJQYXRoLnN0YXJ0RHJhdygpOwoJCQkJYnJlYWs7CgkJCX0KCgkJCXRoaXMudmNvdW50ZXIgPSB0aGlzLnZjb3VudCA9PSB0aGlzLnZjb3VudFNldHRpbmc7CgkJCWlmICh0aGlzLnZjb3VudGVyICYmIHRoaXMudmNvdW50ZXJJUlEpIHsKCQkJCXRoaXMuY3B1LmlycS5yYWlzZUlSUSh0aGlzLmNwdS5pcnEuSVJRX1ZDT1VOVEVSKTsKCQkJCXRoaXMubmV4dFZjb3VudGVySVJRICs9IHRoaXMuVE9UQUxfTEVOR1RIOwoJCQl9CgoJCQlpZiAodGhpcy52Y291bnQgPCB0aGlzLlZFUlRJQ0FMX1BJWEVMUykgewoJCQkJdGhpcy5yZW5kZXJQYXRoLmRyYXdTY2FubGluZSh0aGlzLnZjb3VudCk7CgkJCX0KCQl9IGVsc2UgewoJCQkvLyBCZWdpbiBIYmxhbmsKCQkJdGhpcy5pbkhibGFuayA9IHRydWU7CgkJCXRoaXMubGFzdEhibGFuayA9IHRoaXMubmV4dEhibGFuazsKCQkJdGhpcy5uZXh0RXZlbnQgPSB0aGlzLmxhc3RIYmxhbmsgKyB0aGlzLkhCTEFOS19MRU5HVEg7CgkJCXRoaXMubmV4dEhibGFuayA9IHRoaXMubmV4dEV2ZW50ICsgdGhpcy5IRFJBV19MRU5HVEg7CgkJCXRoaXMubmV4dEhibGFua0lSUSA9IHRoaXMubmV4dEhibGFuazsKCgkJCWlmICh0aGlzLnZjb3VudCA8IHRoaXMuVkVSVElDQUxfUElYRUxTKSB7CgkJCQl0aGlzLmNwdS5tbXUucnVuSGJsYW5rRG1hcygpOwoJCQl9CgkJCWlmICh0aGlzLmhibGFua0lSUSkgewoJCQkJdGhpcy5jcHUuaXJxLnJhaXNlSVJRKHRoaXMuY3B1LmlycS5JUlFfSEJMQU5LKTsKCQkJfQoJCX0KCX0KfTsKCkdhbWVCb3lBZHZhbmNlVmlkZW8ucHJvdG90eXBlLndyaXRlRGlzcGxheVN0YXQgPSBmdW5jdGlvbih2YWx1ZSkgewoJdGhpcy52YmxhbmtJUlEgPSB2YWx1ZSAmIDB4MDAwODsKCXRoaXMuaGJsYW5rSVJRID0gdmFsdWUgJiAweDAwMTA7Cgl0aGlzLnZjb3VudGVySVJRID0gdmFsdWUgJiAweDAwMjA7Cgl0aGlzLnZjb3VudFNldHRpbmcgPSAodmFsdWUgJiAweEZGMDApID4+IDg7CgoJaWYgKHRoaXMudmNvdW50ZXJJUlEpIHsKCQkvLyBGSVhNRTogdGhpcyBjYW4gYmUgdG9vIGxhdGUgaWYgd2UncmUgaW4gdGhlIG1pZGRsZSBvZiBhbiBIYmxhbmsKCQl0aGlzLm5leHRWY291bnRlcklSUSA9IHRoaXMubmV4dEhibGFuayArIHRoaXMuSEJMQU5LX0xFTkdUSCArICh0aGlzLnZjb3VudFNldHRpbmcgLSB0aGlzLnZjb3VudCkgKiB0aGlzLkhPUklaT05UQUxfTEVOR1RIOwoJCWlmICh0aGlzLm5leHRWY291bnRlcklSUSA8IHRoaXMubmV4dEV2ZW50KSB7CgkJCXRoaXMubmV4dFZjb3VudGVySVJRICs9IHRoaXMuVE9UQUxfTEVOR1RIOwoJCX0KCX0KfTsKCkdhbWVCb3lBZHZhbmNlVmlkZW8ucHJvdG90eXBlLnJlYWREaXNwbGF5U3RhdCA9IGZ1bmN0aW9uKCkgewoJcmV0dXJuICh0aGlzLmluVmJsYW5rKSB8ICh0aGlzLmluSGJsYW5rIDw8IDEpIHwgKHRoaXMudmNvdW50ZXIgPDwgMik7Cn07CgpHYW1lQm95QWR2YW5jZVZpZGVvLnByb3RvdHlwZS5maW5pc2hEcmF3ID0gZnVuY3Rpb24ocGl4ZWxEYXRhKSB7Cgl0aGlzLmNvbnRleHQucHV0SW1hZ2VEYXRhKHBpeGVsRGF0YSwgMCwgMCk7Cgl0aGlzLmRyYXdDYWxsYmFjaygpOwp9Owo="></script>
<script src="data:@file/javascript;base64,ZnVuY3Rpb24gTWVtb3J5UHJveHkob3duZXIsIHNpemUsIGJsb2NrU2l6ZSkgewoJdGhpcy5vd25lciA9IG93bmVyOwoJdGhpcy5ibG9ja3MgPSBbXTsKCXRoaXMuYmxvY2tTaXplID0gYmxvY2tTaXplOwoJdGhpcy5tYXNrID0gKDEgPDwgYmxvY2tTaXplKSAtIDE7Cgl0aGlzLnNpemUgPSBzaXplOwoJaWYgKGJsb2NrU2l6ZSkgewoJCWZvciAodmFyIGkgPSAwOyBpIDwgKHNpemUgPj4gYmxvY2tTaXplKTsgKytpKSB7CgkJCXRoaXMuYmxvY2tzLnB1c2gobmV3IE1lbW9yeVZpZXcobmV3IEFycmF5QnVmZmVyKDEgPDwgYmxvY2tTaXplKSkpOwoJCX0KCX0gZWxzZSB7CgkJdGhpcy5ibG9ja1NpemUgPSAzMTsKCQl0aGlzLm1hc2sgPSAtMTsKCQl0aGlzLmJsb2Nrc1swXSA9IG5ldyBNZW1vcnlWaWV3KG5ldyBBcnJheUJ1ZmZlcihzaXplKSk7Cgl9Cn07CgpNZW1vcnlQcm94eS5wcm90b3R5cGUuY29tYmluZSA9IGZ1bmN0aW9uKCkgewoJaWYgKHRoaXMuYmxvY2tzLmxlbmd0aCA+IDEpIHsKCQl2YXIgY29tYmluZWQgPSBuZXcgVWludDhBcnJheSh0aGlzLnNpemUpOwoJCWZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ibG9ja3MubGVuZ3RoOyArK2kpIHsKCQkJY29tYmluZWQuc2V0KG5ldyBVaW50OEFycmF5KHRoaXMuYmxvY2tzW2ldLmJ1ZmZlciksIGkgPDwgdGhpcy5ibG9ja1NpemUpOwoJCX0KCQlyZXR1cm4gY29tYmluZWQuYnVmZmVyOwoJfSBlbHNlIHsKCQlyZXR1cm4gdGhpcy5ibG9ja3NbMF0uYnVmZmVyOwoJfQp9OwoKTWVtb3J5UHJveHkucHJvdG90eXBlLnJlcGxhY2UgPSBmdW5jdGlvbihidWZmZXIpIHsKCWZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ibG9ja3MubGVuZ3RoOyArK2kpIHsKCQl0aGlzLmJsb2Nrc1tpXSA9IG5ldyBNZW1vcnlWaWV3KGJ1ZmZlci5zbGljZShpIDw8IHRoaXMuYmxvY2tTaXplLCAoaSA8PCB0aGlzLmJsb2NrU2l6ZSkgKyB0aGlzLmJsb2Nrc1tpXS5idWZmZXIuYnl0ZUxlbmd0aCkpOwoJfQp9OwoKTWVtb3J5UHJveHkucHJvdG90eXBlLmxvYWQ4ID0gZnVuY3Rpb24ob2Zmc2V0KSB7CglyZXR1cm4gdGhpcy5ibG9ja3Nbb2Zmc2V0ID4+IHRoaXMuYmxvY2tTaXplXS5sb2FkOChvZmZzZXQgJiB0aGlzLm1hc2spOwp9OwoKTWVtb3J5UHJveHkucHJvdG90eXBlLmxvYWQxNiA9IGZ1bmN0aW9uKG9mZnNldCkgewoJcmV0dXJuIHRoaXMuYmxvY2tzW29mZnNldCA+PiB0aGlzLmJsb2NrU2l6ZV0ubG9hZDE2KG9mZnNldCAmIHRoaXMubWFzayk7Cn07CgpNZW1vcnlQcm94eS5wcm90b3R5cGUubG9hZFU4ID0gZnVuY3Rpb24ob2Zmc2V0KSB7CglyZXR1cm4gdGhpcy5ibG9ja3Nbb2Zmc2V0ID4+IHRoaXMuYmxvY2tTaXplXS5sb2FkVTgob2Zmc2V0ICYgdGhpcy5tYXNrKTsKfTsKCk1lbW9yeVByb3h5LnByb3RvdHlwZS5sb2FkVTE2ID0gZnVuY3Rpb24ob2Zmc2V0KSB7CglyZXR1cm4gdGhpcy5ibG9ja3Nbb2Zmc2V0ID4+IHRoaXMuYmxvY2tTaXplXS5sb2FkVTE2KG9mZnNldCAmIHRoaXMubWFzayk7Cn07CgpNZW1vcnlQcm94eS5wcm90b3R5cGUubG9hZDMyID0gZnVuY3Rpb24ob2Zmc2V0KSB7CglyZXR1cm4gdGhpcy5ibG9ja3Nbb2Zmc2V0ID4+IHRoaXMuYmxvY2tTaXplXS5sb2FkMzIob2Zmc2V0ICYgdGhpcy5tYXNrKTsKfTsKCk1lbW9yeVByb3h5LnByb3RvdHlwZS5zdG9yZTggPSBmdW5jdGlvbihvZmZzZXQsIHZhbHVlKSB7CglpZiAob2Zmc2V0ID49IHRoaXMuc2l6ZSkgewoJCXJldHVybjsKCX0KCXRoaXMub3duZXIubWVtb3J5RGlydGllZCh0aGlzLCBvZmZzZXQgPj4gdGhpcy5ibG9ja1NpemUpOwoJdGhpcy5ibG9ja3Nbb2Zmc2V0ID4+IHRoaXMuYmxvY2tTaXplXS5zdG9yZTgob2Zmc2V0ICYgdGhpcy5tYXNrLCB2YWx1ZSk7Cgl0aGlzLmJsb2Nrc1tvZmZzZXQgPj4gdGhpcy5ibG9ja1NpemVdLnN0b3JlOCgob2Zmc2V0ICYgdGhpcy5tYXNrKSBeIDEsIHZhbHVlKTsKfTsKCk1lbW9yeVByb3h5LnByb3RvdHlwZS5zdG9yZTE2ID0gZnVuY3Rpb24ob2Zmc2V0LCB2YWx1ZSkgewoJaWYgKG9mZnNldCA+PSB0aGlzLnNpemUpIHsKCQlyZXR1cm47Cgl9Cgl0aGlzLm93bmVyLm1lbW9yeURpcnRpZWQodGhpcywgb2Zmc2V0ID4+IHRoaXMuYmxvY2tTaXplKTsKCXJldHVybiB0aGlzLmJsb2Nrc1tvZmZzZXQgPj4gdGhpcy5ibG9ja1NpemVdLnN0b3JlMTYob2Zmc2V0ICYgdGhpcy5tYXNrLCB2YWx1ZSk7Cn07CgpNZW1vcnlQcm94eS5wcm90b3R5cGUuc3RvcmUzMiA9IGZ1bmN0aW9uKG9mZnNldCwgdmFsdWUpIHsKCWlmIChvZmZzZXQgPj0gdGhpcy5zaXplKSB7CgkJcmV0dXJuOwoJfQoJdGhpcy5vd25lci5tZW1vcnlEaXJ0aWVkKHRoaXMsIG9mZnNldCA+PiB0aGlzLmJsb2NrU2l6ZSk7CglyZXR1cm4gdGhpcy5ibG9ja3Nbb2Zmc2V0ID4+IHRoaXMuYmxvY2tTaXplXS5zdG9yZTMyKG9mZnNldCAmIHRoaXMubWFzaywgdmFsdWUpOwp9OwoKTWVtb3J5UHJveHkucHJvdG90eXBlLmludmFsaWRhdGVQYWdlID0gZnVuY3Rpb24oYWRkcmVzcykge307CgpmdW5jdGlvbiBHYW1lQm95QWR2YW5jZVJlbmRlclByb3h5KCkgewoJdGhpcy53b3JrZXIgPSBuZXcgV29ya2VyKCdqcy92aWRlby93b3JrZXIuanMnKTsKCgl0aGlzLmN1cnJlbnRGcmFtZSA9IDA7Cgl0aGlzLmRlbGF5ID0gMDsKCXRoaXMuc2tpcEZyYW1lID0gZmFsc2U7CgoJdGhpcy5kaXJ0eSA9IG51bGw7Cgl2YXIgc2VsZiA9IHRoaXM7Cgl2YXIgaGFuZGxlcnMgPSB7CgkJZmluaXNoOiBmdW5jdGlvbihkYXRhKSB7CgkJCXNlbGYuYmFja2luZyA9IGRhdGEuYmFja2luZzsKCQkJc2VsZi5jYWxsZXIuZmluaXNoRHJhdyhzZWxmLmJhY2tpbmcpOwoJCQktLXNlbGYuZGVsYXk7CgkJfQoJfTsKCXRoaXMud29ya2VyLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHsKCQloYW5kbGVyc1ttZXNzYWdlLmRhdGFbJ3R5cGUnXV0obWVzc2FnZS5kYXRhKTsKCX0KfTsKCkdhbWVCb3lBZHZhbmNlUmVuZGVyUHJveHkucHJvdG90eXBlLm1lbW9yeURpcnRpZWQgPSBmdW5jdGlvbihtZW0sIGJsb2NrKSB7Cgl0aGlzLmRpcnR5ID0gdGhpcy5kaXJ0eSB8fCB7fTsKCXRoaXMuZGlydHkubWVtb3J5ID0gdGhpcy5kaXJ0eS5tZW1vcnkgfHwge307CglpZiAobWVtID09PSB0aGlzLnBhbGV0dGUpIHsKCQl0aGlzLmRpcnR5Lm1lbW9yeS5wYWxldHRlID0gbWVtLmJsb2Nrc1swXS5idWZmZXI7Cgl9CglpZiAobWVtID09PSB0aGlzLm9hbSkgewoJCXRoaXMuZGlydHkubWVtb3J5Lm9hbSA9IG1lbS5ibG9ja3NbMF0uYnVmZmVyOwoJfQoJaWYgKG1lbSA9PT0gdGhpcy52cmFtKSB7CgkJdGhpcy5kaXJ0eS5tZW1vcnkudnJhbSA9IHRoaXMuZGlydHkubWVtb3J5LnZyYW0gfHwgW107CgkJdGhpcy5kaXJ0eS5tZW1vcnkudnJhbVtibG9ja10gPSBtZW0uYmxvY2tzW2Jsb2NrXS5idWZmZXI7Cgl9Cn07CgpHYW1lQm95QWR2YW5jZVJlbmRlclByb3h5LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKG1tdSkgewoJdGhpcy5wYWxldHRlID0gbmV3IE1lbW9yeVByb3h5KHRoaXMsIG1tdS5TSVpFX1BBTEVUVEVfUkFNLCAwKTsKCXRoaXMudnJhbSA9IG5ldyBNZW1vcnlQcm94eSh0aGlzLCBtbXUuU0laRV9WUkFNLCAxMyk7Cgl0aGlzLm9hbSA9IG5ldyBNZW1vcnlQcm94eSh0aGlzLCBtbXUuU0laRV9PQU0sIDApOwoKCXRoaXMuZGlydHkgPSBudWxsOwoJdGhpcy5zY2FubGluZVF1ZXVlID0gW107CgoJdGhpcy53b3JrZXIucG9zdE1lc3NhZ2UoeyB0eXBlOiAnY2xlYXInLCBTSVpFX1ZSQU06IG1tdS5TSVpFX1ZSQU0sIFNJWkVfT0FNOiBtbXUuU0laRV9PQU0gfSk7Cn07CgpHYW1lQm95QWR2YW5jZVJlbmRlclByb3h5LnByb3RvdHlwZS5mcmVlemUgPSBmdW5jdGlvbihlbmNvZGVCYXNlNjQpIHsKCXJldHVybiB7CgkJJ3BhbGV0dGUnOiBTZXJpYWxpemVyLnByZWZpeCh0aGlzLnBhbGV0dGUuY29tYmluZSgpKSwKCQkndnJhbSc6IFNlcmlhbGl6ZXIucHJlZml4KHRoaXMudnJhbS5jb21iaW5lKCkpLAoJCSdvYW0nOiBTZXJpYWxpemVyLnByZWZpeCh0aGlzLm9hbS5jb21iaW5lKCkpCgl9Owp9OwoKR2FtZUJveUFkdmFuY2VSZW5kZXJQcm94eS5wcm90b3R5cGUuZGVmcm9zdCA9IGZ1bmN0aW9uKGZyb3N0LCBkZWNvZGVCYXNlNjQpIHsKCXRoaXMucGFsZXR0ZS5yZXBsYWNlKGZyb3N0LnBhbGV0dGUpOwoJdGhpcy5tZW1vcnlEaXJ0aWVkKHRoaXMucGFsZXR0ZSwgMCk7Cgl0aGlzLnZyYW0ucmVwbGFjZShmcm9zdC52cmFtKTsKCWZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy52cmFtLmJsb2Nrcy5sZW5ndGg7ICsraSkgewoJCXRoaXMubWVtb3J5RGlydGllZCh0aGlzLnZyYW0sIGkpOwoJfQoJdGhpcy5vYW0ucmVwbGFjZShmcm9zdC5vYW0pOwoJdGhpcy5tZW1vcnlEaXJ0aWVkKHRoaXMub2FtLCAwKTsKfTsKCkdhbWVCb3lBZHZhbmNlUmVuZGVyUHJveHkucHJvdG90eXBlLndyaXRlRGlzcGxheUNvbnRyb2wgPSBmdW5jdGlvbih2YWx1ZSkgewoJdGhpcy5kaXJ0eSA9IHRoaXMuZGlydHkgfHwge307Cgl0aGlzLmRpcnR5LkRJU1BDTlQgPSB2YWx1ZTsKfTsKCkdhbWVCb3lBZHZhbmNlUmVuZGVyUHJveHkucHJvdG90eXBlLndyaXRlQmFja2dyb3VuZENvbnRyb2wgPSBmdW5jdGlvbihiZywgdmFsdWUpIHsKCXRoaXMuZGlydHkgPSB0aGlzLmRpcnR5IHx8IHt9OwoJdGhpcy5kaXJ0eS5CR0NOVCA9IHRoaXMuZGlydHkuQkdDTlQgfHwgW107Cgl0aGlzLmRpcnR5LkJHQ05UW2JnXSA9IHZhbHVlOwp9OwoKR2FtZUJveUFkdmFuY2VSZW5kZXJQcm94eS5wcm90b3R5cGUud3JpdGVCYWNrZ3JvdW5kSE9mZnNldCA9IGZ1bmN0aW9uKGJnLCB2YWx1ZSkgewoJdGhpcy5kaXJ0eSA9IHRoaXMuZGlydHkgfHwge307Cgl0aGlzLmRpcnR5LkJHSE9GUyA9IHRoaXMuZGlydHkuQkdIT0ZTIHx8IFtdOwoJdGhpcy5kaXJ0eS5CR0hPRlNbYmddID0gdmFsdWU7Cn07CgpHYW1lQm95QWR2YW5jZVJlbmRlclByb3h5LnByb3RvdHlwZS53cml0ZUJhY2tncm91bmRWT2Zmc2V0ID0gZnVuY3Rpb24oYmcsIHZhbHVlKSB7Cgl0aGlzLmRpcnR5ID0gdGhpcy5kaXJ0eSB8fCB7fTsKCXRoaXMuZGlydHkuQkdWT0ZTID0gdGhpcy5kaXJ0eS5CR1ZPRlMgfHwgW107Cgl0aGlzLmRpcnR5LkJHVk9GU1tiZ10gPSB2YWx1ZTsKfTsKCkdhbWVCb3lBZHZhbmNlUmVuZGVyUHJveHkucHJvdG90eXBlLndyaXRlQmFja2dyb3VuZFJlZlggPSBmdW5jdGlvbihiZywgdmFsdWUpIHsKCXRoaXMuZGlydHkgPSB0aGlzLmRpcnR5IHx8IHt9OwoJdGhpcy5kaXJ0eS5CR1ggPSB0aGlzLmRpcnR5LkJHWCB8fCBbXTsKCXRoaXMuZGlydHkuQkdYW2JnXSA9IHZhbHVlOwp9OwoKR2FtZUJveUFkdmFuY2VSZW5kZXJQcm94eS5wcm90b3R5cGUud3JpdGVCYWNrZ3JvdW5kUmVmWSA9IGZ1bmN0aW9uKGJnLCB2YWx1ZSkgewoJdGhpcy5kaXJ0eSA9IHRoaXMuZGlydHkgfHwge307Cgl0aGlzLmRpcnR5LkJHWSA9IHRoaXMuZGlydHkuQkdZIHx8IFtdOwoJdGhpcy5kaXJ0eS5CR1lbYmddID0gdmFsdWU7Cn07CgpHYW1lQm95QWR2YW5jZVJlbmRlclByb3h5LnByb3RvdHlwZS53cml0ZUJhY2tncm91bmRQYXJhbUEgPSBmdW5jdGlvbihiZywgdmFsdWUpIHsKCXRoaXMuZGlydHkgPSB0aGlzLmRpcnR5IHx8IHt9OwoJdGhpcy5kaXJ0eS5CR1BBID0gdGhpcy5kaXJ0eS5CR1BBIHx8IFtdOwoJdGhpcy5kaXJ0eS5CR1BBW2JnXSA9IHZhbHVlOwp9OwoKR2FtZUJveUFkdmFuY2VSZW5kZXJQcm94eS5wcm90b3R5cGUud3JpdGVCYWNrZ3JvdW5kUGFyYW1CID0gZnVuY3Rpb24oYmcsIHZhbHVlKSB7Cgl0aGlzLmRpcnR5ID0gdGhpcy5kaXJ0eSB8fCB7fTsKCXRoaXMuZGlydHkuQkdQQiA9IHRoaXMuZGlydHkuQkdQQiB8fCBbXTsKCXRoaXMuZGlydHkuQkdQQltiZ10gPSB2YWx1ZTsKfTsKCkdhbWVCb3lBZHZhbmNlUmVuZGVyUHJveHkucHJvdG90eXBlLndyaXRlQmFja2dyb3VuZFBhcmFtQyA9IGZ1bmN0aW9uKGJnLCB2YWx1ZSkgewoJdGhpcy5kaXJ0eSA9IHRoaXMuZGlydHkgfHwge307Cgl0aGlzLmRpcnR5LkJHUEMgPSB0aGlzLmRpcnR5LkJHUEMgfHwgW107Cgl0aGlzLmRpcnR5LkJHUENbYmddID0gdmFsdWU7Cn07CgpHYW1lQm95QWR2YW5jZVJlbmRlclByb3h5LnByb3RvdHlwZS53cml0ZUJhY2tncm91bmRQYXJhbUQgPSBmdW5jdGlvbihiZywgdmFsdWUpIHsKCXRoaXMuZGlydHkgPSB0aGlzLmRpcnR5IHx8IHt9OwoJdGhpcy5kaXJ0eS5CR1BEID0gdGhpcy5kaXJ0eS5CR1BEIHx8IFtdOwoJdGhpcy5kaXJ0eS5CR1BEW2JnXSA9IHZhbHVlOwp9OwoKR2FtZUJveUFkdmFuY2VSZW5kZXJQcm94eS5wcm90b3R5cGUud3JpdGVXaW4wSCA9IGZ1bmN0aW9uKHZhbHVlKSB7Cgl0aGlzLmRpcnR5ID0gdGhpcy5kaXJ0eSB8fCB7fTsKCXRoaXMuZGlydHkuV0lOMEggPSB2YWx1ZTsKfTsKCkdhbWVCb3lBZHZhbmNlUmVuZGVyUHJveHkucHJvdG90eXBlLndyaXRlV2luMUggPSBmdW5jdGlvbih2YWx1ZSkgewoJdGhpcy5kaXJ0eSA9IHRoaXMuZGlydHkgfHwge307Cgl0aGlzLmRpcnR5LldJTjFIID0gdmFsdWU7Cn07CgpHYW1lQm95QWR2YW5jZVJlbmRlclByb3h5LnByb3RvdHlwZS53cml0ZVdpbjBWID0gZnVuY3Rpb24odmFsdWUpIHsKCXRoaXMuZGlydHkgPSB0aGlzLmRpcnR5IHx8IHt9OwoJdGhpcy5kaXJ0eS5XSU4wViA9IHZhbHVlOwp9OwoKR2FtZUJveUFkdmFuY2VSZW5kZXJQcm94eS5wcm90b3R5cGUud3JpdGVXaW4xViA9IGZ1bmN0aW9uKHZhbHVlKSB7Cgl0aGlzLmRpcnR5ID0gdGhpcy5kaXJ0eSB8fCB7fTsKCXRoaXMuZGlydHkuV0lOMVYgPSB2YWx1ZTsKfTsKCkdhbWVCb3lBZHZhbmNlUmVuZGVyUHJveHkucHJvdG90eXBlLndyaXRlV2luSW4gPSBmdW5jdGlvbih2YWx1ZSkgewoJdGhpcy5kaXJ0eSA9IHRoaXMuZGlydHkgfHwge307Cgl0aGlzLmRpcnR5LldJTklOID0gdmFsdWU7Cn07CgpHYW1lQm95QWR2YW5jZVJlbmRlclByb3h5LnByb3RvdHlwZS53cml0ZVdpbk91dCA9IGZ1bmN0aW9uKHZhbHVlKSB7Cgl0aGlzLmRpcnR5ID0gdGhpcy5kaXJ0eSB8fCB7fTsKCXRoaXMuZGlydHkuV0lOT1VUID0gdmFsdWU7Cn07CgpHYW1lQm95QWR2YW5jZVJlbmRlclByb3h5LnByb3RvdHlwZS53cml0ZUJsZW5kQ29udHJvbCA9IGZ1bmN0aW9uKHZhbHVlKSB7Cgl0aGlzLmRpcnR5ID0gdGhpcy5kaXJ0eSB8fCB7fTsKCXRoaXMuZGlydHkuQkxEQ05UID0gdmFsdWU7Cn07CgpHYW1lQm95QWR2YW5jZVJlbmRlclByb3h5LnByb3RvdHlwZS53cml0ZUJsZW5kQWxwaGEgPSBmdW5jdGlvbih2YWx1ZSkgewoJdGhpcy5kaXJ0eSA9IHRoaXMuZGlydHkgfHwge307Cgl0aGlzLmRpcnR5LkJMREFMUEhBID0gdmFsdWU7Cn07CgpHYW1lQm95QWR2YW5jZVJlbmRlclByb3h5LnByb3RvdHlwZS53cml0ZUJsZW5kWSA9IGZ1bmN0aW9uKHZhbHVlKSB7Cgl0aGlzLmRpcnR5ID0gdGhpcy5kaXJ0eSB8fCB7fTsKCXRoaXMuZGlydHkuQkxEWSA9IHZhbHVlOwp9OwoKR2FtZUJveUFkdmFuY2VSZW5kZXJQcm94eS5wcm90b3R5cGUud3JpdGVNb3NhaWMgPSBmdW5jdGlvbih2YWx1ZSkgewoJdGhpcy5kaXJ0eSA9IHRoaXMuZGlydHkgfHwge307Cgl0aGlzLmRpcnR5Lk1PU0FJQyA9IHZhbHVlOwp9OwoKR2FtZUJveUFkdmFuY2VSZW5kZXJQcm94eS5wcm90b3R5cGUuY2xlYXJTdWJzZXRzID0gZnVuY3Rpb24obW11LCByZWdpb25zKSB7Cgl0aGlzLmRpcnR5ID0gdGhpcy5kaXJ0eSB8fCB7fTsKCWlmIChyZWdpb25zICYgMHgwNCkgewoJCXRoaXMucGFsZXR0ZSA9IG5ldyBNZW1vcnlQcm94eSh0aGlzLCBtbXUuU0laRV9QQUxFVFRFX1JBTSwgMCk7CgkJbW11Lm1tYXAobW11LlJFR0lPTl9QQUxFVFRFX1JBTSwgdGhpcy5wYWxldHRlKTsKCQl0aGlzLm1lbW9yeURpcnRpZWQodGhpcy5wYWxldHRlLCAwKTsKCX0KCWlmIChyZWdpb25zICYgMHgwOCkgewoJCXRoaXMudnJhbSA9IG5ldyBNZW1vcnlQcm94eSh0aGlzLCBtbXUuU0laRV9WUkFNLCAxMyk7CgkJbW11Lm1tYXAobW11LlJFR0lPTl9WUkFNLCB0aGlzLnZyYW0pOwoJCWZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy52cmFtLmJsb2Nrcy5sZW5ndGg7ICsraSkgewoJCQl0aGlzLm1lbW9yeURpcnRpZWQodGhpcy52cmFtLCBpKTsKCQl9Cgl9CglpZiAocmVnaW9ucyAmIDB4MTApIHsKCQl0aGlzLm9hbSA9IG5ldyBNZW1vcnlQcm94eSh0aGlzLCBtbXUuU0laRV9PQU0sIDApOwoJCW1tdS5tbWFwKG1tdS5SRUdJT05fT0FNLCB0aGlzLm9hbSk7CgkJdGhpcy5tZW1vcnlEaXJ0aWVkKHRoaXMub2FtLCAwKTsKCX0KfTsKCkdhbWVCb3lBZHZhbmNlUmVuZGVyUHJveHkucHJvdG90eXBlLnNldEJhY2tpbmcgPSBmdW5jdGlvbihiYWNraW5nKSB7Cgl0aGlzLmJhY2tpbmcgPSBiYWNraW5nOwoJdGhpcy53b3JrZXIucG9zdE1lc3NhZ2UoeyB0eXBlOiAnc3RhcnQnLCBiYWNraW5nOiB0aGlzLmJhY2tpbmcgfSk7Cn07CgpHYW1lQm95QWR2YW5jZVJlbmRlclByb3h5LnByb3RvdHlwZS5kcmF3U2NhbmxpbmUgPSBmdW5jdGlvbih5KSB7CglpZiAoIXRoaXMuc2tpcEZyYW1lKSB7CgkJaWYgKHRoaXMuZGlydHkpIHsKCQkJaWYgKHRoaXMuZGlydHkubWVtb3J5KSB7CgkJCQlpZiAodGhpcy5kaXJ0eS5tZW1vcnkucGFsZXR0ZSkgewoJCQkJCXRoaXMuZGlydHkubWVtb3J5LnBhbGV0dGUgPSB0aGlzLmRpcnR5Lm1lbW9yeS5wYWxldHRlLnNsaWNlKDApOwoJCQkJfQoJCQkJaWYgKHRoaXMuZGlydHkubWVtb3J5Lm9hbSkgewoJCQkJCXRoaXMuZGlydHkubWVtb3J5Lm9hbSA9IHRoaXMuZGlydHkubWVtb3J5Lm9hbS5zbGljZSgwKTsKCQkJCX0KCQkJCWlmICh0aGlzLmRpcnR5Lm1lbW9yeS52cmFtKSB7CgkJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCAxMjsgKytpKSB7CgkJCQkJCWlmICh0aGlzLmRpcnR5Lm1lbW9yeS52cmFtW2ldKSB7CgkJCQkJCQl0aGlzLmRpcnR5Lm1lbW9yeS52cmFtW2ldID0gdGhpcy5kaXJ0eS5tZW1vcnkudnJhbVtpXS5zbGljZSgwKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfQoJCQl0aGlzLnNjYW5saW5lUXVldWUucHVzaCh7IHk6IHksIGRpcnR5OiB0aGlzLmRpcnR5IH0pOwoJCQl0aGlzLmRpcnR5ID0gbnVsbDsKCQl9Cgl9Cn07CgpHYW1lQm95QWR2YW5jZVJlbmRlclByb3h5LnByb3RvdHlwZS5zdGFydERyYXcgPSBmdW5jdGlvbigpIHsKCSsrdGhpcy5jdXJyZW50RnJhbWU7CglpZiAodGhpcy5kZWxheSA8PSAwKSB7CgkJdGhpcy5za2lwRnJhbWUgPSBmYWxzZTsKCX0KCWlm
ICghdGhpcy5za2lwRnJhbWUpIHsKCQkrK3RoaXMuZGVsYXk7Cgl9Cn07CgpHYW1lQm95QWR2YW5jZVJlbmRlclByb3h5LnByb3RvdHlwZS5maW5pc2hEcmF3ID0gZnVuY3Rpb24oY2FsbGVyKSB7Cgl0aGlzLmNhbGxlciA9IGNhbGxlcjsKCWlmICghdGhpcy5za2lwRnJhbWUpIHsKCQl0aGlzLndvcmtlci5wb3N0TWVzc2FnZSh7IHR5cGU6ICdmaW5pc2gnLCBzY2FubGluZXM6IHRoaXMuc2NhbmxpbmVRdWV1ZSwgZnJhbWU6IHRoaXMuY3VycmVudEZyYW1lIH0pOwoJCXRoaXMuc2NhbmxpbmVRdWV1ZSA9IFtdOwoJCWlmICh0aGlzLmRlbGF5ID4gMikgewoJCQl0aGlzLnNraXBGcmFtZSA9IHRydWU7CgkJfQoJfQp9Owo="></script>
<script src="data:@file/javascript;base64,ZnVuY3Rpb24gTWVtb3J5QWxpZ25lZDE2KHNpemUpIHsKCXRoaXMuYnVmZmVyID0gbmV3IFVpbnQxNkFycmF5KHNpemUgPj4gMSk7Cn07CgpNZW1vcnlBbGlnbmVkMTYucHJvdG90eXBlLmxvYWQ4ID0gZnVuY3Rpb24ob2Zmc2V0KSB7CglyZXR1cm4gKHRoaXMubG9hZFU4KG9mZnNldCkgPDwgMjQpID4+IDI0Owp9OwoKTWVtb3J5QWxpZ25lZDE2LnByb3RvdHlwZS5sb2FkMTYgPSBmdW5jdGlvbihvZmZzZXQpIHsKCXJldHVybiAodGhpcy5sb2FkVTE2KG9mZnNldCkgPDwgMTYpID4+IDE2Owp9OwoKTWVtb3J5QWxpZ25lZDE2LnByb3RvdHlwZS5sb2FkVTggPSBmdW5jdGlvbihvZmZzZXQpIHsKCXZhciBpbmRleCA9IG9mZnNldCA+PiAxOwoJaWYgKG9mZnNldCAmIDEpIHsKCQlyZXR1cm4gKHRoaXMuYnVmZmVyW2luZGV4XSAmIDB4RkYwMCkgPj4+IDg7Cgl9IGVsc2UgewoJCXJldHVybiB0aGlzLmJ1ZmZlcltpbmRleF0gJiAweDAwRkY7Cgl9Cn07CgpNZW1vcnlBbGlnbmVkMTYucHJvdG90eXBlLmxvYWRVMTYgPSBmdW5jdGlvbihvZmZzZXQpIHsKCXJldHVybiB0aGlzLmJ1ZmZlcltvZmZzZXQgPj4gMV07Cn07CgpNZW1vcnlBbGlnbmVkMTYucHJvdG90eXBlLmxvYWQzMiA9IGZ1bmN0aW9uKG9mZnNldCkgewoJcmV0dXJuIHRoaXMuYnVmZmVyWyhvZmZzZXQgPj4gMSkgJiB+MV0gfCAodGhpcy5idWZmZXJbKG9mZnNldCA+PiAxKSB8IDFdIDw8IDE2KTsKfTsKCk1lbW9yeUFsaWduZWQxNi5wcm90b3R5cGUuc3RvcmU4ID0gZnVuY3Rpb24ob2Zmc2V0LCB2YWx1ZSkgewoJdmFyIGluZGV4ID0gb2Zmc2V0ID4+IDE7Cgl0aGlzLnN0b3JlMTYob2Zmc2V0LCAodmFsdWUgPDwgOCkgfCB2YWx1ZSk7Cn07CgpNZW1vcnlBbGlnbmVkMTYucHJvdG90eXBlLnN0b3JlMTYgPSBmdW5jdGlvbihvZmZzZXQsIHZhbHVlKSB7Cgl0aGlzLmJ1ZmZlcltvZmZzZXQgPj4gMV0gPSB2YWx1ZTsKfTsKCk1lbW9yeUFsaWduZWQxNi5wcm90b3R5cGUuc3RvcmUzMiA9IGZ1bmN0aW9uKG9mZnNldCwgdmFsdWUpIHsKCXZhciBpbmRleCA9IG9mZnNldCA+PiAxOwoJdGhpcy5zdG9yZTE2KG9mZnNldCwgdGhpcy5idWZmZXJbaW5kZXhdID0gdmFsdWUgJiAweEZGRkYpOwoJdGhpcy5zdG9yZTE2KG9mZnNldCArIDIsIHRoaXMuYnVmZmVyW2luZGV4ICsgMV0gPSB2YWx1ZSA+Pj4gMTYpOwp9OwoKTWVtb3J5QWxpZ25lZDE2LnByb3RvdHlwZS5pbnNlcnQgPSBmdW5jdGlvbihzdGFydCwgZGF0YSkgewoJdGhpcy5idWZmZXIuc2V0KGRhdGEsIHN0YXJ0KTsKfTsKCk1lbW9yeUFsaWduZWQxNi5wcm90b3R5cGUuaW52YWxpZGF0ZVBhZ2UgPSBmdW5jdGlvbihhZGRyZXNzKSB7fTsKCmZ1bmN0aW9uIEdhbWVCb3lBZHZhbmNlVlJBTShzaXplKSB7CglNZW1vcnlBbGlnbmVkMTYuY2FsbCh0aGlzLCBzaXplKTsKCXRoaXMudnJhbSA9IHRoaXMuYnVmZmVyOwp9OwoKR2FtZUJveUFkdmFuY2VWUkFNLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoTWVtb3J5QWxpZ25lZDE2LnByb3RvdHlwZSk7CgpmdW5jdGlvbiBHYW1lQm95QWR2YW5jZU9BTShzaXplKSB7CglNZW1vcnlBbGlnbmVkMTYuY2FsbCh0aGlzLCBzaXplKTsKCXRoaXMub2FtID0gdGhpcy5idWZmZXI7Cgl0aGlzLm9ianMgPSBuZXcgQXJyYXkoMTI4KTsKCWZvciAodmFyIGkgPSAwOyBpIDwgMTI4OyArK2kpIHsKCQl0aGlzLm9ianNbaV0gPSBuZXcgR2FtZUJveUFkdmFuY2VPQkoodGhpcywgaSk7Cgl9Cgl0aGlzLnNjYWxlcm90ID0gbmV3IEFycmF5KDMyKTsKCWZvciAodmFyIGkgPSAwOyBpIDwgMzI7ICsraSkgewoJCXRoaXMuc2NhbGVyb3RbaV0gPSB7CgkJCWE6IDEsCgkJCWI6IDAsCgkJCWM6IDAsCgkJCWQ6IDEKCQl9OwoJfQp9OwoKR2FtZUJveUFkdmFuY2VPQU0ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShNZW1vcnlBbGlnbmVkMTYucHJvdG90eXBlKTsKCkdhbWVCb3lBZHZhbmNlT0FNLnByb3RvdHlwZS5vdmVyd3JpdGUgPSBmdW5jdGlvbihtZW1vcnkpIHsKCWZvciAodmFyIGkgPSAwOyBpIDwgKHRoaXMuYnVmZmVyLmJ5dGVMZW5ndGggPj4gMSk7ICsraSkgewoJCXRoaXMuc3RvcmUxNihpIDw8IDEsIG1lbW9yeVtpXSk7Cgl9Cn07CgpHYW1lQm95QWR2YW5jZU9BTS5wcm90b3R5cGUuc3RvcmUxNiA9IGZ1bmN0aW9uKG9mZnNldCwgdmFsdWUpIHsKCXZhciBpbmRleCA9IChvZmZzZXQgJiAweDNGOCkgPj4gMzsKCXZhciBvYmogPSB0aGlzLm9ianNbaW5kZXhdOwoJdmFyIHNjYWxlcm90ID0gdGhpcy5zY2FsZXJvdFtpbmRleCA+PiAyXTsKCXZhciBsYXllciA9IG9iai5wcmlvcml0eTsKCXZhciBkaXNhYmxlID0gb2JqLmRpc2FibGU7Cgl2YXIgeSA9IG9iai55OwoJc3dpdGNoIChvZmZzZXQgJiAweDAwMDAwMDA2KSB7CgljYXNlIDA6CgkJLy8gQXR0cmlidXRlIDAKCQlvYmoueSA9IHZhbHVlICYgMHgwMEZGOwoJCXZhciB3YXNTY2FsZXJvdCA9IG9iai5zY2FsZXJvdDsKCQlvYmouc2NhbGVyb3QgPSB2YWx1ZSAmIDB4MDEwMDsKCQlpZiAob2JqLnNjYWxlcm90KSB7CgkJCW9iai5zY2FsZXJvdE9hbSA9IHRoaXMuc2NhbGVyb3Rbb2JqLnNjYWxlcm90UGFyYW1dOwoJCQlvYmouZG91Ymxlc2l6ZSA9ICEhKHZhbHVlICYgMHgwMjAwKTsKCQkJb2JqLmRpc2FibGUgPSAwOwoJCQlvYmouaGZsaXAgPSAwOwoJCQlvYmoudmZsaXAgPSAwOwoJCX0gZWxzZSB7CgkJCW9iai5kb3VibGVzaXplID0gZmFsc2U7CgkJCW9iai5kaXNhYmxlID0gdmFsdWUgJiAweDAyMDA7CgkJCWlmICh3YXNTY2FsZXJvdCkgewoJCQkJb2JqLmhmbGlwID0gb2JqLnNjYWxlcm90UGFyYW0gJiAweDAwMDg7CgkJCQlvYmoudmZsaXAgPSBvYmouc2NhbGVyb3RQYXJhbSAmIDB4MDAxMDsKCQkJfQoJCX0KCQlvYmoubW9kZSA9ICh2YWx1ZSAmIDB4MEMwMCkgPj4gNjsgLy8gVGhpcyBsaW5lcyB1cCB3aXRoIHRoZSBzdGVuY2lsIGZvcm1hdAoJCW9iai5tb3NhaWMgPSB2YWx1ZSAmIDB4MTAwMDsKCQlvYmoubXVsdGlwYWxldHRlID0gdmFsdWUgJiAweDIwMDA7CgkJb2JqLnNoYXBlID0gKHZhbHVlICYgMHhDMDAwKSA+PiAxNDsKCgkJb2JqLnJlY2FsY1NpemUoKTsKCQlicmVhazsKCWNhc2UgMjoKCQkvLyBBdHRyaWJ1dGUgMQoJCW9iai54ID0gdmFsdWUgJiAweDAxRkY7CgkJaWYgKG9iai5zY2FsZXJvdCkgewoJCQlvYmouc2NhbGVyb3RQYXJhbSA9ICh2YWx1ZSAmIDB4M0UwMCkgPj4gOTsKCQkJb2JqLnNjYWxlcm90T2FtID0gdGhpcy5zY2FsZXJvdFtvYmouc2NhbGVyb3RQYXJhbV07CgkJCW9iai5oZmxpcCA9IDA7CgkJCW9iai52ZmxpcCA9IDA7CgkJCW9iai5kcmF3U2NhbmxpbmUgPSBvYmouZHJhd1NjYW5saW5lQWZmaW5lOwoJCX0gZWxzZSB7CgkJCW9iai5oZmxpcCA9IHZhbHVlICYgMHgxMDAwOwoJCQlvYmoudmZsaXAgPSB2YWx1ZSAmIDB4MjAwMDsKCQkJb2JqLmRyYXdTY2FubGluZSA9IG9iai5kcmF3U2NhbmxpbmVOb3JtYWw7CgkJfQoJCW9iai5zaXplID0gKHZhbHVlICYgMHhDMDAwKSA+PiAxNDsKCgkJb2JqLnJlY2FsY1NpemUoKTsKCQlicmVhazsKCWNhc2UgNDoKCQkvLyBBdHRyaWJ1dGUgMgoJCW9iai50aWxlQmFzZSA9IHZhbHVlICYgMHgwM0ZGOwoJCW9iai5wcmlvcml0eSA9ICh2YWx1ZSAmIDB4MEMwMCkgPj4gMTA7CgkJb2JqLnBhbGV0dGUgPSAodmFsdWUgJiAweEYwMDApID4+IDg7IC8vIFRoaXMgaXMgc2hpZnRlZCB1cCA0IHRvIG1ha2UgcHVzaFBpeGVsIGZhc3RlcgoJCWJyZWFrOwoJY2FzZSA2OgoJCS8vIFNjYWxpbmcvcm90YXRpb24gcGFyYW1ldGVyCgkJc3dpdGNoIChpbmRleCAmIDB4MykgewoJCWNhc2UgMDoKCQkJc2NhbGVyb3QuYSA9ICh2YWx1ZSA8PCAxNikgLyAweDEwMDAwMDA7CgkJCWJyZWFrOwoJCWNhc2UgMToKCQkJc2NhbGVyb3QuYiA9ICh2YWx1ZSA8PCAxNikgLyAweDEwMDAwMDA7CgkJCWJyZWFrOwoJCWNhc2UgMjoKCQkJc2NhbGVyb3QuYyA9ICh2YWx1ZSA8PCAxNikgLyAweDEwMDAwMDA7CgkJCWJyZWFrOwoJCWNhc2UgMzoKCQkJc2NhbGVyb3QuZCA9ICh2YWx1ZSA8PCAxNikgLyAweDEwMDAwMDA7CgkJCWJyZWFrOwoJCX0KCQlicmVhazsKCX0KCglNZW1vcnlBbGlnbmVkMTYucHJvdG90eXBlLnN0b3JlMTYuY2FsbCh0aGlzLCBvZmZzZXQsIHZhbHVlKTsKfTsKCmZ1bmN0aW9uIEdhbWVCb3lBZHZhbmNlUGFsZXR0ZSgpIHsKCXRoaXMuY29sb3JzID0gWyBuZXcgQXJyYXkoMHgxMDApLCBuZXcgQXJyYXkoMHgxMDApIF07Cgl0aGlzLmFkanVzdGVkQ29sb3JzID0gWyBuZXcgQXJyYXkoMHgxMDApLCBuZXcgQXJyYXkoMHgxMDApIF07Cgl0aGlzLnBhc3N0aHJvdWdoQ29sb3JzID0gWwoJCXRoaXMuY29sb3JzWzBdLCAvLyBCRzAKCQl0aGlzLmNvbG9yc1swXSwgLy8gQkcxCgkJdGhpcy5jb2xvcnNbMF0sIC8vIEJHMgoJCXRoaXMuY29sb3JzWzBdLCAvLyBCRzMKCQl0aGlzLmNvbG9yc1sxXSwgLy8gT0JKCgkJdGhpcy5jb2xvcnNbMF0gLy8gQmFja2Ryb3AKCV07Cgl0aGlzLmJsZW5kWSA9IDE7Cn07CgpHYW1lQm95QWR2YW5jZVBhbGV0dGUucHJvdG90eXBlLm92ZXJ3cml0ZSA9IGZ1bmN0aW9uKG1lbW9yeSkgewoJZm9yICh2YXIgaSA9IDA7IGkgPCA1MTI7ICsraSkgewoJCXRoaXMuc3RvcmUxNihpIDw8IDEsIG1lbW9yeVtpXSk7Cgl9Cn07CgpHYW1lQm95QWR2YW5jZVBhbGV0dGUucHJvdG90eXBlLmxvYWRVOCA9IGZ1bmN0aW9uKG9mZnNldCkgewoJcmV0dXJuICh0aGlzLmxvYWRVMTYob2Zmc2V0KSA+PiAoOCAqIChvZmZzZXQgJiAxKSkpICYgMHhGRjsKfTsKCkdhbWVCb3lBZHZhbmNlUGFsZXR0ZS5wcm90b3R5cGUubG9hZFUxNiA9IGZ1bmN0aW9uKG9mZnNldCkgewoJcmV0dXJuIHRoaXMuY29sb3JzWyhvZmZzZXQgJiAweDIwMCkgPj4gOV1bKG9mZnNldCAmIDB4MUZGKSA+PiAxXTsKfTsKCkdhbWVCb3lBZHZhbmNlUGFsZXR0ZS5wcm90b3R5cGUubG9hZDE2ID0gZnVuY3Rpb24ob2Zmc2V0KSB7CglyZXR1cm4gKHRoaXMubG9hZFUxNihvZmZzZXQpIDw8IDE2KSA+PiAxNjsKfTsKCkdhbWVCb3lBZHZhbmNlUGFsZXR0ZS5wcm90b3R5cGUubG9hZDMyID0gZnVuY3Rpb24ob2Zmc2V0KSB7CglyZXR1cm4gdGhpcy5sb2FkVTE2KG9mZnNldCkgfCAodGhpcy5sb2FkVTE2KG9mZnNldCArIDIpIDw8IDE2KTsKfTsKCkdhbWVCb3lBZHZhbmNlUGFsZXR0ZS5wcm90b3R5cGUuc3RvcmUxNiA9IGZ1bmN0aW9uKG9mZnNldCwgdmFsdWUpIHsKCXZhciB0eXBlID0gKG9mZnNldCAmIDB4MjAwKSA+PiA5OwoJdmFyIGluZGV4ID0gKG9mZnNldCAmIDB4MUZGKSA+PiAxOwoJdGhpcy5jb2xvcnNbdHlwZV1baW5kZXhdID0gdmFsdWU7Cgl0aGlzLmFkanVzdGVkQ29sb3JzW3R5cGVdW2luZGV4XSA9IHRoaXMuYWRqdXN0Q29sb3IodmFsdWUpOwp9OwoKR2FtZUJveUFkdmFuY2VQYWxldHRlLnByb3RvdHlwZS5zdG9yZTMyID0gZnVuY3Rpb24ob2Zmc2V0LCB2YWx1ZSkgewoJdGhpcy5zdG9yZTE2KG9mZnNldCwgdmFsdWUgJiAweEZGRkYpOwoJdGhpcy5zdG9yZTE2KG9mZnNldCArIDIsIHZhbHVlID4+IDE2KTsKfTsKCkdhbWVCb3lBZHZhbmNlUGFsZXR0ZS5wcm90b3R5cGUuaW52YWxpZGF0ZVBhZ2UgPSBmdW5jdGlvbihhZGRyZXNzKSB7fTsKCkdhbWVCb3lBZHZhbmNlUGFsZXR0ZS5wcm90b3R5cGUuY29udmVydDE2VG8zMiA9IGZ1bmN0aW9uKHZhbHVlLCBpbnB1dCkgewoJdmFyIHIgPSAodmFsdWUgJiAweDAwMUYpIDw8IDM7Cgl2YXIgZyA9ICh2YWx1ZSAmIDB4MDNFMCkgPj4gMjsKCXZhciBiID0gKHZhbHVlICYgMHg3QzAwKSA+PiA3OwoKCWlucHV0WzBdID0gcjsKCWlucHV0WzFdID0gZzsKCWlucHV0WzJdID0gYjsKfTsKCkdhbWVCb3lBZHZhbmNlUGFsZXR0ZS5wcm90b3R5cGUubWl4ID0gZnVuY3Rpb24oYVdlaWdodCwgYUNvbG9yLCBiV2VpZ2h0LCBiQ29sb3IpIHsKCXZhciBhciA9IChhQ29sb3IgJiAweDAwMUYpOwoJdmFyIGFnID0gKGFDb2xvciAmIDB4MDNFMCkgPj4gNTsKCXZhciBhYiA9IChhQ29sb3IgJiAweDdDMDApID4+IDEwOwoKCXZhciBiciA9IChiQ29sb3IgJiAweDAwMUYpOwoJdmFyIGJnID0gKGJDb2xvciAmIDB4MDNFMCkgPj4gNTsKCXZhciBiYiA9IChiQ29sb3IgJiAweDdDMDApID4+IDEwOwoKCXZhciByID0gTWF0aC5taW4oYVdlaWdodCAqIGFyICsgYldlaWdodCAqIGJyLCAweDFGKTsKCXZhciBnID0gTWF0aC5taW4oYVdlaWdodCAqIGFnICsgYldlaWdodCAqIGJnLCAweDFGKTsKCXZhciBiID0gTWF0aC5taW4oYVdlaWdodCAqIGFiICsgYldlaWdodCAqIGJiLCAweDFGKTsKCglyZXR1cm4gciB8IChnIDw8IDUpIHwgKGIgPDwgMTApOwp9OwoKR2FtZUJveUFkdmFuY2VQYWxldHRlLnByb3RvdHlwZS5tYWtlRGFya1BhbGV0dGVzID0gZnVuY3Rpb24obGF5ZXJzKSB7CglpZiAodGhpcy5hZGp1c3RDb2xvciAhPSB0aGlzLmFkanVzdENvbG9yRGFyaykgewoJCXRoaXMuYWRqdXN0Q29sb3IgPSB0aGlzLmFkanVzdENvbG9yRGFyazsKCQl0aGlzLnJlc2V0UGFsZXR0ZXMoKTsKCX0KCXRoaXMucmVzZXRQYWxldHRlTGF5ZXJzKGxheWVycyk7Cn07CgpHYW1lQm95QWR2YW5jZVBhbGV0dGUucHJvdG90eXBlLm1ha2VCcmlnaHRQYWxldHRlcyA9IGZ1bmN0aW9uKGxheWVycykgewoJaWYgKHRoaXMuYWRqdXN0Q29sb3IgIT0gdGhpcy5hZGp1c3RDb2xvckJyaWdodCkgewoJCXRoaXMuYWRqdXN0Q29sb3IgPSB0aGlzLmFkanVzdENvbG9yQnJpZ2h0OwoJCXRoaXMucmVzZXRQYWxldHRlcygpOwoJfQoJdGhpcy5yZXNldFBhbGV0dGVMYXllcnMobGF5ZXJzKTsKfTsKCkdhbWVCb3lBZHZhbmNlUGFsZXR0ZS5wcm90b3R5cGUubWFrZU5vcm1hbFBhbGV0dGVzID0gZnVuY3Rpb24oKSB7Cgl0aGlzLnBhc3N0aHJvdWdoQ29sb3JzWzBdID0gdGhpcy5jb2xvcnNbMF07Cgl0aGlzLnBhc3N0aHJvdWdoQ29sb3JzWzFdID0gdGhpcy5jb2xvcnNbMF07Cgl0aGlzLnBhc3N0aHJvdWdoQ29sb3JzWzJdID0gdGhpcy5jb2xvcnNbMF07Cgl0aGlzLnBhc3N0aHJvdWdoQ29sb3JzWzNdID0gdGhpcy5jb2xvcnNbMF07Cgl0aGlzLnBhc3N0aHJvdWdoQ29sb3JzWzRdID0gdGhpcy5jb2xvcnNbMV07Cgl0aGlzLnBhc3N0aHJvdWdoQ29sb3JzWzVdID0gdGhpcy5jb2xvcnNbMF07Cn07CgpHYW1lQm95QWR2YW5jZVBhbGV0dGUucHJvdG90eXBlLm1ha2VTcGVjaWFsUGFsZXR0ZSA9IGZ1bmN0aW9uKGxheWVyKSB7Cgl0aGlzLnBhc3N0aHJvdWdoQ29sb3JzW2xheWVyXSA9IHRoaXMuYWRqdXN0ZWRDb2xvcnNbbGF5ZXIgPT0gNCA/IDEgOiAwXTsKfTsKCkdhbWVCb3lBZHZhbmNlUGFsZXR0ZS5wcm90b3R5cGUubWFrZU5vcm1hbFBhbGV0dGUgPSBmdW5jdGlvbihsYXllcikgewoJdGhpcy5wYXNzdGhyb3VnaENvbG9yc1tsYXllcl0gPSB0aGlzLmNvbG9yc1tsYXllciA9PSA0ID8gMSA6IDBdOwp9OwoKR2FtZUJveUFkdmFuY2VQYWxldHRlLnByb3RvdHlwZS5yZXNldFBhbGV0dGVMYXllcnMgPSBmdW5jdGlvbihsYXllcnMpIHsKCWlmIChsYXllcnMgJiAweDAxKSB7CgkJdGhpcy5wYXNzdGhyb3VnaENvbG9yc1swXSA9IHRoaXMuYWRqdXN0ZWRDb2xvcnNbMF07Cgl9IGVsc2UgewoJCXRoaXMucGFzc3Rocm91Z2hDb2xvcnNbMF0gPSB0aGlzLmNvbG9yc1swXTsKCX0KCWlmIChsYXllcnMgJiAweDAyKSB7CgkJdGhpcy5wYXNzdGhyb3VnaENvbG9yc1sxXSA9IHRoaXMuYWRqdXN0ZWRDb2xvcnNbMF07Cgl9IGVsc2UgewoJCXRoaXMucGFzc3Rocm91Z2hDb2xvcnNbMV0gPSB0aGlzLmNvbG9yc1swXTsKCX0KCWlmIChsYXllcnMgJiAweDA0KSB7CgkJdGhpcy5wYXNzdGhyb3VnaENvbG9yc1syXSA9IHRoaXMuYWRqdXN0ZWRDb2xvcnNbMF07Cgl9IGVsc2UgewoJCXRoaXMucGFzc3Rocm91Z2hDb2xvcnNbMl0gPSB0aGlzLmNvbG9yc1swXTsKCX0KCWlmIChsYXllcnMgJiAweDA4KSB7CgkJdGhpcy5wYXNzdGhyb3VnaENvbG9yc1szXSA9IHRoaXMuYWRqdXN0ZWRDb2xvcnNbMF07Cgl9IGVsc2UgewoJCXRoaXMucGFzc3Rocm91Z2hDb2xvcnNbM10gPSB0aGlzLmNvbG9yc1swXTsKCX0KCWlmIChsYXllcnMgJiAweDEwKSB7CgkJdGhpcy5wYXNzdGhyb3VnaENvbG9yc1s0XSA9IHRoaXMuYWRqdXN0ZWRDb2xvcnNbMV07Cgl9IGVsc2UgewoJCXRoaXMucGFzc3Rocm91Z2hDb2xvcnNbNF0gPSB0aGlzLmNvbG9yc1sxXTsKCX0KCWlmIChsYXllcnMgJiAweDIwKSB7CgkJdGhpcy5wYXNzdGhyb3VnaENvbG9yc1s1XSA9IHRoaXMuYWRqdXN0ZWRDb2xvcnNbMF07Cgl9IGVsc2UgewoJCXRoaXMucGFzc3Rocm91Z2hDb2xvcnNbNV0gPSB0aGlzLmNvbG9yc1swXTsKCX0KfTsKCkdhbWVCb3lBZHZhbmNlUGFsZXR0ZS5wcm90b3R5cGUucmVzZXRQYWxldHRlcyA9IGZ1bmN0aW9uKCkgewoJdmFyIGk7Cgl2YXIgb3V0UGFsZXR0ZSA9IHRoaXMuYWRqdXN0ZWRDb2xvcnNbMF07Cgl2YXIgaW5QYWxldHRlID0gdGhpcy5jb2xvcnNbMF07Cglmb3IgKGkgPSAwOyBpIDwgMjU2OyArK2kpIHsKCQlvdXRQYWxldHRlW2ldID0gdGhpcy5hZGp1c3RDb2xvcihpblBhbGV0dGVbaV0pOwoJfQoKCW91dFBhbGV0dGUgPSB0aGlzLmFkanVzdGVkQ29sb3JzWzFdOwoJaW5QYWxldHRlID0gdGhpcy5jb2xvcnNbMV07Cglmb3IgKGkgPSAwOyBpIDwgMjU2OyArK2kpIHsKCQlvdXRQYWxldHRlW2ldID0gdGhpcy5hZGp1c3RDb2xvcihpblBhbGV0dGVbaV0pOwoJfQp9CgpHYW1lQm95QWR2YW5jZVBhbGV0dGUucHJvdG90eXBlLmFjY2Vzc0NvbG9yID0gZnVuY3Rpb24obGF5ZXIsIGluZGV4KSB7CglyZXR1cm4gdGhpcy5wYXNzdGhyb3VnaENvbG9yc1tsYXllcl1baW5kZXhdOwp9OwoKR2FtZUJveUFkdmFuY2VQYWxldHRlLnByb3RvdHlwZS5hZGp1c3RDb2xvckRhcmsgPSBmdW5jdGlvbihjb2xvcikgewoJdmFyIHIgPSAoY29sb3IgJiAweDAwMUYpOwoJdmFyIGcgPSAoY29sb3IgJiAweDAzRTApID4+IDU7Cgl2YXIgYiA9IChjb2xvciAmIDB4N0MwMCkgPj4gMTA7CgoJciA9IHIgLSAociAqIHRoaXMuYmxlbmRZKTsKCWcgPSBnIC0gKGcgKiB0aGlzLmJsZW5kWSk7CgliID0gYiAtIChiICogdGhpcy5ibGVuZFkpOwoKCXJldHVybiByIHwgKGcgPDwgNSkgfCAoYiA8PCAxMCk7Cn07CgpHYW1lQm95QWR2YW5jZVBhbGV0dGUucHJvdG90eXBlLmFkanVzdENvbG9yQnJpZ2h0ID0gZnVuY3Rpb24oY29sb3IpIHsKCXZhciByID0gKGNvbG9yICYgMHgwMDFGKTsKCXZhciBnID0gKGNvbG9yICYgMHgwM0UwKSA+PiA1OwoJdmFyIGIgPSAoY29sb3IgJiAweDdDMDApID4+IDEwOwoKCXIgPSByICsgKCgzMSAtIHIpICogdGhpcy5ibGVuZFkpOwoJZyA9IGcgKyAoKDMxIC0gZykgKiB0aGlzLmJsZW5kWSk7CgliID0gYiArICgoMzEgLSBiKSAqIHRoaXMuYmxlbmRZKTsKCglyZXR1cm4gciB8IChnIDw8IDUpIHwgKGIgPDwgMTApOwp9OwoKR2FtZUJveUFkdmFuY2VQYWxldHRlLnByb3RvdHlwZS5hZGp1c3RDb2xvciA9IEdhbWVCb3lBZHZhbmNlUGFsZXR0ZS5wcm90b3R5cGUuYWRqdXN0Q29sb3JCcmlnaHQ7CgpHYW1lQm95QWR2YW5jZVBhbGV0dGUucHJvdG90eXBlLnNldEJsZW5kWSA9IGZ1bmN0aW9uKHkpIHsKCWlmICh0aGlzLmJsZW5kWSAhPSB5KSB7CgkJdGhpcy5ibGVuZFkgPSB5OwoJCXRoaXMucmVzZXRQYWxldHRlcygpOwoJfQp9OwoKZnVuY3Rpb24gR2FtZUJveUFkdmFuY2VPQkoob2FtLCBpbmRleCkgewoJdGhpcy5USUxFX09GRlNFVCA9IDB4MTAwMDA7Cgl0aGlzLm9hbSA9IG9hbTsKCgl0aGlzLmluZGV4ID0gaW5kZXg7Cgl0aGlzLnggPSAwOwoJdGhpcy55ID0gMDsKCXRoaXMuc2NhbGVyb3QgPSAwOwoJdGhpcy5kb3VibGVzaXplID0gZmFsc2U7Cgl0aGlzLmRpc2FibGUgPSAxOwoJdGhpcy5tb2RlID0gMDsKCXRoaXMubW9zYWljID0gZmFsc2U7Cgl0aGlzLm11bHRpcGFsZXR0ZSA9IGZhbHNlOwoJdGhpcy5zaGFwZSA9IDA7Cgl0aGlzLnNjYWxlcm90UGFyYW0gPSAwOwoJdGhpcy5oZmxpcCA9IDA7Cgl0aGlzLnZmbGlwID0gMDsKCXRoaXMudGlsZUJhc2UgPSAwOwoJdGhpcy5wcmlvcml0eSA9IDA7Cgl0aGlzLnBhbGV0dGUgPSAwOwoJdGhpcy5kcmF3U2NhbmxpbmUgPSB0aGlzLmRyYXdTY2FubGluZU5vcm1hbDsKCXRoaXMucHVzaFBpeGVsID0gR2FtZUJveUFkdmFuY2VTb2Z0d2FyZVJlbmRlcmVyLnB1c2hQaXhlbDsKCXRoaXMuY2FjaGVkV2lkdGggPSA4OwoJdGhpcy5jYWNoZWRIZWlnaHQgPSA4Owp9OwoKR2FtZUJveUFkdmFuY2VPQkoucHJvdG90eXBlLmRyYXdTY2FubGluZU5vcm1hbCA9IGZ1bmN0aW9uKGJhY2tpbmcsIHksIHlPZmYsIHN0YXJ0LCBlbmQpIHsKCXZhciB2aWRlbyA9IHRoaXMub2FtLnZpZGVvOwoJdmFyIHg7Cgl2YXIgdW5kZXJmbG93OwoJdmFyIG9mZnNldDsKCXZhciBtYXNrID0gdGhpcy5tb2RlIHwgdmlkZW8udGFyZ2V0Mlt2aWRlby5MQVlFUl9PQkpdIHwgKHRoaXMucHJpb3JpdHkgPDwgMSk7CglpZiAodGhpcy5tb2RlID09IDB4MTApIHsKCQltYXNrIHw9IHZpZGVvLlRBUkdFVDFfTUFTSzsKCX0KCWlmICh2aWRlby5ibGVuZE1vZGUgPT0gMSAmJiB2aWRlby5hbHBoYUVuYWJsZWQpIHsKCQltYXNrIHw9IHZpZGVvLnRhcmdldDFbdmlkZW8uTEFZRVJfT0JKXTsKCX0KCgl2YXIgdG90YWxXaWR0aCA9IHRoaXMuY2FjaGVkV2lkdGg7CglpZiAodGhpcy54IDwgdmlkZW8uSE9SSVpPTlRBTF9QSVhFTFMpIHsKCQlpZiAodGhpcy54IDwgc3RhcnQpIHsKCQkJdW5kZXJmbG93ID0gc3RhcnQgLSB0aGlzLng7CgkJCW9mZnNldCA9IHN0YXJ0OwoJCX0gZWxzZSB7CgkJCXVuZGVyZmxvdyA9IDA7CgkJCW9mZnNldCA9IHRoaXMueDsKCQl9CgkJaWYgKGVuZCA8IHRoaXMuY2FjaGVkV2lkdGggKyB0aGlzLngpIHsKCQkJdG90YWxXaWR0aCA9IGVuZCAtIHRoaXMueDsKCQl9Cgl9IGVsc2UgewoJCXVuZGVyZmxvdyA9IHN0YXJ0ICsgNTEyIC0gdGhpcy54OwoJCW9mZnNldCA9IHN0YXJ0OwoJCWlmIChlbmQgPCB0aGlzLmNhY2hlZFdpZHRoIC0gdW5kZXJmbG93KSB7CgkJCXRvdGFsV2lkdGggPSBlbmQ7CgkJfQoJfQoJCgl2YXIgbG9jYWxYOwoJdmFyIGxvY2FsWTsKCWlmICghdGhpcy52ZmxpcCkgewoJCWxvY2FsWSA9IHkgLSB5T2ZmOwoJfSBlbHNlIHsKCQlsb2NhbFkgPSB0aGlzLmNhY2hlZEhlaWdodCAtIHkgKyB5T2ZmIC0gMTsKCX0KCXZhciBsb2NhbFlMbyA9IGxvY2FsWSAmIDB4NzsKCXZhciBtb3NhaWNYOwoJdmFyIHRpbGVPZmZzZXQ7CgoJdmFyIHBhbGV0dGVTaGlmdCA9IHRoaXMubXVsdGlwYWxldHRlID8gMSA6IDA7CgoJaWYgKHZpZGVvLm9iakNoYXJhY3Rlck1hcHBpbmcpIHsKCQl0aWxlT2Zmc2V0ID0gKChsb2NhbFkgJiAweDAxRjgpICogdGhpcy5jYWNoZWRXaWR0aCkgPj4gNjsKCX0gZWxzZSB7CgkJdGlsZU9mZnNldCA9IChsb2NhbFkgJiAweDAxRjgpIDw8ICgyIC0gcGFsZXR0ZVNoaWZ0KTsKCX0KCglpZiAodGhpcy5tb3NhaWMpIHsKCQltb3NhaWNYID0gdmlkZW8ub2JqTW9zYWljWCAtIDEgLSAodmlkZW8ub2JqTW9zYWljWCArIG9mZnNldCAtIDEpICUgdmlkZW8ub2JqTW9zYWljWDsKCQlvZmZzZXQgKz0gbW9zYWljWDsKCQl1bmRlcmZsb3cgKz0gbW9zYWljWDsKCX0KCWlmICghdGhpcy5oZmxpcCkgewoJCWxvY2FsWCA9IHVuZGVyZmxvdzsKCX0gZWxzZSB7CgkJbG9jYWxYID0gdGhpcy5jYWNoZWRXaWR0aCAtIHVuZGVyZmxvdyAtIDE7Cgl9CgoJdmFyIHRpbGVSb3cgPSB2aWRlby5hY2Nlc3NUaWxlKHRoaXMuVElMRV9PRkZTRVQgKyAoeCAmIDB4NCkgKiBwYWxldHRlU2hpZnQsIHRoaXMudGlsZUJhc2UgKyAodGlsZU9mZnNldCA8PCBwYWxldHRlU2hpZnQpICsgKChsb2NhbFggJiAweDAxRjgpID4+ICgzIC0gcGFsZXR0ZVNoaWZ0KSksIGxvY2FsWUxvIDw8IHBhbGV0dGVTaGlmdCk7Cglmb3IgKHggPSB1bmRlcmZsb3c7IHggPCB0b3RhbFdpZHRoOyArK3gpIHsKCQltb3NhaWNYID0gdGhpcy5tb3NhaWMgPyBvZmZzZXQgJSB2aWRlby5vYmpNb3NhaWNYIDogMDsKCQlpZiAoIXRoaXMuaGZsaXApIHsKCQkJbG9jYWxYID0geCAtIG1vc2FpY1g7CgkJfSBlbHNlIHsKCQkJbG9jYWxYID0gdGhpcy5jYWNoZWRXaWR0aCAtICh4IC0gbW9zYWljWCkgLSAxOwoJCX0KCQlpZiAoIXBhbGV0dGVTaGlmdCkgewoJCQlpZiAoISh4ICYgMHg3KSB8fCAodGhpcy5tb3NhaWMgJiYgIW1vc2FpY1gpKSB7CgkJCQl0aWxlUm93ID0gdmlkZW8uYWNjZXNzVGlsZSh0aGlzLlRJTEVfT0ZGU0VULCB0aGlzLnRpbGVCYXNlICsgdGlsZU9mZnNldCArIChsb2NhbFggPj4gMyksIGxvY2FsWUxvKTsKCQkJfQoJCX0gZWxzZSB7CgkJCWlmICghKHggJiAweDMpIHx8ICh0aGlzLm1vc2FpYyAmJiAhbW9zYWljWCkpIHsKCQkJCXRpbGVSb3cgPSB2aWRlby5hY2Nlc3NUaWxlKHRoaXMuVElMRV9PRkZTRVQgKyAobG9jYWxYICYgMHg0KSwgdGhpcy50aWxlQmFzZSArICh0aWxlT2Zmc2V0IDw8IDEpICsgKChsb2NhbFggJiAweDAxRjgpID4+IDIpLCBsb2NhbFlMbyA8PCAxKTsKCQkJfQoJCX0KCQl0aGlzLnB1c2hQaXhlbCh2aWRlby5MQVlFUl9PQkosIHRoaXMsIHZpZGVvLCB0aWxlUm93LCBsb2NhbFggJiAweDcsIG9mZnNldCwgYmFja2luZywgbWFzaywgZmFsc2UpOwoJCW9mZnNldCsrOwoJfQp9OwoKR2FtZUJveUFkdmFuY2VPQkoucHJvdG90eXBlLmRyYXdTY2FubGluZUFmZmluZSA9IGZ1bmN0aW9uKGJhY2tpbmcsIHksIHlPZmYsIHN0YXJ0LCBlbmQpIHsKCXZhciB2aWRlbyA9IHRoaXMub2FtLnZpZGVvOwoJdmFyIHg7Cgl2YXIgdW5kZXJmbG93OwoJdmFyIG9mZnNldDsKCXZhciBtYXNrID0gdGhpcy5tb2RlIHwgdmlkZW8udGFyZ2V0Mlt2aWRlby5MQVlFUl9PQkpdIHwgKHRoaXMucHJpb3JpdHkgPDwgMSk7CglpZiAodGhpcy5tb2RlID09IDB4MTApIHsKCQltYXNrIHw9IHZpZGVvLlRBUkdFVDFfTUFTSzsKCX0KCWlmICh2aWRlby5ibGVuZE1vZGUgPT0gMSAmJiB2aWRlby5hbHBoYUVuYWJsZWQpIHsKCQltYXNrIHw9IHZpZGVvLnRhcmdldDFbdmlkZW8uTEFZRVJfT0JKXTsKCX0KCgl2YXIgbG9jYWxYOwoJdmFyIGxvY2FsWTsKCXZhciB5RGlmZiA9IHkgLSB5T2ZmOwoJdmFyIHRpbGVPZmZzZXQ7CgoJdmFyIHBhbGV0dGVTaGlmdCA9IHRoaXMubXVsdGlwYWxldHRlID8gMSA6IDA7Cgl2YXIgdG90YWxXaWR0aCA9IHRoaXMuY2FjaGVkV2lkdGggPDwgdGhpcy5kb3VibGVzaXplOwoJdmFyIHRvdGFsSGVpZ2h0ID0gdGhpcy5jYWNoZWRIZWlnaHQgPDwgdGhpcy5kb3VibGVzaXplOwoJdmFyIGRyYXdXaWR0aCA9IHRvdGFsV2lkdGg7CglpZiAoZHJhd1dpZHRoID4gdmlkZW8uSE9SSVpPTlRBTF9QSVhFTFMpIHsKCQl0b3RhbFdpZHRoID0gdmlkZW8uSE9SSVpPTlRBTF9QSVhFTFM7Cgl9CgoJaWYgKHRoaXMueCA8IHZpZGVvLkhPUklaT05UQUxfUElYRUxTKSB7CgkJaWYgKHRoaXMueCA8IHN0YXJ0KSB7CgkJCXVuZGVyZmxvdyA9IHN0YXJ0IC0gdGhpcy54OwoJCQlvZmZzZXQgPSBzdGFydDsKCQl9IGVsc2UgewoJCQl1bmRlcmZsb3cgPSAwOwoJCQlvZmZzZXQgPSB0aGlzLng7CgkJfQoJCWlmIChlbmQgPCBkcmF3V2lkdGggKyB0aGlzLngpIHsKCQkJZHJhd1dpZHRoID0gZW5kIC0gdGhpcy54OwoJCX0KCX0gZWxzZSB7CgkJdW5kZXJmbG93ID0gc3RhcnQgKyA1MTIgLSB0aGlzLng7CgkJb2Zmc2V0ID0gc3RhcnQ7CgkJaWYgKGVuZCA8IGRyYXdXaWR0aCAtIHVuZGVyZmxvdykgewoJCQlkcmF3V2lkdGggPSBlbmQ7CgkJfQoJfQoKCWZvciAoeCA9IHVuZGVyZmxvdzsgeCA8IGRyYXdXaWR0aDsgKyt4KSB7CgkJbG9jYWxYID0gdGhpcy5zY2FsZXJvdE9hbS5hICogKHggLSAodG90YWxXaWR0aCA+PiAxKSkgKyB0aGlzLnNjYWxlcm90T2FtLmIgKiAoeURpZmYgLSAodG90YWxIZWlnaHQgPj4gMSkpICsgKHRoaXMuY2FjaGVkV2lkdGggPj4gMSk7CgkJbG9jYWxZID0gdGhpcy5zY2FsZXJvdE9hbS5jICogKHggLSAodG90YWxXaWR0aCA+PiAxKSkgKyB0aGlzLnNjYWxlcm90T2FtLmQgKiAoeURpZmYgLSAodG90YWxIZWlnaHQgPj4gMSkpICsgKHRoaXMuY2FjaGVkSGVpZ2h0ID4+IDEpOwoJCWlmICh0aGlzLm1vc2FpYykgewoJCQlsb2NhbFggLT0gKHggJSB2aWRlby5vYmpNb3NhaWNYKSAqIHRoaXMuc2NhbGVyb3RPYW0uYSArICh5ICUgdmlkZW8ub2JqTW9zYWljWSkgKiB0aGlzLnNjYWxlcm90T2FtLmI7CgkJCWxvY2FsWSAtPSAoeCAlIHZpZGVvLm9iak1vc2FpY1gpICogdGhpcy5zY2FsZXJvdE9hbS5jICsgKHkgJSB2aWRlby5vYmpNb3NhaWNZKSAqIHRoaXMuc2NhbGVyb3RPYW0uZDsKCQl9CgoJCWlmIChsb2NhbFggPCAwIHx8IGxvY2FsWCA+PSB0aGlzLmNhY2hlZFdpZHRoIHx8IGxvY2FsWSA8IDAgfHwgbG9jYWxZID49IHRoaXMuY2FjaGVkSGVpZ2h0KSB7CgkJCW9mZnNldCsrOwoJCQljb250aW51ZTsKCQl9CgoJCWlmICh2aWRlby5vYmpDaGFyYWN0ZXJNYXBwaW5nKSB7CgkJCXRpbGVPZmZzZXQgPSAoKGxvY2FsWSAmIDB4MDFGOCkgKiB0aGlzLmNhY2hlZFdpZHRoKSA+PiA2OwoJCX0gZWxzZSB7CgkJCXRpbGVPZmZzZXQgPSAobG9jYWxZICYgMHgwMUY4KSA8PCAoMiAtIHBhbGV0dGVTaGlmdCk7CgkJfQoJCXRpbGVSb3cgPSB2aWRlby5hY2Nlc3NUaWxlKHRoaXMuVElMRV9PRkZTRVQgKyAobG9jYWxYICYgMHg0KSAqIHBhbGV0dGVTaGlmdCwgdGhpcy50aWxlQmFzZSArICh0aWxlT2Zmc2V0IDw8IHBhbGV0dGVTaGlmdCkgKyAoKGxvY2FsWCAmIDB4MDFGOCkgPj4gKDMgLSBwYWxldHRlU2hpZnQpKSwgKGxvY2FsWSAmIDB4NykgPDwgcGFsZXR0ZVNoaWZ0KTsKCQl0aGlzLnB1c2hQaXhlbCh2aWRlby5MQVlFUl9PQkosIHRoaXMsIHZpZGVvLCB0aWxlUm93LCBsb2NhbFggJiAweDcsIG9mZnNldCwgYmFja2luZywgbWFzaywgZmFsc2UpOwoJCW9mZnNldCsrOwoJfQp9OwoKR2FtZUJveUFkdmFuY2VPQkoucHJvdG90eXBlLnJlY2FsY1NpemUgPSBmdW5jdGlvbigpIHsKCXN3aXRjaCAodGhpcy5zaGFwZSkgewoJY2FzZSAwOgoJCS8vIFNxdWFyZQoJCXRoaXMuY2FjaGVkSGVpZ2h0ID0gdGhpcy5jYWNoZWRXaWR0aCA9IDggPDwgdGhpcy5zaXplOwoJCWJyZWFrOwoJY2FzZSAxOgoJCS8vIEhvcml6b250YWwKCQlzd2l0Y2ggKHRoaXMuc2l6ZSkgewoJCWNhc2UgMDoKCQkJdGhpcy5jYWNoZWRIZWlnaHQgPSA4OwoJCQl0aGlzLmNhY2hlZFdpZHRoID0gMTY7CgkJCWJyZWFrOwoJCWNhc2UgMToKCQkJdGhpcy5jYWNoZWRIZWlnaHQgPSA4OwoJCQl0aGlzLmNhY2hlZFdpZHRoID0gMzI7CgkJCWJyZWFrOwoJCWNhc2UgMjoKCQkJdGhpcy5jYWNoZWRIZWlnaHQgPSAxNjsKCQkJdGhpcy5jYWNoZWRXaWR0aCA9IDMyOwoJCQlicmVhazsKCQljYXNlIDM6CgkJCXRoaXMuY2FjaGVkSGVpZ2h0ID0gMzI7CgkJCXRoaXMuY2FjaGVkV2lkdGggPSA2NDsKCQkJYnJlYWs7CgkJfQoJCWJyZWFrOwoJY2FzZSAyOgoJCS8vIFZlcnRpY2FsCgkJc3dpdGNoICh0aGlzLnNpemUpIHsKCQljYXNlIDA6CgkJCXRoaXMuY2FjaGVkSGVpZ2h0ID0gMTY7CgkJCXRoaXMuY2FjaGVkV2lkdGggPSA4OwoJCQlicmVhazsKCQljYXNlIDE6CgkJCXRoaXMuY2FjaGVkSGVpZ2h0ID0gMzI7CgkJCXRoaXMuY2FjaGVkV2lkdGggPSA4OwoJCQlicmVhazsKCQljYXNlIDI6CgkJCXRoaXMuY2FjaGVkSGVpZ2h0ID0gMzI7CgkJCXRoaXMuY2FjaGVkV2lkdGggPSAxNjsKCQkJYnJlYWs7CgkJY2FzZSAzOgoJCQl0aGlzLmNhY2hlZEhlaWdodCA9IDY0OwoJCQl0aGlzLmNhY2hlZFdpZHRoID0gMzI7CgkJCWJyZWFrOwoJCX0KCQlicmVhazsKCWRlZmF1bHQ6CgkJLy8gQmFkIQoJfQp9OwoKZnVuY3Rpb24gR2FtZUJveUFkdmFuY2VPQkpMYXllcih2aWRlbywgaW5kZXgpIHsKCXRoaXMudmlkZW8gPSB2aWRlbzsKCXRoaXMuYmcgPSBmYWxzZTsKCXRoaXMuaW5kZXggPSB2aWRlby5MQVlFUl9PQko7Cgl0aGlzLnByaW9yaXR5ID0gaW5kZXg7Cgl0aGlzLmVuYWJsZWQgPSBmYWxzZTsKCXRoaXMub2Jqd2luID0gMDsKfTsKCkdhbWVCb3lBZHZhbmNlT0JKTGF5ZXIucHJvdG90eXBlLmRyYXdTY2FubGluZSA9IGZ1bmN0aW9uKGJhY2tpbmcsIGxheWVyLCBzdGFydCwgZW5kKSB7Cgl2YXIgeSA9IHRoaXMudmlkZW8udmNvdW50OwoJdmFyIHdyYXBwZWRZOwoJdmFyIG1vc2FpY1k7Cgl2YXIgb2JqOwoJaWYgKHN0YXJ0ID49IGVuZCkgewoJCXJldHVybjsKCX0KCXZhciBvYmpzID0gdGhpcy52aWRlby5vYW0ub2JqczsKCWZvciAodmFyIGkgPSAwOyBpIDwgb2Jqcy5sZW5ndGg7ICsraSkgewoJCW9iaiA9IG9ianNbaV07CgkJaWYgKG9iai5kaXNhYmxlKSB7CgkJCWNvbnRpbnVlOwoJCX0KCQlpZiAoKG9iai5tb2RlICYgdGhpcy52aWRlby5PQkpXSU5fTUFTSykgIT0gdGhpcy5vYmp3aW4pIHsKCQkJY29udGludWU7CgkJfQoJCWlmICghKG9iai5tb2RlICYgdGhpcy52aWRlby5PQkpXSU5fTUFTSykgJiYgdGhpcy5wcmlvcml0eSAhPSBvYmoucHJpb3JpdHkpIHsKCQkJY29udGludWU7CgkJfQoJCWlmIChvYmoueSA8IHRoaXMudmlkZW8uVkVSVElDQUxfUElYRUxTKSB7CgkJCXdyYXBwZWRZID0gb2JqLnk7CgkJfSBlbHNlIHsKCQkJd3JhcHBlZFkgPSBvYmoueSAtIDI1NjsKCQl9CgkJdmFyIHRvdGFsSGVpZ2h0OwoJCWlmICghb2JqLnNjYWxlcm90KSB7CgkJCXRvdGFsSGVpZ2h0ID0gb2JqLmNhY2hlZEhlaWdodDsKCQl9IGVsc2UgewoJCQl0b3RhbEhlaWdodCA9IG9iai5jYWNoZWRIZWlnaHQgPDwgb2JqLmRvdWJsZXNpemU7CgkJfQoJCWlmICghb2JqLm1vc2FpYykgewoJCQltb3NhaWNZID0geTsKCQl9IGVsc2UgewoJCQltb3NhaWNZID0geSAtIHkgJSB0aGlzLnZpZGVvLm9iak1vc2FpY1k7CgkJfQoJCWlmICh3cmFwcGVkWSA8PSB5ICYmICh3cmFwcGVkWSArIHRvdGFsSGVpZ2h0KSA+IHkpIHsKCQkJb2JqLmRyYXdTY2FubGluZShiYWNraW5nLCBtb3NhaWNZLCB3cmFwcGVkWSwgc3RhcnQsIGVuZCk7CgkJfQoJfQp9OwoKR2FtZUJveUFkdmFuY2VPQkpMYXllci5wcm90b3R5cGUub2JqQ29tcGFyYXRvciA9IGZ1bmN0aW9uKGEsIGIpIHsKCXJldHVybiBhLmluZGV4IC0gYi5pbmRleDsKfTsKCmZ1bmN0aW9uIEdhbWVCb3lBZHZhbmNlU29mdHdhcmVSZW5kZXJlcigpIHsKCXRoaXMuTEFZRVJfQkcwID0gMDsKCXRoaXMuTEFZRVJfQkcxID0gMTsKCXRoaXMuTEFZRVJfQkcyID0gMjsKCXRoaXMuTEFZRVJfQkczID0gMzsKCXRoaXMuTEFZRVJfT0JKID0gNDsKCXRoaXMuTEFZRVJfQkFDS0RST1AgPSA1OwoKCXRoaXMuSE9SSVpPTlRBTF9QSVhFTFMgPSAyNDA7Cgl0aGlzLlZFUlRJQ0FMX1BJWEVMUyA9IDE2MDsKCgl0aGlzLkxBWUVSX01BU0sgPSAweDA2OwoJdGhpcy5CQUNLR1JPVU5EX01BU0sgPSAweDAxOwoJdGhpcy5UQVJHRVQyX01BU0sgPSAweDA4OwoJdGhpcy5UQVJHRVQxX01BU0sgPSAweDEwOwoJdGhpcy5PQkpXSU5fTUFTSyA9IDB4MjA7Cgl0aGlzLldSSVRURU5fTUFTSyA9IDB4ODA7CgoJdGhpcy5QUklPUklUWV9NQVNLID0gdGhpcy5MQVlFUl9NQVNLIHwgdGhpcy5CQUNLR1JPVU5EX01BU0s7CgoJdGhpcy5kcmF3QmFja2Ryb3AgPSBuZXcgKGZ1bmN0aW9uKHZpZGVvKSB7CgkJdGhpcy5iZyA9IHRydWU7CgkJdGhpcy5wcmlvcml0eSA9IC0xOwoJCXRoaXMuaW5kZXggPSB2aWRlby5MQVlFUl9CQUNLRFJPUDsKCQl0aGlzLmVuYWJsZWQgPSB0cnVlOwoKCQl0aGlzLmRyYXdTY2FubGluZSA9IGZ1bmN0aW9uKGJhY2tpbmcsIGxheWVyLCBzdGFydCwgZW5kKSB7CgkJCS8vIFRPRE86IGludGVyYWN0aW9ucyB3aXRoIGJsZW5kIG1vZGVzIGFuZCBPQkpXSU4KCQkJZm9yICh2YXIgeCA9IHN0YXJ0OyB4IDwgZW5kOyArK3gpIHsKCQkJCWlmICghKGJhY2tpbmcuc3RlbmNpbFt4XSAmIHZpZGVvLldSSVRURU5fTUFTSykpIHsKCQkJCQliYWNraW5nLmNvbG9yW3hdID0gdmlkZW8ucGFsZXR0ZS5hY2Nlc3NDb2xvcih0aGlzLmluZGV4LCAwKTsKCQkJCQliYWNraW5nLnN0ZW5jaWxbeF0gPSB2aWRlby5XUklUVEVOX01BU0s7CgkJCQl9IGVsc2UgaWYgKGJhY2tpbmcuc3RlbmNpbFt4XSAmIHZpZGVvLlRBUkdFVDFfTUFTSykgewoJCQkJCWJhY2tpbmcuY29sb3JbeF0gPSB2aWRlby5wYWxldHRlLm1peCh2aWRlby5ibGVuZEIsIHZpZGVvLnBhbGV0dGUuYWNjZXNzQ29sb3IodGhpcy5pbmRleCwgMCksIHZpZGVvLmJsZW5kQSwgYmFja2luZy5jb2xvclt4XSk7CgkJCQkJYmFja2luZy5zdGVuY2lsW3hdID0gdmlkZW8uV1JJVFRFTl9NQVNLOwoJCQkJfQoJCQl9CgkJfQoJfSkodGhpcyk7Cn07CgpHYW1lQm95QWR2YW5jZVNvZnR3YXJlUmVuZGVyZXIucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24obW11KSB7Cgl0aGlzLnBhbGV0dGUgPSBuZXcgR2FtZUJveUFkdmFuY2VQYWxldHRlKCk7Cgl0aGlzLnZyYW0gPSBuZXcgR2FtZUJveUFkdmFuY2VWUkFNKG1tdS5TSVpFX1ZSQU0pOwoJdGhpcy5vYW0gPSBuZXcgR2FtZUJveUFkdmFuY2VPQU0obW11LlNJWkVfT0FNKTsKCXRoaXMub2FtLnZpZGVvID0gdGhpczsKCXRoaXMub2JqTGF5ZXJzID0gWwoJCW5ldyBHYW1lQm95QWR2YW5jZU9CSkxheWVyKHRoaXMsIDApLAoJCW5ldyBHYW1lQm95QWR2YW5jZU9CSkxheWVyKHRoaXMsIDEpLAoJCW5ldyBHYW1lQm95QWR2YW5jZU9CSkxheWVyKHRoaXMsIDIpLAoJCW5ldyBHYW1lQm95QWR2YW5jZU9CSkxheWVyKHRoaXMsIDMpCgldOwoJdGhpcy5vYmp3aW5MYXllciA9IG5ldyBHYW1lQm95QWR2YW5jZU9CSkxheWVyKHRoaXMsIDQpOwoJdGhpcy5vYmp3aW5MYXllci5vYmp3aW4gPSB0aGlzLk9CSldJTl9NQVNLOwoKCS8vIERJU1BDTlQKCXRoaXMuYmFja2dyb3VuZE1vZGUgPSAwOwoJdGhpcy5kaXNwbGF5RnJhbWVTZWxlY3QgPSAwOwoJdGhpcy5oYmxhbmtJbnRlcnZhbEZyZWUgPSAwOwoJdGhpcy5vYmpDaGFyYWN0ZXJNYXBwaW5nID0gMDsKCXRoaXMuZm9yY2VkQmxhbmsgPSAxOwoJdGhpcy53aW4wID0gMDsKCXRoaXMud2luMSA9IDA7Cgl0aGlzLm9iandpbiA9IDA7CgoJLy8gVkNPVU5UCgl0aGlzLnZjb3VudCA9IC0xOwoKCS8vIFdJTjBICgl0aGlzLndpbjBMZWZ0ID0gMDsKCXRoaXMud2luMFJpZ2h0ID0gMjQwOwoKCS8vIFdJTjFICgl0aGlzLndpbjFMZWZ0ID0gMDsKCXRoaXMud2luMVJpZ2h0ID0gMjQwOwoKCS8vIFdJTjBWCgl0aGlzLndpbjBUb3AgPSAwOwoJdGhpcy53aW4wQm90dG9tID0gMTYwOwoKCS8vIFdJTjFWCgl0aGlzLndpbjFUb3AgPSAwOwoJdGhpcy53aW4xQm90dG9tID0gMTYwOwoKCS8vIFdJTklOL1dJTk9VVAoJdGhpcy53aW5kb3dzID0gbmV3IEFycmF5KCk7Cglmb3IgKHZhciBpID0gMDsgaSA8IDQ7ICsraSkgewoJCXRoaXMud2luZG93cy5wdXNoKHsKCQkJZW5hYmxlZDogWyBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIHRydWUgXSwKCQkJc3BlY2lhbDogMAoJCX0pOwoJfTsKCgkvLyBCTERDTlQKCXRoaXMudGFyZ2V0MSA9IG5ldyBBcnJheSg1KTsKCXRoaXMudGFyZ2V0MiA9IG5ldyBBcnJheSg1KTsKCXRoaXMuYmxlbmRNb2RlID0gMDsKCgkvLyBCTERBTFBIQQoJdGhpcy5ibGVuZEEgPSAwOwoJdGhpcy5ibGVuZEIgPSAwOwoKCS8vIEJMRFkKCXRoaXMuYmxlbmRZID0gMDsKCgkvLyBNT1NBSUMKCXRoaXMuYmdNb3NhaWNYID0gMTsKCXRoaXMuYmdNb3NhaWNZID0gMTsKCXRoaXMub2JqTW9zYWljWCA9IDE7Cgl0aGlzLm9iak1vc2FpY1kgPSAxOwoKCXRoaXMubGFzdEhibGFuayA9IDA7Cgl0aGlzLm5leHRIYmxhbmsgPSB0aGlzLkhEUkFXX0xFTkdUSDsKCXRoaXMubmV4dEV2ZW50ID0gdGhpcy5uZXh0SGJsYW5rOwoKCXRoaXMubmV4dEhibGFua0lSUSA9IDA7Cgl0aGlzLm5leHRWYmxhbmtJUlEgPSAwOwoJdGhpcy5uZXh0VmNvdW50ZXJJUlEgPSAwOwoKCXRoaXMuYmcgPSBuZXcgQXJyYXkoKTsKCWZvciAodmFyIGkgPSAwOyBpIDwgNDsgKytpKSB7CgkJdGhpcy5iZy5wdXNoKHsKCQkJYmc6IHRydWUsCgkJCWluZGV4OiBpLAoJCQllbmFibGVkOiBmYWxzZSwKCQkJdmlkZW86IHRoaXMsCgkJCXZyYW06IHRoaXMudnJhbSwKCQkJcHJpb3JpdHk6IDAsCgkJCWNoYXJCYXNlOiAwLAoJCQltb3NhaWM6IGZhbHNlLAoJCQltdWx0aXBhbGV0dGU6IGZhbHNlLAoJCQlzY3JlZW5CYXNlOiAwLAoJCQlvdmVyZmxvdzogMCwKCQkJc2l6ZTogMCwKCQkJeDogMCwKCQkJeTogMCwKCQkJcmVmeDogMCwKCQkJcmVmeTogMCwKCQkJZHg6IDEsCgkJCWRteDogMCwKCQkJZHk6IDAsCgkJCWRteTogMSwKCQkJc3g6IDAsCgkJCXN5OiAwLAoJCQlwdXNoUGl4ZWw6IEdhbWVCb3lBZHZhbmNlU29mdHdhcmVSZW5kZXJlci5wdXNoUGl4ZWwsCgkJCWRyYXdTY2FubGluZTogdGhpcy5kcmF3U2NhbmxpbmVCR01vZGUwCgkJfSk7Cgl9CgoJdGhpcy5iZ01vZGVzID0gWwoJCXRoaXMuZHJhd1NjYW5saW5lQkdNb2RlMCwKCQl0aGlzLmRyYXdTY2FubGluZUJHTW9kZTIsIC8vIE1vZGVzIDEgYW5kIDIgYXJlIGlkZW50aWNhbCBmb3IgbGF5ZXJzIDIgYW5kIDMKCQl0aGlzLmRyYXdTY2FubGluZUJHTW9kZTIsCgkJdGhpcy5kcmF3U2NhbmxpbmVCR01vZGUzLAoJCXRoaXMuZHJhd1NjYW5saW5lQkdNb2RlNCwKCQl0aGlzLmRyYXdTY2FubGluZUJHTW9kZTUKCV07CgoJdGhpcy5kcmF3TGF5ZXJzID0gWwoJCXRoaXMuYmdbMF0sCgkJdGhpcy5iZ1sxXSwKCQl0aGlzLmJnWzJdLAoJCXRoaXMuYmdbM10sCgkJdGhpcy5vYmpMYXllcnNbMF0sCgkJdGhpcy5vYmpMYXllcnNbMV0sCgkJdGhpcy5vYmpMYXllcnNbMl0sCgkJdGhpcy5vYmpMYXllcnNbM10sCgkJdGhpcy5vYmp3aW5MYXllciwKCQl0aGlzLmRyYXdCYWNrZHJvcAoJXTsKCgl0aGlzLG9iandpbkFjdGl2ZSA9IGZhbHNlOwoJdGhpcy5hbHBoYUVuYWJsZWQgPSBmYWxzZTsKCgl0aGlzLnNjYW5saW5lID0gewoJCWNvbG9yOiBuZXcgVWludDE2QXJyYXkodGhpcy5IT1JJWk9OVEFMX1BJWEVMUyksCgkJLy8gU3RlbmNpbCBmb3JtYXQ6CgkJLy8gQml0cyAwLTE6IExheWVyCgkJLy8gQml0IDI6IElzIGJhY2tncm91bmQKCQkvLyBCaXQgMzogSXMgVGFyZ2V0IDIKCQkvLyBCaXQgNDogSXMgVGFyZ2V0IDEKCQkvLyBCaXQgNTogSXMgT0JKIFdpbmRvdwoJCS8vIEJpdCA2OiBSZXNlcnZlZAoJCS8vIEJpdCA3OiBIYXMgYmVlbiB3cml0dGVuCgkJc3RlbmNpbDogbmV3IFVpbnQ4QXJyYXkodGhpcy5IT1JJWk9OVEFMX1BJWEVMUykKCX07Cgl0aGlzLnNoYXJlZENvbG9yID0gWyAwLCAwLCAwIF07Cgl0aGlzLnNoYXJlZE1hcCA9IHsKCQl0aWxlOiAwLAoJCWhmbGlwOiBmYWxzZSwKCQl2ZmxpcDogZmFsc2UsCgkJcGFsZXR0ZTogMAoJfTsKfTsKCkdhbWVCb3lBZHZhbmNlU29mdHdhcmVSZW5kZXJlci5wcm90b3R5cGUuY2xlYXJTdWJzZXRzID0gZnVuY3Rpb24obW11LCByZWdpb25zKSB7CglpZiAocmVnaW9ucyAmIDB4MDQpIHsKCQl0aGlzLnBhbGV0dGUub3ZlcndyaXRlKG5ldyBVaW50MTZBcnJheShtbXUuU0laRV9QQUxFVFRFID4+IDEpKTsKCX0KCglpZiAocmVnaW9ucyAmIDB4MDgpIHsKCQl0aGlzLnZyYW0uaW5zZXJ0KDAsIG5ldyBVaW50MTZBcnJheShtbXUuU0laRV9WUkFNID4+IDEpKTsKCX0KCglpZiAocmVnaW9ucyAmIDB4MTApIHsKCQl0aGlzLm9hbS5vdmVyd3JpdGUobmV3IFVpbnQxNkFycmF5KG1tdS5TSVpFX09BTSA+PiAxKSk7CgkJdGhpcy5vYW0udmlkZW8gPSB0aGlzOwoJfQp9OwoKR2FtZUJveUFkdmFuY2VTb2Z0d2FyZVJlbmRlcmVyLnByb3RvdHlwZS5mcmVlemUgPSBmdW5jdGlvbigpIHsKfTsKCkdhbWVCb3lBZHZhbmNlU29mdHdhcmVSZW5kZXJlci5wcm90b3R5cGUuZGVmcm9zdCA9IGZ1bmN0aW9uKGZyb3N0KSB7Cn07CgpHYW1lQm95QWR2YW5jZVNvZnR3YXJlUmVuZGVyZXIucHJvdG90eXBlLnNldEJhY2tpbmcgPSBmdW5jdGlvbihiYWNraW5nKSB7Cgl0aGlzLnBpeGVsRGF0YSA9IGJhY2tpbmc7CgoJLy8gQ2xlYXIgYmFja2luZyBmaXJzdAoJZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgdGhpcy5IT1JJWk9OVEFMX1BJWEVMUyAqIHRoaXMuVkVSVElDQUxfUElYRUxTICogNDspIHsKCQl0aGlzLnBpeGVsRGF0YS5kYXRhW29mZnNldCsrXSA9IDB4RkY7CgkJdGhpcy5waXhlbERhdGEuZGF0YVtvZmZzZXQrK10gPSAweEZGOwoJCXRoaXMucGl4ZWxEYXRhLmRhdGFbb2Zmc2V0KytdID0gMHhGRjsKCQl0aGlzLnBpeGVsRGF0YS5kYXRhW29mZnNldCsrXSA9IDB4RkY7Cgl9Cn07CgpHYW1lQm95QWR2YW5jZVNvZnR3YXJlUmVuZGVyZXIucHJvdG90eXBlLndyaXRlRGlzcGxheUNvbnRyb2wgPSBmdW5jdGlvbih2YWx1ZSkgewoJdGhpcy5iYWNrZ3JvdW5kTW9kZSA9IHZhbHVlICYgMHgwMDA3OwoJdGhpcy5kaXNwbGF5RnJhbWVTZWxlY3QgPSB2YWx1ZSAmIDB4MDAxMDsKCXRoaXMuaGJsYW5rSW50ZXJ2YWxGcmVlID0gdmFsdWUgJiAweDAwMjA7Cgl0aGlzLm9iakNoYXJhY3Rlck1hcHBpbmcgPSB2YWx1ZSAmIDB4MDA0MDsKCXRoaXMuZm9yY2VkQmxhbmsgPSB2YWx1ZSAmIDB4MDA4MDsKCXRoaXMuYmdbMF0uZW5hYmxlZCA9IHZhbHVlICYgMHgwMTAwOwoJdGhpcy5iZ1sxXS5lbmFibGVkID0gdmFsdWUgJiAweDAyMDA7Cgl0aGlzLmJnWzJdLmVuYWJsZWQgPSB2YWx1ZSAmIDB4MDQwMDsKCXRoaXMuYmdbM10uZW5hYmxlZCA9IHZhbHVlICYgMHgwODAwOwoJdGhpcy5vYmpMYXllcnNbMF0uZW5hYmxlZCA9IHZhbHVlICYgMHgxMDAwOwoJdGhpcy5vYmpMYXllcnNbMV0uZW5hYmxlZCA9IHZhbHVlICYgMHgxMDAwOwoJdGhpcy5vYmpMYXllcnNbMl0uZW5hYmxlZCA9IHZhbHVlICYgMHgxMDAwOwoJdGhpcy5vYmpMYXllcnNbM10uZW5hYmxlZCA9IHZhbHVlICYgMHgxMDAwOwoJdGhpcy53aW4wID0gdmFsdWUgJiAweDIwMDA7Cgl0aGlzLndpbjEgPSB2YWx1ZSAmIDB4NDAwMDsKCXRoaXMub2Jqd2luID0gdmFsdWUgJiAweDgwMDA7Cgl0aGlzLm9iandpbkxheWVyLmVuYWJsZWQgPSB2YWx1ZSAmIDB4MTAwMCAmJiB2YWx1ZSAmIDB4ODAwMDsKCgkvLyBUb3RhbCBoYWNrIHNvIHdlIGNhbiBzdG9yZSBib3RoIHRoaW5ncyB0aGF0IHdvdWxkIHNldCBpdCB0byAyNTYtY29sb3IgbW9kZSBpbiB0aGUgc2FtZSB2YXJpYWJsZQoJdGhpcy5iZ1syXS5tdWx0aXBhbGV0dGUgJj0gfjB4MDAwMTsKCXRoaXMuYmdbM10ubXVsdGlwYWxldHRlICY9IH4weDAwMDE7CglpZiAodGhpcy5iYWNrZ3JvdW5kTW9kZSA+IDApIHsKCQl0aGlzLmJnWzJdLm11bHRpcGFsZXR0ZSB8PSAweDAwMDE7Cgl9CglpZiAodGhpcy5iYWNrZ3JvdW5kTW9kZSA9PSAyKSB7CgkJdGhpcy5iZ1szXS5tdWx0aXBhbGV0dGUgfD0gMHgwMDAxOwoJfQoJCgl0aGlzLnJlc2V0TGF5ZXJzKCk7Cn07CgpHYW1lQm95QWR2YW5jZVNvZnR3YXJlUmVuZGVyZXIucHJvdG90eXBlLndyaXRlQmFja2dyb3VuZENvbnRyb2wgPSBmdW5jdGlvbihiZywgdmFsdWUpIHsKCXZhciBiZ0RhdGEgPSB0aGlzLmJnW2JnXTsKCWJnRGF0YS5wcmlvcml0eSA9IHZhbHVlICYgMHgwMDAzOwoJYmdEYXRhLmNoYXJCYXNlID0gKHZhbHVlICYgMHgwMDBDKSA8PCAxMjsKCWJnRGF0YS5tb3NhaWMgPSB2YWx1ZSAmIDB4MDA0MDsKCWJnRGF0YS5tdWx0aXBhbGV0dGUgJj0gfjB4MDA4MDsKCWlmIChiZyA8IDIgfHwgdGhpcy5iYWNrZ3JvdW5kTW9kZSA9PSAwKSB7CgkJYmdEYXRhLm11bHRpcGFsZXR0ZSB8PSB2YWx1ZSAmIDB4MDA4MDsKCX0KCWJnRGF0YS5zY3JlZW5CYXNlID0gKHZhbHVlICYgMHgxRjAwKSA8PCAzOwoJYmdEYXRhLm92ZXJmbG93ID0gdmFsdWUgJiAweDIwMDA7CgliZ0RhdGEuc2l6ZSA9ICh2YWx1ZSAmIDB4QzAwMCkgPj4gMTQ7CgoJdGhpcy5kcmF3TGF5ZXJzLnNvcnQodGhpcy5sYXllckNvbXBhcmF0b3IpOwp9OwoKR2FtZUJveUFkdmFuY2VTb2Z0d2FyZVJlbmRlcmVyLnByb3RvdHlwZS53cml0ZUJhY2tncm91bmRIT2Zmc2V0ID0gZnVuY3Rpb24oYmcsIHZhbHVlKSB7Cgl0aGlzLmJnW2JnXS54ID0gdmFsdWUgJiAweDFGRjsKfTsKCkdhbWVCb3lBZHZhbmNlU29mdHdhcmVSZW5kZXJlci5wcm90b3R5cGUud3JpdGVCYWNrZ3JvdW5kVk9mZnNldCA9IGZ1bmN0aW9uKGJnLCB2YWx1ZSkgewoJdGhpcy5iZ1tiZ10ueSA9IHZhbHVlICYgMHgxRkY7Cn07CgpHYW1lQm95QWR2YW5jZVNvZnR3YXJlUmVuZGVyZXIucHJvdG90eXBlLndyaXRlQmFja2dyb3VuZFJlZlggPSBmdW5jdGlvbihiZywgdmFsdWUpIHsKCXRoaXMuYmdbYmddLnJlZnggPSAodmFsdWUgPDwgNCkgLyAweDEwMDA7Cgl0aGlzLmJnW2JnXS5zeCA9IHRoaXMuYmdbYmddLnJlZng7Cn07CgpHYW1lQm95QWR2YW5jZVNvZnR3YXJlUmVuZGVyZXIucHJvdG90eXBlLndyaXRlQmFja2dyb3VuZFJlZlkgPSBmdW5jdGlvbihiZywgdmFsdWUpIHsKCXRoaXMuYmdbYmddLnJlZnkgPSAodmFsdWUgPDwgNCkgLyAweDEwMDA7Cgl0aGlzLmJnW2JnXS5zeSA9IHRoaXMuYmdbYmddLnJlZnk7Cn07CgpHYW1lQm95QWR2YW5jZVNvZnR3YXJlUmVuZGVyZXIucHJvdG90eXBlLndyaXRlQmFja2dyb3VuZFBhcmFtQSA9IGZ1bmN0aW9uKGJnLCB2YWx1ZSkgewoJdGhpcy5iZ1tiZ10uZHggPSAodmFsdWUgPDwgMTYpIC8gMHgxMDAwMDAwOwp9OwoKR2FtZUJveUFkdmFuY2VTb2Z0d2FyZVJlbmRlcmVyLnByb3RvdHlwZS53cml0ZUJhY2tncm91bmRQYXJhbUIgPSBmdW5jdGlvbihiZywgdmFsdWUpIHsKCXRoaXMuYmdbYmddLmRteCA9ICh2YWx1ZSA8PCAxNikgLyAweDEwMDAwMDA7Cn07CgpHYW1lQm95QWR2YW5jZVNvZnR3YXJlUmVuZGVyZXIucHJvdG90eXBlLndyaXRlQmFja2dyb3VuZFBhcmFtQyA9IGZ1bmN0aW9uKGJnLCB2YWx1ZSkgewoJdGhpcy5iZ1tiZ10uZHkgPSAodmFsdWUgPDwgMTYpIC8gMHgxMDAwMDAwOwp9OwoKR2FtZUJveUFkdmFuY2VTb2Z0d2FyZVJlbmRlcmVyLnByb3RvdHlwZS53cml0ZUJhY2tncm91bmRQYXJhbUQgPSBmdW5jdGlvbihiZywgdmFsdWUpIHsKCXRoaXMuYmdbYmddLmRteSA9ICh2YWx1ZSA8PCAxNikgLyAweDEwMDAwMDA7Cn07CgpHYW1lQm95QWR2YW5jZVNvZnR3YXJlUmVuZGVyZXIucHJvdG90eXBlLndyaXRlV2luMEggPSBmdW5jdGlvbih2YWx1ZSkgewoJdGhpcy53aW4wTGVmdCA9ICh2YWx1ZSAmIDB4RkYwMCkgPj4gODsKCXRoaXMud2luMFJpZ2h0ID0gTWF0aC5taW4odGhpcy5IT1JJWk9OVEFMX1BJWEVMUywgdmFsdWUgJiAweDAwRkYpOwoJaWYgKHRoaXMud2luMExlZnQgPiB0aGlzLndpbjBSaWdodCkgewoJCXRoaXMud2luMFJpZ2h0ID0gdGhpcy5IT1JJWk9OVEFMX1BJWEVMUzsKCX0KfTsKCkdhbWVCb3lBZHZhbmNlU29mdHdhcmVSZW5kZXJlci5wcm90b3R5cGUud3JpdGVXaW4xSCA9IGZ1bmN0aW9uKHZhbHVlKSB7Cgl0aGlzLndpbjFMZWZ0ID0gKHZhbHVlICYgMHhGRjAwKSA+PiA4OwoJdGhpcy53aW4xUmlnaHQgPSBNYXRoLm1pbih0aGlzLkhPUklaT05UQUxfUElYRUxTLCB2YWx1ZSAmIDB4MDBGRik7CglpZiAodGhpcy53aW4xTGVmdCA+IHRoaXMud2luMVJpZ2h0KSB7CgkJdGhpcy53aW4xUmlnaHQgPSB0aGlzLkhPUklaT05UQUxfUElYRUxTOwoJfQp9OwoKR2FtZUJveUFkdmFuY2VTb2Z0d2FyZVJlbmRlcmVyLnByb3RvdHlwZS53cml0ZVdpbjBWID0gZnVuY3Rpb24odmFsdWUpIHsKCXRoaXMud2luMFRvcCA9ICh2YWx1ZSAmIDB4RkYwMCkgPj4gODsKCXRoaXMud2luMEJvdHRvbSA9IE1hdGgubWluKHRoaXMuVkVSVElDQUxfUElYRUxTLCB2YWx1ZSAmIDB4MDBGRik7CglpZiAodGhpcy53aW4wVG9wID4gdGhpcy53aW4wQm90dG9tKSB7CgkJdGhpcy53aW4wQm90dG9tID0gdGhpcy5WRVJUSUNBTF9QSVhFTFM7Cgl9Cn07CgpHYW1lQm95QWR2YW5jZVNvZnR3YXJlUmVuZGVyZXIucHJvdG90eXBlLndyaXRlV2luMVYgPSBmdW5jdGlvbih2YWx1ZSkgewoJdGhpcy53aW4xVG9wID0gKHZhbHVlICYgMHhGRjAwKSA+PiA4OwoJdGhpcy53aW4xQm90dG9tID0gTWF0aC5taW4odGhpcy5WRVJUSUNBTF9QSVhFTFMsIHZhbHVlICYgMHgwMEZGKTsKCWlmICh0aGlzLndpbjFUb3AgPiB0aGlzLndpbjFCb3R0b20pIHsKCQl0aGlzLndpbjFCb3R0b20gPSB0aGlzLlZFUlRJQ0FMX1BJWEVMUzsKCX0KfTsKCkdhbWVCb3lBZHZhbmNlU29mdHdhcmVSZW5kZXJlci5wcm90b3R5cGUud3JpdGVXaW5kb3cgPSBmdW5jdGlvbihpbmRleCwgdmFsdWUpIHsKCXZhciB3aW5kb3cgPSB0aGlzLndpbmRvd3NbaW5kZXhdOwoJd2luZG93LmVuYWJsZWRbMF0gPSB2YWx1ZSAmIDB4MDE7Cgl3aW5kb3cuZW5hYmxlZFsxXSA9IHZhbHVlICYgMHgwMjsKCXdpbmRvdy5lbmFibGVkWzJdID0gdmFsdWUgJiAweDA0OwoJd2luZG93LmVuYWJsZWRbM10gPSB2YWx1ZSAmIDB4MDg7Cgl3aW5kb3cuZW5hYmxlZFs0XSA9IHZhbHVlICYgMHgxMDsKCXdpbmRvdy5zcGVjaWFsID0gdmFsdWUgJiAweDIwOwp9OwoKR2FtZUJveUFkdmFuY2VTb2Z0d2FyZVJlbmRlcmVyLnByb3RvdHlwZS53cml0ZVdpbkluID0gZnVuY3Rpb24odmFsdWUpIHsKCXRoaXMud3JpdGVXaW5kb3coMCwgdmFsdWUpOwoJdGhpcy53cml0ZVdpbmRvdygxLCB2YWx1ZSA+PiA4KTsKfTsKCkdhbWVCb3lBZHZhbmNlU29mdHdhcmVSZW5kZXJlci5wcm90b3R5cGUud3JpdGVXaW5PdXQgPSBmdW5jdGlvbih2YWx1ZSkgewoJdGhpcy53cml0ZVdpbmRvdygyLCB2YWx1ZSk7Cgl0aGlzLndyaXRlV2luZG93KDMsIHZhbHVlID4+IDgpOwp9OwoKR2FtZUJveUFkdmFuY2VTb2Z0d2FyZVJlbmRlcmVyLnByb3RvdHlwZS53cml0ZUJsZW5kQ29udHJvbCA9IGZ1bmN0aW9uKHZhbHVlKSB7Cgl0aGlzLnRhcmdldDFbMF0gPSAhISh2YWx1ZSAmIDB4MDAwMSkgKiB0aGlzLlRBUkdFVDFfTUFTSzsKCXRoaXMudGFyZ2V0MVsxXSA9ICEhKHZhbHVlICYgMHgwMDAyKSAqIHRoaXMuVEFSR0VUMV9NQVNLOwoJdGhpcy50YXJnZXQxWzJdID0gISEodmFsdWUgJiAweDAwMDQpICogdGhpcy5UQVJHRVQxX01BU0s7Cgl0aGlzLnRhcmdldDFbM10gPSAhISh2YWx1ZSAmIDB4MDAwOCkgKiB0aGlzLlRBUkdFVDFfTUFTSzsKCXRoaXMudGFyZ2V0MVs0XSA9ICEhKHZhbHVlICYgMHgwMDEwKSAqIHRoaXMuVEFSR0VUMV9NQVNLOwoJdGhpcy50YXJnZXQxWzVdID0gISEodmFsdWUgJiAweDAwMjApICogdGhpcy5UQVJHRVQxX01BU0s7Cgl0aGlzLnRhcmdldDJbMF0gPSAhISh2YWx1ZSAmIDB4MDEwMCkgKiB0aGlzLlRBUkdFVDJfTUFTSzsKCXRoaXMudGFyZ2V0MlsxXSA9ICEhKHZhbHVlICYgMHgwMjAwKSAqIHRoaXMuVEFSR0VUMl9NQVNLOwoJdGhpcy50YXJnZXQyWzJdID0gISEodmFsdWUgJiAweDA0MDApICogdGhpcy5UQVJHRVQyX01BU0s7Cgl0aGlzLnRhcmdldDJbM10gPSAhISh2YWx1ZSAmIDB4MDgwMCkgKiB0aGlzLlRBUkdFVDJfTUFTSzsKCXRoaXMudGFyZ2V0Mls0XSA9ICEhKHZhbHVlICYgMHgxMDAwKSAqIHRoaXMuVEFSR0VUMl9NQVNLOwoJdGhpcy50YXJnZXQyWzVdID0gISEodmFsdWUgJiAweDIwMDApICogdGhpcy5UQVJHRVQyX01BU0s7Cgl0aGlzLmJsZW5kTW9kZSA9ICh2YWx1ZSAmIDB4MDBDMCkgPj4gNjsKCglzd2l0Y2ggKHRoaXMuYmxlbmRNb2RlKSB7CgljYXNlIDE6CgkJLy8gQWxwaGEKCQkvLyBGYWxsIHRocm91Z2gKCWNhc2UgMDoKCQkvLyBOb3JtYWwKCQl0aGlzLnBhbGV0dGUubWFrZU5vcm1hbFBhbGV0dGVzKCk7CgkJYnJlYWs7CgljYXNlIDI6CgkJLy8gQnJpZ2h0ZXIKCQl0aGlzLnBhbGV0dGUubWFrZUJyaWdodFBhbGV0dGVzKHZhbHVlICYgMHgzRik7CgkJYnJlYWs7CgljYXNlIDM6CgkJLy8gRGFya2VyCgkJdGhpcy5wYWxldHRlLm1ha2VEYXJrUGFsZXR0ZXModmFsdWUgJiAweDNGKTsKCQlicmVhazsKCX0KfTsKCkdhbWVCb3lBZHZhbmNlU29mdHdhcmVSZW5kZXJlci5wcm90b3R5cGUuc2V0QmxlbmRFbmFibGVkID0gZnVuY3Rpb24obGF5ZXIsIGVuYWJsZWQsIG92ZXJyaWRlKSB7Cgl0aGlzLmFscGhhRW5hYmxlZCA9IGVuYWJsZWQgJiYgb3ZlcnJpZGUgPT0gMTsKCWlmIChlbmFibGVkKSB7CgkJc3dpdGNoIChvdmVycmlkZSkgewoJCWNhc2UgMToKCQkJLy8gQWxwaGEKCQkJLy8gRmFsbCB0aHJvdWdoCgkJY2FzZSAwOgoJCQkvLyBOb3JtYWwKCQkJdGhpcy5wYWxldHRlLm1ha2VOb3JtYWxQYWxldHRlKGxheWVyKTsKCQkJYnJlYWs7CgkJY2FzZSAyOgoJCQkvLyBCcmlnaHRlcgoJCWNhc2UgMzoKCQkJLy8gRGFya2VyCgkJCXRoaXMucGFsZXR0ZS5tYWtlU3BlY2lhbFBhbGV0dGUobGF5ZXIpOwoJCQlicmVhazsKCQl9Cgl9IGVsc2UgewoJCXRoaXMucGFsZXR0ZS5tYWtlTm9ybWFsUGFsZXR0ZShsYXllcik7Cgl9Cn07CgpHYW1lQm95QWR2YW5jZVNvZnR3YXJlUmVuZGVyZXIucHJvdG90eXBlLndyaXRlQmxlbmRBbHBoYSA9IGZ1bmN0aW9uKHZhbHVlKSB7Cgl0aGlzLmJsZW5kQSA9ICh2YWx1ZSAmIDB4MDAxRikgLyAxNjsKCWlmICh0aGlzLmJsZW5kQSA+IDEpIHsKCQl0aGlzLmJsZW5kQSA9IDE7Cgl9Cgl0aGlzLmJsZW5kQiA9ICgodmFsdWUgJiAweDFGMDApID4+IDgpIC8gMTY7CglpZiAodGhpcy5ibGVuZEIgPiAxKSB7CgkJdGhpcy5ibGVuZEIgPSAxOwoJfQp9OwoKR2FtZUJveUFkdmFuY2VTb2Z0d2FyZVJlbmRlcmVyLnByb3RvdHlwZS53cml0ZUJsZW5kWSA9IGZ1bmN0aW9uKHZhbHVlKSB7Cgl0aGlzLmJsZW5kWSA9IHZhbHVlOwoJdGhpcy5wYWxldHRlLnNldEJsZW5kWSh2YWx1ZSA+PSAxNiA/IDEgOiAodmFsdWUgLyAxNikpOwp9OwoKR2FtZUJveUFkdmFuY2VTb2Z0d2FyZVJlbmRlcmVyLnByb3RvdHlwZS53cml0ZU1vc2FpYyA9IGZ1bmN0aW9uKHZhbHVlKSB7Cgl0aGlzLmJnTW9zYWljWCA9ICh2YWx1ZSAmIDB4RikgKyAxOwoJdGhpcy5iZ01vc2FpY1kgPSAoKHZhbHVlID4+IDQpICYgMHhGKSArIDE7Cgl0aGlzLm9iak1vc2FpY1ggPSAoKHZhbHVlID4+IDgpICYgMHhGKSArIDE7Cgl0aGlzLm9iak1vc2FpY1kgPSAoKHZhbHVlID4+IDEyKSAmIDB4RikgKyAxOwp9OwoKR2FtZUJveUFkdmFuY2VTb2Z0d2FyZVJlbmRlcmVyLnByb3RvdHlwZS5yZXNldExheWVycyA9IGZ1bmN0aW9uKCkgewoJaWYgKHRoaXMuYmFja2dyb3VuZE1vZGUgPiAxKSB7CgkJdGhpcy5iZ1swXS5lbmFibGVkID0gZmFsc2U7CgkJdGhpcy5iZ1sxXS5lbmFibGVkID0gZmFsc2U7Cgl9CglpZiAodGhpcy5iZ1syXS5lbmFibGVkKSB7CgkJdGhpcy5iZ1syXS5kcmF3U2NhbmxpbmUgPSB0aGlzLmJnTW9kZXNbdGhpcy5iYWNrZ3JvdW5kTW9kZV07Cgl9CglpZiAoKHRoaXMuYmFja2dyb3VuZE1vZGUgPT0gMCB8fCB0aGlzLmJhY2tncm91bmRNb2RlID09IDIpKSB7CgkJaWYgKHRoaXMuYmdbM10uZW5hYmxlZCkgewoJCQl0aGlzLmJnWzNdLmRyYXdTY2FubGluZSA9IHRoaXMuYmdNb2Rlc1t0aGlzLmJhY2tncm91bmRNb2RlXTsKCQl9Cgl9IGVsc2UgewoJCXRoaXMuYmdbM10uZW5hYmxlZCA9IGZhbHNlOwoJfQoJdGhpcy5kcmF3TGF5ZXJzLnNvcnQodGhpcy5sYXllckNvbXBhcmF0b3IpOwp9OwoKR2FtZUJveUFkdmFuY2VTb2Z0d2FyZVJlbmRlcmVyLnByb3RvdHlwZS5sYXllckNvbXBhcmF0b3IgPSBmdW5jdGlvbihhLCBiKSB7Cgl2YXIgZGlmZiA9IGIucHJpb3JpdHkgLSBhLnByaW9yaXR5OwoJaWYgKCFkaWZmKSB7CgkJaWYgKGEuYmcgJiYgIWIuYmcpIHsKCQkJcmV0dXJuIC0xOwoJCX0gZWxzZSBpZiAoIWEuYmcgJiYgYi5iZykgewoJCQlyZXR1cm4gMTsKCQl9CgoJCXJldHVybiBiLmluZGV4IC0gYS5pbmRleDsKCX0KCXJldHVybiBkaWZmOwp9OwoKR2FtZUJveUFkdmFuY2VTb2Z0d2FyZVJlbmRlcmVyLnByb3RvdHlwZS5hY2Nlc3NNYXBNb2RlMCA9IGZ1bmN0aW9uKGJhc2UsIHNpemUsIHgsIHlCYXNlLCBvdXQpIHsKCXZhciBvZmZzZXQgPSBiYXNlICsgKCh4ID4+IDIpICYgMHgzRSkgKyB5QmFzZTsKCglpZiAoc2l6ZSAmIDEpIHsKCQlvZmZzZXQgKz0gKHggJiAweDEwMCkgPDwgMzsKCX0KCgl2YXIgbWVtID0gdGhpcy52cmFtLmxvYWRVMTYob2Zmc2V0KTsKCW91dC50aWxlID0gbWVtICYgMHgwM0ZGOwoJb3V0LmhmbGlwID0gbWVtICYgMHgwNDAwOwoJb3V0LnZmbGlwID0gbWVtICYgMHgwODAwOwoJb3V0LnBhbGV0dGUgPSAobWVtICYgMHhGMDAwKSA+PiA4IC8vIFRoaXMgaXMgc2hpZnRlZCB1cCA0IHRvIG1ha2UgcHVzaFBpeGVsIGZhc3Rlcgp9OwoKR2FtZUJveUFkdmFuY2VTb2Z0d2FyZVJlbmRlcmVyLnByb3RvdHlwZS5hY2Nlc3NNYXBNb2RlMSA9IGZ1bmN0aW9uKGJhc2UsIHNpemUsIHgsIHlCYXNlLCBvdXQpIHsKCXZhciBvZmZzZXQgPSBiYXNlICsgKHggPj4gMykgKyB5QmFzZTsKCglvdXQudGlsZSA9IHRoaXMudnJhbS5sb2FkVTgob2Zmc2V0KTsKfTsKCkdhbWVCb3lBZHZhbmNlU29mdHdhcmVSZW5kZXJlci5wcm90b3R5cGUuYWNjZXNzVGlsZSA9IGZ1bmN0aW9uKGJhc2UsIHRpbGUsIHkpIHsKCXZhciBvZmZzZXQgPSBiYXNlICsgKHRpbGUgPDwgNSk7CglvZmZzZXQgfD0geSA8PCAyOwoKCXJldHVybiB0aGlzLnZyYW0ubG9hZDMyKG9mZnNldCk7Cn0KCkdhbWVCb3lBZHZhbmNlU29mdHdhcmVSZW5kZXJlci5wdXNoUGl4ZWwgPSBmdW5jdGlvbihsYXllciwgbWFwLCB2aWRlbywgcm93LCB4LCBvZmZzZXQsIGJhY2tpbmcsIG1hc2ssIHJhdykgewoJdmFyIGluZGV4OwoJaWYgKCFyYXcpIHsKCQlpZiAodGhpcy5tdWx0aXBhbGV0dGUpIHsKCQkJaW5kZXggPSAocm93ID4+ICh4IDw8IDMpKSAmIDB4RkY7CgkJfSBlbHNlIHsKCQkJaW5kZXggPSAocm93ID4+ICh4IDw8IDIpKSAmIDB4RjsKCQl9CgkJLy8gSW5kZXggMCBpcyB0cmFuc3BhcmVudAoJCWlmICghaW5kZXgpIHsKCQkJcmV0dXJuOwoJCX0gZWxzZSBpZiAoIXRoaXMubXVsdGlwYWxldHRlKSB7CgkJCWluZGV4IHw9IG1hcC5wYWxldHRlOwoJCX0KCX0KCgl2YXIgc3RlbmNpbCA9IHZpZGVvLldSSVRURU5fTUFTSzsKCXZhciBvbGRTdGVuY2lsID0gYmFja2luZy5zdGVuY2lsW29mZnNldF07Cgl2YXIgYmxlbmQgPSB2aWRlby5ibGVuZE1vZGU7CglpZiAodmlkZW8ub2Jqd2luQWN0aXZlKSB7CgkJaWYgKG9sZFN0ZW5jaWwgJiB2aWRlby5PQkpXSU5fTUFTSykgewoJCQlpZiAodmlkZW8ud2luZG93c1szXS5lbmFibGVkW2xheWVyXSkgewoJCQkJdmlkZW8uc2V0QmxlbmRFbmFibGVkKGxheWVyLCB2aWRlby53aW5kb3dzWzNdLnNwZWNpYWwgJiYgdmlkZW8udGFyZ2V0MVtsYXllcl0sIGJsZW5kKTsKCQkJCWlmICh2aWRlby53aW5kb3dzWzNdLnNwZWNpYWwgJiYgdmlkZW8uYWxwaGFFbmFibGVkKSB7CgkJCQkJbWFzayB8PSB2aWRlby50YXJnZXQxW2xheWVyXTsKCQkJCX0KCQkJCXN0ZW5jaWwgfD0gdmlkZW8uT0JKV0lOX01BU0s7CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm47CgkJCX0KCQl9IGVsc2UgaWYgKHZpZGVvLndpbmRvd3NbMl0uZW5hYmxlZFtsYXllcl0pIHsKCQkJdmlkZW8uc2V0QmxlbmRFbmFibGVkKGxheWVyLCB2aWRlby53aW5kb3dzWzJdLnNwZWNpYWwgJiYgdmlkZW8udGFyZ2V0MVtsYXllcl0sIGJsZW5kKTsKCQkJaWYgKHZpZGVvLndpbmRvd3NbMl0uc3BlY2lhbCAmJiB2aWRlby5hbHBoYUVuYWJsZWQpIHsKCQkJCW1hc2sgfD0gdmlkZW8udGFyZ2V0MVtsYXllcl07CgkJCX0KCQl9IGVsc2UgewoJCQlyZXR1cm47CgkJfQoJfQoKCWlmICgobWFzayAmIHZpZGVvLlRBUkdFVDFfTUFTSykgJiYgKG9sZFN0ZW5jaWwgJiB2aWRlby5UQVJHRVQyX01BU0spKSB7CgkJdmlkZW8uc2V0QmxlbmRFbmFibGVkKGxheWVyLCB0cnVlLCAxKTsKCX0KCgl2YXIgcGl4ZWwgPSByYXcgPyByb3cgOiB2aWRlby5wYWxldHRlLmFjY2Vzc0NvbG9yKGxheWVyLCBpbmRleCk7CgoJaWYgKG1hc2sgJiB2aWRlby5UQVJHRVQxX01BU0spIHsKCQl2aWRlby5zZXRCbGVuZEVuYWJsZWQobGF5ZXIsICEhYmxlbmQsIGJsZW5kKTsKCX0KCXZhciBoaWdoUHJpb3JpdHkgPSAobWFzayAmIHZpZGVvLlBSSU9SSVRZX01BU0spIDwgKG9sZFN0ZW5jaWwgJiB2aWRlby5QUklPUklUWV9NQVNLKTsKCS8vIEJhY2tncm91bmRzIGNhbiBkcmF3IG92ZXIgZWFjaCBvdGhlciwgdG9vLgoJaWYgKChtYXNrICYgdmlkZW8uUFJJT1JJVFlfTUFTSykgPT0gKG9sZFN0ZW5jaWwgJiB2aWRlby5QUklPUklUWV9NQVNLKSkgewoJCWhpZ2hQcmlvcml0eSA9IG1hc2sgJiB2aWRlby5CQUNLR1JPVU5EX01BU0s7Cgl9CgoJaWYgKCEob2xkU3RlbmNpbCAmIHZpZGVvLldSSVRURU5fTUFTSykpIHsKCQkvLyBOb3RoaW5nIGhlcmUgeWV0LCBqdXN0IGNvbnRpbnVlCgkJc3RlbmNpbCB8PSBtYXNrOwoJfSBlbHNlIGlmIChoaWdoUHJpb3JpdHkpIHsKCQkvLyBXZSBhcmUgaGlnaGVyIHByaW9yaXR5CgkJaWYgKG1hc2sgJiB2aWRlby5UQVJHRVQxX01BU0sgJiYgb2xkU3RlbmNpbCAmIHZpZGVvLlRBUkdFVDJfTUFTSykgewoJCQlwaXhlbCA9IHZpZGVvLnBhbGV0dGUubWl4KHZpZGVvLmJsZW5kQSwgcGl4ZWwsIHZpZGVvLmJsZW5kQiwgYmFja2luZy5jb2xvcltvZmZzZXRdKTsKCQl9CgkJLy8gV2UganVzdCBkcmV3IG92ZXIgc29tZXRoaW5nLCBzbyBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIHVzIHRvIGJlIGEgVEFSR0VUMSBhbnltb3JlLi4uCgkJc3RlbmNpbCB8PSBtYXNrICYgfnZpZGVvLlRBUkdFVDFfTUFTSzsKCX0gZWxzZSBpZiAoKG1hc2sgJiB2aWRlby5QUklPUklUWV9NQVNLKSA+IChvbGRTdGVuY2lsICYgdmlkZW8uUFJJT1JJVFlfTUFTSykpIHsKCQkvLyBXZSdyZSBiZWxvdyBhbm90aGVyIGxheWVyLCBidXQgbWlnaHQgYmUgdGhlIGJsZW5kIHRhcmdldCBmb3IgaXQKCQlzdGVuY2lsID0gb2xkU3RlbmNpbCAmIH4odmlkZW8uVEFSR0VUMV9NQVNLIHwgdmlkZW8uVEFSR0VUMl9NQVNLKTsKCQlpZiAobWFzayAmIHZpZGVvLlRBUkdFVDJfTUFTSyAmJiBvbGRTdGVuY2lsICYgdmlkZW8uVEFSR0VUMV9NQVNLKSB7CgkJCXBpeGVsID0gdmlkZW8ucGFsZXR0ZS5taXgodmlkZW8uYmxlbmRCLCBwaXhlbCwgdmlkZW8uYmxlbmRBLCBiYWNraW5nLmNvbG9yW29mZnNldF0pOwoJCX0gZWxzZSB7CgkJCXJldHVybjsKCQl9Cgl9IGVsc2UgewoJCXJldHVybjsKCX0KCglpZiAobWFzayAmIHZpZGVvLk9CSldJTl9NQVNLKSB7CgkJLy8gV2UgQVJFIHRoZSBvYmplY3Qgd2luZG93LCBkb24ndCBkcmF3IHBpeGVscyEKCQliYWNraW5nLnN0ZW5jaWxbb2Zmc2V0XSB8PSB2aWRlby5PQkpXSU5fTUFTSzsKCQlyZXR1cm47Cgl9CgliYWNraW5nLmNvbG9yW29mZnNldF0gPSBwaXhlbDsKCWJhY2tpbmcuc3RlbmNpbFtvZmZzZXRdID0gc3RlbmNpbDsKfTsKCkdhbWVCb3lBZHZhbmNlU29mdHdhcmVSZW5kZXJlci5wcm90b3R5cGUuaWRlbnRpdHkgPSBmdW5jdGlvbih4KSB7CglyZXR1cm4geDsKfTsKCkdhbWVCb3lBZHZhbmNlU29mdHdhcmVSZW5kZXJlci5wcm90b3R5cGUuZHJhd1NjYW5saW5lQmxhbmsgPSBmdW5jdGlvbihiYWNraW5nKSB7Cglmb3IgKHZhciB4ID0gMDsgeCA8IHRoaXMuSE9SSVpPTlRBTF9QSVhFTFM7ICsreCkgewoJCWJhY2tpbmcuY29sb3JbeF0gPSAweEZGRkY7CgkJYmFja2luZy5zdGVuY2lsW3hdID0gMDsKCX0KfTsKCkdhbWVCb3lBZHZhbmNlU29mdHdhcmVSZW5kZXJlci5wcm90b3R5cGUucHJlcGFyZVNjYW5saW5lID0gZnVuY3Rpb24oYmFja2luZykgewoJZm9yICh2YXIgeCA9IDA7IHggPCB0aGlzLkhPUklaT05UQUxfUElYRUxTOyArK3gpIHsKCQliYWNraW5nLnN0ZW5jaWxbeF0gPSB0aGlzLnRhcmdldDJbdGhpcy5MQVlFUl9CQUNLRFJPUF07Cgl9Cn07CgpHYW1lQm95QWR2YW5jZVNvZnR3YXJlUmVuZGVyZXIucHJvdG90eXBlLmRyYXdTY2FubGluZUJHTW9kZTAgPSBmdW5jdGlvbihiYWNraW5nLCBiZywgc3RhcnQsIGVuZCkgewoJdmFyIHZpZGVvID0gdGhpcy52aWRlbzsKCXZhciB4OwoJdmFyIHkgPSB2aWRlby52Y291bnQ7Cgl2YXIgb2Zmc2V0ID0gc3RhcnQ7Cgl2YXIgeE9mZiA9IGJnLng7Cgl2YXIgeU9mZiA9IGJnLnk7Cgl2YXIgbG9jYWxYOwoJdmFyIGxvY2FsWExvOwoJdmFyIGxvY2FsWSA9IHkgKyB5T2ZmOwoJaWYgKHRoaXMubW9zYWljKSB7CgkJbG9jYWxZIC09IHkgJSB2aWRlby5iZ01vc2FpY1k7Cgl9Cgl2YXIgbG9jYWxZTG8gPSBsb2NhbFkgJiAweDc7Cgl2YXIgbW9zYWljWDsKCXZhciBzY3JlZW5CYXNlID0gYmcuc2NyZWVuQmFzZTsKCXZhciBjaGFyQmFzZSA9IGJnLmNoYXJCYXNlOwoJdmFyIHNpemUgPSBiZy5zaXplOwoJdmFyIGluZGV4ID0gYmcuaW5kZXg7Cgl2YXIgbWFwID0gdmlkZW8uc2hhcmVkTWFwOwoJdmFyIHBhbGV0dGVTaGlmdCA9IGJnLm11bHRpcGFsZXR0ZSA/IDEgOiAwOwoJdmFyIG1hc2sgPSB2aWRlby50YXJnZXQyW2luZGV4XSB8IChiZy5wcmlvcml0eSA8PCAxKSB8IHZpZGVvLkJBQ0tHUk9VTkRfTUFTSzsKCWlmICh2aWRlby5ibGVuZE1vZGUgPT0gMSAmJiB2aWRlby5hbHBoYUVuYWJsZWQpIHsKCQltYXNrIHw9IHZpZGVvLnRhcmdldDFbaW5kZXhdOwoJfQoKCXZhciB5QmFzZSA9IChsb2NhbFkgPDwgMykgJiAweDdDMDsKCWlmIChzaXplID09IDIpIHsKCQl5QmFzZSArPSAobG9jYWxZIDw8IDMpICYgMHg4MDA7Cgl9IGVsc2UgaWYgKHNpemUgPT0gMykgewoJCXlCYXNlICs9IChsb2NhbFkgPDwgNCkgJiAweDEwMDA7Cgl9CgoJdmFyIHhNYXNrOwoJaWYgKHNpemUgJiAxKSB7CgkJeE1hc2sgPSAweDFGRjsKCX0gZWxzZSB7CgkJeE1hc2sgPSAweEZGOwoJfQoKCXZpZGVvLmFjY2Vzc01hcE1vZGUwKHNjcmVlbkJhc2UsIHNpemUsIChzdGFydCArIHhPZmYpICYgeE1hc2ssIHlCYXNlLCBtYXApOwoJdmFyIHRpbGVSb3cgPSB2aWRlby5hY2Nlc3NUaWxlKGNoYXJCYXNlLCBtYXAudGlsZSA8PCBwYWxldHRlU2hpZnQsICghbWFwLnZmbGlwID8gbG9jYWxZTG8gOiA3IC0gbG9jYWxZTG8pIDw8IHBhbGV0dGVTaGlmdCk7Cglmb3IgKHggPSBzdGFydDsgeCA8IGVuZDsgKyt4KSB7CgkJbG9jYWxYID0gKHggKyB4T2ZmKSAmIHhNYXNrOwoJCW1vc2FpY1ggPSB0aGlzLm1vc2FpYyA/IG9mZnNldCAlIHZpZGVvLmJnTW9zYWljWCA6IDA7CgkJbG9jYWxYIC09IG1vc2FpY1g7CgkJbG9jYWxYTG8gPSBsb2NhbFggJiAweDc7CgkJaWYgKCFwYWxldHRlU2hpZnQpIHsKCQkJaWYgKCFsb2NhbFhMbyB8fCAodGhpcy5tb3NhaWMgJiYgIW1vc2FpY1gpKSB7CgkJCQl2aWRlby5hY2Nlc3NNYXBNb2RlMChzY3JlZW5CYXNlLCBzaXplLCBsb2NhbFgsIHlCYXNlLCBtYXApOwoJCQkJdGlsZVJvdyA9IHZpZGVvLmFjY2Vzc1RpbGUoY2hhckJhc2UsIG1hcC50aWxlLCAhbWFwLnZmbGlwID8gbG9jYWxZTG8gOiA3IC0gbG9jYWxZTG8pOwoJCQkJaWYgKCF0aWxlUm93ICYmICFsb2NhbFhMbykgewoJCQkJCXggKz0gNzsKCQkJCQlvZmZzZXQgKz0gODsKCQkJCQljb250aW51ZTsKCQkJCX0KCQkJfQoJCX0gZWxzZSB7CgkJCWlmICghbG9jYWxYTG8gfHwgKHRoaXMubW9zYWljICYmICFtb3NhaWNYKSkgewoJCQkJdmlkZW8uYWNjZXNzTWFwTW9kZTAoc2NyZWVuQmFzZSwgc2l6ZSwgbG9jYWxYLCB5QmFzZSwgbWFwKTsKCQkJfQoJCQlpZiAoIShsb2NhbFhMbyAmIDB4MykgfHwgKHRoaXMubW9zYWljICYmICFtb3NhaWNYKSkgewoJCQkJdGlsZVJvdyA9IHZpZGVvLmFjY2Vzc1RpbGUoY2hhckJhc2UgKyAoISEobG9jYWxYICYgMHg0KSA9PSAhbWFwLmhmbGlwID8gNCA6IDApLCBtYXAudGlsZSA8PCAxLCAoIW1hcC52ZmxpcCA/IGxvY2FsWUxvIDogNyAtIGxvY2FsWUxvKSA8PCAxKTsKCQkJCWlmICghdGlsZVJvdyAmJiAhKGxvY2FsWExvICYgMHgzKSkgewoJCQkJCXggKz0gMzsKCQkJCQlvZmZzZXQgKz0gNDsKCQkJCQljb250aW51ZTsKCQkJCX0KCQkJfQoJCX0KCQlpZiAobWFwLmhmbGlwKSB7CgkJCWxvY2FsWExvID0gNyAtIGxvY2FsWExvOwoJCX0KCQliZy5wdXNoUGl4ZWwoaW5kZXgsIG1hcCwgdmlkZW8sIHRpbGVSb3csIGxvY2FsWExvLCBvZmZzZXQsIGJhY2tpbmcsIG1hc2ssIGZhbHNlKTsKCQlvZmZzZXQrKzsKCX0KfTsKCkdhbWVCb3lBZHZhbmNlU29mdHdhcmVSZW5kZXJlci5wcm90b3R5cGUuZHJhd1NjYW5saW5lQkdNb2RlMiA9IGZ1bmN0aW9uKGJhY2tpbmcsIGJnLCBzdGFydCwgZW5kKSB7Cgl2YXIgdmlkZW8gPSB0aGlzLnZpZGVvOwoJdmFyIHg7Cgl2YXIgeSA9IHZpZGVvLnZjb3VudDsKCXZhciBvZmZzZXQgPSBzdGFydDsKCXZhciBsb2NhbFg7Cgl2YXIgbG9jYWxZOwoJdmFyIHNjcmVlbkJhc2UgPSBiZy5zY3JlZW5CYXNlOwoJdmFyIGNoYXJCYXNlID0gYmcuY2hhckJhc2U7Cgl2YXIgc2l6ZSA9IGJnLnNpemU7Cgl2YXIgc2l6ZUFkanVzdGVkID0gMTI4IDw8IHNpemU7Cgl2YXIgaW5kZXggPSBiZy5pbmRleDsKCXZhciBtYXAgPSB2aWRlby5zaGFyZWRNYXA7Cgl2YXIgY29sb3I7Cgl2YXIgbWFzayA9IHZpZGVvLnRhcmdldDJbaW5kZXhdIHwgKGJnLnByaW9yaXR5IDw8IDEpIHwgdmlkZW8uQkFDS0dST1VORF9NQVNLOwoJaWYgKHZpZGVvLmJsZW5kTW9kZSA9PSAxICYmIHZpZGVvLmFscGhhRW5hYmxlZCkgewoJCW1hc2sgfD0gdmlkZW8udGFyZ2V0MVtpbmRleF07Cgl9CgoJdmFyIHlCYXNlOwoKCWZvciAoeCA9IHN0YXJ0OyB4IDwgZW5kOyArK3gpIHsKCQlsb2NhbFggPSBiZy5keCAqIHggKyBiZy5zeDsKCQlsb2NhbFkgPSBiZy5keSAqIHggKyBiZy5zeTsKCQlpZiAodGhpcy5tb3NhaWMpIHsKCQkJbG9jYWxYIC09ICh4ICUgdmlkZW8uYmdNb3NhaWNYKSAqIGJnLmR4ICsgKHkgJSB2aWRlby5iZ01vc2FpY1kpICogYmcuZG14OwoJCQlsb2NhbFkgLT0gKHggJSB2aWRlby5iZ01vc2FpY1gpICogYmcuZHkgKyAoeSAlIHZpZGVvLmJnTW9zYWljWSkgKiBiZy5kbXk7CgkJfQoJCWlmIChiZy5vdmVyZmxvdykgewoJCQlsb2NhbFggJj0gc2l6ZUFkanVzdGVkIC0gMTsKCQkJaWYgKGxvY2FsWCA8IDApIHsKCQkJCWxvY2FsWCArPSBzaXplQWRqdXN0ZWQ7CgkJCX0KCQkJbG9jYWxZICY9IHNpemVBZGp1c3RlZCAtIDE7CgkJCWlmIChsb2NhbFkgPCAwKSB7CgkJCQlsb2NhbFkgKz0gc2l6ZUFkanVzdGVkOwoJCQl9CgkJfSBlbHNlIGlmIChsb2NhbFggPCAwIHx8IGxvY2FsWSA8IDAgfHwgbG9jYWxYID49IHNpemVBZGp1c3RlZCB8fCBsb2NhbFkgPj0gc2l6ZUFkanVzdGVkKSB7CgkJCW9mZnNldCsrOwoJCQljb250aW51ZTsKCQl9CgkJeUJhc2UgPSAoKGxvY2FsWSA8PCAxKSAmIDB4N0YwKSA8PCBzaXplOwoJCXZpZGVvLmFjY2Vzc01hcE1vZGUxKHNjcmVlbkJhc2UsIHNpemUsIGxvY2FsWCwgeUJhc2UsIG1hcCk7CgkJY29sb3IgPSB0aGlzLnZyYW0ubG9hZFU4KGNoYXJCYXNlICsgKG1hcC50aWxlIDw8IDYpICsgKChsb2NhbFkgJiAweDcpIDw8IDMpICsgKGxvY2FsWCAmIDB4NykpOwoJCWJnLnB1c2hQaXhlbChpbmRleCwgbWFwLCB2aWRlbywgY29sb3IsIDAsIG9mZnNldCwgYmFja2luZywgbWFzaywgZmFsc2UpOwoJCW9mZnNldCsrOwoJfQp9OwoKR2FtZUJveUFkdmFuY2VTb2Z0d2FyZVJlbmRlcmVyLnByb3RvdHlwZS5kcmF3U2NhbmxpbmVCR01vZGUzID0gZnVuY3Rpb24oYmFja2luZywgYmcsIHN0YXJ0LCBlbmQpIHsKCXZhciB2aWRlbyA9IHRoaXMudmlkZW87Cgl2YXIgeDsKCXZhciB5ID0gdmlkZW8udmNvdW50OwoJdmFyIG9mZnNldCA9IHN0YXJ0OwoJdmFyIGxvY2FsWDsKCXZhciBsb2NhbFk7Cgl2YXIgaW5kZXggPSBiZy5pbmRleDsKCXZhciBtYXAgPSB2aWRlby5zaGFyZWRNYXA7Cgl2YXIgY29sb3I7Cgl2YXIgbWFzayA9IHZpZGVvLnRhcmdldDJbaW5kZXhdIHwgKGJnLnByaW9yaXR5IDw8IDEpIHwgdmlkZW8uQkFDS0dST1VORF9NQVNLOwoJaWYgKHZpZGVvLmJsZW5kTW9kZSA9PSAxICYmIHZpZGVvLmFscGhhRW5hYmxlZCkgewoJCW1hc2sgfD0gdmlkZW8udGFyZ2V0MVtpbmRleF07Cgl9CgoJdmFyIHlCYXNlOwoKCWZvciAoeCA9IHN0YXJ0OyB4IDwgZW5kOyArK3gpIHsKCQlsb2NhbFggPSBiZy5keCAqIHggKyBiZy5zeDsKCQlsb2NhbFkgPSBiZy5keSAqIHggKyBiZy5zeTsKCQlpZiAodGhpcy5tb3NhaWMpIHsKCQkJbG9jYWxYIC09ICh4ICUgdmlkZW8uYmdNb3NhaWNYKSAqIGJnLmR4ICsgKHkgJSB2aWRlby5iZ01vc2FpY1kpICogYmcuZG14OwoJCQlsb2NhbFkgLT0gKHggJSB2aWRlby5iZ01vc2FpY1gpICogYmcuZHkgKyAoeSAlIHZpZGVvLmJnTW9zYWljWSkgKiBiZy5kbXk7CgkJfQoJCWlmIChsb2NhbFggPCAwIHx8IGxvY2FsWSA8IDAgfHwgbG9jYWxYID49IHZpZGVvLkhPUklaT05UQUxfUElYRUxTIHx8IGxvY2FsWSA+PSB2aWRlby5WRVJUSUNBTF9QSVhFTFMpIHsKCQkJb2Zmc2V0Kys7CgkJCWNvbnRpbnVlOwoJCX0KCQljb2xvciA9IHRoaXMudnJhbS5sb2FkVTE2KCgobG9jYWxZICogdmlkZW8uSE9SSVpPTlRBTF9QSVhFTFMpICsgbG9jYWxYKSA8PCAxKTsKCQliZy5wdXNoUGl4ZWwoaW5kZXgsIG1hcCwgdmlkZW8sIGNvbG9yLCAwLCBvZmZzZXQsIGJhY2tpbmcsIG1hc2ssIHRydWUpOwoJCW9mZnNldCsrOwoJfQp9OwoKR2FtZUJveUFkdmFuY2VTb2Z0d2FyZVJlbmRlcmVyLnByb3RvdHlwZS5kcmF3U2NhbmxpbmVCR01vZGU0ID0gZnVuY3Rpb24oYmFja2luZywgYmcsIHN0YXJ0LCBlbmQpIHsKCXZhciB2aWRlbyA9IHRoaXMudmlkZW87Cgl2YXIgeDsKCXZhciB5ID0gdmlkZW8udmNvdW50OwoJdmFyIG9mZnNldCA9IHN0YXJ0OwoJdmFyIGxvY2FsWDsKCXZhciBsb2NhbFk7Cgl2YXIgY2hhckJhc2UgPSAwOwoJaWYgKHZpZGVvLmRpc3BsYXlGcmFtZVNlbGVjdCkgewoJCWNoYXJCYXNlICs9IDB4QTAwMDsKCX0KCXZhciBzaXplID0gYmcuc2l6ZTsKCXZhciBpbmRleCA9IGJnLmluZGV4OwoJdmFyIG1hcCA9IHZpZGVvLnNoYXJlZE1hcDsKCXZhciBjb2xvcjsKCXZhciBtYXNrID0gdmlkZW8udGFyZ2V0MltpbmRleF0gfCAoYmcucHJpb3JpdHkgPDwgMSkgfCB2aWRlby5CQUNLR1JPVU5EX01BU0s7CglpZiAodmlkZW8uYmxlbmRNb2RlID09IDEgJiYgdmlkZW8uYWxwaGFFbmFibGVkKSB7CgkJbWFzayB8PSB2aWRlby50YXJnZXQxW2luZGV4XTsKCX0KCgl2YXIgeUJhc2U7CgoJZm9yICh4ID0gc3RhcnQ7IHggPCBlbmQ7ICsreCkgewoJCWxvY2FsWCA9IGJnLmR4ICogeCArIGJnLnN4OwoJCWxvY2FsWSA9IDAgfCBiZy5keSAqIHggKyBiZy5zeTsKCQlpZiAodGhpcy5tb3NhaWMpIHsKCQkJbG9jYWxYIC09ICh4ICUgdmlkZW8uYmdNb3NhaWNYKSAqIGJnLmR4ICsgKHkgJSB2aWRlby5iZ01vc2FpY1kpICogYmcuZG14OwoJCQlsb2NhbFkgLT0gKHggJSB2aWRlby5iZ01vc2FpY1gpICogYmcuZHkgKyAoeSAlIHZpZGVvLmJnTW9zYWljWSkgKiBiZy5kbXk7CgkJfQoJCXlCYXNlID0gKGxvY2FsWSA8PCAyKSAmIDB4N0UwOwoJCWlmIChsb2NhbFggPCAwIHx8IGxvY2FsWSA8IDAgfHwgbG9jYWxYID49IHZpZGVvLkhPUklaT05UQUxfUElYRUxTIHx8IGxvY2FsWSA+PSB2aWRlby5WRVJUSUNBTF9QSVhFTFMpIHsKCQkJb2Zmc2V0Kys7CgkJCWNvbnRpbnVlOwoJCX0KCQljb2xvciA9IHRoaXMudnJhbS5sb2FkVTgoY2hhckJhc2UgKyAobG9jYWxZICogdmlkZW8uSE9SSVpPTlRBTF9QSVhFTFMpICsgbG9jYWxYKTsKCQliZy5wdXNoUGl4ZWwoaW5kZXgsIG1hcCwgdmlkZW8sIGNvbG9yLCAwLCBvZmZzZXQsIGJhY2tpbmcsIG1hc2ssIGZhbHNlKTsKCQlvZmZzZXQrKzsKCX0KfTsKCkdhbWVCb3lBZHZhbmNlU29mdHdhcmVSZW5kZXJlci5wcm90b3R5cGUuZHJhd1NjYW5saW5lQkdNb2RlNSA9IGZ1bmN0aW9uKGJhY2tpbmcsIGJnLCBzdGFydCwgZW5kKSB7Cgl2YXIgdmlkZW8gPSB0aGlzLnZpZGVvOwoJdmFyIHg7Cgl2YXIgeSA9IHZpZGVvLnZjb3VudDsKCXZhciBvZmZzZXQgPSBzdGFydDsKCXZhciBsb2NhbFg7Cgl2YXIgbG9jYWxZOwoJdmFyIGNoYXJCYXNlID0gMDsKCWlmICh2aWRlby5kaXNwbGF5RnJhbWVTZWxlY3QpIHsKCQljaGFyQmFzZSArPSAweEEwMDA7Cgl9Cgl2YXIgaW5kZXggPSBiZy5pbmRleDsKCXZhciBtYXAgPSB2aWRlby5zaGFyZWRNYXA7Cgl2YXIgY29sb3I7Cgl2YXIgbWFzayA9IHZpZGVvLnRhcmdldDJbaW5kZXhdIHwgKGJnLnByaW9yaXR5IDw8IDEpIHwgdmlkZW8uQkFDS0dST1VORF9NQVNLOwoJaWYgKHZpZGVvLmJsZW5kTW9kZSA9PSAxICYmIHZpZGVvLmFscGhhRW5hYmxlZCkgewoJCW1hc2sgfD0gdmlkZW8udGFyZ2V0MVtpbmRleF07Cgl9CgoJdmFyIHlCYXNlOwoKCWZvciAoeCA9IHN0YXJ0OyB4IDwgZW5kOyArK3gpIHsKCQlsb2NhbFggPSBiZy5keCAqIHggKyBiZy5zeDsKCQlsb2NhbFkgPSBiZy5keSAqIHggKyBiZy5zeTsKCQlpZiAodGhpcy5tb3NhaWMpIHsKCQkJbG9jYWxYIC09ICh4ICUgdmlkZW8uYmdNb3NhaWNYKSAqIGJnLmR4ICsgKHkgJSB2aWRlby5iZ01vc2FpY1kpICogYmcuZG14OwoJCQlsb2NhbFkgLT0gKHggJSB2aWRlby5iZ01vc2FpY1gpICogYmcuZHkgKyAoeSAlIHZpZGVvLmJnTW9zYWljWSkgKiBiZy5kbXk7CgkJfQoJCWlmIChsb2NhbFggPCAwIHx8IGxvY2FsWSA8IDAgfHwgbG9jYWxYID49IDE2MCB8fCBsb2NhbFkgPj0gMTI4KSB7CgkJCW9mZnNldCsrOwoJCQljb250aW51ZTsKCQl9CgkJY29sb3IgPSB0aGlzLnZyYW0ubG9hZFUxNihjaGFyQmFzZSArICgobG9jYWxZICogMTYwKSArIGxvY2FsWCkgPDwgMSk7CgkJYmcucHVzaFBpeGVsKGluZGV4LCBtYXAsIHZpZGVvLCBjb2xvciwgMCwgb2Zmc2V0LCBiYWNraW5nLCBtYXNrLCB0cnVlKTsKCQlvZmZzZXQrKzsKCX0KfTsKCkdhbWVCb3lBZHZhbmNlU29mdHdhcmVSZW5kZXJlci5wcm90b3R5cGUuZHJhd1NjYW5saW5lID0gZnVuY3Rpb24oeSkgewoJdmFyIGJhY2tpbmcgPSB0aGlzLnNjYW5saW5lOwoJaWYgKHRoaXMuZm9yY2VkQmxhbmspIHsKCQl0aGlzLmRyYXdTY2FubGluZUJsYW5rKGJhY2tpbmcpOwoJCXJldHVybjsKCX0KCXRoaXMucHJlcGFyZVNjYW5saW5lKGJhY2tpbmcpOwoJdmFyIGxheWVyOwoJdmFyIGZpcnN0U3RhcnQ7Cgl2YXIgZmlyc3RFbmQ7Cgl2YXIgbGFzdFN0YXJ0OwoJdmFyIGxhc3RFbmQ7Cgl0aGlzLnZjb3VudCA9IHk7CgkvLyBEcmF3IGxvd2VyIHByaW9yaXR5IGZpcnN0IGFuZCB0aGVuIGRyYXcgb3ZlciB0aGVtCglmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZHJhd0xheWVycy5sZW5ndGg7ICsraSkgewoJCWxheWVyID0gdGhpcy5kcmF3TGF5ZXJzW2ldOwoJCWlmICghbGF5ZXIuZW5hYmxlZCkgewoJCQljb250aW51ZTsKCQl9CgkJdGhpcy5vYmp3aW5BY3RpdmUgPSBmYWxzZTsKCQlpZiAoISh0aGlzLndpbjAgfHwgdGhpcy53aW4xIHx8IHRoaXMub2Jqd2luKSkgewoJCQl0aGlzLnNldEJsZW5kRW5hYmxlZChsYXllci5pbmRleCwgdGhpcy50YXJnZXQxW2xheWVyLmluZGV4XSwgdGhpcy5ibGVuZE1vZGUpOwoJCQlsYXllci5kcmF3U2NhbmxpbmUoYmFja2luZywgbGF5ZXIsIDAsIHRoaXMuSE9SSVpPTlRBTF9QSVhFTFMpOwoJCX0gZWxzZSB7CgkJCWZpcnN0U3RhcnQgPSAwOwoJCQlmaXJzdEVuZCA9IHRoaXMuSE9SSVpPTlRBTF9QSVhFTFM7CgkJCWxhc3RTdGFydCA9IDA7CgkJCWxhc3RFbmQgPSB0aGlzLkhPUklaT05UQUxfUElYRUxTOwoJCQlpZiAodGhpcy53aW4wICYmIHkgPj0gdGhpcy53aW4wVG9wICYmIHkgPCB0aGlzLndpbjBCb3R0b20pIHsKCQkJCWlmICh0aGlzLndpbmRvd3NbMF0uZW5hYmxlZFtsYXllci5pbmRleF0pIHsKCQkJCQl0aGlzLnNldEJsZW5kRW5hYmxlZChsYXllci5pbmRleCwgdGhpcy53aW5kb3dzWzBdLnNwZWNpYWwgJiYgdGhpcy50YXJnZXQxW2xheWVyLmluZGV4XSwgdGhpcy5ibGVuZE1vZGUpOwoJCQkJCWxheWVyLmRyYXdTY2FubGluZShiYWNraW5nLCBsYXllciwgdGhpcy53aW4wTGVmdCwgdGhpcy53aW4wUmlnaHQpOwoJCQkJfQoJCQkJZmlyc3RTdGFydCA9IE1hdGgubWF4KGZpcnN0U3RhcnQsIHRoaXMud2luMExlZnQpOwoJCQkJZmlyc3RFbmQgPSBNYXRoLm1pbihmaXJzdEVuZCwgdGhpcy53aW4wTGVmdCk7CgkJCQlsYXN0U3RhcnQgPSBNYXRoLm1heChsYXN0U3RhcnQsIHRoaXMud2luMFJpZ2h0KTsKCQkJCWxhc3RFbmQgPSBNYXRoLm1pbihsYXN0RW5kLCB0aGlzLndpbjBSaWdodCk7CgkJCX0KCQkJaWYgKHRoaXMud2luMSAmJiB5ID49IHRoaXMud2luMVRvcCAmJiB5IDwgdGhpcy53aW4xQm90dG9tKSB7CgkJCQlpZiAodGhpcy53aW5kb3dzWzFdLmVuYWJsZWRbbGF5ZXIuaW5kZXhdKSB7CgkJCQkJdGhpcy5zZXRCbGVuZEVuYWJsZWQobGF5ZXIuaW5kZXgsIHRoaXMud2luZG93c1sxXS5zcGVjaWFsICYmIHRoaXMudGFyZ2V0MVtsYXllci5pbmRleF0sIHRoaXMuYmxlbmRNb2RlKTsKCQkJCQlpZiAoIXRoaXMud2luZG93c1swXS5lbmFibGVkW2xheWVyLmluZGV4XSAmJiAodGhpcy53aW4xTGVmdCA8IGZpcnN0U3RhcnQgfHwgdGhpcy53aW4xUmlnaHQgPCBsYXN0U3RhcnQpKSB7CgkJCQkJCS8vIFdlJ3ZlIGJlZW4gY3V0IGluIHR3byBieSB3aW5kb3cgMCEKCQkJCQkJbGF5ZXIuZHJhd1NjYW5saW5lKGJhY2tpbmcsIGxheWVyLCB0aGlzLndpbjFMZWZ0LCBmaXJzdFN0YXJ0KTsKCQkJCQkJbGF5ZXIuZHJhd1NjYW5saW5lKGJhY2tpbmcsIGxheWVyLCBsYXN0RW5kLCB0aGlzLndpbjFSaWdodCk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJbGF5ZXIuZHJhd1NjYW5saW5lKGJhY2tpbmcsIGxheWVyLCB0aGlzLndpbjFMZWZ0LCB0aGlzLndpbjFSaWdodCk7CgkJCQkJfQoJCQkJfQoJCQkJZmlyc3RTdGFydCA9IE1hdGgubWF4KGZpcnN0U3RhcnQsIHRoaXMud2luMUxlZnQpOwoJCQkJZmlyc3RFbmQgPSBNYXRoLm1pbihmaXJzdEVuZCwgdGhpcy53aW4xTGVmdCk7CgkJCQlsYXN0U3RhcnQgPSBNYXRoLm1heChsYXN0U3RhcnQsIHRoaXMud2luMVJpZ2h0KTsKCQkJCWxhc3RFbmQgPSBNYXRoLm1pbihsYXN0RW5kLCB0aGlzLndpbjFSaWdodCk7CgkJCX0KCQkJLy8gRG8gbGFzdCB0d28KCQkJaWYgKHRoaXMud2luZG93c1syXS5lbmFibGVkW2xheWVyLmluZGV4XSB8fCAodGhpcy5vYmp3aW4gJiYgdGhpcy53aW5kb3dzWzNdLmVuYWJsZWRbbGF5ZXIuaW5kZXhdKSkgewoJCQkJLy8gV0lOT1VUL09CSldJTgoJCQkJdGhpcy5vYmp3aW5BY3RpdmUgPSB0aGlzLm9iandpbjsKCQkJCXRoaXMuc2V0QmxlbmRFbmFibGVkKGxheWVyLmluZGV4LCB0aGlzLndpbmRvd3NbMl0uc3BlY2lhbCAmJiB0aGlzLnRhcmdldDFbbGF5ZXIuaW5kZXhdLCB0aGlzLmJsZW5kTW9kZSk7IC8vIFdpbmRvdyAzIGhhbmRsZWQgaW4gcHVzaFBpeGVsCgkJCQlpZiAoZmlyc3RFbmQgPiBsYXN0U3RhcnQpIHsKCQkJCQlsYXllci5kcmF3U2NhbmxpbmUoYmFja2luZywgbGF5ZXIsIDAsIHRoaXMuSE9SSVpPTlRBTF9QSVhFTFMpOwoJCQkJfSBlbHNlIHsKCQkJCQlpZiAoZmlyc3RFbmQpIHsKCQkJCQkJbGF5ZXIuZHJhd1NjYW5saW5lKGJhY2tpbmcsIGxheWVyLCAwLCBmaXJzdEVuZCk7CgkJCQkJfQoJCQkJCWlmIChsYXN0U3RhcnQgPCB0aGlzLkhPUklaT05UQUxfUElYRUxTKSB7CgkJCQkJCWxheWVyLmRyYXdTY2FubGluZShiYWNraW5nLCBsYXllciwgbGFzdFN0YXJ0LCB0aGlzLkhPUklaT05UQUxfUElYRUxTKTsKCQkJCQl9CgkJCQkJaWYgKGxhc3RFbmQgPCBmaXJzdFN0YXJ0KSB7CgkJCQkJCWxheWVyLmRyYXdTY2FubGluZShiYWNraW5nLCBsYXllciwgbGFzdEVuZCwgZmlyc3RTdGFydCk7CgkJCQkJfQoJCQkJfQoJCQl9CgoJCQl0aGlzLnNldEJsZW5kRW5hYmxlZCh0aGlzLkxBWUVSX0JBQ0tEUk9QLCB0aGlzLnRhcmdldDFbdGhpcy5MQVlFUl9CQUNLRFJPUF0gJiYgdGhpcy53aW5kb3dzWzJdLnNwZWNpYWwsIHRoaXMuYmxlbmRNb2RlKTsKCQl9CgkJaWYgKGxheWVyLmJnKSB7CgkJCWxheWVyLnN4ICs9IGxheWVyLmRteDsKCQkJbGF5ZXIuc3kgKz0gbGF5ZXIuZG15OwoJCX0KCX0KCgl0aGlzLmZpbmlzaFNjYW5saW5lKGJhY2tpbmcpOwp9OwoKR2FtZUJveUFkdmFuY2VTb2Z0d2FyZVJlbmRlcmVyLnByb3RvdHlwZS5maW5pc2hTY2FubGluZSA9IGZ1bmN0aW9uKGJhY2tpbmcpIHsKCXZhciBjb2xvcjsKCXZhciBiZCA9IHRoaXMucGFsZXR0ZS5hY2Nlc3NDb2xvcih0aGlzLkxBWUVSX0JBQ0tEUk9QLCAwKTsKCXZhciB4eCA9IHRoaXMudmNvdW50ICogdGhpcy5IT1JJWk9OVEFMX1BJWEVMUyAqIDQ7Cgl2YXIgaXNUYXJnZXQyID0gdGhpcy50YXJnZXQyW3RoaXMuTEFZRVJfQkFDS0RST1BdOwoJZm9yICh2YXIgeCA9IDA7IHggPCB0aGlzLkhPUklaT05UQUxfUElYRUxTOyArK3gpIHsKCQlpZiAoYmFja2luZy5zdGVuY2lsW3hdICYgdGhpcy5XUklUVEVOX01BU0spIHsKCQkJY29sb3IgPSBiYWNraW5nLmNvbG9yW3hdOwoJCQlpZiAoaXNUYXJnZXQyICYmIGJhY2tpbmcuc3RlbmNpbFt4XSAmIHRoaXMuVEFSR0VUMV9NQVNLKSB7CgkJCQljb2xvciA9IHRoaXMucGFsZXR0ZS5taXgodGhpcy5ibGVuZEEsIGNvbG9yLCB0aGlzLmJsZW5kQiwgYmQpOwoJCQl9CgkJCXRoaXMucGFsZXR0ZS5jb252ZXJ0MTZUbzMyKGNvbG9yLCB0aGlzLnNoYXJlZENvbG9yKTsKCQl9IGVsc2UgewoJCQl0aGlzLnBhbGV0dGUuY29udmVydDE2VG8zMihiZCwgdGhpcy5zaGFyZWRDb2xvcik7CgkJfQoJCXRoaXMucGl4ZWxEYXRhLmRhdGFbeHgrK10gPSB0aGlzLnNoYXJlZENvbG9yWzBdOwoJCXRoaXMucGl4ZWxEYXRhLmRhdGFbeHgrK10gPSB0aGlzLnNoYXJlZENvbG9yWzFdOwoJCXRoaXMucGl4ZWxEYXRhLmRhdGFbeHgrK10gPSB0aGlzLnNoYXJlZENvbG9yWzJdOwoJCXh4Kys7Cgl9Cn07CgpHYW1lQm95QWR2YW5jZVNvZnR3YXJlUmVuZGVyZXIucHJvdG90eXBlLnN0YXJ0RHJhdyA9IGZ1bmN0aW9uKCkgewoJLy8gTm90aGluZyB0byBkbwp9OwoKR2FtZUJveUFkdmFuY2VTb2Z0d2FyZVJlbmRlcmVyLnByb3RvdHlwZS5maW5pc2hEcmF3ID0gZnVuY3Rpb24oY2FsbGVyKSB7Cgl0aGlzLmJnWzJdLnN4ID0gdGhpcy5iZ1syXS5yZWZ4OwoJdGhpcy5iZ1syXS5zeSA9IHRoaXMuYmdbMl0ucmVmeTsKCXRoaXMuYmdbM10uc3ggPSB0aGlzLmJnWzNdLnJlZng7Cgl0aGlzLmJnWzNdLnN5ID0gdGhpcy5iZ1szXS5yZWZ5OwoJY2FsbGVyLmZpbmlzaERyYXcodGhpcy5waXhlbERhdGEpOwp9Owo="></script>
<script src="data:@file/javascript;base64,ZnVuY3Rpb24gR2FtZUJveUFkdmFuY2VJbnRlcnJ1cHRIYW5kbGVyKCkgewoJdGhpcy5pbmhlcml0KCk7Cgl0aGlzLkZSRVFVRU5DWSA9IDB4MTAwMDAwMDsKCgl0aGlzLmNwdSA9IG51bGw7Cgl0aGlzLmVuYWJsZSA9IGZhbHNlOwoKCXRoaXMuSVJRX1ZCTEFOSyA9IDB4MDsKCXRoaXMuSVJRX0hCTEFOSyA9IDB4MTsKCXRoaXMuSVJRX1ZDT1VOVEVSID0gMHgyOwoJdGhpcy5JUlFfVElNRVIwID0gMHgzOwoJdGhpcy5JUlFfVElNRVIxID0gMHg0OwoJdGhpcy5JUlFfVElNRVIyID0gMHg1OwoJdGhpcy5JUlFfVElNRVIzID0gMHg2OwoJdGhpcy5JUlFfU0lPID0gMHg3OwoJdGhpcy5JUlFfRE1BMCA9IDB4ODsKCXRoaXMuSVJRX0RNQTEgPSAweDk7Cgl0aGlzLklSUV9ETUEyID0gMHhBOwoJdGhpcy5JUlFfRE1BMyA9IDB4QjsKCXRoaXMuSVJRX0tFWVBBRCA9IDB4QzsKCXRoaXMuSVJRX0dBTUVQQUsgPSAweEQ7CgoJdGhpcy5NQVNLX1ZCTEFOSyA9IDB4MDAwMTsKCXRoaXMuTUFTS19IQkxBTksgPSAweDAwMDI7Cgl0aGlzLk1BU0tfVkNPVU5URVIgPSAweDAwMDQ7Cgl0aGlzLk1BU0tfVElNRVIwID0gMHgwMDA4OwoJdGhpcy5NQVNLX1RJTUVSMSA9IDB4MDAxMDsKCXRoaXMuTUFTS19USU1FUjIgPSAweDAwMjA7Cgl0aGlzLk1BU0tfVElNRVIzID0gMHgwMDQwOwoJdGhpcy5NQVNLX1NJTyA9IDB4MDA4MDsKCXRoaXMuTUFTS19ETUEwID0gMHgwMTAwOwoJdGhpcy5NQVNLX0RNQTEgPSAweDAyMDA7Cgl0aGlzLk1BU0tfRE1BMiA9IDB4MDQwMDsKCXRoaXMuTUFTS19ETUEzID0gMHgwODAwOwoJdGhpcy5NQVNLX0tFWVBBRCA9IDB4MTAwMDsKCXRoaXMuTUFTS19HQU1FUEFLID0gMHgyMDAwOwp9OwoKR2FtZUJveUFkdmFuY2VJbnRlcnJ1cHRIYW5kbGVyLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKCkgewoJdGhpcy5lbmFibGUgPSBmYWxzZTsKCXRoaXMuZW5hYmxlZElSUXMgPSAwOwoJdGhpcy5pbnRlcnJ1cHRGbGFncyA9IDA7CgoJdGhpcy5kbWEgPSBuZXcgQXJyYXkoKTsKCWZvciAodmFyIGkgPSAwOyBpIDwgNDsgKytpKSB7CgkJdGhpcy5kbWEucHVzaCh7CgkJCXNvdXJjZTogMCwKCQkJZGVzdDogMCwKCQkJY291bnQ6IDAsCgkJCW5leHRTb3VyY2U6IDAsCgkJCW5leHREZXN0OiAwLAoJCQluZXh0Q291bnQ6IDAsCgkJCXNyY0NvbnRyb2w6IDAsCgkJCWRzdENvbnRyb2w6IDAsCgkJCXJlcGVhdDogZmFsc2UsCgkJCXdpZHRoOiAwLAoJCQlkcnE6IGZhbHNlLAoJCQl0aW1pbmc6IDAsCgkJCWRvSXJxOiBmYWxzZSwKCQkJZW5hYmxlOiBmYWxzZSwKCQkJbmV4dElSUTogMAoJCX0pOwoJfQoKCXRoaXMudGltZXJzRW5hYmxlZCA9IDA7Cgl0aGlzLnRpbWVycyA9IG5ldyBBcnJheSgpOwoJZm9yICh2YXIgaSA9IDA7IGkgPCA0OyArK2kpIHsKCQl0aGlzLnRpbWVycy5wdXNoKHsKCQkJcmVsb2FkOiAwLAoJCQlvbGRSZWxvYWQ6IDAsCgkJCXByZXNjYWxlQml0czogMCwKCQkJY291bnRVcDogZmFsc2UsCgkJCWRvSXJxOiBmYWxzZSwKCQkJZW5hYmxlOiBmYWxzZSwKCQkJbGFzdEV2ZW50OiAwLAoJCQluZXh0RXZlbnQ6IDAsCgkJCW92ZXJmbG93SW50ZXJ2YWw6IDEKCQl9KTsKCX0KCgl0aGlzLm5leHRFdmVudCA9IDA7Cgl0aGlzLnNwcmluZ0lSUSA9IGZhbHNlOwoJdGhpcy5yZXNldFNQKCk7Cn07CgpHYW1lQm95QWR2YW5jZUludGVycnVwdEhhbmRsZXIucHJvdG90eXBlLmZyZWV6ZSA9IGZ1bmN0aW9uKCkgewoJcmV0dXJuIHsKCQknZW5hYmxlJzogdGhpcy5lbmFibGUsCgkJJ2VuYWJsZWRJUlFzJzogdGhpcy5lbmFibGVkSVJRcywKCQknaW50ZXJydXB0RmxhZ3MnOiB0aGlzLmludGVycnVwdEZsYWdzLAoJCSdkbWEnOiB0aGlzLmRtYSwKCQkndGltZXJzJzogdGhpcy50aW1lcnMsCgkJJ25leHRFdmVudCc6IHRoaXMubmV4dEV2ZW50LAoJCSdzcHJpbmdJUlEnOiB0aGlzLnNwcmluZ0lSUQoJfTsKfTsKCkdhbWVCb3lBZHZhbmNlSW50ZXJydXB0SGFuZGxlci5wcm90b3R5cGUuZGVmcm9zdCA9IGZ1bmN0aW9uKGZyb3N0KSB7Cgl0aGlzLmVuYWJsZSA9IGZyb3N0LmVuYWJsZTsKCXRoaXMuZW5hYmxlZElSUXMgPSBmcm9zdC5lbmFibGVkSVJRczsKCXRoaXMuaW50ZXJydXB0RmxhZ3MgPSBmcm9zdC5pbnRlcnJ1cHRGbGFnczsKCXRoaXMuZG1hID0gZnJvc3QuZG1hOwoJdGhpcy50aW1lcnMgPSBmcm9zdC50aW1lcnM7Cgl0aGlzLnRpbWVyc0VuYWJsZWQgPSAwOwoJaWYgKHRoaXMudGltZXJzWzBdLmVuYWJsZSkgewoJCSsrdGhpcy50aW1lcnNFbmFibGVkOwoJfQoJaWYgKHRoaXMudGltZXJzWzFdLmVuYWJsZSkgewoJCSsrdGhpcy50aW1lcnNFbmFibGVkOwoJfQoJaWYgKHRoaXMudGltZXJzWzJdLmVuYWJsZSkgewoJCSsrdGhpcy50aW1lcnNFbmFibGVkOwoJfQoJaWYgKHRoaXMudGltZXJzWzNdLmVuYWJsZSkgewoJCSsrdGhpcy50aW1lcnNFbmFibGVkOwoJfQoJdGhpcy5uZXh0RXZlbnQgPSBmcm9zdC5uZXh0RXZlbnQ7Cgl0aGlzLnNwcmluZ0lSUSA9IGZyb3N0LnNwcmluZ0lSUTsKfTsKCkdhbWVCb3lBZHZhbmNlSW50ZXJydXB0SGFuZGxlci5wcm90b3R5cGUudXBkYXRlVGltZXJzID0gZnVuY3Rpb24oKSB7CglpZiAodGhpcy5uZXh0RXZlbnQgPiB0aGlzLmNwdS5jeWNsZXMpIHsKCQlyZXR1cm47Cgl9CgoJaWYgKHRoaXMuc3ByaW5nSVJRKSB7CgkJdGhpcy5jcHUucmFpc2VJUlEoKTsKCQl0aGlzLnNwcmluZ0lSUSA9IGZhbHNlOwoJfQoKCXRoaXMudmlkZW8udXBkYXRlVGltZXJzKHRoaXMuY3B1KTsKCXRoaXMuYXVkaW8udXBkYXRlVGltZXJzKCk7CglpZiAodGhpcy50aW1lcnNFbmFibGVkKSB7CgkJdmFyIHRpbWVyID0gdGhpcy50aW1lcnNbMF07CgkJaWYgKHRpbWVyLmVuYWJsZSkgewoJCQlpZiAodGhpcy5jcHUuY3ljbGVzID49IHRpbWVyLm5leHRFdmVudCkgewoJCQkJdGltZXIubGFzdEV2ZW50ID0gdGltZXIubmV4dEV2ZW50OwoJCQkJdGltZXIubmV4dEV2ZW50ICs9IHRpbWVyLm92ZXJmbG93SW50ZXJ2YWw7CgkJCQl0aGlzLmlvLnJlZ2lzdGVyc1t0aGlzLmlvLlRNMENOVF9MTyA+PiAxXSA9IHRpbWVyLnJlbG9hZDsKCQkJCXRpbWVyLm9sZFJlbG9hZCA9IHRpbWVyLnJlbG9hZDsKCgkJCQlpZiAodGltZXIuZG9JcnEpIHsKCQkJCQl0aGlzLnJhaXNlSVJRKHRoaXMuSVJRX1RJTUVSMCk7CgkJCQl9CgoJCQkJaWYgKHRoaXMuYXVkaW8uZW5hYmxlZCkgewoJCQkJCWlmICh0aGlzLmF1ZGlvLmVuYWJsZUNoYW5uZWxBICYmICF0aGlzLmF1ZGlvLnNvdW5kVGltZXJBICYmIHRoaXMuYXVkaW8uZG1hQSA+PSAwKSB7CgkJCQkJCXRoaXMuYXVkaW8uc2FtcGxlRmlmb0EoKTsKCQkJCQl9CgkKCQkJCQlpZiAodGhpcy5hdWRpby5lbmFibGVDaGFubmVsQiAmJiAhdGhpcy5hdWRpby5zb3VuZFRpbWVyQiAmJiB0aGlzLmF1ZGlvLmRtYUIgPj0gMCkgewoJCQkJCQl0aGlzLmF1ZGlvLnNhbXBsZUZpZm9CKCk7CgkJCQkJfQoJCQkJfQoKCQkJCXRpbWVyID0gdGhpcy50aW1lcnNbMV07CgkJCQlpZiAodGltZXIuY291bnRVcCkgewoJCQkJCWlmICgrK3RoaXMuaW8ucmVnaXN0ZXJzW3RoaXMuaW8uVE0xQ05UX0xPID4+IDFdID09IDB4MTAwMDApIHsKCQkJCQkJdGltZXIubmV4dEV2ZW50ID0gdGhpcy5jcHUuY3ljbGVzOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCgkJdGltZXIgPSB0aGlzLnRpbWVyc1sxXTsKCQlpZiAodGltZXIuZW5hYmxlKSB7CgkJCWlmICh0aGlzLmNwdS5jeWNsZXMgPj0gdGltZXIubmV4dEV2ZW50KSB7CgkJCQl0aW1lci5sYXN0RXZlbnQgPSB0aW1lci5uZXh0RXZlbnQ7CgkJCQl0aW1lci5uZXh0RXZlbnQgKz0gdGltZXIub3ZlcmZsb3dJbnRlcnZhbDsKCQkJCWlmICghdGltZXIuY291bnRVcCB8fCB0aGlzLmlvLnJlZ2lzdGVyc1t0aGlzLmlvLlRNMUNOVF9MTyA+PiAxXSA9PSAweDEwMDAwKSB7CgkJCQkJdGhpcy5pby5yZWdpc3RlcnNbdGhpcy5pby5UTTFDTlRfTE8gPj4gMV0gPSB0aW1lci5yZWxvYWQ7CgkJCQl9CgkJCQl0aW1lci5vbGRSZWxvYWQgPSB0aW1lci5yZWxvYWQ7CgoJCQkJaWYgKHRpbWVyLmRvSXJxKSB7CgkJCQkJdGhpcy5yYWlzZUlSUSh0aGlzLklSUV9USU1FUjEpOwoJCQkJfQoKCQkJCWlmICh0aW1lci5jb3VudFVwKSB7CgkJCQkJdGltZXIubmV4dEV2ZW50ID0gMDsKCQkJCX0KCgkJCQlpZiAodGhpcy5hdWRpby5lbmFibGVkKSB7CgkJCQkJaWYgKHRoaXMuYXVkaW8uZW5hYmxlQ2hhbm5lbEEgJiYgdGhpcy5hdWRpby5zb3VuZFRpbWVyQSAmJiB0aGlzLmF1ZGlvLmRtYUEgPj0gMCkgewoJCQkJCQl0aGlzLmF1ZGlvLnNhbXBsZUZpZm9BKCk7CgkJCQkJfQoJCgkJCQkJaWYgKHRoaXMuYXVkaW8uZW5hYmxlQ2hhbm5lbEIgJiYgdGhpcy5hdWRpby5zb3VuZFRpbWVyQiAmJiB0aGlzLmF1ZGlvLmRtYUIgPj0gMCkgewoJCQkJCQl0aGlzLmF1ZGlvLnNhbXBsZUZpZm9CKCk7CgkJCQkJfQoJCQkJfQoKCQkJCXRpbWVyID0gdGhpcy50aW1lcnNbMl07CgkJCQlpZiAodGltZXIuY291bnRVcCkgewoJCQkJCWlmICgrK3RoaXMuaW8ucmVnaXN0ZXJzW3RoaXMuaW8uVE0yQ05UX0xPID4+IDFdID09IDB4MTAwMDApIHsKCQkJCQkJdGltZXIubmV4dEV2ZW50ID0gdGhpcy5jcHUuY3ljbGVzOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCgkJdGltZXIgPSB0aGlzLnRpbWVyc1syXTsKCQlpZiAodGltZXIuZW5hYmxlKSB7CgkJCWlmICh0aGlzLmNwdS5jeWNsZXMgPj0gdGltZXIubmV4dEV2ZW50KSB7CgkJCQl0aW1lci5sYXN0RXZlbnQgPSB0aW1lci5uZXh0RXZlbnQ7CgkJCQl0aW1lci5uZXh0RXZlbnQgKz0gdGltZXIub3ZlcmZsb3dJbnRlcnZhbDsKCQkJCWlmICghdGltZXIuY291bnRVcCB8fCB0aGlzLmlvLnJlZ2lzdGVyc1t0aGlzLmlvLlRNMkNOVF9MTyA+PiAxXSA9PSAweDEwMDAwKSB7CgkJCQkJdGhpcy5pby5yZWdpc3RlcnNbdGhpcy5pby5UTTJDTlRfTE8gPj4gMV0gPSB0aW1lci5yZWxvYWQ7CgkJCQl9CgkJCQl0aW1lci5vbGRSZWxvYWQgPSB0aW1lci5yZWxvYWQ7CgoJCQkJaWYgKHRpbWVyLmRvSXJxKSB7CgkJCQkJdGhpcy5yYWlzZUlSUSh0aGlzLklSUV9USU1FUjIpOwoJCQkJfQoKCQkJCWlmICh0aW1lci5jb3VudFVwKSB7CgkJCQkJdGltZXIubmV4dEV2ZW50ID0gMDsKCQkJCX0KCgkJCQl0aW1lciA9IHRoaXMudGltZXJzWzNdOwoJCQkJaWYgKHRpbWVyLmNvdW50VXApIHsKCQkJCQlpZiAoKyt0aGlzLmlvLnJlZ2lzdGVyc1t0aGlzLmlvLlRNM0NOVF9MTyA+PiAxXSA9PSAweDEwMDAwKSB7CgkJCQkJCXRpbWVyLm5leHRFdmVudCA9IHRoaXMuY3B1LmN5Y2xlczsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9CgoJCXRpbWVyID0gdGhpcy50aW1lcnNbM107CgkJaWYgKHRpbWVyLmVuYWJsZSkgewoJCQlpZiAodGhpcy5jcHUuY3ljbGVzID49IHRpbWVyLm5leHRFdmVudCkgewoJCQkJdGltZXIubGFzdEV2ZW50ID0gdGltZXIubmV4dEV2ZW50OwoJCQkJdGltZXIubmV4dEV2ZW50ICs9IHRpbWVyLm92ZXJmbG93SW50ZXJ2YWw7CgkJCQlpZiAoIXRpbWVyLmNvdW50VXAgfHwgdGhpcy5pby5yZWdpc3RlcnNbdGhpcy5pby5UTTNDTlRfTE8gPj4gMV0gPT0gMHgxMDAwMCkgewoJCQkJCXRoaXMuaW8ucmVnaXN0ZXJzW3RoaXMuaW8uVE0zQ05UX0xPID4+IDFdID0gdGltZXIucmVsb2FkOwoJCQkJfQoJCQkJdGltZXIub2xkUmVsb2FkID0gdGltZXIucmVsb2FkOwoKCQkJCWlmICh0aW1lci5kb0lycSkgewoJCQkJCXRoaXMucmFpc2VJUlEodGhpcy5JUlFfVElNRVIzKTsKCQkJCX0KCgkJCQlpZiAodGltZXIuY291bnRVcCkgewoJCQkJCXRpbWVyLm5leHRFdmVudCA9IDA7CgkJCQl9CgkJCX0KCQl9Cgl9CgoJdmFyIGRtYSA9IHRoaXMuZG1hWzBdOwoJaWYgKGRtYS5lbmFibGUgJiYgZG1hLmRvSXJxICYmIGRtYS5uZXh0SVJRICYmIHRoaXMuY3B1LmN5Y2xlcyA+PSBkbWEubmV4dElSUSkgewoJCWRtYS5uZXh0SVJRID0gMDsKCQl0aGlzLnJhaXNlSVJRKHRoaXMuSVJRX0RNQTApOwoJfQoKCWRtYSA9IHRoaXMuZG1hWzFdOwoJaWYgKGRtYS5lbmFibGUgJiYgZG1hLmRvSXJxICYmIGRtYS5uZXh0SVJRICYmIHRoaXMuY3B1LmN5Y2xlcyA+PSBkbWEubmV4dElSUSkgewoJCWRtYS5uZXh0SVJRID0gMDsKCQl0aGlzLnJhaXNlSVJRKHRoaXMuSVJRX0RNQTEpOwoJfQoKCWRtYSA9IHRoaXMuZG1hWzJdOwoJaWYgKGRtYS5lbmFibGUgJiYgZG1hLmRvSXJxICYmIGRtYS5uZXh0SVJRICYmIHRoaXMuY3B1LmN5Y2xlcyA+PSBkbWEubmV4dElSUSkgewoJCWRtYS5uZXh0SVJRID0gMDsKCQl0aGlzLnJhaXNlSVJRKHRoaXMuSVJRX0RNQTIpOwoJfQoKCWRtYSA9IHRoaXMuZG1hWzNdOwoJaWYgKGRtYS5lbmFibGUgJiYgZG1hLmRvSXJxICYmIGRtYS5uZXh0SVJRICYmIHRoaXMuY3B1LmN5Y2xlcyA+PSBkbWEubmV4dElSUSkgewoJCWRtYS5uZXh0SVJRID0gMDsKCQl0aGlzLnJhaXNlSVJRKHRoaXMuSVJRX0RNQTMpOwoJfQoKCXRoaXMucG9sbE5leHRFdmVudCgpOwp9CgpHYW1lQm95QWR2YW5jZUludGVycnVwdEhhbmRsZXIucHJvdG90eXBlLnJlc2V0U1AgPSBmdW5jdGlvbigpIHsKCXRoaXMuY3B1LnN3aXRjaE1vZGUodGhpcy5jcHUuTU9ERV9TVVBFUlZJU09SKTsKCXRoaXMuY3B1LmdwcnNbdGhpcy5jcHUuU1BdID0gMHgzMDA3RkUwOwoJdGhpcy5jcHUuc3dpdGNoTW9kZSh0aGlzLmNwdS5NT0RFX0lSUSk7Cgl0aGlzLmNwdS5ncHJzW3RoaXMuY3B1LlNQXSA9IDB4MzAwN0ZBMDsKCXRoaXMuY3B1LnN3aXRjaE1vZGUodGhpcy5jcHUuTU9ERV9TWVNURU0pOwoJdGhpcy5jcHUuZ3Byc1t0aGlzLmNwdS5TUF0gPSAweDMwMDdGMDA7Cn07CgpHYW1lQm95QWR2YW5jZUludGVycnVwdEhhbmRsZXIucHJvdG90eXBlLnN3aTMyID0gZnVuY3Rpb24ob3Bjb2RlKSB7Cgl0aGlzLnN3aShvcGNvZGUgPj4gMTYpOwp9OwoKR2FtZUJveUFkdmFuY2VJbnRlcnJ1cHRIYW5kbGVyLnByb3RvdHlwZS5zd2kgPSBmdW5jdGlvbihvcGNvZGUpIHsKCWlmICh0aGlzLmNvcmUubW11LmJpb3MucmVhbCkgewoJCXRoaXMuY3B1LnJhaXNlVHJhcCgpOwoJCXJldHVybjsKCX0KCglzd2l0Y2ggKG9wY29kZSkgewoJY2FzZSAweDAwOgoJCS8vIFNvZnRSZXNldAoJCXZhciBtZW0gPSB0aGlzLmNvcmUubW11Lm1lbW9yeVt0aGlzLmNvcmUubW11LlJFR0lPTl9XT1JLSU5HX0lSQU1dOwoJCXZhciBmbGFnID0gbWVtLmxvYWRVOCgweDdGRkEpOwoJCWZvciAodmFyIGkgPSAweDdFMDA7IGkgPCAweDgwMDA7IGkgKz0gNCkgewoJCQltZW0uc3RvcmUzMihpLCAwKTsKCQl9CgkJdGhpcy5yZXNldFNQKCk7CgkJaWYgKCFmbGFnKSB7CgkJCXRoaXMuY3B1LmdwcnNbdGhpcy5jcHUuTFJdID0gMHgwODAwMDAwMDsKCQl9IGVsc2UgewoJCQl0aGlzLmNwdS5ncHJzW3RoaXMuY3B1LkxSXSA9IDB4MDIwMDAwMDA7CgkJfQoJCXRoaXMuY3B1LnN3aXRjaEV4ZWNNb2RlKHRoaXMuY3B1Lk1PREVfQVJNKTsKCQl0aGlzLmNwdS5pbnN0cnVjdGlvbi53cml0ZXNQQyA9IHRydWU7CgkJdGhpcy5jcHUuZ3Byc1t0aGlzLmNwdS5QQ10gPSB0aGlzLmNwdS5ncHJzW3RoaXMuY3B1LkxSXTsKCQlicmVhazsKCWNhc2UgMHgwMToKCQkvLyBSZWdpc3RlclJhbVJlc2V0CgkJdmFyIHJlZ2lvbnMgPSB0aGlzLmNwdS5ncHJzWzBdOwoJCWlmIChyZWdpb25zICYgMHgwMSkgewoJCQl0aGlzLmNvcmUubW11Lm1lbW9yeVt0aGlzLmNvcmUubW11LlJFR0lPTl9XT1JLSU5HX1JBTV0gPSBuZXcgTWVtb3J5QmxvY2sodGhpcy5jb3JlLm1tdS5TSVpFX1dPUktJTkdfUkFNLCA5KTsKCQl9CgkJaWYgKHJlZ2lvbnMgJiAweDAyKSB7CgkJCWZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb3JlLm1tdS5TSVpFX1dPUktJTkdfSVJBTSAtIDB4MjAwOyBpICs9IDQpIHsKCQkJCXRoaXMuY29yZS5tbXUubWVtb3J5W3RoaXMuY29yZS5tbXUuUkVHSU9OX1dPUktJTkdfSVJBTV0uc3RvcmUzMihpLCAwKTsKCQkJfQoJCX0KCQlpZiAocmVnaW9ucyAmIDB4MUMpIHsKCQkJdGhpcy52aWRlby5yZW5kZXJQYXRoLmNsZWFyU3Vic2V0cyh0aGlzLmNvcmUubW11LCByZWdpb25zKTsKCQl9CgkJaWYgKHJlZ2lvbnMgJiAweEUwKSB7CgkJCXRoaXMuY29yZS5TVFVCKCdVbmltcGxlbWVudGVkIFJlZ2lzdGVyUmFtUmVzZXQnKTsKCQl9CgkJYnJlYWs7CgljYXNlIDB4MDI6CgkJLy8gSGFsdAoJCXRoaXMuaGFsdCgpOwoJCWJyZWFrOwoJY2FzZSAweDA1OgoJCS8vIFZCbGFua0ludHJXYWl0CgkJdGhpcy5jcHUuZ3Byc1swXSA9IDE7CgkJdGhpcy5jcHUuZ3Byc1sxXSA9IDE7CgkJLy8gRmFsbCB0aHJvdWdoOgoJY2FzZSAweDA0OgoJCS8vIEludHJXYWl0CgkJaWYgKCF0aGlzLmVuYWJsZSkgewoJCQl0aGlzLmlvLnN0b3JlMTYodGhpcy5pby5JTUUsIDEpOwoJCX0KCQlpZiAoIXRoaXMuY3B1LmdwcnNbMF0gJiYgdGhpcy5pbnRlcnJ1cHRGbGFncyAmIHRoaXMuY3B1LmdwcnNbMV0pIHsKCQkJcmV0dXJuOwoJCX0KCQl0aGlzLmRpc21pc3NJUlFzKDB4RkZGRkZGRkYpOwoJCXRoaXMuY3B1LnJhaXNlVHJhcCgpOwoJCWJyZWFrOwoJY2FzZSAweDA2OgoJCS8vIERpdgoJCXZhciByZXN1bHQgPSAodGhpcy5jcHUuZ3Byc1swXSB8IDApIC8gKHRoaXMuY3B1LmdwcnNbMV0gfCAwKTsKCQl2YXIgbW9kID0gKHRoaXMuY3B1LmdwcnNbMF0gfCAwKSAlICh0aGlzLmNwdS5ncHJzWzFdIHwgMCk7CgkJdGhpcy5jcHUuZ3Byc1swXSA9IHJlc3VsdCB8IDA7CgkJdGhpcy5jcHUuZ3Byc1sxXSA9IG1vZCB8IDA7CgkJdGhpcy5jcHUuZ3Byc1szXSA9IE1hdGguYWJzKHJlc3VsdCB8IDApOwoJCWJyZWFrOwoJY2FzZSAweDA3OgoJCS8vIERpdkFybQoJCXZhciByZXN1bHQgPSAodGhpcy5jcHUuZ3Byc1sxXSB8IDApIC8gKHRoaXMuY3B1LmdwcnNbMF0gfCAwKTsKCQl2YXIgbW9kID0gKHRoaXMuY3B1LmdwcnNbMV0gfCAwKSAlICh0aGlzLmNwdS5ncHJzWzBdIHwgMCk7CgkJdGhpcy5jcHUuZ3Byc1swXSA9IHJlc3VsdCB8IDA7CgkJdGhpcy5jcHUuZ3Byc1sxXSA9IG1vZCB8IDA7CgkJdGhpcy5jcHUuZ3Byc1szXSA9IE1hdGguYWJzKHJlc3VsdCB8IDApOwoJCWJyZWFrOwoJY2FzZSAweDA4OgoJCS8vIFNxcnQKCQl2YXIgcm9vdCA9IE1hdGguc3FydCh0aGlzLmNwdS5ncHJzWzBdKTsKCQl0aGlzLmNwdS5ncHJzWzBdID0gcm9vdCB8IDA7IC8vIENvZXJjZSBkb3duIHRvIGludAoJCWJyZWFrOwoJY2FzZSAweDBBOgoJCS8vIEFyY1RhbjIKCQl2YXIgeCA9IHRoaXMuY3B1LmdwcnNbMF0gLyAxNjM4NDsKCQl2YXIgeSA9IHRoaXMuY3B1LmdwcnNbMV0gLyAxNjM4NDsKCQl0aGlzLmNwdS5ncHJzWzBdID0gKE1hdGguYXRhbjIoeSwgeCkgLyAoMiAqIE1hdGguUEkpKSAqIDB4MTAwMDA7CgkJYnJlYWs7CgljYXNlIDB4MEI6CgkJLy8gQ3B1U2V0CgkJdmFyIHNvdXJjZSA9IHRoaXMuY3B1LmdwcnNbMF07CgkJdmFyIGRlc3QgPSB0aGlzLmNwdS5ncHJzWzFdOwoJCXZhciBtb2RlID0gdGhpcy5jcHUuZ3Byc1syXTsKCQl2YXIgY291bnQgPSBtb2RlICYgMHgwMDBGRkZGRjsKCQl2YXIgZmlsbCA9IG1vZGUgJiAweDAxMDAwMDAwOwoJCXZhciB3b3Jkc2l6ZSA9IChtb2RlICYgMHgwNDAwMDAwMCkgPyA0IDogMjsKCQlpZiAoZmlsbCkgewoJCQlpZiAod29yZHNpemUgPT0gNCkgewoJCQkJc291cmNlICY9IDB4RkZGRkZGRkM7CgkJCQlkZXN0ICY9IDB4RkZGRkZGRkM7CgkJCQl2YXIgd29yZCA9IHRoaXMuY3B1Lm1tdS5sb2FkMzIoc291cmNlKTsKCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7ICsraSkgewoJCQkJCXRoaXMuY3B1Lm1tdS5zdG9yZTMyKGRlc3QgKyAoaSA8PCAyKSwgd29yZCk7CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlzb3VyY2UgJj0gMHhGRkZGRkZGRTsKCQkJCWRlc3QgJj0gMHhGRkZGRkZGRTsKCQkJCXZhciB3b3JkID0gdGhpcy5jcHUubW11LmxvYWQxNihzb3VyY2UpOwoJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7CgkJCQkJdGhpcy5jcHUubW11LnN0b3JlMTYoZGVzdCArIChpIDw8IDEpLCB3b3JkKTsKCQkJCX0KCQkJfQoJCX0gZWxzZSB7CgkJCWlmICh3b3Jkc2l6ZSA9PSA0KSB7CgkJCQlzb3VyY2UgJj0gMHhGRkZGRkZGQzsKCQkJCWRlc3QgJj0gMHhGRkZGRkZGQzsKCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7ICsraSkgewoJCQkJCXZhciB3b3JkID0gdGhpcy5jcHUubW11LmxvYWQzMihzb3VyY2UgKyAoaSA8PCAyKSk7CgkJCQkJdGhpcy5jcHUubW11LnN0b3JlMzIoZGVzdCArIChpIDw8IDIpLCB3b3JkKTsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCXNvdXJjZSAmPSAweEZGRkZGRkZFOwoJCQkJZGVzdCAmPSAweEZGRkZGRkZFOwoJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7CgkJCQkJdmFyIHdvcmQgPSB0aGlzLmNwdS5tbXUubG9hZDE2KHNvdXJjZSArIChpIDw8IDEpKTsKCQkJCQl0aGlzLmNwdS5tbXUuc3RvcmUxNihkZXN0ICsgKGkgPDwgMSksIHdvcmQpOwoJCQkJfQoJCQl9CgkJfQoJCXJldHVybjsKCWNhc2UgMHgwQzoKCQkvLyBGYXN0Q3B1U2V0CgkJdmFyIHNvdXJjZSA9IHRoaXMuY3B1LmdwcnNbMF0gJiAweEZGRkZGRkZDOwoJCXZhciBkZXN0ID0gdGhpcy5jcHUuZ3Byc1sxXSAmIDB4RkZGRkZGRkM7CgkJdmFyIG1vZGUgPSB0aGlzLmNwdS5ncHJzWzJdOwoJCXZhciBjb3VudCA9IG1vZGUgJiAweDAwMEZGRkZGOwoJCWNvdW50ID0gKChjb3VudCArIDcpID4+IDMpIDw8IDM7CgkJdmFyIGZpbGwgPSBtb2RlICYgMHgwMTAwMDAwMDsKCQlpZiAoZmlsbCkgewoJCQl2YXIgd29yZCA9IHRoaXMuY3B1Lm1tdS5sb2FkMzIoc291cmNlKTsKCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7CgkJCQl0aGlzLmNwdS5tbXUuc3RvcmUzMihkZXN0ICsgKGkgPDwgMiksIHdvcmQpOwoJCQl9CgkJfSBlbHNlIHsKCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7CgkJCQl2YXIgd29yZCA9IHRoaXMuY3B1Lm1tdS5sb2FkMzIoc291cmNlICsgKGkgPDwgMikpOwoJCQkJdGhpcy5jcHUubW11LnN0b3JlMzIoZGVzdCArIChpIDw8IDIpLCB3b3JkKTsKCQkJfQoJCX0KCQlyZXR1cm47CgljYXNlIDB4MEU6CgkJLy8gQmdBZmZpbmVTZXQKCQl2YXIgaSA9IHRoaXMuY3B1LmdwcnNbMl07CgkJdmFyIG94LCBveTsKCQl2YXIgY3gsIGN5OwoJCXZhciBzeCwgc3k7CgkJdmFyIHRoZXRhOwoJCXZhciBvZmZzZXQgPSB0aGlzLmNwdS5ncHJzWzBdOwoJCXZhciBkZXN0aW5hdGlvbiA9IHRoaXMuY3B1LmdwcnNbMV07CgkJdmFyIGEsIGIsIGMsIGQ7CgkJdmFyIHJ4LCByeTsKCQl3aGlsZSAoaS0tKSB7CgkJCS8vIFsgc3ggICAwICAwIF0gICBbIGNvcyh0aGV0YSkgIC1zaW4odGhldGEpICAwIF0gICBbIDEgIDAgIGN4IC0gb3ggXSAgIFsgQSBCIHJ4IF0KCQkJLy8gWyAgMCAgc3kgIDAgXSAqIFsgc2luKHRoZXRhKSAgIGNvcyh0aGV0YSkgIDAgXSAqIFsgMCAgMSAgY3kgLSBveSBdID0gWyBDIEQgcnkgXQoJCQkvLyBbICAwICAgMCAgMSBdICAgWyAgICAgMCAgICAgICAgICAgIDAgICAgICAgMSBdICAgWyAwICAwICAgICAxICAgIF0gICBbIDAgMCAgMSBdCgkJCW94ID0gdGhpcy5jb3JlLm1tdS5sb2FkMzIob2Zmc2V0KSAvIDI1NjsKCQkJb3kgPSB0aGlzLmNvcmUubW11LmxvYWQzMihvZmZzZXQgKyA0KSAvIDI1NjsKCQkJY3ggPSB0aGlzLmNvcmUubW11LmxvYWQxNihvZmZzZXQgKyA4KTsKCQkJY3kgPSB0aGlzLmNvcmUubW11LmxvYWQxNihvZmZzZXQgKyAxMCk7CgkJCXN4ID0gdGhpcy5jb3JlLm1tdS5sb2FkMTYob2Zmc2V0ICsgMTIpIC8gMjU2OwoJCQlzeSA9IHRoaXMuY29yZS5tbXUubG9hZDE2KG9mZnNldCArIDE0KSAvIDI1NjsKCQkJdGhldGEgPSAodGhpcy5jb3JlLm1tdS5sb2FkVTE2KG9mZnNldCArIDE2KSA+PiA4KSAvIDEyOCAqIE1hdGguUEk7CgkJCW9mZnNldCArPSAyMDsKCQkJLy8gUm90YXRpb24KCQkJYSA9IGQgPSBNYXRoLmNvcyh0aGV0YSk7CgkJCWIgPSBjID0gTWF0aC5zaW4odGhldGEpOwoJCQkvLyBTY2FsZQoJCQlhICo9IHN4OwoJCQliICo9IC1zeDsKCQkJYyAqPSBzeTsKCQkJZCAqPSBzeTsKCQkJLy8gVHJhbnNsYXRlCgkJCXJ4ID0gb3ggLSAoYSAqIGN4ICsgYiAqIGN5KTsKCQkJcnkgPSBveSAtIChjICogY3ggKyBkICogY3kpOwoJCQl0aGlzLmNvcmUubW11LnN0b3JlMTYoZGVzdGluYXRpb24sIChhICogMjU2KSB8IDApOwoJCQl0aGlzLmNvcmUubW11LnN0b3JlMTYoZGVzdGluYXRpb24gKyAyLCAoYiAqIDI1NikgfCAwKTsKCQkJdGhpcy5jb3JlLm1tdS5zdG9yZTE2KGRlc3RpbmF0aW9uICsgNCwgKGMgKiAyNTYpIHwgMCk7CgkJCXRoaXMuY29yZS5tbXUuc3RvcmUxNihkZXN0aW5hdGlvbiArIDYsIChkICogMjU2KSB8IDApOwoJCQl0aGlzLmNvcmUubW11LnN0b3JlMzIoZGVzdGluYXRpb24gKyA4LCAocnggKiAyNTYpIHwgMCk7CgkJCXRoaXMuY29yZS5tbXUuc3RvcmUzMihkZXN0aW5hdGlvbiArIDEyLCAocnkgKiAyNTYpIHwgMCk7CgkJCWRlc3RpbmF0aW9uICs9IDE2OwoJCX0KCQlicmVhazsKCWNhc2UgMHgwRjoKCQkvLyBPYmpBZmZpbmVTZXQKCQl2YXIgaSA9IHRoaXMuY3B1LmdwcnNbMl07CgkJdmFyIHN4LCBzeTsKCQl2YXIgdGhldGE7CgkJdmFyIG9mZnNldCA9IHRoaXMuY3B1LmdwcnNbMF07CgkJdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5jcHUuZ3Byc1sxXQoJCXZhciBkaWZmID0gdGhpcy5jcHUuZ3Byc1szXTsKCQl2YXIgYSwgYiwgYywgZDsKCQl3aGlsZSAoaS0tKSB7CgkJCS8vIFsgc3ggICAwIF0gICBbIGNvcyh0aGV0YSkgIC1zaW4odGhldGEpIF0gICBbIEEgQiBdCgkJCS8vIFsgIDAgIHN5IF0gKiBbIHNpbih0aGV0YSkgICBjb3ModGhldGEpIF0gPSBbIEMgRCBdCgkJCXN4ID0gdGhpcy5jb3JlLm1tdS5sb2FkMTYob2Zmc2V0KSAvIDI1NjsKCQkJc3kgPSB0aGlzLmNvcmUubW11LmxvYWQxNihvZmZzZXQgKyAyKSAvIDI1NjsKCQkJdGhldGEgPSAodGhpcy5jb3JlLm1tdS5sb2FkVTE2KG9mZnNldCArIDQpID4+IDgpIC8gMTI4ICogTWF0aC5QSTsKCQkJb2Zmc2V0ICs9IDY7CgkJCS8vIFJvdGF0aW9uCgkJCWEgPSBkID0gTWF0aC5jb3ModGhldGEpOwoJCQliID0gYyA9IE1hdGguc2luKHRoZXRhKTsKCQkJLy8gU2NhbGUKCQkJYSAqPSBzeDsKCQkJYiAqPSAtc3g7CgkJCWMgKj0gc3k7CgkJCWQgKj0gc3k7CgkJCXRoaXMuY29yZS5tbXUuc3RvcmUxNihkZXN0aW5hdGlvbiwgKGEgKiAyNTYpIHwgMCk7CgkJCXRoaXMuY29yZS5tbXUuc3RvcmUxNihkZXN0aW5hdGlvbiArIGRpZmYsIChiICogMjU2KSB8IDApOwoJCQl0aGlzLmNvcmUubW11LnN0b3JlMTYoZGVzdGluYXRpb24gKyBkaWZmICogMiwgKGMgKiAyNTYpIHwgMCk7CgkJCXRoaXMuY29yZS5tbXUuc3RvcmUxNihkZXN0aW5hdGlvbiArIGRpZmYgKiAzLCAoZCAqIDI1NikgfCAwKTsKCQkJZGVzdGluYXRpb24gKz0gZGlmZiAqIDQ7CgkJfQoJCWJyZWFrOwoJY2FzZSAweDExOgoJCS8vIExaNzdVbkNvbXBXcmFtCgkJdGhpcy5sejc3KHRoaXMuY3B1LmdwcnNbMF0sIHRoaXMuY3B1LmdwcnNbMV0sIDEpOwoJCWJyZWFrOwoJY2FzZSAweDEyOgoJCS8vIExaNzdVbkNvbXBWcmFtCgkJdGhpcy5sejc3KHRoaXMuY3B1LmdwcnNbMF0sIHRoaXMuY3B1LmdwcnNbMV0sIDIpOwoJCWJyZWFrOwoJY2FzZSAweDEzOgoJCS8vIEh1ZmZVbkNvbXAKCQl0aGlzLmh1ZmZtYW4odGhpcy5jcHUuZ3Byc1swXSwgdGhpcy5jcHUuZ3Byc1sxXSk7CgkJYnJlYWs7CgljYXNlIDB4MTQ6CgkJLy8gUmxVbkNvbXBXcmFtCgkJdGhpcy5ybCh0aGlzLmNwdS5ncHJzWzBdLCB0aGlzLmNwdS5ncHJzWzFdLCAxKTsKCQlicmVhazsKCWNhc2UgMHgxNToKCQkvLyBSbFVuQ29tcFZyYW0KCQl0aGlzLnJsKHRoaXMuY3B1LmdwcnNbMF0sIHRoaXMuY3B1LmdwcnNbMV0sIDIpOwoJCWJyZWFrOwoJY2FzZSAweDFGOgoJCS8vIE1pZGlLZXkyRnJlcQoJCXZhciBrZXkgPSB0aGlzLmNwdS5tbXUubG9hZDMyKHRoaXMuY3B1LmdwcnNbMF0gKyA0KTsKCQl0aGlzLmNwdS5ncHJzWzBdID0ga2V5IC8gTWF0aC5wb3coMiwgKDE4MCAtIHRoaXMuY3B1LmdwcnNbMV0gLSB0aGlzLmNwdS5ncHJzWzJdIC8gMjU2KSAvIDEyKSA+Pj4gMDsKCQlicmVhazsKCWRlZmF1bHQ6CgkJdGhyb3cgIlVuaW1wbGVtZW50ZWQgc29mdHdhcmUgaW50ZXJydXB0OiAweCIgKyBvcGNvZGUudG9TdHJpbmcoMTYpOwoJfQp9OwoKR2FtZUJveUFkdmFuY2VJbnRlcnJ1cHRIYW5kbGVyLnByb3RvdHlwZS5tYXN0ZXJFbmFibGUgPSBmdW5jdGlvbih2YWx1ZSkgewoJdGhpcy5lbmFibGUgPSB2YWx1ZTsKCglpZiAodGhpcy5lbmFibGUgJiYgdGhpcy5lbmFibGVkSVJRcyAmIHRoaXMuaW50ZXJydXB0RmxhZ3MpIHsKCQl0aGlzLmNwdS5yYWlzZUlSUSgpOwoJfQp9OwoKR2FtZUJveUFkdmFuY2VJbnRlcnJ1cHRIYW5kbGVyLnByb3RvdHlwZS5zZXRJbnRlcnJ1cHRzRW5hYmxlZCA9IGZ1bmN0aW9uKHZhbHVlKSB7Cgl0aGlzLmVuYWJsZWRJUlFzID0gdmFsdWU7CgoJaWYgKHRoaXMuZW5hYmxlZElSUXMgJiB0aGlzLk1BU0tfU0lPKSB7CgkJdGhpcy5jb3JlLlNUVUIoJ1NlcmlhbCBJL08gaW50ZXJydXB0cyBub3QgaW1wbGVtZW50ZWQnKTsKCX0KCglpZiAodGhpcy5lbmFibGVkSVJRcyAmIHRoaXMuTUFTS19LRVlQQUQpIHsKCQl0aGlzLmNvcmUuU1RVQignS2V5cGFkIGludGVycnVwdHMgbm90IGltcGxlbWVudGVkJyk7Cgl9CgoJaWYgKHRoaXMuZW5hYmxlICYmIHRoaXMuZW5hYmxlZElSUXMgJiB0aGlzLmludGVycnVwdEZsYWdzKSB7CgkJdGhpcy5jcHUucmFpc2VJUlEoKTsKCX0KfTsKCkdhbWVCb3lBZHZhbmNlSW50ZXJydXB0SGFuZGxlci5wcm90b3R5cGUucG9sbE5leHRFdmVudCA9IGZ1bmN0aW9uKCkgewoJdmFyIG5leHRFdmVudCA9IHRoaXMudmlkZW8ubmV4dEV2ZW50OwoJdmFyIHRlc3Q7CgoJaWYgKHRoaXMuYXVkaW8uZW5hYmxlZCkgewoJCXRlc3QgPSB0aGlzLmF1ZGlvLm5leHRFdmVudDsKCQlpZiAoIW5leHRFdmVudCB8fCB0ZXN0IDwgbmV4dEV2ZW50KSB7CgkJCW5leHRFdmVudCA9IHRlc3Q7CgkJfQoJfQoKCWlmICh0aGlzLnRpbWVyc0VuYWJsZWQpIHsKCQl2YXIgdGltZXIgPSB0aGlzLnRpbWVyc1swXTsKCQl0ZXN0ID0gdGltZXIubmV4dEV2ZW50OwoJCWlmICh0aW1lci5lbmFibGUgJiYgdGVzdCAmJiAoIW5leHRFdmVudCB8fCB0ZXN0IDwgbmV4dEV2ZW50KSkgewoJCQluZXh0RXZlbnQgPSB0ZXN0OwoJCX0KCgkJdGltZXIgPSB0aGlzLnRpbWVyc1sxXTsKCQl0ZXN0ID0gdGltZXIubmV4dEV2ZW50OwoJCWlmICh0aW1lci5lbmFibGUgJiYgdGVzdCAmJiAoIW5leHRFdmVudCB8fCB0ZXN0IDwgbmV4dEV2ZW50KSkgewoJCQluZXh0RXZlbnQgPSB0ZXN0OwoJCX0KCQl0aW1lciA9IHRoaXMudGltZXJzWzJdOwoJCXRlc3QgPSB0aW1lci5uZXh0RXZlbnQ7CgkJaWYgKHRpbWVyLmVuYWJsZSAmJiB0ZXN0ICYmICghbmV4dEV2ZW50IHx8IHRlc3QgPCBuZXh0RXZlbnQpKSB7CgkJCW5leHRFdmVudCA9IHRlc3Q7CgkJfQoJCXRpbWVyID0gdGhpcy50aW1lcnNbM107CgkJdGVzdCA9IHRpbWVyLm5leHRFdmVudDsKCQlpZiAodGltZXIuZW5hYmxlICYmIHRlc3QgJiYgKCFuZXh0RXZlbnQgfHwgdGVzdCA8IG5leHRFdmVudCkpIHsKCQkJbmV4dEV2ZW50ID0gdGVzdDsKCQl9Cgl9CgoJdmFyIGRtYSA9IHRoaXMuZG1hWzBdOwoJdGVzdCA9IGRtYS5uZXh0SVJROwoJaWYgKGRtYS5lbmFibGUgJiYgZG1hLmRvSXJxICYmIHRlc3QgJiYgKCFuZXh0RXZlbnQgfHwgdGVzdCA8IG5leHRFdmVudCkpIHsKCQluZXh0RXZlbnQgPSB0ZXN0OwoJfQoKCWRtYSA9IHRoaXMuZG1hWzFdOwoJdGVzdCA9IGRtYS5uZXh0SVJROwoJaWYgKGRtYS5lbmFibGUgJiYgZG1hLmRvSXJxICYmIHRlc3QgJiYgKCFuZXh0RXZlbnQgfHwgdGVzdCA8IG5leHRFdmVudCkpIHsKCQluZXh0RXZlbnQgPSB0ZXN0OwoJfQoKCWRtYSA9IHRoaXMuZG1hWzJdOwoJdGVzdCA9IGRtYS5uZXh0SVJROwoJaWYgKGRtYS5lbmFibGUgJiYgZG1hLmRvSXJxICYmIHRlc3QgJiYgKCFuZXh0RXZlbnQgfHwgdGVzdCA8IG5leHRFdmVudCkpIHsKCQluZXh0RXZlbnQgPSB0ZXN0OwoJfQoKCWRtYSA9IHRoaXMuZG1hWzNdOwoJdGVzdCA9IGRtYS5uZXh0SVJROwoJaWYgKGRtYS5lbmFibGUgJiYgZG1hLmRvSXJxICYmIHRlc3QgJiYgKCFuZXh0RXZlbnQgfHwgdGVzdCA8IG5leHRFdmVudCkpIHsKCQluZXh0RXZlbnQgPSB0ZXN0OwoJfQoKCXRoaXMuY29yZS5BU1NFUlQobmV4dEV2ZW50ID49IHRoaXMuY3B1LmN5Y2xlcywgIk5leHQgZXZlbnQgaXMgYmVmb3JlIHByZXNlbnQiKTsKCXRoaXMubmV4dEV2ZW50ID0gbmV4dEV2ZW50Owp9OwoKR2FtZUJveUFkdmFuY2VJbnRlcnJ1cHRIYW5kbGVyLnByb3RvdHlwZS53YWl0Rm9ySVJRID0gZnVuY3Rpb24oKSB7Cgl2YXIgdGltZXI7Cgl2YXIgaXJxUGVuZGluZyA9IHRoaXMudGVzdElSUSgpIHx8IHRoaXMudmlkZW8uaGJsYW5rSVJRIHx8IHRoaXMudmlkZW8udmJsYW5rSVJRIHx8IHRoaXMudmlkZW8udmNvdW50ZXJJUlE7CglpZiAodGhpcy50aW1lcnNFbmFibGVkKSB7CgkJdGltZXIgPSB0aGlzLnRpbWVyc1swXTsKCQlpcnFQZW5kaW5nID0gaXJxUGVuZGluZyB8fCB0aW1lci5kb0lycTsKCQl0aW1lciA9IHRoaXMudGltZXJzWzFdOwoJCWlycVBlbmRpbmcgPSBpcnFQZW5kaW5nIHx8IHRpbWVyLmRvSXJxOwoJCXRpbWVyID0gdGhpcy50aW1lcnNbMl07CgkJaXJxUGVuZGluZyA9IGlycVBlbmRpbmcgfHwgdGltZXIuZG9JcnE7CgkJdGltZXIgPSB0aGlzLnRpbWVyc1szXTsKCQlpcnFQZW5kaW5nID0gaXJxUGVuZGluZyB8fCB0aW1lci5kb0lycTsKCX0KCWlmICghaXJxUGVuZGluZykgewoJCXJldHVybiBmYWxzZTsKCX0KCglmb3IgKDs7KSB7CgkJdGhpcy5wb2xsTmV4dEV2ZW50KCk7CgoJCWlmICghdGhpcy5uZXh0RXZlbnQpIHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0gZWxzZSB7CgkJCXRoaXMuY3B1LmN5Y2xlcyA9IHRoaXMubmV4dEV2ZW50OwoJCQl0aGlzLnVwZGF0ZVRpbWVycygpOwoJCQlpZiAodGhpcy5pbnRlcnJ1cHRGbGFncykgewoJCQkJcmV0dXJuIHRydWU7CgkJCX0KCQl9Cgl9Cn07CgpHYW1lQm95QWR2YW5jZUludGVycnVwdEhhbmRsZXIucHJvdG90eXBlLnRlc3RJUlEgPSBmdW5jdGlvbigpIHsKCWlmICh0aGlzLmVuYWJsZSAmJiB0aGlzLmVuYWJsZWRJUlFzICYgdGhpcy5pbnRlcnJ1cHRGbGFncykgewoJCXRoaXMuc3ByaW5nSVJRID0gdHJ1ZTsKCQl0aGlzLm5leHRFdmVudCA9IHRoaXMuY3B1LmN5Y2xlczsKCQlyZXR1cm4gdHJ1ZTsKCX0KCXJldHVybiBmYWxzZTsKfTsKCkdhbWVCb3lBZHZhbmNlSW50ZXJydXB0SGFuZGxlci5wcm90b3R5cGUucmFpc2VJUlEgPSBmdW5jdGlvbihpcnFUeXBlKSB7Cgl0aGlzLmludGVycnVwdEZsYWdzIHw9IDEgPDwgaXJxVHlwZTsKCXRoaXMuaW8ucmVnaXN0ZXJzW3RoaXMuaW8uSUYgPj4gMV0gPSB0aGlzLmludGVycnVwdEZsYWdzOwoKCWlmICh0aGlzLmVuYWJsZSAmJiAodGhpcy5lbmFibGVkSVJRcyAmIDEgPDwgaXJxVHlwZSkpIHsKCQl0aGlzLmNwdS5yYWlzZUlSUSgpOwoJfQp9OwoKR2FtZUJveUFkdmFuY2VJbnRlcnJ1cHRIYW5kbGVyLnByb3RvdHlwZS5kaXNtaXNzSVJRcyA9IGZ1bmN0aW9uKGlycU1hc2spIHsKCXRoaXMuaW50ZXJydXB0RmxhZ3MgJj0gfmlycU1hc2s7Cgl0aGlzLmlvLnJlZ2lzdGVyc1t0aGlzLmlvLklGID4+IDFdID0gdGhpcy5pbnRlcnJ1cHRGbGFnczsKfTsKCkdhbWVCb3lBZHZhbmNlSW50ZXJydXB0SGFuZGxlci5wcm90b3R5cGUuZG1hU2V0U291cmNlQWRkcmVzcyA9IGZ1bmN0aW9uKGRtYSwgYWRkcmVzcykgewoJdGhpcy5kbWFbZG1hXS5zb3VyY2UgPSBhZGRyZXNzICYgMHhGRkZGRkZGRTsKfTsKCkdhbWVCb3lBZHZhbmNlSW50ZXJydXB0SGFuZGxlci5wcm90b3R5cGUuZG1hU2V0RGVzdEFkZHJlc3MgPSBmdW5jdGlvbihkbWEsIGFkZHJlc3MpIHsKCXRoaXMuZG1hW2RtYV0uZGVzdCA9IGFkZHJlc3MgJiAweEZGRkZGRkZFOwp9OwoKR2FtZUJveUFkdmFuY2VJbnRlcnJ1cHRIYW5kbGVyLnByb3RvdHlwZS5kbWFTZXRXb3JkQ291bnQgPSBmdW5jdGlvbihkbWEsIGNvdW50KSB7Cgl0aGlzLmRtYVtkbWFdLmNvdW50ID0gY291bnQgPyBjb3VudCA6IChkbWEgPT0gMyA/IDB4MTAwMDAgOiAweDQwMDApOwp9OwoKR2FtZUJveUFkdmFuY2VJbnRlcnJ1cHRIYW5kbGVyLnByb3RvdHlwZS5kbWFXcml0ZUNvbnRyb2wgPSBmdW5jdGlvbihkbWEsIGNvbnRyb2wpIHsKCXZhciBjdXJyZW50RG1hID0gdGhpcy5kbWFbZG1hXTsKCXZhciB3YXNFbmFibGVkID0gY3VycmVudERtYS5lbmFibGU7CgljdXJyZW50RG1hLmRzdENvbnRyb2wgPSAoY29udHJvbCAmIDB4MDA2MCkgPj4gNTsKCWN1cnJlbnREbWEuc3JjQ29udHJvbCA9IChjb250cm9sICYgMHgwMTgwKSA+PiA3OwoJY3VycmVudERtYS5yZXBlYXQgPSAhIShjb250cm9sICYgMHgwMjAwKTsKCWN1cnJlbnREbWEud2lkdGggPSAoY29udHJvbCAmIDB4MDQwMCkgPyA0IDogMjsKCWN1cnJlbnREbWEuZHJxID0gISEoY29udHJvbCAmIDB4MDgwMCk7CgljdXJyZW50RG1hLnRpbWluZyA9IChjb250cm9sICYgMHgzMDAwKSA+PiAxMjsKCWN1cnJlbnREbWEuZG9JcnEgPSAhIShjb250cm9sICYgMHg0MDAwKTsKCWN1cnJlbnREbWEuZW5hYmxlID0gISEoY29udHJvbCAmIDB4ODAwMCk7CgljdXJyZW50RG1hLm5leHRJUlEgPSAwOwoKCWlmIChjdXJyZW50RG1hLmRycSkgewoJCXRoaXMuY29yZS5XQVJOKCdEUlEgbm90IGltcGxlbWVudGVkJyk7Cgl9CgoJaWYgKCF3YXNFbmFibGVkICYmIGN1cnJlbnREbWEuZW5hYmxlKSB7CgkJY3VycmVudERtYS5uZXh0U291cmNlID0gY3VycmVudERtYS5zb3VyY2U7CgkJY3VycmVudERtYS5uZXh0RGVzdCA9IGN1cnJlbnREbWEuZGVzdDsKCQljdXJyZW50RG1hLm5leHRDb3VudCA9IGN1cnJlbnREbWEuY291bnQ7CgkJdGhpcy5jcHUubW11LnNjaGVkdWxlRG1hKGRtYSwgY3VycmVudERtYSk7Cgl9Cn07CgpHYW1lQm95QWR2YW5jZUludGVycnVwdEhhbmRsZXIucHJvdG90eXBlLnRpbWVyU2V0UmVsb2FkID0gZnVuY3Rpb24odGltZXIsIHJlbG9hZCkgewoJdGhpcy50aW1lcnNbdGltZXJdLnJlbG9hZCA9IHJlbG9hZCAmIDB4RkZGRjsKfTsKCkdhbWVCb3lBZHZhbmNlSW50ZXJydXB0SGFuZGxlci5wcm90b3R5cGUudGltZXJXcml0ZUNvbnRyb2wgPSBmdW5jdGlvbih0aW1lciwgY29udHJvbCkgewoJdmFyIGN1cnJlbnRUaW1lciA9IHRoaXMudGltZXJzW3RpbWVyXTsKCXZhciBvbGRQcmVzY2FsZSA9IGN1cnJlbnRUaW1lci5wcmVzY2FsZUJpdHM7Cglzd2l0Y2ggKGNvbnRyb2wgJiAweDAwMDMpIHsKCWNhc2UgMHgwMDAwOgoJCWN1cnJlbnRUaW1lci5wcmVzY2FsZUJpdHMgPSAwOwoJCWJyZWFrOwoJY2FzZSAweDAwMDE6CgkJY3VycmVudFRpbWVyLnByZXNjYWxlQml0cyA9IDY7CgkJYnJlYWs7CgljYXNlIDB4MDAwMjoKCQljdXJyZW50VGltZXIucHJlc2NhbGVCaXRzID0gODsKCQlicmVhazsKCWNhc2UgMHgwMDAzOgoJCWN1cnJlbnRUaW1lci5wcmVzY2FsZUJpdHMgPSAxMDsKCQlicmVhazsKCX0KCWN1cnJlbnRUaW1lci5jb3VudFVwID0gISEoY29udHJvbCAmIDB4MDAwNCk7CgljdXJyZW50VGltZXIuZG9JcnEgPSAhIShjb250cm9sICYgMHgwMDQwKTsKCWN1cnJlbnRUaW1lci5vdmVyZmxvd0ludGVydmFsID0gKDB4MTAwMDAgLSBjdXJyZW50VGltZXIucmVsb2FkKSA8PCBjdXJyZW50VGltZXIucHJlc2NhbGVCaXRzOwoJdmFyIHdhc0VuYWJsZWQgPSBjdXJyZW50VGltZXIuZW5hYmxlOwoJY3VycmVudFRpbWVyLmVuYWJsZSA9ICEhKCgoY29udHJvbCAmIDB4MDA4MCkgPj4gNykgPDwgdGltZXIpOwoJaWYgKCF3YXNFbmFibGVkICYmIGN1cnJlbnRUaW1lci5lbmFibGUpIHsKCQlpZiAoIWN1cnJlbnRUaW1lci5jb3VudFVwKSB7CgkJCWN1cnJlbnRUaW1lci5sYXN0RXZlbnQgPSB0aGlzLmNwdS5jeWNsZXM7CgkJCWN1cnJlbnRUaW1lci5uZXh0RXZlbnQgPSB0aGlzLmNwdS5jeWNsZXMgKyBjdXJyZW50VGltZXIub3ZlcmZsb3dJbnRlcnZhbDsKCQl9IGVsc2UgewoJCQljdXJyZW50VGltZXIubmV4dEV2ZW50ID0gMDsKCQl9CgkJdGhpcy5pby5yZWdpc3RlcnNbKHRoaXMuaW8uVE0wQ05UX0xPICsgKHRpbWVyIDw8IDIpKSA+PiAxXSA9IGN1cnJlbnRUaW1lci5yZWxvYWQ7CgkJY3VycmVudFRpbWVyLm9sZFJlbG9hZCA9IGN1cnJlbnRUaW1lci5yZWxvYWQ7CgkJKyt0aGlzLnRpbWVyc0VuYWJsZWQ7Cgl9IGVsc2UgaWYgKHdhc0VuYWJsZWQgJiYgIWN1cnJlbnRUaW1lci5lbmFibGUpIHsKCQlpZiAoIWN1cnJlbnRUaW1lci5jb3VudFVwKSB7CgkJCXRoaXMuaW8ucmVnaXN0ZXJzWyh0aGlzLmlvLlRNMENOVF9MTyArICh0aW1lciA8PCAyKSkgPj4gMV0gPSBjdXJyZW50VGltZXIub2xkUmVsb2FkICsgKHRoaXMuY3B1LmN5Y2xlcyAtIGN1cnJlbnRUaW1lci5sYXN0RXZlbnQpID4+IG9sZFByZXNjYWxlOwoJCX0KCQktLXRoaXMudGltZXJzRW5hYmxlZDsKCX0gZWxzZSBpZiAoY3VycmVudFRpbWVyLnByZXNjYWxlQml0cyAhPSBvbGRQcmVzY2FsZSAmJiAhY3VycmVudFRpbWVyLmNvdW50VXApIHsKCQkvLyBGSVhNRTogdGhpcyBtaWdodCBiZSBiZWZvcmUgcHJlc2VudAoJCWN1cnJlbnRUaW1lci5uZXh0RXZlbnQgPSBjdXJyZW50VGltZXIubGFzdEV2ZW50ICsgY3VycmVudFRpbWVyLm92ZXJmbG93SW50ZXJ2YWw7Cgl9CgoJLy8gV2UndmUgY2hhbmdlZCB0aGUgdGltZXJzIHNvbWVob3cuLi53ZSBuZWVkIHRvIHJlc2V0IHRoZSBuZXh0IGV2ZW50Cgl0aGlzLnBvbGxOZXh0RXZlbnQoKTsKfTsKCkdhbWVCb3lBZHZhbmNlSW50ZXJydXB0SGFuZGxlci5wcm90b3R5cGUudGltZXJSZWFkID0gZnVuY3Rpb24odGltZXIpIHsKCXZhciBjdXJyZW50VGltZXIgPSB0aGlzLnRpbWVyc1t0aW1lcl07CglpZiAoY3VycmVudFRpbWVyLmVuYWJsZSAmJiAhY3VycmVudFRpbWVyLmNvdW50VXApIHsKCQlyZXR1cm4gY3VycmVudFRpbWVyLm9sZFJlbG9hZCArICh0aGlzLmNwdS5jeWNsZXMgLSBjdXJyZW50VGltZXIubGFzdEV2ZW50KSA+PiBjdXJyZW50VGltZXIucHJlc2NhbGVCaXRzOwoJfSBlbHNlIHsKCQlyZXR1cm4gdGhpcy5pby5yZWdpc3RlcnNbKHRoaXMuaW8uVE0wQ05UX0xPICsgKHRpbWVyIDw8IDIpKSA+PiAxXTsKCX0KfTsKCkdhbWVCb3lBZHZhbmNlSW50ZXJydXB0SGFuZGxlci5wcm90b3R5cGUuaGFsdCA9IGZ1bmN0aW9uKCkgewoJaWYgKCF0aGlzLmVuYWJsZSkgewoJCXRocm93ICJSZXF1ZXN0ZWQgSEFMVCB3aGVuIGludGVycnVwdHMgd2VyZSBkaXNhYmxlZCEiOwoJfQoJaWYgKCF0aGlzLndhaXRGb3JJUlEoKSkgewoJCXRocm93ICJXYWl0aW5nIG9uIGludGVycnVwdCBmb3JldmVyLiI7Cgl9Cn0KCkdhbWVCb3lBZHZhbmNlSW50ZXJydXB0SGFuZGxlci5wcm90b3R5cGUubHo3NyA9IGZ1bmN0aW9uKHNvdXJjZSwgZGVzdCwgdW5pdHNpemUpIHsKCS8vIFRPRE86IG1vdmUgdG8gYSBkaWZmZXJlbnQgZmlsZQoJdmFyIHJlbWFpbmluZyA9ICh0aGlzLmNwdS5tbXUubG9hZDMyKHNvdXJjZSkgJiAweEZGRkZGRjAwKSA+PiA4OwoJLy8gV2UgYXNzdW1lIHRoZSBzaWduYXR1cmUgYnl0ZSAoMHgxMCkgaXMgY29ycmVjdAoJdmFyIGJsb2NraGVhZGVyOwoJdmFyIHNQb2ludGVyID0gc291cmNlICsgNDsKCXZhciBkUG9pbnRlciA9IGRlc3Q7Cgl2YXIgYmxvY2tzUmVtYWluaW5nID0gMDsKCXZhciBibG9jazsKCXZhciBkaXNwOwoJdmFyIGJ5dGVzOwoJdmFyIGJ1ZmZlciA9IDA7Cgl2YXIgbG9hZGVkOwoJd2hpbGUgKHJlbWFpbmluZyA+IDApIHsKCQlpZiAoYmxvY2tzUmVtYWluaW5nKSB7CgkJCWlmIChibG9ja2hlYWRlciAmIDB4ODApIHsKCQkJCS8vIENvbXByZXNzZWQKCQkJCWJsb2NrID0gdGhpcy5jcHUubW11LmxvYWRVOChzUG9pbnRlcikgfCAodGhpcy5jcHUubW11LmxvYWRVOChzUG9pbnRlciArIDEpIDw8IDgpOwoJCQkJc1BvaW50ZXIgKz0gMjsKCQkJCWRpc3AgPSBkUG9pbnRlciAtICgoKGJsb2NrICYgMHgwMDBGKSA8PCA4KSB8ICgoYmxvY2sgJiAweEZGMDApID4+IDgpKSAtIDE7CgkJCQlieXRlcyA9ICgoYmxvY2sgJiAweDAwRjApID4+IDQpICsgMzsKCQkJCXdoaWxlIChieXRlcy0tICYmIHJlbWFpbmluZykgewoJCQkJCWxvYWRlZCA9IHRoaXMuY3B1Lm1tdS5sb2FkVTgoZGlzcCsrKTsKCQkJCQlpZiAodW5pdHNpemUgPT0gMikgewoJCQkJCQlidWZmZXIgPj49IDg7CgkJCQkJCWJ1ZmZlciB8PSBsb2FkZWQgPDwgODsKCQkJCQkJaWYgKGRQb2ludGVyICYgMSkgewoJCQkJCQkJdGhpcy5jcHUubW11LnN0b3JlMTYoZFBvaW50ZXIgLSAxLCBidWZmZXIpOwoJCQkJCQl9CgkJCQkJfSBlbHNlIHsKCQkJCQkJdGhpcy5jcHUubW11LnN0b3JlOChkUG9pbnRlciwgbG9hZGVkKTsKCQkJCQl9CgkJCQkJLS1yZW1haW5pbmc7CgkJCQkJKytkUG9pbnRlcjsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCS8vIFVuY29tcHJlc3NlZAoJCQkJbG9hZGVkID0gdGhpcy5jcHUubW11LmxvYWRVOChzUG9pbnRlcisrKTsKCQkJCWlmICh1bml0c2l6ZSA9PSAyKSB7CgkJCQkJYnVmZmVyID4+PSA4OwoJCQkJCWJ1ZmZlciB8PSBsb2FkZWQgPDwgODsKCQkJCQlpZiAoZFBvaW50ZXIgJiAxKSB7CgkJCQkJCXRoaXMuY3B1Lm1tdS5zdG9yZTE2KGRQb2ludGVyIC0gMSwgYnVmZmVyKTsKCQkJCQl9CgkJCQl9IGVsc2UgewoJCQkJCXRoaXMuY3B1Lm1tdS5zdG9yZTgoZFBvaW50ZXIsIGxvYWRlZCk7CgkJCQl9CgkJCQktLXJlbWFpbmluZzsKCQkJCSsrZFBvaW50ZXI7CgkJCX0KCQkJYmxvY2toZWFkZXIgPDw9IDE7CgkJCS0tYmxvY2tzUmVtYWluaW5nOwoJCX0gZWxzZSB7CgkJCWJsb2NraGVhZGVyID0gdGhpcy5jcHUubW11LmxvYWRVOChzUG9pbnRlcisrKTsKCQkJYmxvY2tzUmVtYWluaW5nID0gODsKCQl9Cgl9Cn07CgpHYW1lQm95QWR2YW5jZUludGVycnVwdEhhbmRsZXIucHJvdG90eXBlLmh1ZmZtYW4gPSBmdW5jdGlvbihzb3VyY2UsIGRlc3QpIHsKCXNvdXJjZSA9IHNvdXJjZSAmIDB4RkZGRkZGRkM7Cgl2YXIgaGVhZGVyID0gdGhpcy5jcHUubW11LmxvYWQzMihzb3VyY2UpOwoJdmFyIHJlbWFpbmluZyA9IGhlYWRlciA+PiA4OwoJdmFyIGJpdHMgPSBoZWFkZXIgJiAweEY7CglpZiAoMzIgJSBiaXRzKSB7CgkJdGhyb3cgJ1VuaW1wbGVtZW50ZWQgdW5hbGlnbmVkIEh1ZmZtYW4nOwoJfQoJdmFyIHBhZGRpbmcgPSAoNCAtIHJlbWFpbmluZykgJiAweDM7CglyZW1haW5pbmcgJj0gMHhGRkZGRkZGQzsKCS8vIFdlIGFzc3VtZSB0aGUgc2lnbmF0dXJlIGJ5dGUgKDB4MjApIGlzIGNvcnJlY3QKCXZhciB0cmVlID0gW107Cgl2YXIgdHJlZXNpemUgPSAodGhpcy5jcHUubW11LmxvYWRVOChzb3VyY2UgKyA0KSA8PCAxKSArIDE7Cgl2YXIgYmxvY2s7Cgl2YXIgc1BvaW50ZXIgPSBzb3VyY2UgKyA1ICsgdHJlZXNpemU7Cgl2YXIgZFBvaW50ZXIgPSBkZXN0ICYgMHhGRkZGRkZGQzsKCXZhciBpOwoJZm9yIChpID0gMDsgaSA8IHRyZWVzaXplOyArK2kpIHsKCQl0cmVlLnB1c2godGhpcy5jcHUubW11LmxvYWRVOChzb3VyY2UgKyA1ICsgaSkpOwoJfQoJdmFyIG5vZGU7Cgl2YXIgb2Zmc2V0ID0gMDsKCXZhciBiaXRzUmVtYWluaW5nOwoJdmFyIHJlYWRCaXRzOwoJdmFyIGJpdHNTZWVuID0gMDsKCW5vZGUgPSB0cmVlWzBdOwoJd2hpbGUgKHJlbWFpbmluZyA+IDApIHsKCQl2YXIgYml0c3RyZWFtID0gdGhpcy5jcHUubW11LmxvYWQzMihzUG9pbnRlcik7CgkJc1BvaW50ZXIgKz0gNDsKCQlmb3IgKGJpdHNSZW1haW5pbmcgPSAzMjsgYml0c1JlbWFpbmluZyA+IDA7IC0tYml0c1JlbWFpbmluZywgYml0c3RyZWFtIDw8PSAxKSB7CgkJCWlmICh0eXBlb2YgKG5vZGUpID09PSAnbnVtYmVyJykgewoJCQkJLy8gTGF6aWx5IGNvbnN0cnVjdCB0cmVlCgkJCQl2YXIgbmV4dCA9IChvZmZzZXQgLSAxIHwgMSkgKyAoKG5vZGUgJiAweDNGKSA8PCAxKSArIDI7CgkJCQlub2RlID0gewoJCQkJCWw6IG5leHQsCgkJCQkJcjogbmV4dCArIDEsCgkJCQkJbFRlcm06IG5vZGUgJiAweDgwLAoJCQkJCXJUZXJtOiBub2RlICYgMHg0MAoJCQkJfTsKCQkJCXRyZWVbb2Zmc2V0XSA9IG5vZGU7CgkJCX0KCgkJCWlmIChiaXRzdHJlYW0gJiAweDgwMDAwMDAwKSB7CgkJCQkvLyBHbyByaWdodAoJCQkJaWYgKG5vZGUuclRlcm0pIHsKCQkJCQlyZWFkQml0cyA9IHRyZWVbbm9kZS5yXTsKCQkJCX0gZWxzZSB7CgkJCQkJb2Zmc2V0ID0gbm9kZS5yOwoJCQkJCW5vZGUgPSB0cmVlW25vZGUucl07CgkJCQkJY29udGludWU7CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQkvLyBHbyBsZWZ0CgkJCQlpZiAobm9kZS5sVGVybSkgewoJCQkJCXJlYWRCaXRzID0gdHJlZVtub2RlLmxdOwoJCQkJfSBlbHNlIHsKCQkJCQlvZmZzZXQgPSBub2RlLmw7CgkJCQkJbm9kZSA9IHRyZWVbb2Zmc2V0XTsKCQkJCQljb250aW51ZTsKCQkJCX0KCQkJfQoKCQkJYmxvY2sgfD0gKHJlYWRCaXRzICYgKCgxIDw8IGJpdHMpIC0gMSkpIDw8IGJpdHNTZWVuOwoJCQliaXRzU2VlbiArPSBiaXRzOwoJCQlvZmZzZXQgPSAwOwoJCQlub2RlID0gdHJlZVswXTsKCQkJaWYgKGJpdHNTZWVuID09IDMyKSB7CgkJCQliaXRzU2VlbiA9IDA7CgkJCQl0aGlzLmNwdS5tbXUuc3RvcmUzMihkUG9pbnRlciwgYmxvY2spOwoJCQkJZFBvaW50ZXIgKz0gNDsKCQkJCXJlbWFpbmluZyAtPSA0OwoJCQkJYmxvY2sgPSAwOwoJCQl9CgkJfQoKCX0KCWlmIChwYWRkaW5nKSB7CgkJdGhpcy5jcHUubW11LnN0b3JlMzIoZFBvaW50ZXIsIGJsb2NrKTsKCX0KfTsKCkdhbWVCb3lBZHZhbmNlSW50ZXJydXB0SGFuZGxlci5wcm90b3R5cGUucmwgPSBmdW5jdGlvbihzb3VyY2UsIGRlc3QsIHVuaXRzaXplKSB7Cglzb3VyY2UgPSBzb3VyY2UgJiAweEZGRkZGRkZDOwoJdmFyIHJlbWFpbmluZyA9ICh0aGlzLmNwdS5tbXUubG9hZDMyKHNvdXJjZSkgJiAweEZGRkZGRjAwKSA+PiA4OwoJdmFyIHBhZGRpbmcgPSAoNCAtIHJlbWFpbmluZykgJiAweDM7CgkvLyBXZSBhc3N1bWUgdGhlIHNpZ25hdHVyZSBieXRlICgweDMwKSBpcyBjb3JyZWN0Cgl2YXIgYmxvY2toZWFkZXI7Cgl2YXIgYmxvY2s7Cgl2YXIgc1BvaW50ZXIgPSBzb3VyY2UgKyA0OwoJdmFyIGRQb2ludGVyID0gZGVzdDsKCXZhciBidWZmZXIgPSAwOwoJd2hpbGUgKHJlbWFpbmluZyA+IDApIHsKCQlibG9ja2hlYWRlciA9IHRoaXMuY3B1Lm1tdS5sb2FkVTgoc1BvaW50ZXIrKyk7CgkJaWYgKGJsb2NraGVhZGVyICYgMHg4MCkgewoJCQkvLyBDb21wcmVzc2VkCgkJCWJsb2NraGVhZGVyICY9IDB4N0Y7CgkJCWJsb2NraGVhZGVyICs9IDM7CgkJCWJsb2NrID0gdGhpcy5jcHUubW11LmxvYWRVOChzUG9pbnRlcisrKTsKCQkJd2hpbGUgKGJsb2NraGVhZGVyLS0gJiYgcmVtYWluaW5nKSB7CgkJCQktLXJlbWFpbmluZzsKCQkJCWlmICh1bml0c2l6ZSA9PSAyKSB7CgkJCQkJYnVmZmVyID4+PSA4OwoJCQkJCWJ1ZmZlciB8PSBibG9jayA8PCA4OwoJCQkJCWlmIChkUG9pbnRlciAmIDEpIHsKCQkJCQkJdGhpcy5jcHUubW11LnN0b3JlMTYoZFBvaW50ZXIgLSAxLCBidWZmZXIpOwoJCQkJCX0KCQkJCX0gZWxzZSB7CgkJCQkJdGhpcy5jcHUubW11LnN0b3JlOChkUG9pbnRlciwgYmxvY2spOwoJCQkJfQoJCQkJKytkUG9pbnRlcjsKCQkJfQoJCX0gZWxzZSB7CgkJCS8vIFVuY29tcHJlc3NlZAoJCQlibG9ja2hlYWRlcisrOwoJCQl3aGlsZSAoYmxvY2toZWFkZXItLSAmJiByZW1haW5pbmcpIHsKCQkJCS0tcmVtYWluaW5nOwoJCQkJYmxvY2sgPSB0aGlzLmNwdS5tbXUubG9hZFU4KHNQb2ludGVyKyspOwoJCQkJaWYgKHVuaXRzaXplID09IDIpIHsKCQkJCQlidWZmZXIgPj49IDg7CgkJCQkJYnVmZmVyIHw9IGJsb2NrIDw8IDg7CgkJCQkJaWYgKGRQb2ludGVyICYgMSkgewoJCQkJCQl0aGlzLmNwdS5tbXUuc3RvcmUxNihkUG9pbnRlciAtIDEsIGJ1ZmZlcik7CgkJCQkJfQoJCQkJfSBlbHNlIHsKCQkJCQl0aGlzLmNwdS5tbXUuc3RvcmU4KGRQb2ludGVyLCBibG9jayk7CgkJCQl9CgkJCQkrK2RQb2ludGVyOwoJCQl9CgkJfQoJfQoJd2hpbGUgKHBhZGRpbmctLSkgewoJCXRoaXMuY3B1Lm1tdS5zdG9yZTgoZFBvaW50ZXIrKywgMCk7Cgl9Cn07Cg=="></script>
<script src="data:@file/javascript;base64,ZnVuY3Rpb24gR2FtZUJveUFkdmFuY2VLZXlwYWQoKSB7Cgl0aGlzLktFWUNPREVfTEVGVCA9IDM3OwoJdGhpcy5LRVlDT0RFX1VQID0gMzg7Cgl0aGlzLktFWUNPREVfUklHSFQgPSAzOTsKCXRoaXMuS0VZQ09ERV9ET1dOID0gNDA7Cgl0aGlzLktFWUNPREVfU1RBUlQgPSAxMzsKCXRoaXMuS0VZQ09ERV9TRUxFQ1QgPSAyMjA7Cgl0aGlzLktFWUNPREVfQSA9IDkwOwoJdGhpcy5LRVlDT0RFX0IgPSA4ODsKCXRoaXMuS0VZQ09ERV9MID0gNjU7Cgl0aGlzLktFWUNPREVfUiA9IDgzOwoKCXRoaXMuR0FNRVBBRF9MRUZUID0gMTQ7Cgl0aGlzLkdBTUVQQURfVVAgPSAxMjsKCXRoaXMuR0FNRVBBRF9SSUdIVCA9IDE1OwoJdGhpcy5HQU1FUEFEX0RPV04gPSAxMzsKCXRoaXMuR0FNRVBBRF9TVEFSVCA9IDk7Cgl0aGlzLkdBTUVQQURfU0VMRUNUID0gODsKCXRoaXMuR0FNRVBBRF9BID0gMTsKCXRoaXMuR0FNRVBBRF9CID0gMDsKCXRoaXMuR0FNRVBBRF9MID0gNDsKCXRoaXMuR0FNRVBBRF9SID0gNTsKCXRoaXMuR0FNRVBBRF9USFJFU0hPTEQgPSAwLjI7CgoJdGhpcy5BID0gMDsKCXRoaXMuQiA9IDE7Cgl0aGlzLlNFTEVDVCA9IDI7Cgl0aGlzLlNUQVJUID0gMzsKCXRoaXMuUklHSFQgPSA0OwoJdGhpcy5MRUZUID0gNTsKCXRoaXMuVVAgPSA2OwoJdGhpcy5ET1dOID0gNzsKCXRoaXMuUiA9IDg7Cgl0aGlzLkwgPSA5OwoKCXRoaXMuY3VycmVudERvd24gPSAweDAzRkY7Cgl0aGlzLmVhdElucHV0ID0gZmFsc2U7CgoJdGhpcy5nYW1lcGFkcyA9IFtdOwp9OwoKR2FtZUJveUFkdmFuY2VLZXlwYWQucHJvdG90eXBlLmtleWJvYXJkSGFuZGxlciA9IGZ1bmN0aW9uKGUpIHsKCXZhciB0b2dnbGUgPSAwOwoJc3dpdGNoIChlLmtleUNvZGUpIHsKCWNhc2UgdGhpcy5LRVlDT0RFX1NUQVJUOgoJCXRvZ2dsZSA9IHRoaXMuU1RBUlQ7CgkJYnJlYWs7CgljYXNlIHRoaXMuS0VZQ09ERV9TRUxFQ1Q6CgkJdG9nZ2xlID0gdGhpcy5TRUxFQ1Q7CgkJYnJlYWs7CgljYXNlIHRoaXMuS0VZQ09ERV9BOgoJCXRvZ2dsZSA9IHRoaXMuQTsKCQlicmVhazsKCWNhc2UgdGhpcy5LRVlDT0RFX0I6CgkJdG9nZ2xlID0gdGhpcy5COwoJCWJyZWFrOwoJY2FzZSB0aGlzLktFWUNPREVfTDoKCQl0b2dnbGUgPSB0aGlzLkw7CgkJYnJlYWs7CgljYXNlIHRoaXMuS0VZQ09ERV9SOgoJCXRvZ2dsZSA9IHRoaXMuUjsKCQlicmVhazsKCWNhc2UgdGhpcy5LRVlDT0RFX1VQOgoJCXRvZ2dsZSA9IHRoaXMuVVA7CgkJYnJlYWs7CgljYXNlIHRoaXMuS0VZQ09ERV9SSUdIVDoKCQl0b2dnbGUgPSB0aGlzLlJJR0hUOwoJCWJyZWFrOwoJY2FzZSB0aGlzLktFWUNPREVfRE9XTjoKCQl0b2dnbGUgPSB0aGlzLkRPV047CgkJYnJlYWs7CgljYXNlIHRoaXMuS0VZQ09ERV9MRUZUOgoJCXRvZ2dsZSA9IHRoaXMuTEVGVDsKCQlicmVhazsKCWRlZmF1bHQ6CgkJcmV0dXJuOwoJfQoKCXRvZ2dsZSA9IDEgPDwgdG9nZ2xlOwoJaWYgKGUudHlwZSA9PSAia2V5ZG93biIpIHsKCQl0aGlzLmN1cnJlbnREb3duICY9IH50b2dnbGU7Cgl9IGVsc2UgewoJCXRoaXMuY3VycmVudERvd24gfD0gdG9nZ2xlOwoJfQoKCWlmICh0aGlzLmVhdElucHV0KSB7CgkJZS5wcmV2ZW50RGVmYXVsdCgpOwoJfQp9OwoKR2FtZUJveUFkdmFuY2VLZXlwYWQucHJvdG90eXBlLmdhbWVwYWRIYW5kbGVyID0gZnVuY3Rpb24oZ2FtZXBhZCkgewoJdmFyIHZhbHVlID0gMDsKCWlmIChnYW1lcGFkLmJ1dHRvbnNbdGhpcy5HQU1FUEFEX0xFRlRdID4gdGhpcy5HQU1FUEFEX1RIUkVTSE9MRCkgewoJCXZhbHVlIHw9IDEgPDwgdGhpcy5MRUZUOwoJfQoJaWYgKGdhbWVwYWQuYnV0dG9uc1t0aGlzLkdBTUVQQURfVVBdID4gdGhpcy5HQU1FUEFEX1RIUkVTSE9MRCkgewoJCXZhbHVlIHw9IDEgPDwgdGhpcy5VUDsKCX0KCWlmIChnYW1lcGFkLmJ1dHRvbnNbdGhpcy5HQU1FUEFEX1JJR0hUXSA+IHRoaXMuR0FNRVBBRF9USFJFU0hPTEQpIHsKCQl2YWx1ZSB8PSAxIDw8IHRoaXMuUklHSFQ7Cgl9CglpZiAoZ2FtZXBhZC5idXR0b25zW3RoaXMuR0FNRVBBRF9ET1dOXSA+IHRoaXMuR0FNRVBBRF9USFJFU0hPTEQpIHsKCQl2YWx1ZSB8PSAxIDw8IHRoaXMuRE9XTjsKCX0KCWlmIChnYW1lcGFkLmJ1dHRvbnNbdGhpcy5HQU1FUEFEX1NUQVJUXSA+IHRoaXMuR0FNRVBBRF9USFJFU0hPTEQpIHsKCQl2YWx1ZSB8PSAxIDw8IHRoaXMuU1RBUlQ7Cgl9CglpZiAoZ2FtZXBhZC5idXR0b25zW3RoaXMuR0FNRVBBRF9TRUxFQ1RdID4gdGhpcy5HQU1FUEFEX1RIUkVTSE9MRCkgewoJCXZhbHVlIHw9IDEgPDwgdGhpcy5TRUxFQ1Q7Cgl9CglpZiAoZ2FtZXBhZC5idXR0b25zW3RoaXMuR0FNRVBBRF9BXSA+IHRoaXMuR0FNRVBBRF9USFJFU0hPTEQpIHsKCQl2YWx1ZSB8PSAxIDw8IHRoaXMuQTsKCX0KCWlmIChnYW1lcGFkLmJ1dHRvbnNbdGhpcy5HQU1FUEFEX0JdID4gdGhpcy5HQU1FUEFEX1RIUkVTSE9MRCkgewoJCXZhbHVlIHw9IDEgPDwgdGhpcy5COwoJfQoJaWYgKGdhbWVwYWQuYnV0dG9uc1t0aGlzLkdBTUVQQURfTF0gPiB0aGlzLkdBTUVQQURfVEhSRVNIT0xEKSB7CgkJdmFsdWUgfD0gMSA8PCB0aGlzLkw7Cgl9CglpZiAoZ2FtZXBhZC5idXR0b25zW3RoaXMuR0FNRVBBRF9SXSA+IHRoaXMuR0FNRVBBRF9USFJFU0hPTEQpIHsKCQl2YWx1ZSB8PSAxIDw8IHRoaXMuUjsKCX0KCgl0aGlzLmN1cnJlbnREb3duID0gfnZhbHVlICYgMHgzRkY7Cn07CgpHYW1lQm95QWR2YW5jZUtleXBhZC5wcm90b3R5cGUuZ2FtZXBhZENvbm5lY3RIYW5kbGVyID0gZnVuY3Rpb24oZ2FtZXBhZCkgewoJdGhpcy5nYW1lcGFkcy5wdXNoKGdhbWVwYWQpOwp9OwoKR2FtZUJveUFkdmFuY2VLZXlwYWQucHJvdG90eXBlLmdhbWVwYWREaXNjb25uZWN0SGFuZGxlciA9IGZ1bmN0aW9uKGdhbWVwYWQpIHsKCXRoaXMuZ2FtZXBhZHMgPSBzZWxmLmdhbWVwYWRzLmZpbHRlcihmdW5jdGlvbihvdGhlcikgeyByZXR1cm4gb3RoZXIgIT0gZ2FtZXBhZCB9KTsKfTsKCkdhbWVCb3lBZHZhbmNlS2V5cGFkLnByb3RvdHlwZS5wb2xsR2FtZXBhZHMgPSBmdW5jdGlvbigpIHsKCXZhciBuYXZpZ2F0b3JMaXN0ID0gW107CglpZiAobmF2aWdhdG9yLndlYmtpdEdldEdhbWVwYWRzKSB7CgkJbmF2aWdhdG9yTGlzdCA9IG5hdmlnYXRvci53ZWJraXRHZXRHYW1lcGFkcygpOwoJfSBlbHNlIGlmIChuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMpIHsKCQluYXZpZ2F0b3JMaXN0ID0gbmF2aWdhdG9yLmdldEdhbWVwYWRzKCk7Cgl9CgoJLy8gTGV0J3MgYWxsIGdpdmUgYSBzaG91dCBvdXQgdG8gQ2hyb21lIGZvciBtYWtpbmcgdXMgZ2V0IHRoZSBnYW1lcGFkcyBFVkVSWSBGUkFNRQoJaWYgKG5hdmlnYXRvckxpc3QubGVuZ3RoKSB7CgkJdGhpcy5nYW1lcGFkcyA9IFtdOwoJfQoJZm9yICh2YXIgaSA9IDA7IGkgPCBuYXZpZ2F0b3JMaXN0Lmxlbmd0aDsgKytpKSB7CgkJaWYgKG5hdmlnYXRvckxpc3RbaV0pIHsKCQkJdGhpcy5nYW1lcGFkcy5wdXNoKG5hdmlnYXRvckxpc3RbaV0pOwoJCX0KCX0KCWlmICh0aGlzLmdhbWVwYWRzLmxlbmd0aCA+IDApIHsKCQl0aGlzLmdhbWVwYWRIYW5kbGVyKHRoaXMuZ2FtZXBhZHNbMF0pOwoJfQoKfTsKCkdhbWVCb3lBZHZhbmNlS2V5cGFkLnByb3RvdHlwZS5yZWdpc3RlckhhbmRsZXJzID0gZnVuY3Rpb24oKSB7Cgl3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsIHRoaXMua2V5Ym9hcmRIYW5kbGVyLmJpbmQodGhpcyksIHRydWUpOwoJd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImtleXVwIiwgdGhpcy5rZXlib2FyZEhhbmRsZXIuYmluZCh0aGlzKSwgdHJ1ZSk7CgoJd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImdhbWVwYWRjb25uZWN0ZWQiLCB0aGlzLmdhbWVwYWRDb25uZWN0SGFuZGxlci5iaW5kKHRoaXMpLCB0cnVlKTsKCXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJtb3pnYW1lcGFkY29ubmVjdGVkIiwgdGhpcy5nYW1lcGFkQ29ubmVjdEhhbmRsZXIuYmluZCh0aGlzKSwgdHJ1ZSk7Cgl3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigid2Via2l0Z2FtZXBhZGNvbm5lY3RlZCIsIHRoaXMuZ2FtZXBhZENvbm5lY3RIYW5kbGVyLmJpbmQodGhpcyksIHRydWUpOwoKCXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJnYW1lcGFkZGlzY29ubmVjdGVkIiwgdGhpcy5nYW1lcGFkRGlzY29ubmVjdEhhbmRsZXIuYmluZCh0aGlzKSwgdHJ1ZSk7Cgl3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibW96Z2FtZXBhZGRpc2Nvbm5lY3RlZCIsIHRoaXMuZ2FtZXBhZERpc2Nvbm5lY3RIYW5kbGVyLmJpbmQodGhpcyksIHRydWUpOwoJd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIndlYmtpdGdhbWVwYWRkaXNjb25uZWN0ZWQiLCB0aGlzLmdhbWVwYWREaXNjb25uZWN0SGFuZGxlci5iaW5kKHRoaXMpLCB0cnVlKTsKfTsK"></script>
<script src="data:@file/javascript;base64,ZnVuY3Rpb24gR2FtZUJveUFkdmFuY2VTSU8oKSB7Cgl0aGlzLlNJT19OT1JNQUxfOCA9IDA7Cgl0aGlzLlNJT19OT1JNQUxfMzIgPSAxOwoJdGhpcy5TSU9fTVVMVEkgPSAyOwoJdGhpcy5TSU9fVUFSVCA9IDM7Cgl0aGlzLlNJT19HUElPID0gODsKCXRoaXMuU0lPX0pPWUJVUyA9IDEyOwoKCXRoaXMuQkFVRCA9IFsgOTYwMCwgMzg0MDAsIDU3NjAwLCAxMTUyMDAgXTsKfQoKR2FtZUJveUFkdmFuY2VTSU8ucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7Cgl0aGlzLm1vZGUgPSB0aGlzLlNJT19HUElPOwoJdGhpcy5zZCA9IGZhbHNlOwoKCXRoaXMuaXJxID0gZmFsc2U7Cgl0aGlzLm11bHRpcGxheWVyID0gewoJCWJhdWQ6IDAsCgkJc2k6IDAsCgkJaWQ6IDAsCgkJZXJyb3I6IDAsCgkJYnVzeTogMCwKCgkJc3RhdGVzOiBbIDB4RkZGRiwgMHhGRkZGLCAweEZGRkYsIDB4RkZGRiBdCgl9OwoKCXRoaXMubGlua0xheWVyID0gbnVsbDsKfTsKCkdhbWVCb3lBZHZhbmNlU0lPLnByb3RvdHlwZS5zZXRNb2RlID0gZnVuY3Rpb24obW9kZSkgewoJaWYgKG1vZGUgJiAweDgpIHsKCQltb2RlICY9IDB4QzsKCX0gZWxzZSB7CgkJbW9kZSAmPSAweDM7Cgl9Cgl0aGlzLm1vZGUgPSBtb2RlOwoKCXRoaXMuY29yZS5JTkZPKCdTZXR0aW5nIFNJTyBtb2RlIHRvICcgKyBoZXgobW9kZSwgMSkpOwp9OwoKR2FtZUJveUFkdmFuY2VTSU8ucHJvdG90eXBlLndyaXRlUkNOVCA9IGZ1bmN0aW9uKHZhbHVlKSB7CglpZiAodGhpcy5tb2RlICE9IHRoaXMuU0lPX0dQSU8pIHsKCQlyZXR1cm47Cgl9CgoJdGhpcy5jb3JlLlNUVUIoJ0dlbmVyYWwgcHVycG9zZSBzZXJpYWwgbm90IHN1cHBvcnRlZCcpOwp9OwoKR2FtZUJveUFkdmFuY2VTSU8ucHJvdG90eXBlLndyaXRlU0lPQ05UID0gZnVuY3Rpb24odmFsdWUpIHsKCXN3aXRjaCAodGhpcy5tb2RlKSB7CgljYXNlIHRoaXMuU0lPX05PUk1BTF84OgoJCXRoaXMuY29yZS5TVFVCKCc4LWJpdCB0cmFuc2ZlciB1bnN1cHBvcnRlZCcpOwoJCWJyZWFrOwoJY2FzZSB0aGlzLlNJT19OT1JNQUxfMzI6CgkJdGhpcy5jb3JlLlNUVUIoJzMyLWJpdCB0cmFuc2ZlciB1bnN1cHBvcnRlZCcpOwoJCWJyZWFrOwoJY2FzZSB0aGlzLlNJT19NVUxUSToKCQl0aGlzLm11bHRpcGxheWVyLmJhdWQgPSB2YWx1ZSAmIDB4MDAwMzsKCQlpZiAodGhpcy5saW5rTGF5ZXIpIHsKCQkJdGhpcy5saW5rTGF5ZXIuc2V0QmF1ZCh0aGlzLkJBVURbdGhpcy5tdWx0aXBsYXllci5iYXVkXSk7CgkJfQoKCQlpZiAoIXRoaXMubXVsdGlwbGF5ZXIuc2kpIHsKCQkJdGhpcy5tdWx0aXBsYXllci5idXN5ID0gdmFsdWUgJiAweDAwODA7CgkJCWlmICh0aGlzLmxpbmtMYXllciAmJiB0aGlzLm11bHRpcGxheWVyLmJ1c3kpIHsKCQkJCXRoaXMubGlua0xheWVyLnN0YXJ0TXVsdGlwbGF5ZXJUcmFuc2ZlcigpOwoJCQl9CgkJfQoJCXRoaXMuaXJxID0gdmFsdWUgJiAweDQwMDA7CgkJYnJlYWs7CgljYXNlIHRoaXMuU0lPX1VBUlQ6CgkJdGhpcy5jb3JlLlNUVUIoJ1VBUlQgdW5zdXBwb3J0ZWQnKTsKCQlicmVhazsKCWNhc2UgdGhpcy5TSU9fR1BJTzoKCQkvLyBUaGlzIHJlZ2lzdGVyIGlzbid0IHVzZWQgaW4gZ2VuZXJhbC1wdXJwb3NlIG1vZGUKCQlicmVhazsKCWNhc2UgdGhpcy5TSU9fSk9ZQlVTOgoJCXRoaXMuY29yZS5TVFVCKCdKT1kgQlVTIHVuc3VwcG9ydGVkJyk7CgkJYnJlYWs7Cgl9Cn07CgpHYW1lQm95QWR2YW5jZVNJTy5wcm90b3R5cGUucmVhZFNJT0NOVCA9IGZ1bmN0aW9uKCkgewoJdmFyIHZhbHVlID0gKHRoaXMubW9kZSA8PCAxMikgJiAweEZGRkY7Cglzd2l0Y2ggKHRoaXMubW9kZSkgewoJY2FzZSB0aGlzLlNJT19OT1JNQUxfODoKCQl0aGlzLmNvcmUuU1RVQignOC1iaXQgdHJhbnNmZXIgdW5zdXBwb3J0ZWQnKTsKCQlicmVhazsKCWNhc2UgdGhpcy5TSU9fTk9STUFMXzMyOgoJCXRoaXMuY29yZS5TVFVCKCczMi1iaXQgdHJhbnNmZXIgdW5zdXBwb3J0ZWQnKTsKCQlicmVhazsKCWNhc2UgdGhpcy5TSU9fTVVMVEk6CgkJdmFsdWUgfD0gdGhpcy5tdWx0aXBsYXllci5iYXVkOwoJCXZhbHVlIHw9IHRoaXMubXVsdGlwbGF5ZXIuc2k7CgkJdmFsdWUgfD0gKCEhdGhpcy5zZCkgPDwgMzsKCQl2YWx1ZSB8PSB0aGlzLm11bHRpcGxheWVyLmlkIDw8IDQ7CgkJdmFsdWUgfD0gdGhpcy5tdWx0aXBsYXllci5lcnJvcjsKCQl2YWx1ZSB8PSB0aGlzLm11bHRpcGxheWVyLmJ1c3k7CgkJdmFsdWUgfD0gKCEhdGhpcy5tdWx0aXBsYXllci5pcnEpIDw8IDE0OwoJCWJyZWFrOwoJY2FzZSB0aGlzLlNJT19VQVJUOgoJCXRoaXMuY29yZS5TVFVCKCdVQVJUIHVuc3VwcG9ydGVkJyk7CgkJYnJlYWs7CgljYXNlIHRoaXMuU0lPX0dQSU86CgkJLy8gVGhpcyByZWdpc3RlciBpc24ndCB1c2VkIGluIGdlbmVyYWwtcHVycG9zZSBtb2RlCgkJYnJlYWs7CgljYXNlIHRoaXMuU0lPX0pPWUJVUzoKCQl0aGlzLmNvcmUuU1RVQignSk9ZIEJVUyB1bnN1cHBvcnRlZCcpOwoJCWJyZWFrOwoJfQoJcmV0dXJuIHZhbHVlOwp9OwoKR2FtZUJveUFkdmFuY2VTSU8ucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbihzbG90KSB7Cglzd2l0Y2ggKHRoaXMubW9kZSkgewoJY2FzZSB0aGlzLlNJT19OT1JNQUxfMzI6CgkJdGhpcy5jb3JlLlNUVUIoJzMyLWJpdCB0cmFuc2ZlciB1bnN1cHBvcnRlZCcpOwoJCWJyZWFrOwoJY2FzZSB0aGlzLlNJT19NVUxUSToKCQlyZXR1cm4gdGhpcy5tdWx0aXBsYXllci5zdGF0ZXNbc2xvdF07CgljYXNlIHRoaXMuU0lPX1VBUlQ6CgkJdGhpcy5jb3JlLlNUVUIoJ1VBUlQgdW5zdXBwb3J0ZWQnKTsKCQlicmVhazsKCWRlZmF1bHQ6CgkJdGhpcy5jb3JlLldBUk4oJ1JlYWRpbmcgZnJvbSB0cmFuc2ZlciByZWdpc3RlciBpbiB1bnN1cHBvcnRlZCBtb2RlJyk7CgkJYnJlYWs7Cgl9CglyZXR1cm4gMDsKfTsK"></script>
<script src="data:@file/javascript;base64,ZnVuY3Rpb24gU1JBTVNhdmVkYXRhKHNpemUpIHsKCU1lbW9yeVZpZXcuY2FsbCh0aGlzLCBuZXcgQXJyYXlCdWZmZXIoc2l6ZSksIDApOwoKCXRoaXMud3JpdGVQZW5kaW5nID0gZmFsc2U7Cn07CgpTUkFNU2F2ZWRhdGEucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShNZW1vcnlWaWV3LnByb3RvdHlwZSk7CgpTUkFNU2F2ZWRhdGEucHJvdG90eXBlLnN0b3JlOCA9IGZ1bmN0aW9uKG9mZnNldCwgdmFsdWUpIHsKCXRoaXMudmlldy5zZXRJbnQ4KG9mZnNldCwgdmFsdWUpOwoJdGhpcy53cml0ZVBlbmRpbmcgPSB0cnVlOwp9OwoKU1JBTVNhdmVkYXRhLnByb3RvdHlwZS5zdG9yZTE2ID0gZnVuY3Rpb24ob2Zmc2V0LCB2YWx1ZSkgewoJdGhpcy52aWV3LnNldEludDE2KG9mZnNldCwgdmFsdWUsIHRydWUpOwoJdGhpcy53cml0ZVBlbmRpbmcgPSB0cnVlOwp9OwoKU1JBTVNhdmVkYXRhLnByb3RvdHlwZS5zdG9yZTMyID0gZnVuY3Rpb24ob2Zmc2V0LCB2YWx1ZSkgewoJdGhpcy52aWV3LnNldEludDMyKG9mZnNldCwgdmFsdWUsIHRydWUpOwoJdGhpcy53cml0ZVBlbmRpbmcgPSB0cnVlOwp9OwoKZnVuY3Rpb24gRmxhc2hTYXZlZGF0YShzaXplKSB7CglNZW1vcnlWaWV3LmNhbGwodGhpcywgbmV3IEFycmF5QnVmZmVyKHNpemUpLCAwKTsKCgl0aGlzLkNPTU1BTkRfV0lQRSA9IDB4MTA7Cgl0aGlzLkNPTU1BTkRfRVJBU0VfU0VDVE9SID0gMHgzMDsKCXRoaXMuQ09NTUFORF9FUkFTRSA9IDB4ODA7Cgl0aGlzLkNPTU1BTkRfSUQgPSAweDkwOwoJdGhpcy5DT01NQU5EX1dSSVRFID0gMHhBMDsKCXRoaXMuQ09NTUFORF9TV0lUQ0hfQkFOSyA9IDB4QjA7Cgl0aGlzLkNPTU1BTkRfVEVSTUlOQVRFX0lEID0gMHhGMDsKCgl0aGlzLklEX1BBTkFTT05JQyA9IDB4MUIzMjsKCXRoaXMuSURfU0FOWU8gPSAweDEzNjI7CgoJdGhpcy5iYW5rMCA9IG5ldyBEYXRhVmlldyh0aGlzLmJ1ZmZlciwgMCwgMHgwMDAxMDAwMCk7CglpZiAoc2l6ZSA+IDB4MDAwMTAwMDApIHsKCQl0aGlzLmlkID0gdGhpcy5JRF9TQU5ZTzsKCQl0aGlzLmJhbmsxID0gbmV3IERhdGFWaWV3KHRoaXMuYnVmZmVyLCAweDAwMDEwMDAwKTsKCX0gZWxzZSB7CgkJdGhpcy5pZCA9IHRoaXMuSURfUEFOQVNPTklDOwoJCXRoaXMuYmFuazEgPSBudWxsOwoJfQoJdGhpcy5iYW5rID0gdGhpcy5iYW5rMDsKCgl0aGlzLmlkTW9kZSA9IGZhbHNlOwoJdGhpcy53cml0ZVBlbmRpbmcgPSBmYWxzZTsKCgl0aGlzLmZpcnN0ID0gMDsKCXRoaXMuc2Vjb25kID0gMDsKCXRoaXMuY29tbWFuZCA9IDA7Cgl0aGlzLnBlbmRpbmdDb21tYW5kID0gMDsKfTsKCkZsYXNoU2F2ZWRhdGEucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShNZW1vcnlWaWV3LnByb3RvdHlwZSk7CgpGbGFzaFNhdmVkYXRhLnByb3RvdHlwZS5sb2FkOCA9IGZ1bmN0aW9uKG9mZnNldCkgewoJaWYgKHRoaXMuaWRNb2RlICYmIG9mZnNldCA8IDIpIHsKCQlyZXR1cm4gKHRoaXMuaWQgPj4gKG9mZnNldCA8PCAzKSkgJiAweEZGOwoJfSBlbHNlIGlmIChvZmZzZXQgPCAweDEwMDAwKSB7CgkJcmV0dXJuIHRoaXMuYmFuay5nZXRJbnQ4KG9mZnNldCk7Cgl9IGVsc2UgewoJCXJldHVybiAwOwoJfQp9OwoKRmxhc2hTYXZlZGF0YS5wcm90b3R5cGUubG9hZDE2ID0gZnVuY3Rpb24ob2Zmc2V0KSB7CglyZXR1cm4gKHRoaXMubG9hZDgob2Zmc2V0KSAmIDB4RkYpIHwgKHRoaXMubG9hZDgob2Zmc2V0ICsgMSkgPDwgOCk7Cn07CgpGbGFzaFNhdmVkYXRhLnByb3RvdHlwZS5sb2FkMzIgPSBmdW5jdGlvbihvZmZzZXQpIHsKCXJldHVybiAodGhpcy5sb2FkOChvZmZzZXQpICYgMHhGRikgfCAodGhpcy5sb2FkOChvZmZzZXQgKyAxKSA8PCA4KSB8ICh0aGlzLmxvYWQ4KG9mZnNldCArIDIpIDw8IDE2KSB8ICh0aGlzLmxvYWQ4KG9mZnNldCArIDMpIDw8IDI0KTsKfTsKCkZsYXNoU2F2ZWRhdGEucHJvdG90eXBlLmxvYWRVOCA9IGZ1bmN0aW9uKG9mZnNldCkgewoJcmV0dXJuIHRoaXMubG9hZDgob2Zmc2V0KSAmIDB4RkY7Cn07CgpGbGFzaFNhdmVkYXRhLnByb3RvdHlwZS5sb2FkVTE2ID0gZnVuY3Rpb24ob2Zmc2V0KSB7CglyZXR1cm4gKHRoaXMubG9hZFU4KG9mZnNldCkgJiAweEZGKSB8ICh0aGlzLmxvYWRVOChvZmZzZXQgKyAxKSA8PCA4KTsKfTsKCkZsYXNoU2F2ZWRhdGEucHJvdG90eXBlLnN0b3JlOCA9IGZ1bmN0aW9uKG9mZnNldCwgdmFsdWUpIHsKCXN3aXRjaCAodGhpcy5jb21tYW5kKSB7CgljYXNlIDA6CgkJaWYgKG9mZnNldCA9PSAweDU1NTUpIHsKCQkJaWYgKHRoaXMuc2Vjb25kID09IDB4NTUpIHsKCQkJCXN3aXRjaCAodmFsdWUpIHsKCQkJCWNhc2UgdGhpcy5DT01NQU5EX0VSQVNFOgoJCQkJCXRoaXMucGVuZGluZ0NvbW1hbmQgPSB2YWx1ZTsKCQkJCQlicmVhazsKCQkJCWNhc2UgdGhpcy5DT01NQU5EX0lEOgoJCQkJCXRoaXMuaWRNb2RlID0gdHJ1ZTsKCQkJCQlicmVhazsKCQkJCWNhc2UgdGhpcy5DT01NQU5EX1RFUk1JTkFURV9JRDoKCQkJCQl0aGlzLmlkTW9kZSA9IGZhbHNlOwoJCQkJCWJyZWFrOwoJCQkJZGVmYXVsdDoKCQkJCQl0aGlzLmNvbW1hbmQgPSB2YWx1ZTsKCQkJCQlicmVhazsKCQkJCX0KCQkJCXRoaXMuc2Vjb25kID0gMDsKCQkJCXRoaXMuZmlyc3QgPSAwOwoJCQl9IGVsc2UgewoJCQkJdGhpcy5jb21tYW5kID0gMDsKCQkJCXRoaXMuZmlyc3QgPSB2YWx1ZTsKCQkJCXRoaXMuaWRNb2RlID0gZmFsc2U7CgkJCX0KCQl9IGVsc2UgaWYgKG9mZnNldCA9PSAweDJBQUEgJiYgdGhpcy5maXJzdCA9PSAweEFBKSB7CgkJCXRoaXMuZmlyc3QgPSAwOwoJCQlpZiAodGhpcy5wZW5kaW5nQ29tbWFuZCkgewoJCQkJdGhpcy5jb21tYW5kID0gdGhpcy5wZW5kaW5nQ29tbWFuZDsKCQkJfSBlbHNlIHsKCQkJCXRoaXMuc2Vjb25kID0gdmFsdWU7CgkJCX0KCQl9CgkJYnJlYWs7CgljYXNlIHRoaXMuQ09NTUFORF9FUkFTRToKCQlzd2l0Y2ggKHZhbHVlKSB7CgkJY2FzZSB0aGlzLkNPTU1BTkRfV0lQRToKCQkJaWYgKG9mZnNldCA9PSAweDU1NTUpIHsKCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy52aWV3LmJ5dGVMZW5ndGg7IGkgKz0gNCkgewoJCQkJCXRoaXMudmlldy5zZXRJbnQzMihpLCAtMSk7CgkJCQl9CgkJCX0KCQkJYnJlYWs7CgkJY2FzZSB0aGlzLkNPTU1BTkRfRVJBU0VfU0VDVE9SOgoJCQlpZiAoKG9mZnNldCAmIDB4MEZGRikgPT0gMCkgewoJCQkJZm9yICh2YXIgaSA9IG9mZnNldDsgaSA8IG9mZnNldCArIDB4MTAwMDsgaSArPSA0KSB7CgkJCQkJdGhpcy5iYW5rLnNldEludDMyKGksIC0xKTsKCQkJCX0KCQkJfQoJCQlicmVhazsKCQl9CgkJdGhpcy5wZW5kaW5nQ29tbWFuZCA9IDA7CgkJdGhpcy5jb21tYW5kID0gMDsKCQlicmVhazsKCWNhc2UgdGhpcy5DT01NQU5EX1dSSVRFOgoJCXRoaXMuYmFuay5zZXRJbnQ4KG9mZnNldCwgdmFsdWUpOwoJCXRoaXMuY29tbWFuZCA9IDA7CgoJCXRoaXMud3JpdGVQZW5kaW5nID0gdHJ1ZTsKCQlicmVhazsKCWNhc2UgdGhpcy5DT01NQU5EX1NXSVRDSF9CQU5LOgoJCWlmICh0aGlzLmJhbmsxICYmIG9mZnNldCA9PSAwKSB7CgkJCWlmICh2YWx1ZSA9PSAxKSB7CgkJCQl0aGlzLmJhbmsgPSB0aGlzLmJhbmsxOwoJCQl9IGVsc2UgewoJCQkJdGhpcy5iYW5rID0gdGhpcy5iYW5rMDsKCQkJfQoJCX0KCQl0aGlzLmNvbW1hbmQgPSAwOwoJCWJyZWFrOwoJfQp9OwoKRmxhc2hTYXZlZGF0YS5wcm90b3R5cGUuc3RvcmUxNiA9IGZ1bmN0aW9uKG9mZnNldCwgdmFsdWUpIHsKCXRocm93IG5ldyBFcnJvcigiVW5hbGlnbmVkIHNhdmUgdG8gZmxhc2ghIik7Cn07CgpGbGFzaFNhdmVkYXRhLnByb3RvdHlwZS5zdG9yZTMyID0gZnVuY3Rpb24ob2Zmc2V0LCB2YWx1ZSkgewoJdGhyb3cgbmV3IEVycm9yKCJVbmFsaWduZWQgc2F2ZSB0byBmbGFzaCEiKTsKfTsKCkZsYXNoU2F2ZWRhdGEucHJvdG90eXBlLnJlcGxhY2VEYXRhID0gZnVuY3Rpb24obWVtb3J5KSB7Cgl2YXIgYmFuayA9IHRoaXMudmlldyA9PT0gdGhpcy5iYW5rMTsKCU1lbW9yeVZpZXcucHJvdG90eXBlLnJlcGxhY2VEYXRhLmNhbGwodGhpcywgbWVtb3J5LCAwKTsKCgl0aGlzLmJhbmswID0gbmV3IERhdGFWaWV3KHRoaXMuYnVmZmVyLCAwLCAweDAwMDEwMDAwKTsKCWlmIChtZW1vcnkuYnl0ZUxlbmd0aCA+IDB4MDAwMTAwMDApIHsKCQl0aGlzLmJhbmsxID0gbmV3IERhdGFWaWV3KHRoaXMuYnVmZmVyLCAweDAwMDEwMDAwKTsKCX0gZWxzZSB7CgkJdGhpcy5iYW5rMSA9IG51bGw7Cgl9Cgl0aGlzLmJhbmsgPSBiYW5rID8gdGhpcy5iYW5rMSA6IHRoaXMuYmFuazA7Cn07CgpmdW5jdGlvbiBFRVBST01TYXZlZGF0YShzaXplLCBtbXUpIHsKCU1lbW9yeVZpZXcuY2FsbCh0aGlzLCBuZXcgQXJyYXlCdWZmZXIoc2l6ZSksIDApOwoKCXRoaXMud3JpdGVBZGRyZXNzID0gMDsKCXRoaXMucmVhZEJpdHNSZW1haW5pbmcgPSAwOwoJdGhpcy5yZWFkQWRkcmVzcyA9IDA7CgoJdGhpcy5jb21tYW5kID0gMDsKCXRoaXMuY29tbWFuZEJpdHNSZW1haW5pbmcgPSAwOwoKCXRoaXMucmVhbFNpemUgPSAwOwoJdGhpcy5hZGRyZXNzQml0cyA9IDA7Cgl0aGlzLndyaXRlUGVuZGluZyA9IGZhbHNlOwoKCXRoaXMuZG1hID0gbW11LmNvcmUuaXJxLmRtYVszXTsKCgl0aGlzLkNPTU1BTkRfTlVMTCA9IDA7Cgl0aGlzLkNPTU1BTkRfUEVORElORyA9IDE7Cgl0aGlzLkNPTU1BTkRfV1JJVEUgPSAyOwoJdGhpcy5DT01NQU5EX1JFQURfUEVORElORyA9IDM7Cgl0aGlzLkNPTU1BTkRfUkVBRCA9IDQ7Cn07CgpFRVBST01TYXZlZGF0YS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE1lbW9yeVZpZXcucHJvdG90eXBlKTsKCkVFUFJPTVNhdmVkYXRhLnByb3RvdHlwZS5sb2FkOCA9IGZ1bmN0aW9uKG9mZnNldCkgewoJdGhyb3cgbmV3IEVycm9yKCJVbnN1cHBvcnRlZCA4LWJpdCBhY2Nlc3MhIik7Cn07CgpFRVBST01TYXZlZGF0YS5wcm90b3R5cGUubG9hZDE2ID0gZnVuY3Rpb24ob2Zmc2V0KSB7CglyZXR1cm4gdGhpcy5sb2FkVTE2KG9mZnNldCk7Cn07CgpFRVBST01TYXZlZGF0YS5wcm90b3R5cGUubG9hZFU4ID0gZnVuY3Rpb24ob2Zmc2V0KSB7Cgl0aHJvdyBuZXcgRXJyb3IoIlVuc3VwcG9ydGVkIDgtYml0IGFjY2VzcyEiKTsKfTsKCkVFUFJPTVNhdmVkYXRhLnByb3RvdHlwZS5sb2FkVTE2ID0gZnVuY3Rpb24ob2Zmc2V0KSB7CglpZiAodGhpcy5jb21tYW5kICE9IHRoaXMuQ09NTUFORF9SRUFEIHx8ICF0aGlzLmRtYS5lbmFibGUpIHsKCQlyZXR1cm4gMTsKCX0KCS0tdGhpcy5yZWFkQml0c1JlbWFpbmluZzsKCWlmICh0aGlzLnJlYWRCaXRzUmVtYWluaW5nIDwgNjQpIHsKCQl2YXIgc3RlcCA9IDYzIC0gdGhpcy5yZWFkQml0c1JlbWFpbmluZzsKCQl2YXIgZGF0YSA9IHRoaXMudmlldy5nZXRVaW50OCgodGhpcy5yZWFkQWRkcmVzcyArIHN0ZXApID4+IDMsIGZhbHNlKSA+PiAoMHg3IC0gKHN0ZXAgJiAweDcpKTsKCQlpZiAoIXRoaXMucmVhZEJpdHNSZW1haW5pbmcpIHsKCQkJdGhpcy5jb21tYW5kID0gdGhpcy5DT01NQU5EX05VTEw7CgkJfQoJCXJldHVybiBkYXRhICYgMHgxOwoJfQoJcmV0dXJuIDA7Cn07CgpFRVBST01TYXZlZGF0YS5wcm90b3R5cGUubG9hZDMyID0gZnVuY3Rpb24ob2Zmc2V0KSB7Cgl0aHJvdyBuZXcgRXJyb3IoIlVuc3VwcG9ydGVkIDMyLWJpdCBhY2Nlc3MhIik7Cn07CgpFRVBST01TYXZlZGF0YS5wcm90b3R5cGUuc3RvcmU4ID0gZnVuY3Rpb24ob2Zmc2V0LCB2YWx1ZSkgewoJdGhyb3cgbmV3IEVycm9yKCJVbnN1cHBvcnRlZCA4LWJpdCBhY2Nlc3MhIik7Cn07CgpFRVBST01TYXZlZGF0YS5wcm90b3R5cGUuc3RvcmUxNiA9IGZ1bmN0aW9uKG9mZnNldCwgdmFsdWUpIHsKCXN3aXRjaCAodGhpcy5jb21tYW5kKSB7CgkvLyBSZWFkIGhlYWRlcgoJY2FzZSB0aGlzLkNPTU1BTkRfTlVMTDoKCWRlZmF1bHQ6CgkJdGhpcy5jb21tYW5kID0gdmFsdWUgJiAweDE7CgkJYnJlYWs7CgljYXNlIHRoaXMuQ09NTUFORF9QRU5ESU5HOgoJCXRoaXMuY29tbWFuZCA8PD0gMTsKCQl0aGlzLmNvbW1hbmQgfD0gdmFsdWUgJiAweDE7CgkJaWYgKHRoaXMuY29tbWFuZCA9PSB0aGlzLkNPTU1BTkRfV1JJVEUpIHsKCQkJaWYgKCF0aGlzLnJlYWxTaXplKSB7CgkJCQl2YXIgYml0cyA9IHRoaXMuZG1hLmNvdW50IC0gNjc7CgkJCQl0aGlzLnJlYWxTaXplID0gOCA8PCBiaXRzOwoJCQkJdGhpcy5hZGRyZXNzQml0cyA9IGJpdHM7CgkJCX0KCQkJdGhpcy5jb21tYW5kQml0c1JlbWFpbmluZyA9IHRoaXMuYWRkcmVzc0JpdHMgKyA2NCArIDE7CgkJCXRoaXMud3JpdGVBZGRyZXNzID0gMDsKCQl9IGVsc2UgewoJCQlpZiAoIXRoaXMucmVhbFNpemUpIHsKCQkJCXZhciBiaXRzID0gdGhpcy5kbWEuY291bnQgLSAzOwoJCQkJdGhpcy5yZWFsU2l6ZSA9IDggPDwgYml0czsKCQkJCXRoaXMuYWRkcmVzc0JpdHMgPSBiaXRzOwoJCQl9CgkJCXRoaXMuY29tbWFuZEJpdHNSZW1haW5pbmcgPSB0aGlzLmFkZHJlc3NCaXRzICsgMTsKCQkJdGhpcy5yZWFkQWRkcmVzcyA9IDA7CgkJfQoJCWJyZWFrOwoJLy8gRG8gY29tbWFuZHMKCWNhc2UgdGhpcy5DT01NQU5EX1dSSVRFOgoJCS8vIFdyaXRlCgkJaWYgKC0tdGhpcy5jb21tYW5kQml0c1JlbWFpbmluZyA+IDY0KSB7CgkJCXRoaXMud3JpdGVBZGRyZXNzIDw8PSAxOwoJCQl0aGlzLndyaXRlQWRkcmVzcyB8PSAodmFsdWUgJiAweDEpIDw8IDY7CgkJfSBlbHNlIGlmICh0aGlzLmNvbW1hbmRCaXRzUmVtYWluaW5nIDw9IDApIHsKCQkJdGhpcy5jb21tYW5kID0gdGhpcy5DT01NQU5EX05VTEw7CgkJCXRoaXMud3JpdGVQZW5kaW5nID0gdHJ1ZTsKCQl9IGVsc2UgewoJCQl2YXIgY3VycmVudCA9IHRoaXMudmlldy5nZXRVaW50OCh0aGlzLndyaXRlQWRkcmVzcyA+PiAzKTsKCQkJY3VycmVudCAmPSB+KDEgPDwgKDB4NyAtICh0aGlzLndyaXRlQWRkcmVzcyAmIDB4NykpKTsKCQkJY3VycmVudCB8PSAodmFsdWUgJiAweDEpIDw8ICgweDcgLSAodGhpcy53cml0ZUFkZHJlc3MgJiAweDcpKTsKCQkJdGhpcy52aWV3LnNldFVpbnQ4KHRoaXMud3JpdGVBZGRyZXNzID4+IDMsIGN1cnJlbnQpOwoJCQkrK3RoaXMud3JpdGVBZGRyZXNzOwoJCX0KCQlicmVhazsKCWNhc2UgdGhpcy5DT01NQU5EX1JFQURfUEVORElORzoKCQkvLyBSZWFkCgkJaWYgKC0tdGhpcy5jb21tYW5kQml0c1JlbWFpbmluZyA+IDApIHsKCQkJdGhpcy5yZWFkQWRkcmVzcyA8PD0gMTsKCQkJaWYgKHZhbHVlICYgMHgxKSB7CgkJCQl0aGlzLnJlYWRBZGRyZXNzIHw9IDB4NDA7CgkJCX0KCQl9IGVsc2UgewoJCQl0aGlzLnJlYWRCaXRzUmVtYWluaW5nID0gNjg7CgkJCXRoaXMuY29tbWFuZCA9IHRoaXMuQ09NTUFORF9SRUFEOwoJCX0KCQlicmVhazsKCX0KfTsKCkVFUFJPTVNhdmVkYXRhLnByb3RvdHlwZS5zdG9yZTMyID0gZnVuY3Rpb24ob2Zmc2V0LCB2YWx1ZSkgewoJdGhyb3cgbmV3IEVycm9yKCJVbnN1cHBvcnRlZCAzMi1iaXQgYWNjZXNzISIpOwp9OwoKRUVQUk9NU2F2ZWRhdGEucHJvdG90eXBlLnJlcGxhY2VEYXRhID0gZnVuY3Rpb24obWVtb3J5KSB7CglNZW1vcnlWaWV3LnByb3RvdHlwZS5yZXBsYWNlRGF0YS5jYWxsKHRoaXMsIG1lbW9yeSwgMCk7Cn07Cg=="></script>
<script src="data:@file/javascript;base64,ZnVuY3Rpb24gR2FtZUJveUFkdmFuY2VHUElPKGNvcmUsIHJvbSkgewoJdGhpcy5jb3JlID0gY29yZTsKCXRoaXMucm9tID0gcm9tOwoKCXRoaXMucmVhZFdyaXRlID0gMDsKCXRoaXMuZGlyZWN0aW9uID0gMDsKCgl0aGlzLmRldmljZSA9IG5ldyBHYW1lQm95QWR2YW5jZVJUQyh0aGlzKTsgLy8gVE9ETzogU3VwcG9ydCBtb3JlIGRldmljZXMKfTsKCkdhbWVCb3lBZHZhbmNlR1BJTy5wcm90b3R5cGUuc3RvcmUxNiA9IGZ1bmN0aW9uKG9mZnNldCwgdmFsdWUpIHsKCXN3aXRjaCAob2Zmc2V0KSB7CgljYXNlIDB4QzQ6CgkJdGhpcy5kZXZpY2Uuc2V0UGlucyh2YWx1ZSAmIDB4Rik7CgkJYnJlYWs7CgljYXNlIDB4QzY6CgkJdGhpcy5kaXJlY3Rpb24gPSB2YWx1ZSAmIDB4RjsKCQl0aGlzLmRldmljZS5zZXREaXJlY3Rpb24odGhpcy5kaXJlY3Rpb24pOwoJCWJyZWFrOwoJY2FzZSAweEM4OgoJCXRoaXMucmVhZFdyaXRlID0gdmFsdWUgJiAxOwoJCWJyZWFrOwoJZGVmYXVsdDoKCQl0aHJvdyBuZXcgRXJyb3IoJ0JVRzogQmFkIG9mZnNldCBwYXNzZWQgdG8gR1BJTzogJyArIG9mZnNldC50b1N0cmluZygxNikpOwoJfQoJaWYgKHRoaXMucmVhZFdyaXRlKSB7CgkJdmFyIG9sZCA9IHRoaXMucm9tLnZpZXcuZ2V0VWludDE2KG9mZnNldCwgdHJ1ZSk7CgkJb2xkICY9IH50aGlzLmRpcmVjdGlvbjsKCQl0aGlzLnJvbS52aWV3LnNldFVpbnQxNihvZmZzZXQsIG9sZCB8ICh2YWx1ZSAmIHRoaXMuZGlyZWN0aW9uKSwgdHJ1ZSk7Cgl9Cn07CgpHYW1lQm95QWR2YW5jZUdQSU8ucHJvdG90eXBlLm91dHB1dFBpbnMgPSBmdW5jdGlvbihueWJibGUpIHsKCWlmICh0aGlzLnJlYWRXcml0ZSkgewoJCXZhciBvbGQgPSB0aGlzLnJvbS52aWV3LmdldFVpbnQxNigweEM0LCB0cnVlKTsKCQlvbGQgJj0gdGhpcy5kaXJlY3Rpb247CgkJdGhpcy5yb20udmlldy5zZXRVaW50MTYoMHhDNCwgb2xkIHwgKG55YmJsZSAmIH50aGlzLmRpcmVjdGlvbiAmIDB4RiksIHRydWUpOwoJfQp9OwoKZnVuY3Rpb24gR2FtZUJveUFkdmFuY2VSVEMoZ3BpbykgewoJdGhpcy5ncGlvID0gZ3BpbzsKCgkvLyBQSU5PVVQ6IFNDSyB8IFNJTyB8IENTIHwgLQoJdGhpcy5waW5zID0gMDsKCXRoaXMuZGlyZWN0aW9uID0gMDsKCgl0aGlzLnRvdGFsQnl0ZXMgPSBbCgkJMCwgLy8gRm9yY2UgcmVzZXQKCQkwLCAvLyBFbXB0eQoJCTcsIC8vIERhdGUvVGltZQoJCTAsIC8vIEZvcmNlIElSUQoJCTEsIC8vIENvbnRyb2wgcmVnaXN0ZXIKCQkwLCAvLyBFbXB0eQoJCTMsIC8vIFRpbWUKCQkwIC8vIEVtcHR5CgldOwoJdGhpcy5ieXRlc1JlbWFpbmluZyA9IDA7CgoJLy8gVHJhbnNmZXIgc2VxdWVuY2U6CgkvLyA9PSBJbml0aWF0ZQoJLy8gPiBISSB8IC0gfCBMTyB8IC0KCS8vID4gSEkgfCAtIHwgSEkgfCAtCgkvLyA9PSBUcmFuc2ZlciBiaXQgKHg4KQoJLy8gPiBMTyB8IHggfCBISSB8IC0KCS8vID4gSEkgfCAtIHwgSEkgfCAtCgkvLyA8ID8/IHwgeCB8ID8/IHwgLQoJLy8gPT0gVGVybWluYXRlCgkvLyA+ICAtIHwgLSB8IExPIHwgLQoJdGhpcy50cmFuc2ZlclN0ZXAgPSAwOwoKCXRoaXMucmVhZGluZyA9IDA7Cgl0aGlzLmJpdHNSZWFkID0gMDsKCXRoaXMuYml0cyA9IDA7Cgl0aGlzLmNvbW1hbmQgPSAtMTsKCgl0aGlzLmNvbnRyb2wgPSAweDQwOwoJdGhpcy50aW1lID0gWwoJCTAsIC8vIFllYXIKCQkwLCAvLyBNb250aAoJCTAsIC8vIERheQoJCTAsIC8vIERheSBvZiB3ZWVrCgkJMCwgLy8gSG91cgoJCTAsIC8vIE1pbnV0ZQoJCTAgLy8gU2Vjb25kCgldOwp9OwoKR2FtZUJveUFkdmFuY2VSVEMucHJvdG90eXBlLnNldFBpbnMgPSBmdW5jdGlvbihueWJibGUpIHsKCXN3aXRjaCAodGhpcy50cmFuc2ZlclN0ZXApIHsKCWNhc2UgMDoKCQlpZiAoKG55YmJsZSAmIDUpID09IDEpIHsKCQkJdGhpcy50cmFuc2ZlclN0ZXAgPSAxOwoJCX0KCQlicmVhazsKCWNhc2UgMToKCQlpZiAobnliYmxlICYgNCkgewoJCQl0aGlzLnRyYW5zZmVyU3RlcCA9IDI7CgkJfQoJCWJyZWFrOwoJY2FzZSAyOgoJCWlmICghKG55YmJsZSAmIDEpKSB7CgkJCXRoaXMuYml0cyAmPSB+KDEgPDwgdGhpcy5iaXRzUmVhZCk7CgkJCXRoaXMuYml0cyB8PSAoKG55YmJsZSAmIDIpID4+IDEpIDw8IHRoaXMuYml0c1JlYWQ7CgkJfSBlbHNlIHsKCQkJaWYgKG55YmJsZSAmIDQpIHsKCQkJCS8vIFNJTyBkaXJlY3Rpb24gc2hvdWxkIGFsd2F5cyAhPSB0aGlzLnJlYWQKCQkJCWlmICgodGhpcy5kaXJlY3Rpb24gJiAyKSAmJiAhdGhpcy5yZWFkKSB7CgkJCQkJKyt0aGlzLmJpdHNSZWFkOwoJCQkJCWlmICh0aGlzLmJpdHNSZWFkID09IDgpIHsKCQkJCQkJdGhpcy5wcm9jZXNzQnl0ZSgpOwoJCQkJCX0KCQkJCX0gZWxzZSB7CgkJCQkJdGhpcy5ncGlvLm91dHB1dFBpbnMoNSB8ICh0aGlzLnNpb091dHB1dFBpbigpIDw8IDEpKTsKCQkJCQkrK3RoaXMuYml0c1JlYWQ7CgkJCQkJaWYgKHRoaXMuYml0c1JlYWQgPT0gOCkgewoJCQkJCQktLXRoaXMuYnl0ZXNSZW1haW5pbmc7CgkJCQkJCWlmICh0aGlzLmJ5dGVzUmVtYWluaW5nIDw9IDApIHsKCQkJCQkJCXRoaXMuY29tbWFuZCA9IC0xOwoJCQkJCQl9CgkJCQkJCXRoaXMuYml0c1JlYWQgPSAwOwoJCQkJCX0KCQkJCX0KCQkJfSBlbHNlIHsKCQkJCXRoaXMuYml0c1JlYWQgPSAwOwoJCQkJdGhpcy5ieXRlc1JlbWFpbmluZyA9IDA7CgkJCQl0aGlzLmNvbW1hbmQgPSAtMTsKCQkJCXRoaXMudHJhbnNmZXJTdGVwID0gMDsKCQkJfQoJCX0KCQlicmVhazsKCX0KCgl0aGlzLnBpbnMgPSBueWJibGUgJiA3Owp9OwoKR2FtZUJveUFkdmFuY2VSVEMucHJvdG90eXBlLnNldERpcmVjdGlvbiA9IGZ1bmN0aW9uKGRpcmVjdGlvbikgewoJdGhpcy5kaXJlY3Rpb24gPSBkaXJlY3Rpb247Cn07CgpHYW1lQm95QWR2YW5jZVJUQy5wcm90b3R5cGUucHJvY2Vzc0J5dGUgPSBmdW5jdGlvbigpIHsKCS0tdGhpcy5ieXRlc1JlbWFpbmluZzsKCXN3aXRjaCAodGhpcy5jb21tYW5kKSB7CgljYXNlIC0xOgoJCWlmICgodGhpcy5iaXRzICYgMHgwRikgPT0gMHgwNikgewoJCQl0aGlzLmNvbW1hbmQgPSAodGhpcy5iaXRzID4+IDQpICYgNzsKCQkJdGhpcy5yZWFkaW5nID0gdGhpcy5iaXRzICYgMHg4MDsKCgkJCXRoaXMuYnl0ZXNSZW1haW5pbmcgPSB0aGlzLnRvdGFsQnl0ZXNbdGhpcy5jb21tYW5kXTsKCQkJc3dpdGNoICh0aGlzLmNvbW1hbmQpIHsKCQkJY2FzZSAwOgoJCQkJdGhpcy5jb250cm9sID0gMDsKCQkJCWJyZWFrOwoJCQljYXNlIDI6CgkJCWNhc2UgNjoKCQkJCXRoaXMudXBkYXRlQ2xvY2soKTsKCQkJCWJyZWFrOwoJCQl9CgkJfSBlbHNlIHsKCQkJdGhpcy5ncGlvLmNvcmUuV0FSTignSW52YWxpZCBSVEMgY29tbWFuZCBieXRlOiAnICsgdGhpcy5iaXRzLnRvU3RyaW5nKDE2KSk7CgkJfQoJCWJyZWFrOwoJY2FzZSA0OgoJCS8vIENvbnRyb2wKCQl0aGlzLmNvbnRyb2wgPSB0aGlzLmJpdHMgJiAweDQwOwoJCWJyZWFrOwoJfQkKCXRoaXMuYml0cyA9IDA7Cgl0aGlzLmJpdHNSZWFkID0gMDsKCWlmICghdGhpcy5ieXRlc1JlbWFpbmluZykgewoJCXRoaXMuY29tbWFuZCA9IC0xOwoJfQp9OwoKR2FtZUJveUFkdmFuY2VSVEMucHJvdG90eXBlLnNpb091dHB1dFBpbiA9IGZ1bmN0aW9uKCkgewoJdmFyIG91dHB1dEJ5dGUgPSAwOwoJc3dpdGNoICh0aGlzLmNvbW1hbmQpIHsKCWNhc2UgNDoKCQlvdXRwdXRCeXRlID0gdGhpcy5jb250cm9sOwoJCWJyZWFrOwoJY2FzZSAyOgoJY2FzZSA2OgoJCW91dHB1dEJ5dGUgPSB0aGlzLnRpbWVbNyAtIHRoaXMuYnl0ZXNSZW1haW5pbmddOwoJCWJyZWFrOwoJfQoJdmFyIG91dHB1dCA9IChvdXRwdXRCeXRlID4+IHRoaXMuYml0c1JlYWQpICYgMTsKCXJldHVybiBvdXRwdXQ7Cn07CgpHYW1lQm95QWR2YW5jZVJUQy5wcm90b3R5cGUudXBkYXRlQ2xvY2sgPSBmdW5jdGlvbigpIHsKCXZhciBkYXRlID0gbmV3IERhdGUoKTsKCXRoaXMudGltZVswXSA9IHRoaXMuYmNkKGRhdGUuZ2V0RnVsbFllYXIoKSk7Cgl0aGlzLnRpbWVbMV0gPSB0aGlzLmJjZChkYXRlLmdldE1vbnRoKCkgKyAxKTsKCXRoaXMudGltZVsyXSA9IHRoaXMuYmNkKGRhdGUuZ2V0RGF0ZSgpKTsKCXRoaXMudGltZVszXSA9IGRhdGUuZ2V0RGF5KCkgLSAxOwoJaWYgKHRoaXMudGltZVszXSA8IDApIHsKCQl0aGlzLnRpbWVbM10gPSA2OwoJfQoJaWYgKHRoaXMuY29udHJvbCAmIDB4NDApIHsKCQkvLyAyNCBob3VyCgkJdGhpcy50aW1lWzRdID0gdGhpcy5iY2QoZGF0ZS5nZXRIb3VycygpKTsKCX0gZWxzZSB7CgkJdGhpcy50aW1lWzRdID0gdGhpcy5iY2QoZGF0ZS5nZXRIb3VycygpICUgMik7CgkJaWYgKGRhdGUuZ2V0SG91cnMoKSA+PSAxMikgewoJCQl0aGlzLnRpbWVbNF0gfD0gMHg4MDsKCQl9Cgl9Cgl0aGlzLnRpbWVbNV0gPSB0aGlzLmJjZChkYXRlLmdldE1pbnV0ZXMoKSk7Cgl0aGlzLnRpbWVbNl0gPSB0aGlzLmJjZChkYXRlLmdldFNlY29uZHMoKSk7Cn07CgpHYW1lQm95QWR2YW5jZVJUQy5wcm90b3R5cGUuYmNkID0gZnVuY3Rpb24oYmluYXJ5KSB7Cgl2YXIgY291bnRlciA9IGJpbmFyeSAlIDEwOwoJYmluYXJ5IC89IDEwOwoJY291bnRlciArPSAoYmluYXJ5ICUgMTApIDw8IDQ7CglyZXR1cm4gY291bnRlcjsKfTsK"></script>
<script src="data:@file/javascript;base64,ZnVuY3Rpb24gR2FtZUJveUFkdmFuY2UoKSB7Cgl0aGlzLkxPR19FUlJPUiA9IDE7Cgl0aGlzLkxPR19XQVJOID0gMjsKCXRoaXMuTE9HX1NUVUIgPSA0OwoJdGhpcy5MT0dfSU5GTyA9IDg7Cgl0aGlzLkxPR19ERUJVRyA9IDE2OwoKCXRoaXMuU1lTX0lEID0gJ2NvbS5lbmRyaWZ0LmdiYWpzJzsKCgl0aGlzLmxvZ0xldmVsID0gdGhpcy5MT0dfRVJST1IgfCB0aGlzLkxPR19XQVJOOwoKCXRoaXMucm9tID0gbnVsbDsKCgl0aGlzLmNwdSA9IG5ldyBBUk1Db3JlKCk7Cgl0aGlzLm1tdSA9IG5ldyBHYW1lQm95QWR2YW5jZU1NVSgpCgl0aGlzLmlycSA9IG5ldyBHYW1lQm95QWR2YW5jZUludGVycnVwdEhhbmRsZXIoKTsKCXRoaXMuaW8gPSBuZXcgR2FtZUJveUFkdmFuY2VJTygpOwoJdGhpcy5hdWRpbyA9IG5ldyBHYW1lQm95QWR2YW5jZUF1ZGlvKCk7Cgl0aGlzLnZpZGVvID0gbmV3IEdhbWVCb3lBZHZhbmNlVmlkZW8oKTsKCXRoaXMua2V5cGFkID0gbmV3IEdhbWVCb3lBZHZhbmNlS2V5cGFkKCk7Cgl0aGlzLnNpbyA9IG5ldyBHYW1lQm95QWR2YW5jZVNJTygpOwoKCS8vIFRPRE86IHNpbXBsaWZ5IHRoaXMgZ3JhcGgKCXRoaXMuY3B1Lm1tdSA9IHRoaXMubW11OwoJdGhpcy5jcHUuaXJxID0gdGhpcy5pcnE7CgoJdGhpcy5tbXUuY3B1ID0gdGhpcy5jcHU7Cgl0aGlzLm1tdS5jb3JlID0gdGhpczsKCgl0aGlzLmlycS5jcHUgPSB0aGlzLmNwdTsKCXRoaXMuaXJxLmlvID0gdGhpcy5pbzsKCXRoaXMuaXJxLmF1ZGlvID0gdGhpcy5hdWRpbzsKCXRoaXMuaXJxLnZpZGVvID0gdGhpcy52aWRlbzsKCXRoaXMuaXJxLmNvcmUgPSB0aGlzOwoKCXRoaXMuaW8uY3B1ID0gdGhpcy5jcHU7Cgl0aGlzLmlvLmF1ZGlvID0gdGhpcy5hdWRpbzsKCXRoaXMuaW8udmlkZW8gPSB0aGlzLnZpZGVvOwoJdGhpcy5pby5rZXlwYWQgPSB0aGlzLmtleXBhZDsKCXRoaXMuaW8uc2lvID0gdGhpcy5zaW87Cgl0aGlzLmlvLmNvcmUgPSB0aGlzOwoKCXRoaXMuYXVkaW8uY3B1ID0gdGhpcy5jcHU7Cgl0aGlzLmF1ZGlvLmNvcmUgPSB0aGlzOwoKCXRoaXMudmlkZW8uY3B1ID0gdGhpcy5jcHU7Cgl0aGlzLnZpZGVvLmNvcmUgPSB0aGlzOwoKCXRoaXMua2V5cGFkLmNvcmUgPSB0aGlzOwoKCXRoaXMuc2lvLmNvcmUgPSB0aGlzOwoKCXRoaXMua2V5cGFkLnJlZ2lzdGVySGFuZGxlcnMoKTsKCXRoaXMuZG9TdGVwID0gdGhpcy53YWl0RnJhbWU7Cgl0aGlzLnBhdXNlZCA9IGZhbHNlOwoKCXRoaXMuc2VlbkZyYW1lID0gZmFsc2U7Cgl0aGlzLnNlZW5TYXZlID0gZmFsc2U7Cgl0aGlzLmxhc3RWYmxhbmsgPSAwOwoKCXRoaXMucXVldWUgPSBudWxsOwoJdGhpcy5yZXBvcnRGUFMgPSBudWxsOwoJdGhpcy50aHJvdHRsZSA9IDE2OyAvLyBUaGlzIGlzIHJvdWdoLCBidXQgdGhlIDIvM21zIGRpZmZlcmVuY2UgZ2l2ZXMgdXMgYSBnb29kIG92ZXJoZWFkCgoJdmFyIHNlbGYgPSB0aGlzOwoJd2luZG93LnF1ZXVlRnJhbWUgPSBmdW5jdGlvbiAoZikgewoJCXNlbGYucXVldWUgPSB3aW5kb3cuc2V0VGltZW91dChmLCBzZWxmLnRocm90dGxlKTsKCX07CgoJd2luZG93LlVSTCA9IHdpbmRvdy5VUkwgfHwgd2luZG93LndlYmtpdFVSTDsKCgl0aGlzLnZpZGVvLnZibGFua0NhbGxiYWNrID0gZnVuY3Rpb24oKSB7CgkJc2VsZi5zZWVuRnJhbWUgPSB0cnVlOwoJfTsKfTsKCkdhbWVCb3lBZHZhbmNlLnByb3RvdHlwZS5zZXRDYW52YXMgPSBmdW5jdGlvbihjYW52YXMpIHsKCXZhciBzZWxmID0gdGhpczsKCWlmIChjYW52YXMub2Zmc2V0V2lkdGggIT0gMjQwIHx8IGNhbnZhcy5vZmZzZXRIZWlnaHQgIT0gMTYwKSB7CgkJdGhpcy5pbmRpcmVjdENhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpOwoJCXRoaXMuaW5kaXJlY3RDYW52YXMuc2V0QXR0cmlidXRlKCJoZWlnaHQiLCAiMTYwIik7CgkJdGhpcy5pbmRpcmVjdENhbnZhcy5zZXRBdHRyaWJ1dGUoIndpZHRoIiwgIjI0MCIpOwoJCXRoaXMudGFyZ2V0Q2FudmFzID0gY2FudmFzOwoJCXRoaXMuc2V0Q2FudmFzRGlyZWN0KHRoaXMuaW5kaXJlY3RDYW52YXMpOwoJCXZhciB0YXJnZXRDb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CgkJdGhpcy52aWRlby5kcmF3Q2FsbGJhY2sgPSBmdW5jdGlvbigpIHsKCQkJdGFyZ2V0Q29udGV4dC5kcmF3SW1hZ2Uoc2VsZi5pbmRpcmVjdENhbnZhcywgMCwgMCwgY2FudmFzLm9mZnNldFdpZHRoLCBjYW52YXMub2Zmc2V0SGVpZ2h0KTsKCQl9Cgl9IGVsc2UgewoJCXRoaXMuc2V0Q2FudmFzRGlyZWN0KGNhbnZhcyk7CgkJdmFyIHNlbGYgPSB0aGlzOwoJfQp9OwoKR2FtZUJveUFkdmFuY2UucHJvdG90eXBlLnNldENhbnZhc0RpcmVjdCA9IGZ1bmN0aW9uKGNhbnZhcykgewoJdGhpcy5jb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7Cgl0aGlzLnZpZGVvLnNldEJhY2tpbmcodGhpcy5jb250ZXh0KTsKfTsKCkdhbWVCb3lBZHZhbmNlLnByb3RvdHlwZS5zZXRCaW9zID0gZnVuY3Rpb24oYmlvcywgcmVhbCkgewoJdGhpcy5tbXUubG9hZEJpb3MoYmlvcywgcmVhbCk7Cn07CgpHYW1lQm95QWR2YW5jZS5wcm90b3R5cGUuc2V0Um9tID0gZnVuY3Rpb24ocm9tKSB7Cgl0aGlzLnJlc2V0KCk7CgoJdGhpcy5yb20gPSB0aGlzLm1tdS5sb2FkUm9tKHJvbSwgdHJ1ZSk7CglpZiAoIXRoaXMucm9tKSB7CgkJcmV0dXJuIGZhbHNlOwoJfQoJdGhpcy5yZXRyaWV2ZVNhdmVkYXRhKCk7CglyZXR1cm4gdHJ1ZTsKfTsKCkdhbWVCb3lBZHZhbmNlLnByb3RvdHlwZS5oYXNSb20gPSBmdW5jdGlvbigpIHsKCXJldHVybiAhIXRoaXMucm9tOwp9OwoKR2FtZUJveUFkdmFuY2UucHJvdG90eXBlLmxvYWRSb21Gcm9tRmlsZSA9IGZ1bmN0aW9uKHJvbUZpbGUsIGNhbGxiYWNrKSB7Cgl2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKCXZhciBzZWxmID0gdGhpczsKCXJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihlKSB7CgkJdmFyIHJlc3VsdCA9IHNlbGYuc2V0Um9tKGUudGFyZ2V0LnJlc3VsdCk7CgkJaWYgKGNhbGxiYWNrKSB7CgkJCWNhbGxiYWNrKHJlc3VsdCk7CgkJfQoJfQoJcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKHJvbUZpbGUpOwp9OwoKR2FtZUJveUFkdmFuY2UucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24oKSB7Cgl0aGlzLmF1ZGlvLnBhdXNlKHRydWUpOwoKCXRoaXMubW11LmNsZWFyKCk7Cgl0aGlzLmlvLmNsZWFyKCk7Cgl0aGlzLmF1ZGlvLmNsZWFyKCk7Cgl0aGlzLnZpZGVvLmNsZWFyKCk7Cgl0aGlzLnNpby5jbGVhcigpOwoKCXRoaXMubW11Lm1tYXAodGhpcy5tbXUuUkVHSU9OX0lPLCB0aGlzLmlvKTsKCXRoaXMubW11Lm1tYXAodGhpcy5tbXUuUkVHSU9OX1BBTEVUVEVfUkFNLCB0aGlzLnZpZGVvLnJlbmRlclBhdGgucGFsZXR0ZSk7Cgl0aGlzLm1tdS5tbWFwKHRoaXMubW11LlJFR0lPTl9WUkFNLCB0aGlzLnZpZGVvLnJlbmRlclBhdGgudnJhbSk7Cgl0aGlzLm1tdS5tbWFwKHRoaXMubW11LlJFR0lPTl9PQU0sIHRoaXMudmlkZW8ucmVuZGVyUGF0aC5vYW0pOwoKCXRoaXMuY3B1LnJlc2V0Q1BVKDApOwp9OwoKR2FtZUJveUFkdmFuY2UucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbigpIHsKCXdoaWxlICh0aGlzLmRvU3RlcCgpKSB7CgkJdGhpcy5jcHUuc3RlcCgpOwoJfQp9OwoKR2FtZUJveUFkdmFuY2UucHJvdG90eXBlLndhaXRGcmFtZSA9IGZ1bmN0aW9uKCkgewoJdmFyIHNlZW4gPSB0aGlzLnNlZW5GcmFtZTsKCXRoaXMuc2VlbkZyYW1lID0gZmFsc2U7CglyZXR1cm4gIXNlZW47Cn07CgpHYW1lQm95QWR2YW5jZS5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbigpIHsKCXRoaXMucGF1c2VkID0gdHJ1ZTsKCXRoaXMuYXVkaW8ucGF1c2UodHJ1ZSk7CglpZiAodGhpcy5xdWV1ZSkgewoJCWNsZWFyVGltZW91dCh0aGlzLnF1ZXVlKTsKCQl0aGlzLnF1ZXVlID0gbnVsbDsKCX0KfTsKCkdhbWVCb3lBZHZhbmNlLnByb3RvdHlwZS5hZHZhbmNlRnJhbWUgPSBmdW5jdGlvbigpIHsKCXRoaXMuc3RlcCgpOwoJaWYgKHRoaXMuc2VlblNhdmUpIHsKCQlpZiAoIXRoaXMubW11LnNhdmVOZWVkc0ZsdXNoKCkpIHsKCQkJdGhpcy5zdG9yZVNhdmVkYXRhKCk7CgkJCXRoaXMuc2VlblNhdmUgPSBmYWxzZTsKCQl9IGVsc2UgewoJCQl0aGlzLm1tdS5mbHVzaFNhdmUoKTsKCQl9Cgl9IGVsc2UgaWYgKHRoaXMubW11LnNhdmVOZWVkc0ZsdXNoKCkpIHsKCQl0aGlzLnNlZW5TYXZlID0gdHJ1ZTsKCQl0aGlzLm1tdS5mbHVzaFNhdmUoKTsKCX0KfTsKCkdhbWVCb3lBZHZhbmNlLnByb3RvdHlwZS5ydW5TdGFibGUgPSBmdW5jdGlvbigpIHsKCWlmICh0aGlzLmludGVydmFsKSB7CgkJcmV0dXJuOyAvLyBBbHJlYWR5IHJ1bm5pbmcKCX0KCXZhciBzZWxmID0gdGhpczsKCXZhciB0aW1lciA9IDA7Cgl2YXIgZnJhbWVzID0gMDsKCXZhciBydW5GdW5jOwoJdmFyIHN0YXJ0ID0gRGF0ZS5ub3coKTsKCXRoaXMucGF1c2VkID0gZmFsc2U7Cgl0aGlzLmF1ZGlvLnBhdXNlKGZhbHNlKTsKCglpZiAodGhpcy5yZXBvcnRGUFMpIHsKCQlydW5GdW5jID0gZnVuY3Rpb24oKSB7CgkJCXRyeSB7CgkJCQl0aW1lciArPSBEYXRlLm5vdygpIC0gc3RhcnQ7CgkJCQlpZiAoc2VsZi5wYXVzZWQpIHsKCQkJCQlyZXR1cm47CgkJCQl9IGVsc2UgewoJCQkJCXF1ZXVlRnJhbWUocnVuRnVuYyk7CgkJCQl9CgkJCQlzdGFydCA9IERhdGUubm93KCk7CgkJCQlzZWxmLmFkdmFuY2VGcmFtZSgpOwoJCQkJKytmcmFtZXM7CgkJCQlpZiAoZnJhbWVzID09IDYwKSB7CgkJCQkJc2VsZi5yZXBvcnRGUFMoKGZyYW1lcyAqIDEwMDApIC8gdGltZXIpOwoJCQkJCWZyYW1lcyA9IDA7CgkJCQkJdGltZXIgPSAwOwoJCQkJfQoJCQl9IGNhdGNoKGV4Y2VwdGlvbikgewoJCQkJc2VsZi5FUlJPUihleGNlcHRpb24pOwoJCQkJaWYgKGV4Y2VwdGlvbi5zdGFjaykgewoJCQkJCXNlbGYubG9nU3RhY2tUcmFjZShleGNlcHRpb24uc3RhY2suc3BsaXQoJ1xuJykpOwoJCQkJfQoJCQkJdGhyb3cgZXhjZXB0aW9uOwoJCQl9CgkJfTsKCX0gZWxzZSB7CgkJcnVuRnVuYyA9IGZ1bmN0aW9uKCkgewoJCQl0cnkgewoJCQkJaWYgKHNlbGYucGF1c2VkKSB7CgkJCQkJcmV0dXJuOwoJCQkJfSBlbHNlIHsKCQkJCQlxdWV1ZUZyYW1lKHJ1bkZ1bmMpOwoJCQkJfQoJCQkJc2VsZi5hZHZhbmNlRnJhbWUoKTsKCQkJfSBjYXRjaChleGNlcHRpb24pIHsKCQkJCXNlbGYuRVJST1IoZXhjZXB0aW9uKTsKCQkJCWlmIChleGNlcHRpb24uc3RhY2spIHsKCQkJCQlzZWxmLmxvZ1N0YWNrVHJhY2UoZXhjZXB0aW9uLnN0YWNrLnNwbGl0KCdcbicpKTsKCQkJCX0KCQkJCXRocm93IGV4Y2VwdGlvbjsKCQkJfQoJCX07Cgl9CglxdWV1ZUZyYW1lKHJ1bkZ1bmMpOwp9OwoKR2FtZUJveUFkdmFuY2UucHJvdG90eXBlLnNldFNhdmVkYXRhID0gZnVuY3Rpb24oZGF0YSkgewoJdGhpcy5tbXUubG9hZFNhdmVkYXRhKGRhdGEpOwp9OwoKR2FtZUJveUFkdmFuY2UucHJvdG90eXBlLmxvYWRTYXZlZGF0YUZyb21GaWxlID0gZnVuY3Rpb24oc2F2ZUZpbGUpIHsKCXZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoJdmFyIHNlbGYgPSB0aGlzOwoJcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHsgc2VsZi5zZXRTYXZlZGF0YShlLnRhcmdldC5yZXN1bHQpOyB9CglyZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoc2F2ZUZpbGUpOwp9OwoKR2FtZUJveUFkdmFuY2UucHJvdG90eXBlLmRlY29kZVNhdmVkYXRhID0gZnVuY3Rpb24oc3RyaW5nKSB7Cgl0aGlzLnNldFNhdmVkYXRhKHRoaXMuZGVjb2RlQmFzZTY0KHN0cmluZykpOwp9OwoKR2FtZUJveUFkdmFuY2UucHJvdG90eXBlLmRlY29kZUJhc2U2NCA9IGZ1bmN0aW9uKHN0cmluZykgewoJdmFyIGxlbmd0aCA9IChzdHJpbmcubGVuZ3RoICogMyAvIDQpOwoJaWYgKHN0cmluZ1tzdHJpbmcubGVuZ3RoIC0gMl0gPT0gJz0nKSB7CgkJbGVuZ3RoIC09IDI7Cgl9IGVsc2UgaWYgKHN0cmluZ1tzdHJpbmcubGVuZ3RoIC0gMV0gPT0gJz0nKSB7CgkJbGVuZ3RoIC09IDE7Cgl9Cgl2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKGxlbmd0aCk7Cgl2YXIgdmlldyA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7Cgl2YXIgYml0cyA9IHN0cmluZy5tYXRjaCgvLi4uLi9nKTsKCWZvciAodmFyIGkgPSAwOyBpICsgMiA8IGxlbmd0aDsgaSArPSAzKSB7CgkJdmFyIHMgPSBhdG9iKGJpdHMuc2hpZnQoKSk7CgkJdmlld1tpXSA9IHMuY2hhckNvZGVBdCgwKTsKCQl2aWV3W2kgKyAxXSA9IHMuY2hhckNvZGVBdCgxKTsKCQl2aWV3W2kgKyAyXSA9IHMuY2hhckNvZGVBdCgyKTsKCX0KCWlmIChpIDwgbGVuZ3RoKSB7CgkJdmFyIHMgPSBhdG9iKGJpdHMuc2hpZnQoKSk7CgkJdmlld1tpKytdID0gcy5jaGFyQ29kZUF0KDApOwoJCWlmIChzLmxlbmd0aCA+IDEpIHsKCQkJdmlld1tpKytdID0gcy5jaGFyQ29kZUF0KDEpOwoJCX0KCX0KCglyZXR1cm4gYnVmZmVyOwp9OwoKR2FtZUJveUFkdmFuY2UucHJvdG90eXBlLmVuY29kZUJhc2U2NCA9IGZ1bmN0aW9uKHZpZXcpIHsKCXZhciBkYXRhID0gW107Cgl2YXIgYjsKCXZhciB3b3Jkc3RyaW5nID0gW107Cgl2YXIgdHJpcGxldDsKCWZvciAodmFyIGkgPSAwOyBpIDwgdmlldy5ieXRlTGVuZ3RoOyArK2kpIHsKCQliID0gdmlldy5nZXRVaW50OChpLCB0cnVlKTsKCQl3b3Jkc3RyaW5nLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShiKSk7CgkJd2hpbGUgKHdvcmRzdHJpbmcubGVuZ3RoID49IDMpIHsKCQkJdHJpcGxldCA9IHdvcmRzdHJpbmcuc3BsaWNlKDAsIDMpOwoJCQlkYXRhLnB1c2goYnRvYSh0cmlwbGV0LmpvaW4oJycpKSk7CgkJfQoJfTsKCWlmICh3b3Jkc3RyaW5nLmxlbmd0aCkgewoJCWRhdGEucHVzaChidG9hKHdvcmRzdHJpbmcuam9pbignJykpKTsKCX0KCXJldHVybiBkYXRhLmpvaW4oJycpOwp9OwoKR2FtZUJveUFkdmFuY2UucHJvdG90eXBlLmRvd25sb2FkU2F2ZWRhdGEgPSBmdW5jdGlvbigpIHsKCXZhciBzcmFtID0gdGhpcy5tbXUuc2F2ZTsKCWlmICghc3JhbSkgewoJCXRoaXMuV0FSTigiTm8gc2F2ZSBkYXRhIGF2YWlsYWJsZSIpOwoJCXJldHVybiBudWxsOwoJfQoJaWYgKHdpbmRvdy5VUkwpIHsKCQl2YXIgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW3NyYW0uYnVmZmVyXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJyB9KSk7CgkJd2luZG93Lm9wZW4odXJsKTsKCX0gZWxzZSB7CgkJdmFyIGRhdGEgPSB0aGlzLmVuY29kZUJhc2U2NChzcmFtLnZpZXcpOwoJCXdpbmRvdy5vcGVuKCdkYXRhOmFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbTtiYXNlNjQsJyArIGRhdGEsIHRoaXMucm9tLmNvZGUgKyAnLnNhdicpOwoJfQp9OwoKCkdhbWVCb3lBZHZhbmNlLnByb3RvdHlwZS5zdG9yZVNhdmVkYXRhID0gZnVuY3Rpb24oKSB7Cgl2YXIgc3JhbSA9IHRoaXMubW11LnNhdmU7Cgl0cnkgewoJCXZhciBzdG9yYWdlID0gd2luZG93LmxvY2FsU3RvcmFnZTsKCQlzdG9yYWdlW3RoaXMuU1lTX0lEICsgJy4nICsgdGhpcy5tbXUuY2FydC5jb2RlXSA9IHRoaXMuZW5jb2RlQmFzZTY0KHNyYW0udmlldyk7Cgl9IGNhdGNoIChlKSB7CgkJdGhpcy5XQVJOKCdDb3VsZCBub3Qgc3RvcmUgc2F2ZWRhdGEhICcgKyBlKTsKCX0KfTsKCkdhbWVCb3lBZHZhbmNlLnByb3RvdHlwZS5yZXRyaWV2ZVNhdmVkYXRhID0gZnVuY3Rpb24oKSB7Cgl0cnkgewoJCXZhciBzdG9yYWdlID0gd2luZG93LmxvY2FsU3RvcmFnZTsKCQl2YXIgZGF0YSA9IHN0b3JhZ2VbdGhpcy5TWVNfSUQgKyAnLicgKyB0aGlzLm1tdS5jYXJ0LmNvZGVdOwoJCWlmIChkYXRhKSB7CgkJCXRoaXMuZGVjb2RlU2F2ZWRhdGEoZGF0YSk7CgkJCXJldHVybiB0cnVlOwoJCX0KCX0gY2F0Y2ggKGUpIHsKCQl0aGlzLldBUk4oJ0NvdWxkIG5vdCByZXRyaWV2ZSBzYXZlZGF0YSEgJyArIGUpOwoJfQoJcmV0dXJuIGZhbHNlOwp9OwoKR2FtZUJveUFkdmFuY2UucHJvdG90eXBlLmZyZWV6ZSA9IGZ1bmN0aW9uKCkgewoJcmV0dXJuIHsKCQknY3B1JzogdGhpcy5jcHUuZnJlZXplKCksCgkJJ21tdSc6IHRoaXMubW11LmZyZWV6ZSgpLAoJCSdpcnEnOiB0aGlzLmlycS5mcmVlemUoKSwKCQknaW8nOiB0aGlzLmlvLmZyZWV6ZSgpLAoJCSdhdWRpbyc6IHRoaXMuYXVkaW8uZnJlZXplKCksCgkJJ3ZpZGVvJzogdGhpcy52aWRlby5mcmVlemUoKQoJfQp9OwoKR2FtZUJveUFkdmFuY2UucHJvdG90eXBlLmRlZnJvc3QgPSBmdW5jdGlvbihmcm9zdCkgewoJdGhpcy5jcHUuZGVmcm9zdChmcm9zdC5jcHUpOwoJdGhpcy5tbXUuZGVmcm9zdChmcm9zdC5tbXUpOwoJdGhpcy5hdWRpby5kZWZyb3N0KGZyb3N0LmF1ZGlvKTsKCXRoaXMudmlkZW8uZGVmcm9zdChmcm9zdC52aWRlbyk7Cgl0aGlzLmlycS5kZWZyb3N0KGZyb3N0LmlycSk7Cgl0aGlzLmlvLmRlZnJvc3QoZnJvc3QuaW8pOwp9OwoKR2FtZUJveUFkdmFuY2UucHJvdG90eXBlLmxvZyA9IGZ1bmN0aW9uKGxldmVsLCBtZXNzYWdlKSB7fTsKCkdhbWVCb3lBZHZhbmNlLnByb3RvdHlwZS5zZXRMb2dnZXIgPSBmdW5jdGlvbihsb2dnZXIpIHsKCXRoaXMubG9nID0gbG9nZ2VyOwp9OwoKR2FtZUJveUFkdmFuY2UucHJvdG90eXBlLmxvZ1N0YWNrVHJhY2UgPSBmdW5jdGlvbihzdGFjaykgewoJdmFyIG92ZXJmbG93ID0gc3RhY2subGVuZ3RoIC0gMzI7Cgl0aGlzLkVSUk9SKCdTdGFjayB0cmFjZSBmb2xsb3dzOicpOwoJaWYgKG92ZXJmbG93ID4gMCkgewoJCXRoaXMubG9nKC0xLCAnPiAoVG9vIG1hbnkgZnJhbWVzKScpOwoJfQoJZm9yICh2YXIgaSA9IE1hdGgubWF4KG92ZXJmbG93LCAwKTsgaSA8IHN0YWNrLmxlbmd0aDsgKytpKSB7CgkJdGhpcy5sb2coLTEsICc+ICcgKyBzdGFja1tpXSk7Cgl9Cn07CgpHYW1lQm95QWR2YW5jZS5wcm90b3R5cGUuRVJST1IgPSBmdW5jdGlvbihlcnJvcikgewoJaWYgKHRoaXMubG9nTGV2ZWwgJiB0aGlzLkxPR19FUlJPUikgewoJCXRoaXMubG9nKHRoaXMuTE9HX0VSUk9SLCBlcnJvcik7Cgl9Cn07CgpHYW1lQm95QWR2YW5jZS5wcm90b3R5cGUuV0FSTiA9IGZ1bmN0aW9uKHdhcm4pIHsKCWlmICh0aGlzLmxvZ0xldmVsICYgdGhpcy5MT0dfV0FSTikgewoJCXRoaXMubG9nKHRoaXMuTE9HX1dBUk4sIHdhcm4pOwoJfQp9OwoKR2FtZUJveUFkdmFuY2UucHJvdG90eXBlLlNUVUIgPSBmdW5jdGlvbihmdW5jKSB7CglpZiAodGhpcy5sb2dMZXZlbCAmIHRoaXMuTE9HX1NUVUIpIHsKCQl0aGlzLmxvZyh0aGlzLkxPR19TVFVCLCBmdW5jKTsKCX0KfTsKCkdhbWVCb3lBZHZhbmNlLnByb3RvdHlwZS5JTkZPID0gZnVuY3Rpb24oaW5mbykgewoJaWYgKHRoaXMubG9nTGV2ZWwgJiB0aGlzLkxPR19JTkZPKSB7CgkJdGhpcy5sb2codGhpcy5MT0dfSU5GTywgaW5mbyk7Cgl9Cn07CgpHYW1lQm95QWR2YW5jZS5wcm90b3R5cGUuREVCVUcgPSBmdW5jdGlvbihpbmZvKSB7CglpZiAodGhpcy5sb2dMZXZlbCAmIHRoaXMuTE9HX0RFQlVHKSB7CgkJdGhpcy5sb2codGhpcy5MT0dfREVCVUcsIGluZm8pOwoJfQp9OwoKR2FtZUJveUFkdmFuY2UucHJvdG90eXBlLkFTU0VSVF9VTlJFQUNIRUQgPSBmdW5jdGlvbihlcnIpIHsKCXRocm93IG5ldyBFcnJvcigiU2hvdWxkIGJlIHVucmVhY2hlZDogIiArIGVycik7Cn07CgpHYW1lQm95QWR2YW5jZS5wcm90b3R5cGUuQVNTRVJUID0gZnVuY3Rpb24odGVzdCwgZXJyKSB7CglpZiAoIXRlc3QpIHsKCQl0aHJvdyBuZXcgRXJyb3IoIkFzc2VydGlvbiBmYWlsZWQ6ICIgKyBlcnIpOwoJfQp9Owo="></script>
<script src="data:@file/javascript;base64,ZnVuY3Rpb24gbG9hZFJvbSh1cmwsIGNhbGxiYWNrKSB7Cgl2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7Cgl4aHIub3BlbignR0VUJywgdXJsKTsKCXhoci5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInOwoKCXhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHsgY2FsbGJhY2soeGhyLnJlc3BvbnNlKSB9OwoJeGhyLnNlbmQoKTsKfQo="></script>

<script>
var gba;
var runCommands = [];
var debug = null;

try {
  gba = new GameBoyAdvance();
  gba.keypad.eatInput = true;
  gba.setLogger(function(level, error) {
    console.log(error);
    gba.pause();
    var screen = document.getElementById('screen');
    if (screen.getAttribute('class') == 'dead') {
      console.log('We appear to have crashed multiple times without reseting.');
      return;
    }
    var crash = document.createElement('img');
    crash.setAttribute('id', 'crash');
    crash.setAttribute('src', 'data:@file/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYAAAAEACAMAAACNqVFVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACdQTFRFY0u/bm5vShKmXDS2kYLMiIiTblfEubnAKys26CwsWFhbGxsjAAAAiP3GPgAAAA10Uk5T////////////////AD3oIoYAAAciSURBVHja7J0Lc6s4DEazaZv2kv7/37vr9dXoYRkIIY1JzzfThodlbJ1BBhOR0zd6qk64AAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAHo6gOt1RAfMt+rxbQbAqwO4Gi2X2uK65XoBAIDnAZj+0/Va/891dPpf+wIozl+qFQAA+KmBzocZGxqKm9qwUf/kv9aRA1Arewyp19dgy/VatSUoAgAA8wBqmKndtkHJd1PLSKmelXWSLxPr1a2xXN4quxUAANgLgK7FE9+e/hocqsvUOlpZJ9mQ0g6hdsmXy1u15hIXAAC4B4C97JQgEsNAtM6s7J6ylIc2D82Wy1sFAAA8GkC8YfJ7egB6N2LtEeJF5VJLfP0AAMBjAZTTX90ja3MDYWvVGz7bej2SeCOWtcq2CAAAuH9CTv/rmp0mmyZZt0uttbWyn9He12vLxnK9VmlJAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAAj9L5TgEAAMcC8OF0Pr/fqfPZ1wgAAIwM4OPj869qAHl/Pzm9rZC3KAiKpN7REAAAAN79MnjWABJdf12hiEFCkYAYCwEAAGAB6KAbQ8/1RimCumQHZQAAYNRB+Hy+XE6Jrhsk7v/zR2FcLqPdmgEAAD4E9QFMN0gBFKdrPQUAIQgAxwTwzw2yAKwAAIBxAfTdvx+A8RAAAAAtgHZaLQL4+qp/2RoAAHB8AGXieA7ANH19TVO+1gNQoQIAAGMDqG6qADQMtSGoOD1f8wCklre3Mtn98fH2BgAAjA2gPjisDyd7AErAsSHIrlkA6vZab6kRAAA4PoC1N2LqdkIQAI4CQL5EUj4rgPqA5VYABYG6/XSqD+W5DAXAmADsVJwA8A8ktwAQt487GQEAAGQAvNt6AL7+ag7A6NNxAABACyD/UkrrfHkE30IAAABeG0B1vk5FZJNxAADAcQG0DyTbyTivdjLOArBT2wAAwPgALpf6aObz894bMXkQWQQAABxpEK4Q7gVQXU8IAsDxB+FtKRqEIAAcB4BNJWoH4W0A2hA01kNJAAAgR9AOwvuEIB7KA2BkAAVBfN1GSbLe4v6a7G2H31J3OQYAADAigPqyJoGQvXCjaNnt7csOpL7qfJL0ADAqAJE8lM9fwDSvLClj5Bf4AQAASyDyV5HNywadsV9dCQAA3BaQ1ukor20FAABuB/EKLywGAAAQAACAAAAAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAAKBnALheb6umfDF8jd2t9d5Wyz61P1axjQAYCUBNcdgGoPx42iMB2Ha1tWxrNQAAEAHUnwHcAuD7e5oeCaDUDgAAPBqA/JclKS7ByQYprUoS5Fo7H9hsSW2K2thy8dMe3Zftbc9aYY8lPZ3rV9yzxqotmfUQAOMD0IBUAoCEprLk95W9dhD2+9RWg5wPc2pjy2UA6nHa0tl23wpvoWWkVM8q98G8VVaybTMAxgRQTezJE0+//HRS5/cDRHRsb1lcai9upeFZ8Mq3z4U07U0c2qOV37/OKi/ZthkAIwKoAcaHBXuKxRMqB2D3xZN6HYBYY34jNg/AtyLuaY+6n1UeZAFwBACx+/3utbcX3lV9258CkPXM15S5ci8rABwfQDmN4g2OfOq+1l1+X3tzpAO97hMbeylXS+klpr0ha9sbt/tW2PrjbaN1WWx7NqgvW2Ul2x4CYDwAOqjWJRla5KdCdItdkvLy5/epbVybpnbNNk9tfIvint722EJ7IZGXb9tue7feqlfStwgA4wF45iSthqYj1r/7Q3kA/DIA+el5nPoBAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAcGwAR0j9uacHy/17nAcAAID+0drUu60tyezsz7/t74G1FgAAQP9oNhFifwA+zQgAAJirrP3yqT1I+3VV+eyXzVOg2oSm3pHbxNA8pTRPbI1BLjuKt7+1hwB4LQAx/TNL1mmbN182r1O+ji5l7XovTdUnz2p4iXvaYCMtnk9iVVf7oDjXQwC8FgB7ynnn+GRSGw58al4/Bbvf9N5l6FxdMYz0AmC/vjzJVOGu6yEAfgOAPDnPnrTPAZCl1a4F0Esy9a8iWO7h2i8CA+D1ALRbfh7A3BHm6+snmVoEyz18YggCwEMBSLqlXO75ZFJ7eebLxokvm7bp64xpovE1GLG8rPvLw3gjth5A3ya+yGauhwB4JQDz6Z/+0ze0l5SqW/Tmx6Z5xuNZm7YNbZpqTKv1CaexZ8vpqG3i6lIPdx2EAfBkALdOxK5JBx03cXSvHgLgtwJYlw46buLoXj0EwG8FgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAG078CDAC2aBhgKkAO3AAAAABJRU5ErkJggg==');
    screen.parentElement.insertBefore(crash, screen);
    screen.setAttribute('class', 'dead');
  });
} catch (exception) {
  gba = null;
}

window.onload = function() {
  if (gba && FileReader) {
    var canvas = document.getElementById('screen');
    gba.setCanvas(canvas);

    gba.logLevel = gba.LOG_ERROR;

    loadRom("data:@file/octet-stream;base64,BgAA6v7//+oFAADq/v//6v7//+oAAKDhDAAA6v7//+oC86DjAABd4wHToAMg0E0CAEAt6QIAXuUEAFDjCQAACwUAUOMHAAALAEC96A7wsOEPUC3pAQOg4wDgj+IE8BDlD1C96ATwXuIQQC3pBNBN4rAQzeEBQ6DjAkyE4rAA1OGyAM3hsBDd4QEAgOGwAMThAUOg4x8AoOMA8CnhAACg4wEDxOXTAKDjAPAp4bgAVOGwEN3hABAR4AAQIRC4EEQR8///CgFDoOMCTITisgDd4bAAxOEE0I3iEIC96A==", function(bios) {
      gba.setBios(bios);
    });

    if (!gba.audio.context) {
      // Remove the sound box if sound isn't available
      var soundbox = document.getElementById('sound');
      soundbox.parentElement.removeChild(soundbox);
    }

    if (window.navigator.appName == 'Microsoft Internet Explorer') {
      // Remove the pixelated option if it doesn't work
      var pixelatedBox = document.getElementById('pixelated');
      pixelatedBox.parentElement.removeChild(pixelatedBox);
    }
  } else {
    var dead = document.getElementById('controls');
    dead.parentElement.removeChild(dead);
  }
}

function fadeOut(id, nextId, kill) {
  var e = document.getElementById(id);
  var e2 = document.getElementById(nextId);
  if (!e) {
    return;
  }
  var removeSelf = function() {
    if (kill) {
      e.parentElement.removeChild(e);
    } else {
      e.setAttribute('class', 'dead');
      e.removeEventListener('webkitTransitionEnd', removeSelf);
      e.removeEventListener('oTransitionEnd', removeSelf);
      e.removeEventListener('transitionend', removeSelf);
    }
    if (e2) {
      e2.setAttribute('class', 'hidden');
      setTimeout(function() {
        e2.removeAttribute('class');
      }, 0);
    }
  }

  e.addEventListener('webkitTransitionEnd', removeSelf, false);
  e.addEventListener('oTransitionEnd', removeSelf, false);
  e.addEventListener('transitionend', removeSelf, false);
  e.setAttribute('class', 'hidden');
}

function run(file) {
  var dead = document.getElementById('loader');
  dead.value = '';
  var load = document.getElementById('select');
  load.textContent = 'Loading...';
  load.removeAttribute('onclick');
  var pause = document.getElementById('pause');
  pause.textContent = "PAUSE";
  gba.loadRomFromFile(file, function(result) {
    if (result) {
      for (var i = 0; i < runCommands.length; ++i) {
        runCommands[i]();
      }
      runCommands = [];
      fadeOut('preload', 'ingame');
      fadeOut('instructions', null, true);
      gba.runStable();
    } else {
      load.textContent = 'FAILED';
      setTimeout(function() {
        load.textContent = 'SELECT';
        load.onclick = function() {
          document.getElementById('loader').click();
        }
      }, 3000);
    }
  });
}

function reset() {
  gba.pause();
  gba.reset();
  var load = document.getElementById('select');
  load.textContent = 'SELECT';
  var crash = document.getElementById('crash');
  if (crash) {
    var context = gba.targetCanvas.getContext('2d');
    context.clearRect(0, 0, 480, 320);
    gba.video.drawCallback();
    crash.parentElement.removeChild(crash);
    var canvas = document.getElementById('screen');
    canvas.removeAttribute('class');
  } else {
    lcdFade(gba.context, gba.targetCanvas.getContext('2d'), gba.video.drawCallback);
  }
  load.onclick = function() {
    document.getElementById('loader').click();
  }
  fadeOut('ingame', 'preload');
}

function uploadSavedataPending(file) {
  runCommands.push(function() { gba.loadSavedataFromFile(file) });
}

function togglePause() {
  var e = document.getElementById('pause');
  if (gba.paused) {
    if (debug && debug.gbaCon) {
      debug.gbaCon.run();
    } else {
      gba.runStable();
    }
    e.textContent = "PAUSE";
  } else {
    if (debug && debug.gbaCon) {
      debug.gbaCon.pause();
    } else {
      gba.pause();
    }
    e.textContent = "UNPAUSE";
  }
}

function screenshot() {
  var canvas = gba.indirectCanvas;
  window.open(canvas.toDataURL('image/png'), 'screenshot');
}

function lcdFade(context, target, callback) {
  var i = 0;
  var drawInterval = setInterval(function() {
    i++;
    var pixelData = context.getImageData(0, 0, 240, 160);
    for (var y = 0; y < 160; ++y) {
      for (var x = 0; x < 240; ++x) {
        var xDiff = Math.abs(x - 120);
        var yDiff = Math.abs(y - 80) * 0.8;
        var xFactor = (120 - i - xDiff) / 120;
        var yFactor = (80 - i - ((y & 1) * 10) - yDiff + Math.pow(xDiff, 1 / 2)) / 80;
        pixelData.data[(x + y * 240) * 4 + 3] *= Math.pow(xFactor, 1 / 3) * Math.pow(yFactor, 1 / 2);
      }
    }
    context.putImageData(pixelData, 0, 0);
    target.clearRect(0, 0, 480, 320);
    if (i > 40) {
      clearInterval(drawInterval);
    } else {
      callback();
    }
  }, 50);
}

function setVolume(value) {
  gba.audio.masterVolume = Math.pow(2, value) - 1;
}

function setPixelated(pixelated) {
  var screen = document.getElementById('screen');
  var context = screen.getContext('2d');
  if (context.webkitImageSmoothingEnabled) {
    context.webkitImageSmoothingEnabled = !pixelated;
  } else if (context.mozImageSmoothingEnabled) {
    context.mozImageSmoothingEnabled = !pixelated;
  } else if (window.navigator.appName != 'Microsoft Internet Explorer') {
      if (pixelated) {
        screen.setAttribute('width', '240');
        screen.setAttribute('height', '160');
      } else {
        screen.setAttribute('width', '480');
        screen.setAttribute('height', '320');
      }
      if (window.navigator.appName == 'Opera') {
      // Ugly hack! Ew!
      if (pixelated) {
        screen.style.marginTop = '0';
        screen.style.marginBottom = '-325px';
      } else {
        delete screen.style;
      }
    }
  }
}

function enableDebug() {
  window.onmessage = function(message) {
    if (message.origin != document.domain && (message.origin != 'file://' || document.domain)) {
      console.log('Failed XSS');
      return;
    }
    switch (message.data) {
    case 'connect':
      if (message.source == debug) {
        debug.postMessage('connect', document.domain || '*');
      }
      break;
    case 'connected':
      break;
    case 'disconnect':
      if (message.source == debug) {
        debug = null;
      }
    }
  }
  window.onunload = function() {
    if (debug && debug.postMessage) {
      debug.postMessage('disconnect', document.domain || '*');
    }
  }
  if (!debug || !debug.postMessage) {
    debug = window.open('debugger.html', 'debug');
  } else {
    debug.postMessage('connect', document.domain || '*');
  }
}

document.addEventListener('webkitfullscreenchange', function() {
  var canvas = document.getElementById('screen');
  if (document.webkitIsFullScreen) {
    canvas.setAttribute('height', document.body.offsetHeight);
    canvas.setAttribute('width', document.body.offsetHeight / 2 * 3);
    canvas.setAttribute('style', 'margin: 0');
  } else {
    canvas.setAttribute('height', 320);
    canvas.setAttribute('width', 480);
    canvas.removeAttribute('style');
  }
}, false);
</script>
</head>
<body>
  <br>
<canvas  id="screen" width="960" height="640"></canvas>
<section id="controls">
  <br>
  <button class="bigbutton" id="select" onclick="document.getElementById('loader').click()">SELECT</button>
  <input id="loader" type="file" accept=".gba" onchange="run(this.files[0]);">
  <button onclick="document.getElementById('saveloader').click()">Upload Savegame</button>

  <input id="saveloader" type="file" onchange="uploadSavedataPending(this.files[0]);">
  <button id="pause" class="bigbutton" onclick="togglePause()">PAUSE</button>
  <button class="bigbutton" onclick="reset()">RESET</button>
  <button onclick="gba.downloadSavedata()">Download Savegame</button>
  <button onclick="screenshot()">Screenshot</button>
  <br>
  <p>(AUDIO DOES NOT WORK)</p>
  <label  style="display: none;"id="pixelated">
    <input style="display: none;" type="checkbox" onchange="setPixelated(this.checked)">
    <p>Pixelated</p>
  </label>
  <div style="display: none;"  id="sound">
    <input type="checkbox" checked onchange="gba.audio.masterEnable = this.checked">
    <p>Sound</p>
    <input type="range" min="0" max="1" value="1" step="any" onchange="setVolume(this.value)" oninput="setVolume(this.value)">
  </div>
  <p style="display: none;"  id="openDebug" onclick="enableDebug()">Debugger</p>
  <div id="preload">

  </div>
  <div id="ingame" class="hidden">

  </div>
</section>
<ul id="links">
  <li><a href="http://github.com/endrift/gbajs/">Forked from http://github.com/endrift/gbajs/</a></li>
  <li><a href="javascript:">HTML file port by jackboback</a></li>

</ul>

</body>
</html>